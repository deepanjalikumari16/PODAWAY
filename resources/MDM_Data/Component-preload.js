//@ui5-bundle com/coil/podway/MDM_Data/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"com/coil/podway/MDM_Data/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","./model/models","./controller/ErrorHandler"],function(t,e,s,i){"use strict";return t.extend("com.coil.podium.MDM_Data.Component",{metadata:{manifest:"json"},init:function(){t.prototype.init.apply(this,arguments);this._oErrorHandler=new i(this);this.setModel(s.createDeviceModel(),"device");this.setModel(s.createFLPModel(),"FLP");this.getRouter().initialize()},destroy:function(){this._oErrorHandler.destroy();t.prototype.destroy.apply(this,arguments)},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){this._sContentDensityClass=""}else if(!e.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass}})});
},
	"com/coil/podway/MDM_Data/controller/App.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("com.coil.podway.MDM_Data.controller.App",{onInit:function(){var e,n,o=this.getView().getBusyIndicatorDelay();e=new t({busy:true,delay:0});this.setModel(e,"appView");n=function(){e.setProperty("/busy",false);e.setProperty("/delay",o)};this.getOwnerComponent().getModel().metadataLoaded().then(n);this.getOwnerComponent().getModel().attachMetadataFailed(n);this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass())}})});
},
	"com/coil/podway/MDM_Data/controller/BaseController.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/m/library","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,n,o,r){"use strict";var i=n.URLHelper;return e.extend("com.coil.podway.MDM_Data.controller.BaseController",{getRouter:function(){return t.getRouterFor(this)},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onShareEmailPress:function(){var e=this.getModel("objectView")||this.getModel("worklistView");i.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},addHistoryEntry:function(){var e=[];return function(t,n){if(n){e=[]}var o=e.some(function(e){return e.intent===t.intent});if(!o){e.push(t);this.getOwnerComponent().getService("ShellUIService").then(function(t){t.setHierarchy(e)})}}}(),showWarning:function(e,t){var n=this;r.warning(this.getResourceBundle().getText(e),{actions:[sap.m.MessageBox.Action.NO,sap.m.MessageBox.Action.YES],onClose:function(e){if(e==="YES"){t&&t.apply(n)}}})},showError:function(e){var t=this;r.error(e,{title:t.getResourceBundle().getText("TtlError")})},showToast:function(e){o.show(this.getResourceBundle().getText(e))}})});
},
	"com/coil/podway/MDM_Data/controller/ErrorHandler.js":function(){sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox"],function(e,s){"use strict";return e.extend("com.coil.podway.MDM_Data.controller.ErrorHandler",{constructor:function(e){this._oResourceBundle=e.getModel("i18n").getResourceBundle();this._oComponent=e;this._oModel=e.getModel();this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText("errorText");this._oModel.attachMetadataFailed(function(e){var s=e.getParameters();this._showServiceError(s.response)},this);this._oModel.attachRequestFailed(function(e){var s=e.getParameters();if(s.response.statusCode=="403"){this._showServiceError("You are not authorized to perform this action. Please contact the administrator.");return}if(s.response.statusCode=="500"){this._showServiceError("An unexpected error has occurred. Please contact the administrator.");return}if(s.response.statusCode=="503"){this._showServiceError("Server Under Maintenance, Please stay tuned for the updates.");return}if(s.response.statusCode!=="404"||s.response.statusCode===404&&s.response.responseText.indexOf("Cannot POST")===0){this._showServiceError(s.response)}},this)},_showServiceError:function(e){if(this._bMessageOpen){return}this._bMessageOpen=true;s.error(this._sErrorText,{id:"serviceErrorMessageBox",details:e,styleClass:this._oComponent.getContentDensityClass(),actions:[s.Action.CLOSE],onClose:function(){this._bMessageOpen=false}.bind(this)})}})});
},
	"com/coil/podway/MDM_Data/controller/NotFound.controller.js":function(){sap.ui.define(["./BaseController"],function(o){"use strict";return o.extend("com.coil.podway.MDM_Data.controller.NotFound",{onLinkPressed:function(){this.getRouter().navTo("worklist")}})});
},
	"com/coil/podway/MDM_Data/controller/Object.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,t,s,a,i,r,o){"use strict";return e.extend("com.coil.podway.MDM_Data.controller.Object",{formatter:s,onInit:function(){var e,s=new t({busy:true,delay:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);this.getRouter().getRoute("createObject").attachPatternMatched(this._onCreateObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(s,"objectView");debugger;var a=sap.ui.getCore().getConfiguration().getLanguage();var i=a.substring(0,2);this.getModel("objectView").setProperty("/loggedInLanguage",i);this.getModel("objectView").setProperty("/languageAr","ar");this.getOwnerComponent().getModel().metadataLoaded().then(function(){s.setProperty("/delay",e)})},onShareInJamPress:function(){var e=this.getModel("objectView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},onAfterRendering:function(){this._initMessage()},_initMessage:function(){var e=this.getModel("objectView");this._oMessageManager=sap.ui.getCore().getMessageManager();this._oMessageManager.registerMessageProcessor(e)},_onObjectMatched:function(e){this.getModel("objectView").setProperty("/sMode","E");this.getModel("objectView").setProperty("/busy",true);var t=e.getParameter("arguments").objectId;this.getModel("objectView").setProperty("/parentId",t);var s=parseInt(t);var r=this.getView().byId("table");var o=[new a("ParentId",i.EQ,s),new a("IsArchived",i.EQ,false),new a("IsChild",i.EQ,true)];var n=new sap.m.ColumnListItem({cells:[new sap.m.Image({width:"2rem",class:"sapUiTinyMargin",height:"2rem",src:{path:"__metadata",formatter:this.formatter.giveImage}}),new sap.m.Label({text:"{ServiceType}"}),new sap.m.Label({text:"{ServiceMessage}"}),new sap.m.Label({text:"{ContactNumber}",textDirection:"LTR"}),new sap.m.CheckBox({selected:"{IsCancelable}",editable:false}),new sap.m.ObjectStatus({text:"{IncidentType/IncidentType}",state:"{= ${IncidentType/IncidentType} === 'Emergency' ? 'Error' : 'Success' }"}),new sap.m.Label({text:"{Navigation/NavigationTypeName}"}),new sap.m.Button({icon:"sap-icon://edit",type:"Transparent",press:this.onEdit.bind(this)}),new sap.m.Button({icon:"sap-icon://delete",type:"Transparent",press:this.onDeleteChild.bind(this)})]});r.bindAggregation("items",{path:"/MasterServiceTypeSet",parameters:{expand:"Navigation,IncidentType"},filters:o,template:n,templateShareable:false});this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("/MasterServiceTypeSet",{Id:t});this.getModel().read(e,{urlParameters:{$expand:"Navigation,IncidentType"},success:this._setView.bind(this)})}.bind(this))},_onCreateObjectMatched:function(){this.getModel("objectView").setProperty("/sMode","C");this.getModel("objectView").setProperty("/busy",true);this._setView()},_setView:function(e){this._oMessageManager.removeAllMessages();var t=this.getModel("objectView");t.setProperty("/busy",false);this._pendingDelOps=[];if(e){t.setProperty("/oDetails",e);return}t.setProperty("/oDetails",{ServiceType:"",ServiceMessage:"",IncidentTypeId:0,NavigationId:0,ContactNumber:"",IsCancelable:false,IsArchived:false})},onUpload:function(e){var t=e.getSource().FUEl.files[0];this.getImageBinary(t).then(this._fnAddFile.bind(this))},_fnAddFile:function(e){this.getModel("objectView").setProperty("/oImage",{Image:e.Image,FileName:e.name,IsArchived:false});this.getModel("objectView").refresh()},getImageBinary:function(e){var t=new FileReader;var s=e.name;return new Promise(function(a,i){if(!(e instanceof File)){a(e);return}t.onload=function(){a({Image:t.result,name:s})};a({Image:e,name:s})})},onEdit:function(e){var t=this.getModel("objectView"),s=e.getSource().getBindingContext().getObject();t.setProperty("/sChildMode","E");t.setProperty("/oServiceData",s);t.setProperty("/sServicePath",e.getSource().getBindingContext().getPath());var a=this.getView();if(!this.byId("detailsChildDialog")){r.load({id:a.getId(),name:"com.coil.podway.MDM_Data.dialog.Service",controller:this}).then(function(e){a.addDependent(e);e.open()})}else{this.byId("detailsChildDialog").open()}},addChild:function(){var e=this.getModel("objectView");e.setProperty("/oServiceData",{ServiceType:"",ServiceMessage:"",ContactNumber:"",IsCancelable:false,IncidentTypeId:null,NavigationId:null,ParentId:e.getProperty("/parentId"),IsChild:true});e.setProperty("/sChildMode","C");var t=this.getView();if(!this.byId("detailsChildDialog")){r.load({id:t.getId(),name:"com.coil.podium.MDM_Data.dialog.Service",controller:this}).then(function(e){t.addDependent(e);e.open()})}else{this.byId("detailsChildDialog").open()}},onClose:function(e){this.byId("detailsChildDialog").close();this.getModel().refresh(true);this.getModel("objectView").setProperty("/oImage",null)},onDeleteChild:function(e){var t=e.getSource().getBindingContext().getPath();function s(){var e=this.getModel().getData(t);this.getModel().update(t,{ServiceType:e.ServiceType,ServiceMessage:e.ServiceMessage,ContactNumber:e.ContactNumber,IsCancelable:e.IsCancelable,IncidentTypeId:e.IncidentTypeId,NavigationId:e.NavigationId,IsArchived:true},{success:this.showToast.bind(this,"MSG_SUCCESS_SERVICE_REMOVE")})}this.showWarning("MSG_CONFIRM_DELETE",s)},onSaveChild:function(e){this._oMessageManager.removeAllMessages();var t=this.getModel("objectView"),s=t.getProperty("/oServiceData"),a=t.getProperty("/sServicePath");var i=this._fnValidationChild(s);if(i.IsNotValid){this.showError(this._fnMsgConcatinator(i.sMsg));return}var r=parseInt(s.ParentId);if(s.IncidentTypeId===NaN){s.IncidentTypeId=1}s.IncidentTypeId=parseInt(s.IncidentTypeId);s.NavigationId=parseInt(s.NavigationId);s.ParentId=r;delete s.CreatedBy;delete s.UpdatedAt;delete s.UpdatedBy;delete s.CreatedAt;delete s.IncidentType;delete s.Navigation;delete s.__metadata;if(t.getProperty("/sChildMode")==="E"){this.getModel().update(a,s,{success:this._UploadImage(a,t.getProperty("/oImage")).then(this._SuccessChildEdit.bind(this,e),this._Error.bind(this)),error:this._Error.bind(this)})}else{var o=this;a="/MasterServiceTypeSet";this.getModel().create(a,s,{success:function(s){var i=a+"("+s.Id+")";o._UploadImage(i,t.getProperty("/oImage")).then(o._SuccessChildAdd.bind(o,e),o._Error.bind(o))},error:this._Error.bind(this)})}},_fnValidationChild:function(e){var t={IsNotValid:false,sMsg:[]},s=[];if(!e.ServiceType){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_SERVTYPE");s.push({message:"MSG_VALDTN_SERVTYPE",target:"/oServiceData/ServiceType"})}else if(!e.ServiceMessage){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_SERVMSG");s.push({message:"MSG_VALDTN_SERVMSG",target:"/oServiceData/ServiceMessage"})}else if(e.ContactNumber){var a=/^[+][0-9]{5,15}$/;if(!a.test(e.ContactNumber)){t.IsNotValid=true;t.sMsg.push("MSG_INVALID_MOBILE");s.push({message:"MSG_INVALID_MOBILE",target:"/oServiceData/ContactNumber"})}}if(s.length){this._genCtrlMessages(s)}return t},onCancel:function(){this.getRouter().navTo("worklist",true)},onSave:function(e){this._oMessageManager.removeAllMessages();var t=this.getModel("objectView"),s=t.getProperty("/oDetails");var a=this._fnValidation(s);if(a.IsNotValid){this.showError(this._fnMsgConcatinator(a.sMsg));return}delete s.CreatedBy;delete s.UpdatedAt;delete s.UpdatedBy;delete s.CreatedAt;delete s.IncidentType;delete s.Navigation;delete s.Icon;delete s.__metadata;if(t.getProperty("/sMode")==="E"){var i=this;var r=i.getModel().createKey("/MasterServiceTypeSet",{Id:s.Id});i.getModel().update(r,s,{success:i._UploadImage(r,t.getProperty("/oImage")).then(i._Success.bind(i,e),i._Error.bind(i)),error:i._Error.bind(i)})}if(t.getProperty("/sMode")==="C"){var i=this;r="/MasterServiceTypeSet";this.getModel().create(r,s,{success:function(s){var a=r+"("+s.Id+")";i._UploadImage(a,t.getProperty("/oImage")).then(i._SuccessAdd.bind(i,e),i._Error.bind(i))},error:this._Error.bind(this)})}},_fnValidation:function(e){var t={IsNotValid:false,sMsg:[]},s=[];if(!e.ServiceType){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_SERVTYPE");s.push({message:"MSG_VALDTN_SERVTYPE",target:"/oDetails/ServiceType"})}else if(!e.ServiceMessage){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_SERVMSG");s.push({message:"MSG_VALDTN_SERVMSG",target:"/oDetails/ServiceMessage"})}else if(e.ContactNumber){var a=/^[+][0-9]{5,15}$/;if(!a.test(e.ContactNumber)){t.IsNotValid=true;t.sMsg.push("MSG_INVALID_MOBILE");s.push({message:"MSG_INVALID_MOBILE",target:"/oDetails/ContactNumber"})}}if(s.length){this._genCtrlMessages(s)}return t},_genCtrlMessages:function(e){var t=this,s=t.getModel("objectView");e.forEach(function(e){t._oMessageManager.addMessages(new sap.ui.core.message.Message({message:t.getResourceBundle().getText(e.message),type:sap.ui.core.MessageType.Error,target:e.target,processor:s,persistent:true}))})},_fnMsgConcatinator:function(e){var t=this;return e.map(function(e){return t.getResourceBundle().getText(e)}).join("")},_UploadImage:function(e,t){var s=this;return new Promise(function(a,i){if(!t){a();return}var r={url:"/EXPO_PODIUM_API/api/v2/odata.svc"+e+"/$value",data:t.Image,method:"PUT",headers:s.getModel().getHeaders(),contentType:"multipart/form-data",processData:false,success:function(){a.apply(s)},error:function(){i.apply(s)}};$.ajax(r)})},_Success:function(){this.getRouter().navTo("worklist",true);o.show(this.getResourceBundle().getText("MSG_SUCCESS"));var e=this.getModel();e.refresh(true)},_SuccessAdd:function(){this.getRouter().navTo("worklist",true);o.show(this.getResourceBundle().getText("MSG_SUCCESS_ADD"))},_SuccessChildEdit:function(e){o.show(this.getResourceBundle().getText("MSG_SUCCESS_SERVICE_CHILD_EDIT"));this.onClose(e)},_SuccessChildAdd:function(e){o.show(this.getResourceBundle().getText("MSG_SUCCESS_SERVICE_CHILD_ADD"));this.onClose(e)},_Error:function(e){o.show(e.toString())}})});
},
	"com/coil/podway/MDM_Data/controller/Worklist.controller.js":function(){jQuery.sap.require("com.coil.podway.MDM_Data.libs.mapsjs-core");jQuery.sap.require("com.coil.podway.MDM_Data.libs.mapsjs-service");jQuery.sap.require("com.coil.podway.MDM_Data.libs.mapsjs-ui");jQuery.sap.require("com.coil.podway.MDM_Data.libs.mapsjs-mapevents");sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,t,i,a,s,r,o){"use strict";return e.extend("com.coil.podway.MDM_Data.controller.Worklist",{formatter:i,onInit:function(){var e,i,a=this.byId("table"),s=this.byId("table1"),r=this.byId("table2"),o=this.byId("table3"),n=this.byId("table4"),l=this.byId("table5"),d=this.byId("table6"),g=this.byId("table7"),u=this.byId("table8");i=a.getBusyIndicatorDelay();this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),saveAsTileTitle:this.getResourceBundle().getText("saveAsTileTitle",this.getResourceBundle().getText("worklistViewTitle")),shareOnJamTitle:this.getResourceBundle().getText("worklistTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0});this.setModel(e,"worklistView");a.attachEventOnce("updateFinished",function(){e.setProperty("/tableBusyDelay",i)});s.attachEventOnce("updateFinished1",function(){e.setProperty("/tableBusyDelay",i)});r.attachEventOnce("updateFinished2",function(){e.setProperty("/tableBusyDelay",i)});o.attachEventOnce("updateFinished3",function(){e.setProperty("/tableBusyDelay",i)});n.attachEventOnce("updateFinished4",function(){e.setProperty("/tableBusyDelay",i)});l.attachEventOnce("updateFinished5",function(){e.setProperty("/tableBusyDelay",i)});d.attachEventOnce("updateFinished6",function(){e.setProperty("/tableBusyDelay",i)});g.attachEventOnce("updateFinished7",function(){e.setProperty("/tableBusyDelay",i)});u.attachEventOnce("updateFinished8",function(){e.setProperty("/tableBusyDelay",i)});this.addHistoryEntry({title:this.getResourceBundle().getText("worklistViewTitle"),icon:"sap-icon://table-view",intent:"#MasterDataManagement-display"},true)},onUpdateFinished:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false),new sap.ui.model.Filter("IsChild",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterServiceTypeSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterServiceCount",[e]);i.getModel("worklistView").setProperty("/masterService",t)}})},onUpdateFinished1:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterFacilityTypeSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterFacilityCount",[e]);i.getModel("worklistView").setProperty("/masterFacility",t)}})},onUpdateFinished2:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterRelationshipSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterRelationshipCount",[e]);i.getModel("worklistView").setProperty("/masterRelationship",t)}})},onUpdateFinished3:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterFaqCategorySet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterFaqCategoryCount",[e]);i.getModel("worklistView").setProperty("/masterFaqCategory",t)}})},onUpdateFinished4:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterEventAttractionTypeSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterEventAttractionCount",[e]);i.getModel("worklistView").setProperty("/masterEventAttraction",t)}})},onUpdateFinished5:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterNavigationTypeSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("masterNavigationCount",[e]);i.getModel("worklistView").setProperty("/masterNavigation",t)}})},onUpdateFinished6:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/BuildingSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("buildingCount",[e]);i.getModel("worklistView").setProperty("/building",t)}})},onUpdateFinished7:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/ThemeSet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("themeCount",[e]);i.getModel("worklistView").setProperty("/theme",t)}})},onUpdateFinished8:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/CategorySet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("categoryCount",[e]);i.getModel("worklistView").setProperty("/category",t)}})},onUpdateFinished9:function(e){var t,i=this,a=new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("IsArchived",sap.ui.model.FilterOperator.EQ,false)],and:true});this.getModel().read("/MasterSpecialitySet/$count",{filters:[a],async:true,success:function(e){t=i.getResourceBundle().getText("specialityCount",[e]);i.getModel("worklistView").setProperty("/speciality",t)}})},onPress:function(e){this._showObject(e.getSource())},onChangeNavType:function(e){this.getModel("worklistView").setProperty("/oEditData/NavigationTypeName",e.getParameter("newValue"))},onMobileValidate:function(){},onViewImage:function(e,t){var i=this.getView(),a=this;a.oImageBindingContext=e.getSource().getBindingContext();if(!a._oDlgAddOption){r.load({id:i.getId(),name:"com.coil.podway.MDM_Data.dialog.Images",controller:a}).then(function(e){a._oDlgAddOption=e;i.addDependent(e);e.open()})}else{a._oDlgAddOption.open()}this.getModel("worklistView").setProperty("/sDialog",t)},bindDialog:function(){var e=this,t=this.getModel("worklistView");this._oDlgAddOption.getContent()[0].bindAggregation("pages",{path:"/MasterEventAttractionTypeSet",filters:[new a("IsArchived",s.EQ,false),new a("Id",s.EQ,e.oImageBindingContext.getProperty("Id"))],template:new sap.m.Image({src:{path:"__metadata",formatter:e.formatter.giveImage}}),events:{dataRequested:function(){t.setProperty("/bLoadingImages",true)},dataReceived:function(e){t.setProperty("/bLoadingImages",false);if(e.getParameter("data").results.length){t.setProperty("/bImages",true)}else{t.setProperty("/bImages",false)}}}})},onCancelImage:function(){this._oDlgAddOption.close()},onMap:function(){var e=this;r.load({id:e.getView().getId(),type:"HTML",name:"com.coil.podway.MDM_Data.dialog.HEREMaps",controller:e}).then(function(t){var i=new H.service.Platform({apikey:"BbN_bDCaLx6-5GZou8CHRvPWpf9CoDtVbMK4w-OTAxM"});var a=i.createDefaultLayers();this.getView().byId("map");var s=new H.Map(document.getElementById("map"),a.vector.normal.map,{zoom:15,center:{lng:55.14711,lat:24.962762}});var r=new H.mapevents.Behavior(new H.mapevents.MapEvents(s));var o=H.ui.UI.createDefault(s,a);e.getView().addDependent(t);e.addDraggableMarker(s,r);t.open()}.bind(this))},onCloseMaps:function(){this.getView().byId("MapDialog").close();this.getView().byId("MapDialog").destroy()},addDraggableMarker:function(e,t){var i=this.getModel("worklistView");var a=new H.map.Marker({lng:55.14711,lat:24.962762},{volatility:true});a.draggable=true;e.addObject(a);e.addEventListener("dragstart",function(i){var a=i.target,s=i.currentPointer;if(a instanceof H.map.Marker){var r=e.geoToScreen(a.getGeometry());a["offset"]=new H.math.Point(s.viewportX-r.x,s.viewportY-r.y);t.disable()}},false);e.addEventListener("dragend",function(e){var a=e.target;if(a instanceof H.map.Marker){t.enable();i.setProperty("/oEditData/Longitude",a.getGeometry().lng.toString());i.setProperty("/oEditData/Latitude",a.getGeometry().lat.toString())}},false);e.addEventListener("drag",function(t){var i=t.target,a=t.currentPointer;if(i instanceof H.map.Marker){i.setGeometry(e.screenToGeo(a.viewportX-i["offset"].x,a.viewportY-i["offset"].y))}},false)},onEdit:function(e){var t=this.getView().byId("idIconTabBar3").getSelectedKey(),i=this.getModel("worklistView");var a=this.getResourceBundle().getText("colEdit");i.setProperty("/opMode",a);i.setProperty("/operation","E");var s={Service:false,Facility:false,Relationship:false,FAQ:false,Event:false,Navigation:false,Building:false,Theme:false,Category:false,Speciality:false};if(t==="Service"){this._showObject(e.getSource())}else{s[t]=true;i.setProperty("/bEditOptions",s);var o=e.getSource().getBindingContext().getObject();i.setProperty("/oEditData",o);i.setProperty("/sEditPath",e.getSource().getBindingContext().getPath());if(t==="Event"){var n="Event Attraction";i.setProperty("/sDialogTitle",n)}else{i.setProperty("/sDialogTitle",t)}var l=this.getView();if(!this.byId("detailsDialog")){r.load({id:l.getId(),name:"com.coil.podway.MDM_Data.dialog.details",controller:this}).then(function(e){l.addDependent(e);e.open()})}else{this.byId("detailsDialog").open()}}},onAdd:function(e){var t=this.getView().byId("idIconTabBar3").getSelectedKey(),i=this.getModel("worklistView");var a=this.getResourceBundle().getText("colAdd");i.setProperty("/opMode",a);i.setProperty("/operation","C");var s={Service:false,Facility:false,Relationship:false,FAQ:false,Event:false,Navigation:false,Building:false,Theme:false,Category:false,Speciality:false};if(t==="Service"){this.getRouter().navTo("createObject")}else{s[t]=true;i.setProperty("/bEditOptions",s);i.setProperty("/oEditData",{EventAttractionType:"",Description:"",IsBuilding:false,IsCategory:false,IsTheme:false,FacilityType:"",NavigationGroupId:0,NavigationTypeName:"",FaqCategory:"",BuildingName:"",Theme:"",Category:"",Speciality:"",Relationship:"",IsArchived:false});if(t==="Event"){i.setProperty("/sEditPath","/MasterEventAttractionTypeSet");i.setProperty("/oEditData",{EventAttractionType:"",Description:"",IsBuilding:false,IsCategory:false,IsTheme:false,IsArchived:false})}else if(t==="Facility"){i.setProperty("/sEditPath","/MasterFacilityTypeSet");i.setProperty("/oEditData",{FacilityType:"",IsArchived:false})}else if(t==="Navigation"){i.setProperty("/sEditPath","/MasterNavigationTypeSet");i.setProperty("/oEditData",{NavigationGroupId:0,NavigationTypeName:"",IsArchived:false})}else if(t==="FAQ"){i.setProperty("/sEditPath","/MasterFaqCategorySet");i.setProperty("/oEditData",{FaqCategory:"",IsArchived:false})}else if(t==="Building"){i.setProperty("/sEditPath","/BuildingSet");i.setProperty("/oEditData",{BuildingName:"",IsArchived:false})}else if(t==="Theme"){i.setProperty("/sEditPath","/ThemeSet");i.setProperty("/oEditData",{Theme:"",IsArchived:false})}else if(t==="Category"){i.setProperty("/sEditPath","/CategorySet");i.setProperty("/oEditData",{Category:"",IsArchived:false})}else if(t==="Speciality"){i.setProperty("/sEditPath","/MasterSpecialitySet");i.setProperty("/oEditData",{Speciality:"",IsArchived:false})}else if(t==="Relationship"){i.setProperty("/sEditPath","/MasterRelationshipSet");i.setProperty("/oEditData",{Relationship:"",IsArchived:false})}if(t==="Event"){var o="Event Attraction";i.setProperty("/sDialogTitle",o)}else{i.setProperty("/sDialogTitle",t)}var n=this.getView();if(!this.byId("detailsDialog")){r.load({id:n.getId(),name:"com.coil.podway.MDM_Data.dialog.details",controller:this}).then(function(e){n.addDependent(e);e.open()})}else{this.byId("detailsDialog").open()}}},onDelete:function(e){var t=e.getSource().getBindingContext().getPath();var i=this.getModel().getData(t);var a=this._fnValidationCantDelete(i);if(a.IsNotValid){this.showError(this._fnMsgConcatinator(a.sMsg));return}function s(){var e=this.getModel().getData(t);this.getModel().update(t,{IsArchived:true},{success:this.showToast.bind(this,"MSG_SUCCESS_REMOVE")})}this.showWarning("MSG_CONFIRM_MDM_DELETE",s)},_fnValidationCantDelete:function(e){var t={IsNotValid:false,sMsg:[]};if(e.CreatedBy===null){t.IsNotValid=true;t.sMsg.push("MSG_CANNOT_DELETE_SYSTEM_DATA")}return t},onRefreshView:function(){var e=this.getModel();e.refresh(true)},onClose:function(e){this.byId("detailsDialog").close();this.getModel().refresh(true);this.getModel("worklistView").setProperty("/oImage",null)},onUpload:function(e){var t=e.getSource().FUEl.files[0];this.getImageBinary(t).then(this._fnAddFile.bind(this))},onAfterRendering:function(){this._initMessage()},_initMessage:function(){var e=this.getModel("worklistView");this._oMessageManager=sap.ui.getCore().getMessageManager();this._oMessageManager.registerMessageProcessor(e)},onSave:function(e){this._oMessageManager.removeAllMessages();var t=this.getModel("worklistView"),i=t.getProperty("/oEditData"),a=t.getProperty("/sEditPath");var s=this._fnValidation(i);if(s.IsNotValid){this.showError(this._fnMsgConcatinator(s.sMsg));return}delete i.CreatedBy;delete i.UpdatedAt;delete i.UpdatedBy;delete i.CreatedAt;delete i.IncidentType;delete i.Navigation;delete i.Icon;delete i.__metadata;delete i.Id;var r=t.getProperty("/operation");if(r==="E"){this.getModel().update(a,i,{success:function(){this._UploadImage(a,t.getProperty("/oImage")).then(this._Success.bind(this,e),this._Error.bind(this))}.bind(this),error:this._Error.bind(this)})}else if(r==="C"){var o=this;this.getModel().create(a,i,{success:function(i){var s=a+"("+i.Id+")";o._UploadImage(s,t.getProperty("/oImage")).then(o._SuccessAdd.bind(o,e),o._Error.bind(o))},error:this._Error.bind(this)})}},_fnValidation:function(e){var t={IsNotValid:false,sMsg:[]},i=[];var a=this.getModel("worklistView");if(a.getProperty("/bEditOptions").Facility===true){if(!e.FacilityType){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_FTYPE");i.push({message:"MSG_VALDTN_FTYPE",target:"/oEditData/FacilityType"})}}if(a.getProperty("/bEditOptions").Relationship===true){if(!e.Relationship){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_RELATION");i.push({message:"MSG_VALDTN_RELATION",target:"/oEditData/Relationship"})}}if(a.getProperty("/bEditOptions").FAQ===true){if(!e.FaqCategory){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_FAQCAT");i.push({message:"MSG_VALDTN_FAQCAT",target:"/oEditData/FaqCategory"})}}if(a.getProperty("/bEditOptions").Event===true){if(!e.EventAttractionType){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_EAT");i.push({message:"MSG_VALDTN_EAT",target:"/oEditData/EventAttractionType"})}}if(a.getProperty("/bEditOptions").Navigation===true){if(!e.NavigationTypeName){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_NTN");i.push({message:"MSG_VALDTN_NTN",target:"/oEditData/NavigationTypeName"})}}if(a.getProperty("/bEditOptions").Building===true){if(!e.BuildingName){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_BUILDING");i.push({message:"MSG_VALDTN_BUILDING",target:"/oEditData/BuildingName"})}if(+e.Longitude==0||+e.Latitude==0){t.IsNotValid=true;t.sMsg.push("MSG_LAT_LNG");i.push({message:"MSG_LAT_LNG",target:"/oEditData/Latitude"});i.push({message:"MSG_LAT_LNG",target:"/oEditData/Longitude"})}else if(+e.Latitude<-90||+e.Latitude>90){t.IsNotValid=true;t.sMsg.push("MSG_ERR_LAT");i.push({message:"MSG_ERR_LAT",target:"/oEditData/Latitude"})}else if(+e.Longitude<-180||+e.Longitude>180){t.IsNotValid=true;t.sMsg.push("MSG_ERR_LNG");i.push({message:"MSG_ERR_LNG",target:"/oEditData/Longitude"})}}if(a.getProperty("/bEditOptions").Theme===true){if(!e.Theme){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_THEME");i.push({message:"MSG_VALDTN_THEME",target:"/oEditData/Theme"})}}if(a.getProperty("/bEditOptions").Category===true){if(!e.Category){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_CATEGORY");i.push({message:"MSG_VALDTN_CATEGORY",target:"/oEditData/Category"})}}if(a.getProperty("/bEditOptions").Speciality===true){if(!e.Speciality){t.IsNotValid=true;t.sMsg.push("MSG_VALDTN_SPECIALITY");i.push({message:"MSG_VALDTN_SPECIALITY",target:"/oEditData/Speciality"})}}if(i.length)this._genCtrlMessages(i);return t},_genCtrlMessages:function(e){var t=this,i=t.getModel("worklistView");e.forEach(function(e){t._oMessageManager.addMessages(new sap.ui.core.message.Message({message:t.getResourceBundle().getText(e.message),type:sap.ui.core.MessageType.Error,target:e.target,processor:i,persistent:true}))})},_fnMsgConcatinator:function(e){var t=this;return e.map(function(e){return t.getResourceBundle().getText(e)}).join("")},_UploadImage:function(e,t){var i=this;return new Promise(function(a,s){if(!t){a();return}var r={url:"/EXPO_PODIUM_API/api/v2/odata.svc"+e+"/$value",data:t.Image,method:"PUT",headers:i.getModel().getHeaders(),contentType:"multipart/form-data",processData:false,success:function(){a.apply(i)},error:function(){s.apply(i)}};$.ajax(r)})},onShareInJamPress:function(){var e=this.getModel("worklistView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},onSearch:function(){var e=this.getFiltersfromFB(),t=this.getView().byId("table"),i=this.getView().byId("table1"),a=this.getView().byId("table2"),s=this.getView().byId("table3"),r=this.getView().byId("table4"),o=this.getView().byId("table5");t.getBinding("items").filter(e);i.getBinding("items").filter(e);a.getBinding("items").filter(e);s.getBinding("items").filter(e);r.getBinding("items").filter(e);o.getBinding("items").filter(e);if(e.length!==0){this.getModel("worklistView").setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}},onRefresh:function(){var e=this.byId("table"),t=this.byId("table1"),i=this.byId("table2"),a=this.byId("table3"),s=this.byId("table4"),r=this.byId("table5");e.getBinding("items").refresh();t.getBinding("items").refresh();i.getBinding("items").refresh();a.getBinding("items").refresh();s.getBinding("items").refresh();r.getBinding("items").refresh()},_showObject:function(e){this.getRouter().navTo("object",{objectId:e.getBindingContext().getProperty("Id")})},_Success:function(e){o.show(this.getResourceBundle().getText("MSG_SUCCESS"));this.onClose(e)},_SuccessAdd:function(e){o.show(this.getResourceBundle().getText("MSG_SUCCESS_ADD"));this.onClose(e)},_Error:function(e){o.show(e.toString())},_applySearch:function(e){var t=this.byId("table"),i=this.byId("table1"),a=this.byId("table2"),s=this.byId("table3"),r=this.byId("table4"),o=this.byId("table5"),n=this.getModel("worklistView");t.getBinding("items").filter(e,"Application");i.getBinding("items").filter(e,"Application");a.getBinding("items").filter(e,"Application");s.getBinding("items").filter(e,"Application");r.getBinding("items").filter(e,"Application");o.getBinding("items").filter(e,"Application");if(e.length!==0){n.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}},getImageBinary:function(e){var t=new FileReader;var i=e.name;return new Promise(function(a,s){if(!(e instanceof File)){a(e);return}t.onloadend=function(e){a({Image:new Blob([this.result],{type:"image/jpeg"}),name:i})};t.readAsArrayBuffer(e)})},_fnAddFile:function(e){this.getModel("worklistView").setProperty("/oImage",{Image:e.Image,FileName:e.name,IsArchived:false});this.getModel("worklistView").refresh()}})});
},
	"com/coil/podway/MDM_Data/dialog/HEREMaps.fragment.html":'<div data-sap-ui-type="sap.m.Dialog" data-title="{i18n>TtlMapTitle}" id="MapDialog" >\n\t<div id="map" class="MapContainer" ></div>\n\t<!--<div data-sap-ui-type="sap.m.HBox" class="sapUiSmallMargin" >-->\n\t<!--<div data-sap-ui-aggregation="items">-->\n\t<!-- <div class="sapUiSmallMarginBeginEnd" data-sap-ui-type="sap.m.ObjectAttribute" data-text="{worklistView>/oEditData/Longitude}" ></div>-->\n\t<!-- <div class="sapUiSmallMarginBeginEnd" data-sap-ui-type="sap.m.ObjectAttribute" data-text="{worklistView>/oEditData/Latitude}" ></div>-->\n\t<!--data-title="{i18n>LblLocationLongitude}"-->\n\t<!--data-title="{i18n>LblLocationLatitude}"-->\n\t<!--</div>\t-->\n\t<!--</div>-->\n\t <div data-sap-ui-aggregation="endButton">\n\t \t<div  data-sap-ui-type="sap.m.Button" data-text="{i18n>btnClose}"  data-type="Emphasized" data-press="onCloseMaps"  ></div>\n\t </div>\n</div>',
	"com/coil/podway/MDM_Data/dialog/Images.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog  title="{i18n>TtlImages}" class="sapUiResponsiveContentPadding"  contentWidth="auto" contentHeight="auto" afterOpen="bindDialog" ><Carousel visible="{worklistView>/bImages}" class="sapUiContentPadding" loop="true"></Carousel><BusyIndicator visible="{worklistView>/bLoadingImages}" /><Title text="{i18n>TxtNoImagesFound}" visible="{= !(${worklistView>/bImages}) &amp;&amp; !(${worklistView>/bLoadingImages}) }"  /><buttons><Button press="onCancelImage"  text="{i18n>btnClose}"/></buttons></Dialog></core:FragmentDefinition>',
	"com/coil/podway/MDM_Data/dialog/Service.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified"\n\txmlns:html="http://www.w3.org/1999/xhtml"><Dialog id="detailsChildDialog" title="{= ${objectView>/sChildMode} === \'C\' ? ${i18n>TtlAddChild} : ${i18n>TtlEditChild} }"\n\t\tclass="sapUiResponsiveContentPadding" binding="{objectView>/oServiceData}"><l:Grid hSpacing="2" defaultSpan="XL5 L5 M5 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colServiceType}"/><Input value="{objectView>ServiceType}" required="true"/></VBox><VBox><Label required="true" text="{i18n>colServiceMessage}"/><Input value="{objectView>ServiceMessage}"/></VBox><VBox visible="{= ${objectView>/loggedInLanguage} !== ${objectView>/languageAr} }"><Label text="{i18n>colContactNumber}"/><Input id="mobileDetailInputEn" value="{objectView>ContactNumber}" type="Tel" change="onMobileValidate"/></VBox><VBox visible="{= ${objectView>/loggedInLanguage} === ${objectView>/languageAr} }"><Label text="{i18n>colContactNumber}"/><Input id="mobileDetailInputAr" value="{objectView>ContactNumber}" type="Tel" change="onMobileValidate" textDirection="LTR" textAlign="Right"/></VBox><VBox><Label text="{i18n>colIsCancelable}"/><Switch state="{objectView>IsCancelable}" customTextOn="Yes" customTextOff="No"><layoutData><FlexItemData growFactor="1"/></layoutData></Switch></VBox><VBox><Label required="true" text="{i18n>colIncidentTypeId}"/><Select selectedKey="{objectView>IncidentTypeId}" items="{path: \'/MasterIncidentTypeSet\'}"><core:Item key="{Id}" text="{IncidentType}"/></Select></VBox><VBox><Label text="{i18n>colNavigationId}"/><ComboBox selectedKey="{objectView>NavigationId}" items="{path : \'/MasterNavigationTypeSet\'}"><core:Item key="{Id}" text="{NavigationTypeName}"/></ComboBox></VBox><VBox><Label text="{i18n>colIcon}"/><Image width="5rem" class="sapUiTinyMargin" height="5rem"\n\t\t\t\t\tsrc="{ parts : [{path : \'objectView>__metadata\'}, { path : \'objectView>/oImage\' } ] , formatter : \'.formatter.giveImage\' }"/><u:FileUploader maximumFileSize="2" fileAllowed="onUpload" tooltip="{i18n>btnChangeImage}" buttonOnly="true"\n\t\t\t\t\tbuttonText="{i18n>btnChangeImage}"/></VBox></l:Grid><buttons><Button text="{i18n>btnCancel}" press="onClose"/><Button text="{i18n>btnSave}" type="Emphasized" press="onSaveChild"/></buttons></Dialog></core:FragmentDefinition>',
	"com/coil/podway/MDM_Data/dialog/details.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified"\n\txmlns:html="http://www.w3.org/1999/xhtml"><Dialog id="detailsDialog" title="{worklistView>/opMode} {worklistView>/sDialogTitle}" class="sapUiResponsiveContentPadding"\n\t\tbinding="{worklistView>/oEditData}"><l:Grid visible="{worklistView>/bEditOptions/Facility}" defaultSpan="XL12 L12 M12 S12" defaultIndent="XL0 L0 M1 S1"><VBox width="100%"><Label required="true" text="{i18n>colFacilityType}"/><Input value="{worklistView>FacilityType}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Relationship}" defaultSpan="XL12 L12 M12 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colRelationship}"/><Input value="{worklistView>Relationship}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/FAQ}" defaultSpan="XL6 L6 M6 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colFaqCategory}"/><Input value="{worklistView>FaqCategory}"/></VBox><VBox><Label text="{i18n>colIcon}"/><Image width="5rem" class="sapUiTinyMargin" height="5rem"\n\t\t\t\t\tsrc="{ parts : [{path : \'worklistView>__metadata\'}, { path : \'worklistView>/oImage\' } ] , formatter : \'.formatter.giveImage\' }"/><u:FileUploader maximumFileSize="2" fileAllowed="onUpload" tooltip="{i18n>btnChangeImage}" buttonOnly="true"\n\t\t\t\t\tbuttonText="{i18n>btnChangeImage}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Event}" hSpacing="2" defaultSpan="XL5 L5 M5 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colEventAttractionType}"/><Input value="{worklistView>EventAttractionType}"/></VBox><VBox><Label text="{i18n>colDescription}"/><Input value="{worklistView>Description}"/></VBox><VBox><Label text="{i18n>colBuilding}"/><CheckBox selected="{worklistView>IsBuilding}"/></VBox><VBox><Label text="{i18n>colCategory}"/><CheckBox selected="{worklistView>IsCategory}"/></VBox><VBox><Label text="{i18n>colTheme}"/><CheckBox selected="{worklistView>IsTheme}"/></VBox><VBox><Label text="{i18n>colImage}"/><Image width="5rem" class="sapUiTinyMargin" height="5rem"\n\t\t\t\t\tsrc="{ parts : [{path : \'worklistView>__metadata\'}, { path : \'worklistView>/oImage\' } ] , formatter : \'.formatter.giveImage\' }"/><u:FileUploader maximumFileSize="2" fileAllowed="onUpload" tooltip="{i18n>btnChangeImage}" buttonOnly="true"\n\t\t\t\t\tbuttonText="{i18n>btnChangeImage}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Navigation}" hSpacing="2" defaultSpan="XL5 L5 M5 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colNavigationGroupId}"/><Select selectedKey="{ path: \'worklistView>NavigationGroupId\', type : \'sap.ui.model.type.Integer\' }" change="onChangeNavId"><core:Item key="0" text="{i18n>litmEventAttaction}"/><core:Item key="1" text="{i18n>litmFacility}"/></Select></VBox><VBox><Label required="true" text="{i18n>colNavigationTypeName}"/><Input value="{worklistView>NavigationTypeName}"/></VBox><VBox><Label text="{i18n>colIcon}"/><Image width="5rem" class="sapUiTinyMargin" height="5rem"\n\t\t\t\t\tsrc="{ parts : [{path : \'worklistView>__metadata\'}, { path : \'worklistView>/oImage\' } ] , formatter : \'.formatter.giveImage\' }"/><u:FileUploader maximumFileSize="2" fileAllowed="onUpload" tooltip="{i18n>btnChangeImage}" buttonOnly="true"\n\t\t\t\t\tbuttonText="{i18n>btnChangeImage}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Building}" hSpacing="2" defaultSpan="XL5 L5 M5 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colBuildingName}"/><Input value="{worklistView>BuildingName}"/></VBox><VBox><Label required="true" text="{i18n>colCoordinates}"/><Input width="200%" description="{i18n>colLatitude}" value="{worklistView>Latitude}" showValueHelp="true" valueHelpRequest="onMap" textDirection="LTR"/><Input width="200%" description="{i18n>colLongitude}" value="{worklistView>Longitude}" showValueHelp="true" valueHelpRequest="onMap" textDirection="LTR"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Theme}" hSpacing="2" defaultSpan="XL12 L12 M12 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colTheme}"/><Input value="{worklistView>Theme}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Category}" hSpacing="2" defaultSpan="XL12 L12 M12 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colCategory}"/><Input value="{worklistView>Category}"/></VBox></l:Grid><l:Grid visible="{worklistView>/bEditOptions/Speciality}" hSpacing="2" defaultSpan="XL12 L12 M12 S12" defaultIndent="XL0 L0 M1 S1"><VBox><Label required="true" text="{i18n>colSpeciality}"/><Input value="{worklistView>Speciality}"/></VBox></l:Grid><buttons><Button text="{i18n>btnCancel}" press="onClose"/><Button text="{i18n>btnSave}" visible="{= ${worklistView>/bEditOptions/Service} === false }" type="Emphasized" press="onSave"/><Button text="{i18n>btnDone}" visible="{= ${worklistView>/bEditOptions/Service} === true }" type="Emphasized" press="onDone"/></buttons></Dialog></core:FragmentDefinition>',
	"com/coil/podway/MDM_Data/i18n/i18n.properties":'# This is the resource bundle for MasterDataManagement\n\n#XTIT: Application name\nappTitle=Master Data Management\n\n#YDES: Application description\nappDescription=Master Data Management\n\n#~~~ Worklist View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Worklist view title\nworklistViewTitle=Master Data Management\n\n#XTIT: Worklist page title\nworklistTitle=Master Data Management\n\n#XTIT: Table view title\nworklistTableTitle=Master Data Management\n\n#XBLI: text for a table with no data with filter or search\nworklistNoDataWithSearchText=No matching data found\n\n#XBLI: text for a table with no data\ntableNoDataText=There are currently no Master data available\n\n#XLNK: text for link in \'not found\' pages\nbackToWorklist=Show MasterDataManagement\n\nmasterService=Service\nmasterFacility=Facility\nmasterRelationship=Relationship\nmasterFaqCategory=FAQ Category\nmasterEventAttraction=Event Attraction\nmasterNavigation=Navigation\nbuilding=Building\ntheme=Theme\ncategory=Category\n\nmasterServiceCount=Service ({0})\nmasterFacilityCount=Facility ({0})\nmasterRelationshipCount=Relationship ({0})\nmasterFaqCategoryCount=FAQ Category ({0})\nmasterEventAttractionCount=Event Attraction ({0})\nmasterNavigationCount=Navigation ({0})\nbuildingCount=Building ({0})\nthemeCount=Theme ({0})\ncategoryCount=Category ({0})\nspecialityCount=Speciality ({0})\n\ncolServiceType=Service Type\ncolServiceMessage=Service Message\ncolContactNumber=Contact Number\ncolIsCancelable=Cancelable\ncolIncidentTypeId=Incident Type\ncolNavigationId=Navigation\ncolIcon=Icon\ncolEdit=Edit\ncolAdd=Add\ncolRemove=Remove\n\ncolFacilityType=Facility Type\n\ncolRelationship=Relationship\n\ncolFaqCategory=FAQ Category\n\ncolEventAttractionType=Event Attraction Type\ncolDescription=Description\ncolBuilding=Building\n\ncolImage=Image\n\ncolNavigationGroupId=Navigation Group\ncolNavigationTypeId=Navigation Id\ncolNavigationTypeName=Navigation Name\n\ncolBuildingName=Building Name\ncolCoordinates=Coordinates\ncolLatitude=Latitude\ncolLongitude=Longitude\n\ncolTheme=Theme\n\ncolCategory=Category\n\ncolSpeciality=Speciality\n\nbtnRefresh=Refresh\nbtnAddMDM=Add\nbtnDone=Done\n#~~~ Object View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Object view title\nobjectViewTitle=Service Details\n\n#XTIT: Object page title\nobjectTitle=Service Details\ncolChilds=Sub Items\n\n#XTIT: Label for the FaqCategory\nFaqCategoryLabel=FaqCategory\n\nTtlEditService=Edit Service\nTtlAddService=Add Service\nbtnAdd=Add Sub Item\nchilds=Sub Items\nbtnCancel=Cancel\n\nTtlAddChild=Add Sub Item\nTtlEditChild=Edit Sub Item\n\n#~~~ Not Found View ~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Not found view title\nnotFoundTitle=Not Found\n\n#YMSG: The not found text is displayed when there was an error loading the resource (404 error)\nnotFoundText=The requested resource was not found\n\n#~~~~~~~~~~for Image dialog~~~~~~~~~~~~~~~~~~\n#XTIT: Label for the Title\nTtlImages=Images\n#XBUT: Cancel action button\nbtnClose=Close\n#XTXT:  No images for the facility.\nTxtNoImagesFound=No images found.\nLnkViewImage=View Image\n\n#~~~~~~~~for HEREMap dialog~~~~~~~~~~~~~~~~~\n#XTIT: Map Dialog title\nTtlMapTitle=Building location\n#XFLD: Location latitude\nLblLocationLatitude=Location Latitude \n#XFLD: Location Longitude\nLblLocationLongitude=Location Longitude\n \n#XBUT: Save\nbtnSave=Save\nbtnEdit=Edit\n#YMSG: Success message toast\nMSG_SUCCESS=Edit Details saved successfully\n \n#XBUT: Click to Change Image\nbtnChangeImage=Upload Image\n \n#XCKL: Yes\nTxtYes=Yes\nTxtNo=No\n \n#XLST: Event Attraction\nlitmEventAttaction=Event Attraction\n \n#XLST: Facility\nlitmFacility=Facility\n\n#~~~ Error Handling ~~~~~~~~~~~~~~~~~~~~~~~\n\n#YMSG: Error dialog description\nTtlError = Error\nerrorText=Sorry, a technical error occurred! Please try again later.\nMSG_VALDTN_SERVTYPE=Please enter Service type\nMSG_VALDTN_SERVMSG=Please enter Service message\nMSG_INVALID_MOBILE=Please enter a valid mobile number\nMSG_VALDTN_FTYPE=Please enter Facility type\nMSG_VALDTN_RELATION=Please enter Relationship\nMSG_VALDTN_FAQCAT=Please enter FAQ Category\nMSG_VALDTN_EAT=Please enter Event attraction type\nMSG_VALDTN_NTN=Please enter Navigation name\nMSG_VALDTN_BUILDING=Please enter Building\nMSG_LAT_LNG=Enter a valid Latitude or Longitude\nMSG_ERR_LAT=Latitude must be between -90 and 90 degrees inclusive\nMSG_ERR_LNG=Longitude must be between -180 and 180 degrees inclusive\nMSG_VALDTN_THEME=Please enter Theme\nMSG_VALDTN_CATEGORY=Please enter Category\nMSG_VALDTN_SPECIALITY=Please enter Speciality\nMSG_VALDTN_IMAGE=Please upload Icon\nMSG_CONFIRM_DELETE=Are you sure you want to remove this Sub Item?\nMSG_SUCCESS_SERVICE_REMOVE=Sub Item removed successfully\nMSG_SUCCESS_SERVICE_CHILD_EDIT=Sub Item changed successfully\nMSG_SUCCESS_SERVICE_CHILD_ADD=Sub Item created successfully\n\nMSG_SUCCESS_REMOVE=Master data removed successfully\nMSG_CANNOT_DELETE_SYSTEM_DATA=System generated options cannot be deleted, Please contact Backend team\nMSG_CONFIRM_MDM_DELETE=Are you sure you want to remove this Master data?\nMSG_SUCCESS_ADD=Master data created successfully\n',
	"com/coil/podway/MDM_Data/i18n/i18n_ar.properties":'# This is the resource bundle for MasterDataManagement\n\n#XTIT: Application name\nappTitle=\\u0625\\u062f\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\n\n#YDES: Application description\nappDescription=\\u0625\\u062f\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\n\n#~~~ Worklist View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Worklist view title\nworklistViewTitle=\\u0625\\u062f\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\n\n#XTIT: Worklist page title\nworklistTitle=\\u0625\\u062f\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\n\n#XTIT: Table view title\nworklistTableTitle=\\u0625\\u062f\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\n\n#XBLI: text for a table with no data with filter or search\nworklistNoDataWithSearchText=\\u0644\\u0645 \\u064a\\u062a\\u0645 \\u0627\\u0644\\u0639\\u062b\\u0648\\u0631 \\u0639\\u0644\\u0649 \\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0645\\u0637\\u0627\\u0628\\u0642\\u0629\n\n#XBLI: text for a table with no data\ntableNoDataText=\\u0644\\u0627 \\u064a\\u0648\\u062c\\u062f \\u062d\\u0627\\u0644\\u064a\\u0627 \\u0623\\u064a \\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0631\\u0626\\u064a\\u0633\\u064a\\u0629 \\u0645\\u062a\\u0627\\u062d\\u0629\n\nmasterService=\\u0627\\u0644\\u062e\\u062f\\u0645\\u0627\\u062a\nmasterFacility=\\u0645\\u0646\\u0634\\u0623\\u0629\nmasterRelationship=\\u0635\\u0644\\u0629\nmasterFaqCategory=\\u0641\\u0626\\u0629 \\u0627\\u0644\\u062a\\u0639\\u0644\\u064a\\u0645\\u0627\\u062a\nmasterEventAttraction=\\u062c\\u0627\\u0630\\u0628\\u064a\\u0629 \\u0627\\u0644\\u062d\\u062f\\u062b\nmasterNavigation=\\u0627\\u0644\\u062a\\u0646\\u0642\\u0644\nbuilding=\\u0628\\u0646\\u0627\\u0621\ntheme=\\u0645\\u0648\\u0636\\u0648\\u0639\ncategory=\\u0627\\u0644\\u0641\\u0626\\u0629\nspeciality=\\u062a\\u062e\\u0635\\u0635\n\nmasterServiceCount=\\u0627\\u0644\\u062e\\u062f\\u0645\\u0627\\u062a ({0})\nmasterFacilityCount=\\u0645\\u0646\\u0634\\u0623\\u0629 ({0})\nmasterRelationshipCount=\\u0635\\u0644\\u0629 ({0})\nmasterFaqCategoryCount=\\u0641\\u0626\\u0629 \\u0627\\u0644\\u062a\\u0639\\u0644\\u064a\\u0645\\u0627\\u062a ({0})\nmasterEventAttractionCount=\\u062c\\u0627\\u0630\\u0628\\u064a\\u0629 \\u0627\\u0644\\u062d\\u062f\\u062b ({0})\nmasterNavigationCount=\\u0627\\u0644\\u062a\\u0646\\u0642\\u0644 ({0})\nbuildingCount=\\u0628\\u0646\\u0627\\u0621 ({0})\nthemeCount=\\u0645\\u0648\\u0636\\u0648\\u0639 ({0})\ncategoryCount=\\u0627\\u0644\\u0641\\u0626\\u0629 ({0})\nspecialityCount=\\u062a\\u062e\\u0635\\u0635 ({0})\n\ncolServiceType=\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\ncolServiceMessage=\\u0631\\u0633\\u0627\\u0644\\u0629 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\ncolContactNumber=\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0627\\u062a\\u0635\\u0627\\u0644\ncolIsCancelable=\\u0642\\u0627\\u0628\\u0644 \\u0644\\u0644\\u0625\\u0644\\u063a\\u0627\\u0621\ncolIncidentTypeId=\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062d\\u0627\\u062f\\u062b\ncolNavigationId=\\u0627\\u0644\\u062a\\u0646\\u0642\\u0644\ncolIcon=\\u0623\\u064a\\u0642\\u0648\\u0646\\u0629\ncolEdit=\\u062a\\u0639\\u062f\\u064a\\u0644\ncolAdd=\\u0623\\u0636\\u0641\ncolRemove=\\u0625\\u0632\\u0627\\u0644\\u0629\n\ncolFacilityType=\\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u0634\\u0623\\u0629\n\ncolRelationship=\\u0635\\u0644\\u0629\n\ncolFaqCategory=\\u0641\\u0626\\u0629 \\u0627\\u0644\\u062a\\u0639\\u0644\\u064a\\u0645\\u0627\\u062a\n\ncolEventAttractionType=\\u0646\\u0648\\u0639 \\u062c\\u0630\\u0628 \\u0627\\u0644\\u062d\\u062f\\u062b\ncolDescription=\\u0648\\u0635\\u0641\ncolBuilding=\\u0628\\u0646\\u0627\\u0621\n\ncolImage=\\u0635\\u0648\\u0631\\u0629\n\ncolNavigationGroupId=\\u0645\\u062c\\u0645\\u0648\\u0639\\u0629 \\u0627\\u0644\\u0645\\u0644\\u0627\\u062d\\u0629\ncolNavigationTypeId=\\u0645\\u0639\\u0631\\u0641 \\u0627\\u0644\\u062a\\u0646\\u0642\\u0644\ncolNavigationTypeName=\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062a\\u0646\\u0642\\u0644\n\ncolBuildingName=\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0628\\u0646\\u0649\ncolCoordinates=\\u0625\\u062d\\u062f\\u0627\\u062b\\u064a\\u0627\\u062a\ncolLatitude=\\u062e\\u0637 \\u0627\\u0644\\u0639\\u0631\\u0636\ncolLongitude=\\u062e\\u0637 \\u0627\\u0644\\u0637\\u0648\\u0644\n\ncolTheme=\\u0645\\u0648\\u0636\\u0648\\u0639\n\ncolCategory=\\u0627\\u0644\\u0641\\u0626\\u0629\n\ncolSpeciality=\\u062a\\u062e\\u0635\\u0635\n\nbtnRefresh=\\u062a\\u062d\\u062f\\u064a\\u062b\nbtnAddMDM=\\u0623\\u0636\\u0641\nbtnDone=\\u0645\\u0646\\u062c\\u0632\n#~~~ Object View ~~~~~~~~~~~~~~~~~~~~~~~~~~\n#XTIT: Object view title\nobjectViewTitle=\\u062a\\u0641\\u0627\\u0635\\u064a\\u0644 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\n\n#XTIT: Object page title\nobjectTitle=\\u062a\\u0641\\u0627\\u0635\\u064a\\u0644 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\ncolChilds=\\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a\\u0629\n\nTtlEditService=\\u062a\\u062d\\u0631\\u064a\\u0631 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\nTtlAddService=\\u0623\\u0636\\u0641 \\u062e\\u062f\\u0645\\u0629\nbtnAdd=\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u0641\\u0631\\u0639\\u064a\nchilds=\\u0627\\u0644\\u0639\\u0646\\u0627\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a\\u0629\nbtnCancel=\\u0625\\u0644\\u063a\\u0627\\u0621\n\nTtlAddChild=\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0639\\u0646\\u0635\\u0631 \\u0641\\u0631\\u0639\\u064a\nTtlEditChild=\\u062a\\u062d\\u0631\\u064a\\u0631 \\u0627\\u0644\\u0639\\u0646\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a\n\n#~~~ Not Found View ~~~~~~~~~~~~~~~~~~~~~~~\n\n#XTIT: Not found view title\nnotFoundTitle=\\u0644\\u0645 \\u064a\\u062a\\u0645 \\u0627\\u0644\\u0639\\u062b\\u0648\\u0631 \\u0639\\u0644\\u0649\n\n#YMSG: The not found text is displayed when there was an error loading the resource (404 error)\nnotFoundText=\\u0644\\u0645 \\u064a\\u062a\\u0645 \\u0627\\u0644\\u0639\\u062b\\u0648\\u0631 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0645\\u0648\\u0631\\u062f \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\n\n#~~~~~~~~~~for Image dialog~~~~~~~~~~~~~~~~~~\n#XTIT: Label for the Title\nTtlImages=\\u0627\\u0644\\u0635\\u0648\\u0631\n#XBUT: Cancel action button\nbtnClose=\\u0642\\u0631\\u064a\\u0628\n#XTXT:  No images for the facility.\nTxtNoImagesFound=\\u0644\\u0645 \\u064a\\u062a\\u0645 \\u0627\\u0644\\u0639\\u062b\\u0648\\u0631 \\u0639\\u0644\\u0649 \\u0635\\u0648\\u0631.\nLnkViewImage=\\u0639\\u0631\\u0636 \\u0627\\u0644\\u0635\\u0648\\u0631\\u0629\n\n#~~~~~~~~for HEREMap dialog~~~~~~~~~~~~~~~~~\n#XTIT: Map Dialog title\nTtlMapTitle=\\u0645\\u0648\\u0642\\u0639 \\u0627\\u0644\\u0645\\u0628\\u0646\\u0649\n#XFLD: Location latitude\nLblLocationLatitude=\\u0645\\u0648\\u0642\\u0639 Latitude \n#XFLD: Location Longitude\nLblLocationLongitude=\\u0645\\u0648\\u0642\\u0639 \\u062e\\u0637 \\u0627\\u0644\\u0637\\u0648\\u0644\n \n#XBUT: Save\nbtnSave=\\u062d\\u0641\\u0638\nbtnEdit=\\u062a\\u0639\\u062f\\u064a\\u0644\n#YMSG: Success message toast\nMSG_SUCCESS=\\u062a\\u0645 \\u062d\\u0641\\u0638 \\u062a\\u062d\\u0631\\u064a\\u0631 \\u0627\\u0644\\u062a\\u0641\\u0627\\u0635\\u064a\\u0644 \\u0628\\u0646\\u062c\\u0627\\u062d\n \n#XBUT: Click to Change Image\nbtnChangeImage=\\u062a\\u062d\\u0645\\u064a\\u0644 \\u0627\\u0644\\u0635\\u0648\\u0631\n \n#XCKL: Yes\nTxtYes=\\u0646\\u0639\\u0645\nTxtNo=\\u0644\\u0627\n \n#XLST: Event Attraction\nlitmEventAttaction=\\u062c\\u0627\\u0630\\u0628\\u064a\\u0629 \\u0627\\u0644\\u062d\\u062f\\u062b\n \n#XLST: Facility\nlitmFacility=\\u0645\\u0646\\u0634\\u0623\\u0629\n\n#~~~ Error Handling ~~~~~~~~~~~~~~~~~~~~~~~\n\n#YMSG: Error dialog description\nTtlError = \\u062e\\u0637\\u0623\nerrorText=\\u0639\\u0630\\u0631\\u0627 \\u060c \\u062d\\u062f\\u062b \\u062e\\u0637\\u0623 \\u062a\\u0642\\u0646\\u064a! \\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0645\\u0639\\u0627\\u0648\\u062f\\u0629 \\u0627\\u0644\\u0645\\u062d\\u0627\\u0648\\u0644\\u0629 \\u0641\\u064a \\u0648\\u0642\\u062a \\u0644\\u0627\\u062d\\u0642.\nMSG_VALDTN_SERVTYPE=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\nMSG_VALDTN_SERVMSG=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0631\\u0633\\u0627\\u0644\\u0629 \\u0627\\u0644\\u062e\\u062f\\u0645\\u0629\nMSG_INVALID_MOBILE=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0631\\u0642\\u0645 \\u062c\\u0648\\u0627\\u0644 \\u0635\\u062d\\u064a\\u062d\nMSG_VALDTN_FTYPE=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0646\\u0648\\u0639 \\u0627\\u0644\\u0645\\u0646\\u0634\\u0623\\u0629\nMSG_VALDTN_RELATION=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0644\\u0639\\u0644\\u0627\\u0642\\u0629\nMSG_VALDTN_FAQCAT=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0641\\u0626\\u0629 \\u0627\\u0644\\u0623\\u0633\\u0626\\u0644\\u0629 \\u0627\\u0644\\u0634\\u0627\\u0626\\u0639\\u0629\nMSG_VALDTN_EAT=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0646\\u0648\\u0639 \\u0645\\u0639\\u0644\\u0645 \\u0627\\u0644\\u062d\\u062f\\u062b\nMSG_VALDTN_NTN=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0644\\u0627\\u062d\\u0629\nMSG_VALDTN_BUILDING=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0644\\u0645\\u0628\\u0646\\u0649\nMSG_LAT_LNG=\\u0623\\u062f\\u062e\\u0644 \\u062e\\u0637 \\u0639\\u0631\\u0636 \\u0623\\u0648 \\u062e\\u0637 \\u0637\\u0648\\u0644 \\u0635\\u0627\\u0644\\u062d\\u064b\\u0627\nMSG_ERR_LAT=\\u064a\\u062c\\u0628 \\u0623\\u0646 \\u064a\\u062a\\u0631\\u0627\\u0648\\u062d \\u062e\\u0637 \\u0627\\u0644\\u0639\\u0631\\u0636 \\u0628\\u064a\\u0646 -90 \\u062f\\u0631\\u062c\\u0629 \\u0648 90 \\u062f\\u0631\\u062c\\u0629\nMSG_ERR_LNG=\\u064a\\u062c\\u0628 \\u0623\\u0646 \\u064a\\u062a\\u0631\\u0627\\u0648\\u062d \\u062e\\u0637 \\u0627\\u0644\\u0637\\u0648\\u0644 \\u0628\\u064a\\u0646 -180 \\u0648 180 \\u062f\\u0631\\u062c\\u0629\nMSG_VALDTN_THEME=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0644\\u0645\\u0648\\u0636\\u0648\\u0639\nMSG_VALDTN_CATEGORY=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0644\\u0641\\u0626\\u0629\nMSG_VALDTN_SPECIALITY=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u0625\\u062f\\u062e\\u0627\\u0644 \\u0627\\u0644\\u062a\\u062e\\u0635\\u0635\nMSG_VALDTN_IMAGE=\\u0627\\u0644\\u0631\\u062c\\u0627\\u0621 \\u062a\\u062d\\u0645\\u064a\\u0644 \\u0623\\u064a\\u0642\\u0648\\u0646\\u0629\nMSG_CONFIRM_DELETE=\\u0647\\u0644 \\u0623\\u0646\\u062a \\u0645\\u062a\\u0623\\u0643\\u062f \\u0623\\u0646\\u0643 \\u062a\\u0631\\u064a\\u062f \\u0625\\u0632\\u0627\\u0644\\u0629 \\u0647\\u0630\\u0627 \\u0627\\u0644\\u0639\\u0646\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a\\u061f\nMSG_SUCCESS_SERVICE_REMOVE=\\u062a\\u0645\\u062a \\u0625\\u0632\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0639\\u0646\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a \\u0628\\u0646\\u062c\\u0627\\u062d\nMSG_SUCCESS_SERVICE_CHILD_EDIT=\\u062a\\u0645 \\u062a\\u063a\\u064a\\u064a\\u0631 \\u0627\\u0644\\u0639\\u0646\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a \\u0628\\u0646\\u062c\\u0627\\u062d\nMSG_SUCCESS_SERVICE_CHILD_ADD=\\u062a\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u0639\\u0646\\u0635\\u0631 \\u0627\\u0644\\u0641\\u0631\\u0639\\u064a \\u0628\\u0646\\u062c\\u0627\\u062d\n\nMSG_SUCCESS_REMOVE=\\u062a\\u0645\\u062a \\u0625\\u0632\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629 \\u0628\\u0646\\u062c\\u0627\\u062d\nMSG_CANNOT_DELETE_SYSTEM_DATA=\\u0644\\u0627 \\u064a\\u0645\\u0643\\u0646 \\u062d\\u0630\\u0641 \\u0627\\u0644\\u062e\\u064a\\u0627\\u0631\\u0627\\u062a \\u0627\\u0644\\u062a\\u064a \\u062a\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0624\\u0647\\u0627 \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629 \\u0627\\u0644\\u0646\\u0638\\u0627\\u0645 \\u060c \\u064a\\u0631\\u062c\\u0649 \\u0627\\u0644\\u0627\\u062a\\u0635\\u0627\\u0644 \\u0628\\u0641\\u0631\\u064a\\u0642 Backend\nMSG_CONFIRM_MDM_DELETE=\\u0647\\u0644 \\u0623\\u0646\\u062a \\u0645\\u062a\\u0623\\u0643\\u062f \\u0623\\u0646\\u0643 \\u062a\\u0631\\u064a\\u062f \\u0625\\u0632\\u0627\\u0644\\u0629 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629\\u061f\nMSG_SUCCESS_ADD=\\u062a\\u0645 \\u0625\\u0646\\u0634\\u0627\\u0621 \\u0627\\u0644\\u0628\\u064a\\u0627\\u0646\\u0627\\u062a \\u0627\\u0644\\u0631\\u0626\\u064a\\u0633\\u064a\\u0629 \\u0628\\u0646\\u062c\\u0627\\u062d\n',
	"com/coil/podway/MDM_Data/libs/mapsjs-core.js":function(){/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.16.0/HERE_NOTICE
 */
(function(){var n,aa=[];function ba(t){return function(){return aa[t].apply(this,arguments)}}function ca(t,e){return aa[t]=e}var ea="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},fa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ha(t,e){if(e){var i=fa;t=t.split(".");for(var r=0;r<t.length-1;r++){var n=t[r];n in i||(i[n]={});i=i[n]}t=t[t.length-1];r=i[t];e=e(r);e!=r&&null!=e&&ea(i,t,{configurable:!0,writable:!0,value:e})}}function ia(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function ja(){ja=function(){};fa.Symbol||(fa.Symbol=ka)}function la(t,e){this.a=t;ea(this,"description",{configurable:!0,writable:!0,value:e})}la.prototype.toString=function(){return this.a};var ka=function(){function t(i){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new la("jscomp_symbol_"+(i||"")+"_"+e++,i)}var e=0;return t}();function ma(){ja();var t=fa.Symbol.iterator;t||(t=fa.Symbol.iterator=fa.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[t]&&ea(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return na(ia(this))}});ma=function(){}}function na(t){ma();t={next:t};t[fa.Symbol.iterator]=function(){return this};return t}function oa(t,e){ma();t instanceof String&&(t+="");var i=0,r={next:function(){if(i<t.length){var n=i++;return{value:e(n,t[n]),done:!1}}r.next=function(){return{done:!0,value:void 0}};return r.next()}};r[Symbol.iterator]=function(){return r};return r}ha("Array.prototype.keys",function(t){return t?t:function(){return oa(this,function(t){return t})}});var pa;if("function"==typeof Object.setPrototypeOf)pa=Object.setPrototypeOf;else{var qa;t:{var sa={zg:!0},ta={};try{ta.__proto__=sa;qa=ta.zg;break t}catch(t){}qa=!1}pa=qa?function(t,e){t.__proto__=e;if(t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ua=pa;ha("Object.setPrototypeOf",function(t){return t||ua});function va(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:ia(t)}}ha("Promise",function(t){function e(t){this.A=0;this.b=void 0;this.a=[];var e=this.c();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function i(){this.a=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=fa.setTimeout;i.prototype.c=function(t){n(t,0)};i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var i=t[e];t[e]=null;try{i()}catch(t){this.f(t)}}}this.a=null};i.prototype.f=function(t){this.c(function(){throw t})};e.prototype.c=function(){function t(t){return function(r){i||(i=!0,t.call(e,r))}}var e=this,i=!1;return{resolve:t(this.o),reject:t(this.f)}};e.prototype.o=function(t){if(t===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.v(t);else{t:switch(typeof t){case"object":var i=null!=t;break t;case"function":i=!0;break t;default:i=!1}i?this.m(t):this.g(t)}};e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){this.f(t);return}"function"==typeof e?this.ia(e,t):this.g(t)};e.prototype.f=function(t){this.i(2,t)};e.prototype.g=function(t){this.i(1,t)};e.prototype.i=function(t,e){if(0!=this.A)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.A);this.A=t;this.b=e;this.j()};e.prototype.j=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.b(this.a[t]);this.a=null}};var o=new i;e.prototype.v=function(t){var e=this.c();t.sf(e.resolve,e.reject)};e.prototype.ia=function(t,e){var i=this.c();try{t.call(e,i.resolve,i.reject)}catch(t){i.reject(t)}};e.prototype.then=function(t,i){function r(t,e){return"function"==typeof t?function(e){try{n(t(e))}catch(t){o(t)}}:e}var n,o,a=new e(function(t,e){n=t;o=e});this.sf(r(t,n),r(i,o));return a};e.prototype.catch=function(t){return this.then(void 0,t)};e.prototype.sf=function(t,e){function i(){switch(r.A){case 1:t(r.b);break;case 2:e(r.b);break;default:throw Error("Unexpected state: "+r.A)}}var r=this;null==this.a?o.b(i):this.a.push(i)};e.resolve=r;e.reject=function(t){return new e(function(e,i){i(t)})};e.race=function(t){return new e(function(e,i){for(var n=va(t),o=n.next();!o.done;o=n.next())r(o.value).sf(e,i)})};e.all=function(t){var i=va(t),n=i.next();return n.done?r([]):new e(function(t,e){function o(e){return function(i){a[e]=i;s--;0==s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(n.value).sf(o(a.length-1),e),n=i.next()}while(!n.done)})};return e});ha("Array.prototype.fill",function(t){return t?t:function(t,e,i){var r=this.length||0;0>e&&(e=Math.max(0,r+e));if(null==i||i>r)i=r;i=Number(i);0>i&&(i=Math.max(0,r+i));for(e=Number(e||0);e<i;e++)this[e]=t;return this}});ha("Math.log2",function(t){return t?t:function(t){return Math.log(t)/Math.LN2}});var wa=this||self;function xa(t,e,i){t=t.split(".");i=i||wa;t[0]in i||"undefined"==typeof i.execScript||i.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||void 0===e?i[r]&&i[r]!==Object.prototype[r]?i=i[r]:i=i[r]={}:i[r]=e}function ya(){}function za(t){var e=typeof t;if("object"==e)if(t){if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function Aa(t){var e=za(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ba(t){return"function"==za(t)}function Ca(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Da="closure_uid_"+(1e9*Math.random()>>>0),Ea=0;function Fa(t,e,i){return t.call.apply(t.bind,arguments)}function Ga(t,e,i){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(i,r);return t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ha(t,e,i){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ha=Fa:Ha=Ga;return Ha.apply(null,arguments)}function Ia(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();e.push.apply(e,arguments);return t.apply(this,e)}}function t(t,e){xa(t,e,void 0)}function u(t,e){function i(){}i.prototype=e.prototype;t.l=e.prototype;t.prototype=new i;t.prototype.constructor=t;t.Bo=function(t,i,r){for(var n=Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return e.prototype[i].apply(t,n)}}function Ja(t){if(Error.captureStackTrace)Error.captureStackTrace(this,Ja);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}u(Ja,Error);Ja.prototype.name="CustomError";function Ka(t,e){this.c=t;this.f=e;this.b=0;this.a=null}Ka.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next;t.next=null}else t=this.c();return t};Ka.prototype.put=function(t){this.f(t);100>this.b&&(this.b++,t.next=this.a,this.a=t)};function La(){this.b=this.a=null}var Na=new Ka(function(){return new Ma},function(t){t.reset()});La.prototype.add=function(t,e){var i=Na.get();i.set(t,e);this.b?this.b.next=i:this.a=i;this.b=i};La.prototype.remove=function(){var t=null;this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null);return t};function Ma(){this.next=this.b=this.a=null}Ma.prototype.set=function(t,e){this.a=t;this.b=e;this.next=null};Ma.prototype.reset=function(){this.next=this.b=this.a=null};var Oa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Pa(t,e){return-1!=t.indexOf(e)}function Qa(t,e){return t<e?-1:t>e?1:0}function Ra(t,e){for(var i in t)if(e.call(void 0,t[i],i,t))return!0;return!1}function Sa(t){for(var e in t)return!1;return!0}function Ta(t){var e={},i;for(i in t)e[i]=t[i];return e}var Ua="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Va(t,e){for(var i,r,n=1;n<arguments.length;n++){r=arguments[n];for(i in r)t[i]=r[i];for(var o=0;o<Ua.length;o++)i=Ua[o],Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}}var Wa;t:{var Xa=wa.navigator;if(Xa){var Ya=Xa.userAgent;if(Ya){Wa=Ya;break t}}Wa=""}function Za(t){return Pa(Wa,t)}var $a=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function ab(t,e){this.b=t===bb&&e||"";this.a=cb}var cb={},bb={},db=new ab(bb,"");function eb(t,e){this.b=t===fb&&e||"";this.a=gb}var gb={},fb={};function hb(){this.a="";this.b=ib}function jb(){var t=kb;if(t instanceof hb&&t.constructor===hb&&t.b===ib)return t.a;za(t);return"type_error:SafeHtml"}var ib={};function lb(t){var e=new hb;e.a=t;return e}lb("<!DOCTYPE html>");var kb=lb("");lb("<br>");function mb(t){var e=new eb(fb,db instanceof ab&&db.constructor===ab&&db.a===cb?db.b:"type_error:Const");e instanceof eb&&e.constructor===eb&&e.a===gb?e=e.b:(za(e),e="type_error:TrustedResourceUrl");t.src=e.toString()}function nb(t){nb[" "](t);return t}nb[" "]=ya;function ob(t,e){var i=pb;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}var rb=Za("Opera"),sb=Za("Trident")||Za("MSIE"),tb=Za("Edge"),ub=Za("Gecko")&&!(Pa(Wa.toLowerCase(),"webkit")&&!Za("Edge"))&&!(Za("Trident")||Za("MSIE"))&&!Za("Edge"),vb=Pa(Wa.toLowerCase(),"webkit")&&!Za("Edge");function wb(){var t=wa.document;return t?t.documentMode:void 0}var xb;t:{var yb="",zb=function(){var t=Wa;if(ub)return/rv:([^\);]+)(\)|;)/.exec(t);if(tb)return/Edge\/([\d\.]+)/.exec(t);if(sb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vb)return/WebKit\/(\S+)/.exec(t);if(rb)return/(?:Version)[ \/]?(\S+)/.exec(t)}();zb&&(yb=zb?zb[1]:"");if(sb){var Ab=wb();if(null!=Ab&&Ab>parseFloat(yb)){xb=String(Ab);break t}}xb=yb}var pb={};function Bb(t){return ob(t,function(){for(var e=0,i=Oa(String(xb)).split("."),r=Oa(String(t)).split("."),n=Math.max(i.length,r.length),o=0;0==e&&o<n;o++){var a=i[o]||"",s=r[o]||"";do{a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""];s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""];if(0==a[0].length&&0==s[0].length)break;e=0==a[1].length?0:parseInt(a[1],10);var l=0==s[1].length?0:parseInt(s[1],10);e=Qa(e,l)||Qa(0==a[2].length,0==s[2].length)||Qa(a[2],s[2]);a=a[3];s=s[3]}while(0==e)}return 0<=e})}var Cb;Cb=wa.document&&sb?wb():void 0;!ub&&!sb||sb&&9<=Number(Cb)||ub&&Bb("1.9.1");sb&&Bb("9");function Db(t){var e=document;t=String(t);"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase());return e.createElement(t)}function Eb(t){wa.setTimeout(function(){throw t},0)}var Fb;function Gb(){var t=wa.MessageChannel;"undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Za("Presto")&&(t=function(){var t=Db("IFRAME");t.style.display="none";mb(t);document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document;t.open();t.write(jb());t.close();var i="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=Ha(function(t){if(("*"==r||t.origin==r)&&t.data==i)this.port1.onmessage()},this);e.addEventListener("message",t,!1);this.port1={};this.port2={postMessage:function(){e.postMessage(i,r)}}});if("undefined"!==typeof t&&!Za("Trident")&&!Za("MSIE")){var e=new t,i={},r=i;e.port1.onmessage=function(){if(void 0!==i.next){i=i.next;var t=i.dj;i.dj=null;t()}};return function(t){r.next={dj:t};r=r.next;e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in Db("SCRIPT")?function(t){var e=Db("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null;e.parentNode.removeChild(e);e=null;t();t=null};document.documentElement.appendChild(e)}:function(t){wa.setTimeout(t,0)}}function Hb(t,e){Ib||Jb();Kb||(Ib(),Kb=!0);Lb.add(t,e)}var Ib;function Jb(){if(wa.Promise&&wa.Promise.resolve){var t=wa.Promise.resolve(void 0);Ib=function(){t.then(Nb)}}else Ib=function(){var t=Nb;!Ba(wa.setImmediate)||wa.Window&&wa.Window.prototype&&!Za("Edge")&&wa.Window.prototype.setImmediate==wa.setImmediate?(Fb||(Fb=Gb()),Fb(t)):wa.setImmediate(t)}}var Kb=!1,Lb=new La;function Nb(){for(var t;t=Lb.remove();){try{t.a.call(t.b)}catch(t){Eb(t)}Na.put(t)}Kb=!1}function Ob(t){this.A=Pb;this.i=void 0;this.c=this.a=this.b=null;this.f=this.g=!1;if(t!=ya)try{var e=this;t.call(void 0,function(t){Qb(e,Rb,t)},function(t){Qb(e,Sb,t)})}catch(t){Qb(this,Sb,t)}}var Pb=0,Rb=2,Sb=3;function Tb(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}Tb.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var Ub=new Ka(function(){return new Tb},function(t){t.reset()});function Vb(t,e,i){var r=Ub.get();r.f=t;r.b=e;r.c=i;return r}function Wb(t){if(t instanceof Ob)return t;var e=new Ob(ya);Qb(e,Rb,t);return e}function Xb(t){return new Ob(function(e,i){i(t)})}function Yb(){var t,e,i=new Ob(function(i,r){t=i;e=r});return new $b(i,t,e)}Ob.prototype.then=function(t,e,i){return ac(this,Ba(t)?t:null,Ba(e)?e:null,i)};Ob.prototype.$goog_Thenable=!0;Ob.prototype.cancel=function(t){if(this.A==Pb){var e=new bc(t);Hb(function(){cc(this,e)},this)}};function cc(t,e){if(t.A==Pb)if(t.b){var i=t.b;if(i.a){for(var r=0,n=null,o=null,a=i.a;a&&(a.g||(r++,a.a==t&&(n=a),!(n&&1<r)));a=a.next)n||(o=a);n&&(i.A==Pb&&1==r?cc(i,e):(o?(r=o,r.next==i.c&&(i.c=r),r.next=r.next.next):dc(i),ec(i,n,Sb,e)))}t.b=null}else Qb(t,Sb,e)}function fc(t,e){t.a||t.A!=Rb&&t.A!=Sb||gc(t);t.c?t.c.next=e:t.a=e;t.c=e}function ac(t,e,i,r){var n=Vb(null,null,null);n.a=new Ob(function(t,o){n.f=e?function(i){try{var n=e.call(r,i);t(n)}catch(t){o(t)}}:t;n.b=i?function(e){try{var n=i.call(r,e);void 0===n&&e instanceof bc?o(e):t(n)}catch(t){o(t)}}:o});n.a.b=t;fc(t,n);return n.a}Ob.prototype.m=function(t){this.A=Pb;Qb(this,Rb,t)};Ob.prototype.o=function(t){this.A=Pb;Qb(this,Sb,t)};function Qb(t,e,i){if(t.A==Pb){t===i&&(e=Sb,i=new TypeError("Promise cannot resolve to itself"));t.A=1;t:{var r=i,n=t.m,o=t.o;if(r instanceof Ob){fc(r,Vb(n||ya,o||null,t));var a=!0}else{if(r)try{var s=!!r.$goog_Thenable}catch(t){s=!1}else s=!1;if(s)r.then(n,o,t),a=!0;else{if(Ca(r))try{var l=r.then;if(Ba(l)){hc(r,l,n,o,t);a=!0;break t}}catch(e){o.call(t,e);a=!0;break t}a=!1}}}a||(t.i=i,t.A=e,t.b=null,gc(t),e!=Sb||i instanceof bc||ic(t,i))}}function hc(t,e,i,r,n){function o(t){s||(s=!0,r.call(n,t))}function a(t){s||(s=!0,i.call(n,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}function gc(t){t.g||(t.g=!0,Hb(t.j,t))}function dc(t){var e=null;t.a&&(e=t.a,t.a=e.next,e.next=null);t.a||(t.c=null);return e}Ob.prototype.j=function(){for(var t;t=dc(this);)ec(this,t,this.A,this.i);this.g=!1};function ec(t,e,i,r){if(i==Sb&&e.b&&!e.g)for(;t&&t.f;t=t.b)t.f=!1;if(e.a)e.a.b=null,jc(e,i,r);else try{e.g?e.f.call(e.c):jc(e,i,r)}catch(t){kc.call(null,t)}Ub.put(e)}function jc(t,e,i){e==Rb?t.f.call(t.c,i):t.b&&t.b.call(t.c,i)}function ic(t,e){t.f=!0;Hb(function(){t.f&&kc.call(null,e)})}var kc=Eb;function bc(t){Ja.call(this,t)}u(bc,Ja);bc.prototype.name="cancel";function $b(t,e,i){this.ei=t;this.resolve=e;this.reject=i}var x=this;function lc(){return Object.create(y,void 0)}var A=Ha,mc=String,nc=x.Object.freeze||function(t){return t};function oc(t){for(var e=Object.keys(t),i=e.length,r;i--;)r=t[e[i]],Ca(r)&&oc(r);return nc(t)}function pc(t){var e=za(t);if("object"==e||"array"==e){if(Ba(t.clone))return t.clone();e="array"==e?[]:{};for(var i in t)t.hasOwnProperty(i)&&(e[i]=pc(t[i]));return e}return t}var B=self.eval("undefined"),y=self.eval("null");function qc(t,e){return mc(t).split(e!==B?e:" ")}var rc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(t,e,i,r,n){if(!(e=t instanceof e)&&i)throw new D(i,r,sc(n)?n:t);return e}function tc(t,e){if(!0===(C(t,e)&&t.constructor===e))throw new TypeError("Illegal constructor "+uc(e))}function vc(t,e,i,r,n){if(!(e=wc(t)===e)&&i)throw new D(i,r,sc(n)?n:t);return e}function xc(t,e,i,r){return vc(t,"Array",e,i,r)}t("H.lang.isArray",xc);function sc(t){return t!==B}function yc(t){return"string"===typeof t}t("H.lang.isString",yc);var zc=parseInt,Ac=parseFloat,E=isNaN;function Bc(t){return t===+t}t("H.lang.isNumber",Bc);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"===typeof t&&0===t%1});function Cc(t){return!E(+t)}function wc(t){var e=Object[rc[0]][rc[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:typeof t}var Dc=[];function Ec(t){0>Dc.indexOf(t)&&Dc.push(t)}Ec(Dc);function uc(t,e,i,r){var n="",o=2>arguments.length,a;o&&(e={H:x.H},i="",r=Dc.slice());Fc(e,!0,function(e,o){try{if(a=e[o],o=Gc(e,a),!(Ca(a)&&a.window===a&&a.self===a||Ca(a)&&0<a.nodeType&&Ba(a.cloneNode))&&Ca(a)){if(a===t)return n=i+"."+o,!0;if(0>r.indexOf(a)&&(r.push(a),n=uc(t,a,i+"."+o,r)))return!0}}catch(t){}});o&&(n=n?n.substr(1).replace("."+rc[0]+".","#"):"~"+(Ba(t)?Hc(t)+"()":wc(t)));return n}function Gc(t,e){var i=[];Fc(t,!1,function(t,r){t[r]===e&&i.push(r)});return i.sort(Ic)[0]}function Ic(t,e){return e.length-t.length}var Jc=Object[rc[0]][rc[2]];function Fc(t,e,i){var r;if(t){for(n in t)if((!e||Jc.call(t,n))&&i(t,n,!0))return;for(r=rc.length;r--;){var n=rc[r];if((!e||Jc.call(t,n))&&i(t,n,!1))break}}}function Hc(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}function Kc(t,e,i){i[e]="#"+e}var Lc=!!x.__karma__;function Mc(){throw Error("unimplemented method")}function Nc(t,e){e=e||{};"status"in e&&(this.status=+e.status);"statusText"in e&&(this.statusText=e.statusText);this.ok=200<=this.status&&300>this.status;this.bodyUsed=!1;t?"string"===typeof t?this.c=t:ArrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||t.buffer)?this.a=t.buffer||t:Blob.prototype.isPrototypeOf(t)&&(this.b=t):this.c=""}t("H.net.Response",Nc);Nc.prototype.type="default";Nc.prototype.type=Nc.prototype.type;Nc.prototype.status=200;Nc.prototype.status=Nc.prototype.status;Nc.prototype.statusText="OK";Nc.prototype.statusText=Nc.prototype.statusText;function Oc(t){if(t.bodyUsed)return Xb(new TypeError("Already read"));t.bodyUsed=!0}Nc.error=function(){Nc.a||(Nc.a=new Nc(null,{status:0,statusText:""}),Nc.a.type="error");return Nc.a};Nc.error=Nc.error;Nc.prototype.text=function(){var t=Oc(this);if(!t)if(this.c)t=Wb(this.c);else if(this.a){t=new Uint8Array(this.a);var e=t.length,i=Array(e),r;for(r=0;r<e;r++)i[r]=String.fromCharCode(t[r]);t=Wb(i.join(""))}else this.b?t=Pc(this.b):t=Xb("Unsupported response body");return t};Nc.prototype.json=function(){return this.text().then(x.JSON.parse)};Nc.prototype.blob=function(){var t,e=Oc(this);e||(this.b?t=this.b:this.a&&(t=new Blob([this.a],{type:"application/octet-stream"})));return e||Wb(t)};Nc.prototype.arrayBuffer=function(){return this.a?Oc(this)||Wb(this.a.slice(0)):this.blob().then(Nc.b)};Nc.b=function(t){var e=new FileReader;e.readAsArrayBuffer(t);return new Ob(function(t,i){e.onload=function(){t(e.result)};e.onerror=function(){i(e.error)}})};function Pc(t){var e=new FileReader;e.readAsText(t);return new Ob(function(t,i){e.onload=function(){t(e.result)};e.onerror=function(){i(e.error)}})}!Lc&&x.Response&&x.Response.error&&(Nc=x.Response,Ec(Nc.prototype));function Rc(t,e,i){function r(){var t=A(u.a,u),e=+l.timeout||0;Sc?(Tc(u,"timeout",t),n.timeout=e):e&&(u.c=setTimeout(function(){n.abort();u.a({type:"timeout"})},e));Tc(u,"error",t);Tc(u,"load",t);n.send(l.data)}var n,o,a,s=i&&i.headers||{},l={},u=this;if(!Ba(e))throw new D(Rc,1,"function required");Va(s,Uc.headers,s);Va(l,Uc,i||{});l.headers=s;this.b=e;this.ua=n=new XMLHttpRequest;e=l.method;try{n.open(e,t,!0);for(o in s)s.hasOwnProperty(o)&&(a=s[o])&&n.setRequestHeader(o,a);n.withCredentials=!!l.withCredentials;r()}catch(t){this.a({type:"cors"})}}t("H.net.Xhr",Rc);var Uc={method:"GET",headers:{},data:null},Vc="withCredentials"in new XMLHttpRequest,Sc="timeout"in new XMLHttpRequest;function Tc(t,e,i){Vc?t.ua.addEventListener(e,i):t.ua["on"+e]=i}function Wc(t,e,i){Vc?t.ua.removeEventListener(e,i):t.ua["on"+e]=null}Rc.prototype.abort=function(){this.ua&&(this.ua.abort(),this.ua&&this.a({type:"abort"}))};Rc.prototype.abort=Rc.prototype.abort;Rc.prototype.a=function(t){var e=t.type;t=this.ua;var i,r;this.c&&clearTimeout(this.c);"load"===e?t instanceof XMLHttpRequest&&200!==t.status&&(i="network"):i=4===t.readyState&&0===t.status&&"error"==e?"cors":"error"!=e?e:"network";e=this.a;Wc(this,"timeout",e);Wc(this,"error",e);Wc(this,"load",e);0===t.status||i&&"network"!==i?r=Nc.error():r=new Nc(t.responseText,t);i=this.b;delete this.a;delete this.b;delete this.ua;i(r)};function Xc(t,e){var i=[];t&&i.push(uc(t));1<arguments.length&&i.push(""+e);i=Error(i.join(" "));Object.setPrototypeOf(i,Xc.prototype);return i}u(Xc,Error);t("H.lang.IllegalOperationError",Xc);Xc.prototype.name="IllegalOperationError";var Zc,$c,ad;function D(t,e,i){var r=arguments.length;e=e!==B?+e:e;if(e!==B){var n=(n=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?qc(n[1].replace(/\s+/g,""),","):[];n.forEach(Kc);n=n[e]||"#"+e}var o=t?uc(t):"";r=2<r?mc(i):"";if(n||r)o+=" (Argument "+(n||"")+(r?" "+r:"")+")";r=Error(o);Object.setPrototypeOf(r,D.prototype);return r}u(D,Error);t("H.lang.InvalidArgumentError",D);D.prototype.name="InvalidArgumentError";function bd(){if(!yc("STATIC_DB"))throw new D(this.constructor,0);this.g=x.indexedDB||x.to||x.Hn||x.In;if(!this.g)throw new Xc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.$h=A(this.$h,this)}var cd,dd;n=bd.prototype;n.put=function(t,e,i,r){if(!yc(t)&&!Bc(t))throw new D(this.put,0);if(!ed(e))throw new D(this.put,1);fd(this,function(n){gd(n.put(e,t),i,r)},r)};n.get=function(t,e,i){var r;if(!yc(t)&&!Bc(t))throw new D(this.get,0);if(!Ba(e))throw new D(this.get,1);fd(this,function(n){r=n.get(t);gd(r,e,i)},i);return{cancel:function(){r&&(r.onsuccess=hd)}}};n.remove=function(t,e,i){if(!yc(t)&&!Bc(t))throw new D(this.remove,0);fd(this,function(r){gd(r["delete"](t),e,i)},i)};n.clear=function(t,e){fd(this,function(i){gd(i.clear(),t,e)},e)};n.$h=function(){var t=this.b.result;t.objectStoreNames.contains("data")||t.createObjectStore("data")};function id(t,e,i){if(t.b)t.a?(t.a.push(e),i&&t.c.push(i)):t.f?i&&i(t.f):e(t.b.result);else{t.b=t.g.open(jd+"STATIC_DB",1);t.b.onupgradeneeded=t.$h;var r=t.b.onerror=function(){clearTimeout(t.i);t.f=this.error;t.c.forEach(function(e){e(t.f)});t.a=t.c=null};t.i=setTimeout(function(){r.call({error:Error("DbOpenTimeoutError")})},500);t.b.onsuccess=function(){clearTimeout(t.i);t.a?(t.a.forEach(function(t){t(this.result)},this),t.a=t.c=null):(t.b=t.f=null,t.a=[],t.c=[])};t.a.push(e);i&&t.c.push(i)}}function fd(t,e,i){id(t,function(t){t=t.transaction(["data"],"readwrite");e(t.objectStore("data"))},i)}function gd(t,e,i){e&&(t.onsuccess=function(){e(this.result)});i&&(t.onerror=function(){i(this.error)})}function ed(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e||"[object ArrayBuffer]"===e||yc(t)||Ca(t)}function kd(){cd||(cd=new bd);return cd}t("H.util.IndexedDBStorage.getInstance",kd);var jd="H_";function ld(){if(!sc(dd))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)dd=!1;else{var t=x.indexedDB||x.to||x.Hn||x.In;var e=jd+"TEST_DB";try{var i=t&&t.open(e,1)}catch(t){}dd=!!i&&null===i.onupgradeneeded;i&&t.deleteDatabase&&t.deleteDatabase(e)}return dd}t("H.util.IndexedDBStorage.isSupported",ld);function md(){0!=nd&&(od[this[Da]||(this[Da]=++Ea)]=this);this.wd=this.wd;this.mb=this.mb}var nd=0,od={};md.prototype.wd=!1;md.prototype.B=function(){if(!this.wd&&(this.wd=!0,this.u(),0!=nd)){var t=this[Da]||(this[Da]=++Ea);if(0!=nd&&this.mb&&0<this.mb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete od[t]}};md.prototype.tb=function(t,e){this.wd?void 0!==e?t.call(e):t():(this.mb||(this.mb=[]),this.mb.push(void 0!==e?Ha(t,e):t))};md.prototype.u=function(){if(this.mb)for(;this.mb.length;)this.mb.shift()()};function pd(t){t&&"function"==typeof t.B&&t.B()}function qd(t,e){this.type=t;this.currentTarget=this.target=e;this.f=this.a=!1;this.Gk=!0}qd.prototype.stopPropagation=function(){this.a=!0};qd.prototype.preventDefault=function(){this.f=!0;this.Gk=!1};t("H.util.Event",qd);qd.prototype.stopPropagation=qd.prototype.stopPropagation;qd.prototype.stopPropagation=qd.prototype.stopPropagation;qd.prototype.CAPTURING_PHASE=1;qd.prototype.CAPTURING_PHASE=qd.prototype.CAPTURING_PHASE;qd.prototype.AT_TARGET=2;qd.prototype.AT_TARGET=qd.prototype.AT_TARGET;qd.prototype.BUBBLING_PHASE=3;qd.prototype.BUBBLING_PHASE=qd.prototype.BUBBLING_PHASE;qd.prototype.eventPhase=0;qd.prototype.eventPhase=qd.prototype.eventPhase;function rd(t,e,i){rd.l.constructor.call(this,t,i);this.data=e}u(rd,qd);t("H.util.DataEvent",rd);function sd(t,e,i){sd.l.constructor.call(this,t,i);this.message=e}u(sd,qd);t("H.util.ErrorEvent",sd);var td=Math,ud=td.min,vd=td.max,wd=td.round,xd=td.floor,yd=td.ceil,zd=td.abs,Ad=td.log,Bd=td.sqrt,Cd=td.pow,Dd=td.exp,Ed=td.sin,Fd=td.asin,Gd=td.cos,Hd=td.tan,Id=td.atan,Jd=td.atan2,Kd=td.LN2,Ld=td.PI,Md=Ld/2,Nd=Ld/4,Od=2*Ld,Pd=3*Ld,Qd=Ld/180,Rd=180/Ld,Sd=1/0,Td=Cd(-2,53),Ud=Ud||function(t){return Ad(t)/Kd};function Vd(t,e){var i;return 0>(i=t%e)===0>e?i:i+e}function Wd(t,e,i){e-=i=i||0;t-=i;return t-xd(t/e)*e+i}t("H.math.normalize",Wd);function Xd(t,e,i){return t>i?i:t<e?e:t}t("H.math.clamp",Xd);function Yd(t,e,i,r){r||(r=0);return e<i?t>=e-r&&t<=i+r:t>=i-r&&t<=e+r}function Zd(t,e,i,r,n,o){return Bd(Cd((t-n)*(r-o)-(e-o)*(i-n),2)/(Cd(i-n,2)+Cd(r-o,2)))}var $d={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",$d);function ae(t,e,i,r,n,o){var a=i.length,s=a,l=i[0],u=0,c=0,h=0;r=r/2||0;var f=o||2;o=f*(n?0:1)+1;for(var p=f-2;1!=u&&s>o;){s-=p;var d=i[--s];f=i[--s];var y=i[s?s-p-1:(a+(s-p-1))%a];var g=i[s?s-p-2:(a+(s-p-2))%a];if(f>=t-r&&f<=t+r&&d>=e-r&&d<=e+r||g>=t-r&&g<=t+r&&y>=e-r&&y<=e+r)u=1;else if(!u&&f===t)g===t&&(d<e&&y>e||d>e&&y<e)||(l<=t&&g>t||l>=t&&g<t)&&(d>=e?++c:++h),u=Yd(e,d,y,r)&&Zd(t,e,f,d,g,y)<=r?2:0;else if(!u&&Yd(t,f,g,r)){if(f<t&&g>t||f>t&&g<t)l=d+(t-f)/(g-f)*(y-d),c+=l>e,h+=l<e;u=Yd(e,d,y,r)&&Zd(t,e,f,d,g,y)<=r?2:0}l=f}!u&&n&&0!==h&&0!==c%2&&(u=3);return u}function be(t,e){return ae(t.x,t.y,e,0,!0)!==$d.NONE}t("H.math.isPointInsidePolygon",be);function ce(t){for(var e=t.length,i=new Float64Array(2*e),r=e&&sc(t[0].x);e--;){var n=t[e],o=e<<1;i[o]=r?n.x:n[0];i[o+1]=r?n.y:n[1]}return i}t("H.math.flatten",ce);function de(t,e,i){this.type=t;this.data=e;this.c=Yb();this.resolve=A(this.resolve,this);this.reject=A(this.reject,this);this.priority=ee;i!==B&&(this.priority=i);this.hh().add(this)}var ee=1,fe={xo:0,Ao:ee,wo:2};n=de.prototype;n.then=function(t,e,i){return this.c.ei.then(t,e,i)};n.resolve=function(t){this.Xd=3;this.c.resolve(t)};n.reject=function(t){this.Xd=5;this.c.reject(t)};n.Xd=0;n.cancel=function(){this.c.ei.cancel();3>this.Xd&&(this.le(),this.hh().remove(this),this.Xd=4)};function ge(t){var e;this.a={};for(e in fe)this.a[fe[e]]=[];this.jg=t;this.jg.addEventListener("allocatable",A(this.b,this))}t("H.util.JobManager",ge);var he=Object.keys(fe).map(function(t){return fe[t]}).sort().reverse();ge.prototype.add=function(t){C(t,de,this.add,0);this.a[t.priority].push(t);this.b()};ge.prototype.contains=function(t){return-1<this.a[t.priority].indexOf(t)};ge.prototype.remove=function(t){var e=t.priority;t=this.a[e].indexOf(t);return-1<t?(this.a[e].splice(t,1),!0):!1};ge.prototype.b=function(){he.forEach(function(t){this.a[t]=this.a[t].filter(function(t){var e;if((e=this.jg.Fg(t))!==y){var i=A(this.jg.Sg,this.jg,e,t);t.then(i,i);t.Xd=t.sj(e)?1:5}else return!0},this)},this)};function ie(t,e,i){var r=[],n=arguments.length;t&&r.push(uc(t));1<n&&(n=2<n&&xc(i)?" out of ["+i[0]+"..."+i[1]+"]":"",r.push("("+e+n+")"));r=Error(r.join(" "));Object.setPrototypeOf(r,ie.prototype);return r}u(ie,Error);t("H.lang.OutOfRangeError",ie);ie.prototype.name="OutOfRangeError";var je="closure_listenable_"+(1e6*Math.random()|0);function ke(t){return!(!t||!t[je])}var le=0;function me(t,e,i,r,n){this.listener=t;this.proxy=null;this.src=e;this.type=i;this.capture=!!r;this.Of=n;this.key=++le;this.Zd=this.rf=!1}function ne(t){t.Zd=!0;t.listener=null;t.proxy=null;t.src=null;t.Of=null}function oe(t){this.src=t;this.a={};this.b=0}oe.prototype.add=function(t,e,i,r,n){var o=t.toString();t=this.a[o];t||(t=this.a[o]=[],this.b++);var a=pe(t,e,r,n);-1<a?(e=t[a],i||(e.rf=!1)):(e=new me(e,this.src,o,!!r,n),e.rf=i,t.push(e));return e};oe.prototype.remove=function(t,e,i,r){t=t.toString();if(!(t in this.a))return!1;var n=this.a[t];e=pe(n,e,i,r);return-1<e?(ne(n[e]),Array.prototype.splice.call(n,e,1),0==n.length&&(delete this.a[t],this.b--),!0):!1};function qe(t,e){var i=e.type;if(!(i in t.a))return!1;var r=t.a[i],n=$a(r,e),o;(o=0<=n)&&Array.prototype.splice.call(r,n,1);o&&(ne(e),0==t.a[i].length&&(delete t.a[i],t.b--));return o}oe.prototype.qa=function(t){t=t&&t.toString();var e=0,i;for(i in this.a)if(!t||i==t){for(var r=this.a[i],n=0;n<r.length;n++)++e,ne(r[n]);delete this.a[i];this.b--}return e};function re(t,e){var i=void 0!==e,r=i?e.toString():"";return Ra(t.a,function(t){for(var e=0;e<t.length;++e)if(!i||t[e].type==r)return!0;return!1})}function pe(t,e,i,r){for(var n=0;n<t.length;++n){var o=t[n];if(!o.Zd&&o.listener==e&&o.capture==!!i&&o.Of==r)return n}return-1}var se=!sb||9<=Number(Cb),te=sb&&!Bb("9");!vb||Bb("528");ub&&Bb("1.9b")||sb&&Bb("8")||rb&&Bb("9.5")||vb&&Bb("528");ub&&!Bb("8")||sb&&Bb("9");var ue=function(){if(!wa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wa.addEventListener("test",ya,e),wa.removeEventListener("test",ya,e)}catch(t){}return t}();function ve(t,e){qd.call(this,t?t.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(t){var i=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement;this.currentTarget=e;if(e=t.relatedTarget){if(ub){t:{try{nb(e.nodeName);var n=!0;break t}catch(t){}n=!1}n||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e;r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0);this.button=t.button;this.key=t.key||"";this.ctrlKey=t.ctrlKey;this.altKey=t.altKey;this.shiftKey=t.shiftKey;this.metaKey=t.metaKey;this.pointerId=t.pointerId||0;this.pointerType="string"===typeof t.pointerType?t.pointerType:we[t.pointerType]||"";this.b=t;t.defaultPrevented&&this.preventDefault()}}u(ve,qd);var we={2:"touch",3:"pen",4:"mouse"};ve.prototype.stopPropagation=function(){ve.l.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};ve.prototype.preventDefault=function(){ve.l.preventDefault.call(this);var t=this.b;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,te)try{if(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)t.keyCode=-1}catch(t){}};var xe="closure_lm_"+(1e6*Math.random()|0),ye={},ze=0;function Ae(t,e,i,r,n){if(r&&r.once)return Be(t,e,i,r,n);if("array"==za(e)){for(var o=0;o<e.length;o++)Ae(t,e[o],i,r,n);return null}i=Ce(i);return ke(t)?t.ia.add(String(e),i,!1,Ca(r)?!!r.capture:!!r,n):De(t,e,i,!1,r,n)}function De(t,e,i,r,n,o){if(!e)throw Error("Invalid event type");var a=Ca(n)?!!n.capture:!!n,s=Ee(t);s||(t[xe]=s=new oe(t));i=s.add(e,i,r,a,o);if(i.proxy)return i;r=Fe();i.proxy=r;r.src=t;r.listener=i;if(t.addEventListener)ue||(n=a),void 0===n&&(n=!1),t.addEventListener(e.toString(),r,n);else if(t.attachEvent)t.attachEvent(Ge(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");ze++;return i}function Fe(){var t=He,e=se?function(i){return t.call(e.src,e.listener,i)}:function(i){i=t.call(e.src,e.listener,i);if(!i)return i};return e}function Be(t,e,i,r,n){if("array"==za(e)){for(var o=0;o<e.length;o++)Be(t,e[o],i,r,n);return null}i=Ce(i);return ke(t)?t.ia.add(String(e),i,!0,Ca(r)?!!r.capture:!!r,n):De(t,e,i,!0,r,n)}function Ie(t,e,i,r,n){if("array"==za(e)){for(var o=0;o<e.length;o++)Ie(t,e[o],i,r,n);return null}r=Ca(r)?!!r.capture:!!r;i=Ce(i);if(ke(t))return t.ia.remove(String(e),i,r,n);if(!t)return!1;if(t=Ee(t))if(e=t.a[e.toString()],t=-1,e&&(t=pe(e,i,r,n)),i=-1<t?e[t]:null)return Ke(i);return!1}function Ke(t){if("number"===typeof t||!t||t.Zd)return!1;var e=t.src;if(ke(e))return qe(e.ia,t);var i=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(i,r,t.capture):e.detachEvent?e.detachEvent(Ge(i),r):e.addListener&&e.removeListener&&e.removeListener(r);ze--;(i=Ee(e))?(qe(i,t),0==i.b&&(i.src=null,e[xe]=null)):ne(t);return!0}function Ge(t){return t in ye?ye[t]:ye[t]="on"+t}function Le(t,e,i,r){var n=!0;if(t=Ee(t))if(e=t.a[e.toString()])for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==i&&!o.Zd&&(o=Me(o,r),n=n&&!1!==o)}return n}function Me(t,e){var i=t.listener,r=t.Of||t.src;t.rf&&Ke(t);return i.call(r,e)}function He(t,e){if(t.Zd)return!0;if(!se){if(!e)t:{e=["window","event"];for(var i=wa,r=0;r<e.length;r++)if(i=i[e[r]],null==i){e=null;break t}e=i}r=e;e=new ve(r,this);i=!0;if(!(0>r.keyCode||void 0!=r.returnValue)){t:{var n=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){n=!0}if(n||void 0==r.returnValue)r.returnValue=!0}r=[];for(n=e.currentTarget;n;n=n.parentNode)r.push(n);t=t.type;for(n=r.length-1;!e.a&&0<=n;n--){e.currentTarget=r[n];var o=Le(r[n],t,!0,e);i=i&&o}for(n=0;!e.a&&n<r.length;n++)e.currentTarget=r[n],o=Le(r[n],t,!1,e),i=i&&o}return i}return Me(t,new ve(e,this))}function Ee(t){t=t[xe];return t instanceof oe?t:null}var Ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(t){if(Ba(t))return t;t[Ne]||(t[Ne]=function(e){return t.handleEvent(e)});return t[Ne]}function F(){md.call(this);this.ia=new oe(this);this.pn=this;this.Ug=null}u(F,md);F.prototype[je]=!0;n=F.prototype;n.ec=function(){return this.Ug};n.ga=function(t){this.Ug=t};n.addEventListener=function(t,e,i,r){Ae(this,t,e,i,r)};n.removeEventListener=function(t,e,i,r){Ie(this,t,e,i,r)};n.dispatchEvent=function(t){var e,i=this.ec();if(i)for(e=[];i;i=i.ec())e.push(i);i=this.pn;var r=t.type||t;if("string"===typeof t)t=new qd(t,i);else if(t instanceof qd)t.target=t.target||i;else{var n=t;t=new qd(r,i);Va(t,n)}n=!0;if(e)for(var o=e.length-1;!t.a&&0<=o;o--){var a=t.currentTarget=e[o];n=a.ed(r,!0,t)&&n}t.a||(a=t.currentTarget=i,n=a.ed(r,!0,t)&&n,t.a||(n=a.ed(r,!1,t)&&n));if(e)for(o=0;!t.a&&o<e.length;o++)a=t.currentTarget=e[o],n=a.ed(r,!1,t)&&n;return n};n.u=function(){F.l.u.call(this);this.ia&&this.ia.qa(void 0);this.Ug=null};n.ed=function(t,e,i){t=this.ia.a[String(t)];if(!t)return!0;t=t.concat();for(var r=!0,n=0;n<t.length;++n){var o=t[n];if(o&&!o.Zd&&o.capture==e){var a=o.listener,s=o.Of||o.src;o.rf&&qe(this.ia,o);r=!1!==a.call(s,i)&&r}}return r&&0!=i.Gk};t("H.util.EventTarget",F);F.prototype.ga=F.prototype.ga;F.prototype.setParentEventTarget=F.prototype.ga;F.prototype.ec=F.prototype.ec;F.prototype.getParentEventTarget=F.prototype.ec;F.prototype.addEventListener=F.prototype.addEventListener;F.prototype.addEventListener=F.prototype.addEventListener;F.prototype.removeEventListener=F.prototype.removeEventListener;F.prototype.removeEventListener=F.prototype.removeEventListener;F.prototype.dispatchEvent=F.prototype.dispatchEvent;F.prototype.dispatchEvent=F.prototype.dispatchEvent;F.prototype.B=F.prototype.B;F.prototype.dispose=F.prototype.B;F.prototype.tb=F.prototype.tb;F.prototype.addOnDisposeCallback=F.prototype.tb;F.prototype.qn=F.prototype.ed;F.prototype.ed=function(t,e,i){var r,n,o=!0;var a=i[i.currentTarget===i.target?"AT_TARGET":e?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];if(!r||"pointerenter"!==(n=i.type)&&"pointerleave"!==n)i.eventPhase=a,o=F.prototype.qn.apply(this,arguments),r&&this.ec&&null===this.ec()&&delete i.eventPhase;return o};function Oe(t){t=t||{};var e=t.callback;this.a=t.label;Ba(e)&&(this.callback=e);this.b=!!t.disabled;Oe.l.constructor.call(this)}u(Oe,F);t("H.util.ContextItem",Oe);Oe.prototype.Be=function(){return this.a};Oe.prototype.getLabel=Oe.prototype.Be;Oe.prototype.Ic=function(t){this.a!==t&&(this.a=t,this.dispatchEvent("update"));return this};Oe.prototype.setLabel=Oe.prototype.Ic;Oe.prototype.hc=function(){return this.b};Oe.prototype.isDisabled=Oe.prototype.hc;Oe.prototype.Aa=function(t){t^this.b&&(this.b=t,this.dispatchEvent("update"));return this};Oe.prototype.setDisabled=Oe.prototype.Aa;var Pe=new Oe;Oe.SEPARATOR=Pe;function Qe(){if(x.document){var t=document.createElement("canvas");t.width=t.height=1;return t.getContext("2d")}return null}function Re(){return window.devicePixelRatio||1}t("H.util.getPixelRatio",Re);var Se=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Te(t){var e=Ue[t],i=x.RegExp;e||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(t){return t instanceof Number?Array(t):t.map(function(t){return Xd(wd(t),0,255)})}),"none"===t?e=new Uint8ClampedArray([0,0,0,0]):(Ve.fillStyle="black",Ve.fillStyle=t,Se.test(Ve.fillStyle)?e=new Uint8ClampedArray([i.$1,i.$2,i.$3,255*i.$4]):(Ve.clearRect(0,0,1,1),Ve.fillRect(0,0,1,1),e=Ve.getImageData(0,0,1,1).data)),Ue[t]=e);return e}function We(t){return"none"!==t&&0<Te(t)[3]}var Ue=lc(),Xe=!!x.VBArray;t("H.util.eval",function(a){return eval(a)});function Ye(t,e){return t!==B?t:e}function Ze(t){return/^<svg/.test(t)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t):t}t("H.util.provide",function(t){var e=wa.$jscomp;if(e&&("function"!=typeof e.bm?0:e.bm()))throw Error("goog.provide cannot be used within a module.");xa(t,void 0)});function $e(t){this.jc=0<t?td.round(t):0}$e.prototype.next=function(t){if(9007199254740992===this.jc)throw new ie(t,this.jc,[0,9007199254740991]);return this.jc++};var af=new $e,bf=A(af.next,af);function cf(){return!0}function df(){return!1}function hd(){}var ef=nc([]),ff=nc({});function gf(t){return"CANVAS"===t.tagName?[t]:t.getElementsByTagName("CANVAS")}function hf(t,e,i){var r;e=t.ownerDocument===e?t.cloneNode(!0):e.importNode(t,!0);if(i)for(t=gf(t),i=gf(e),r=i.length;r--;)i[r].getContext("2d").drawImage(t[r],0,0);return e}var Ve=Qe(),jf=Qe();function kf(t){var e=t.complete,i=0<t.naturalWidth;if(e&&!i&&Xe)try{jf.drawImage(t,0,0),i=!0}catch(t){}return e&&i}var lf=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function mf(t,e){e=e||"";if(lf){var i=new lf;i.append(t);t=i.getBlob(e)}else t=new Blob([t],{type:e});return t}var nf=x.navigator;$c=/Edge\/\d+/.test(nf.appVersion);ad=/(A|a)ndroid/.test(nf.appVersion);function of(){var t=of.a;t||(t=this,of.a=t,Ec(of.a),F.call(t),pf(this));return t}u(of,F);of.prototype.u=function(){of.l.u.call(this);pf(this)};function pf(t){t.g=10;t.i=6;t.a=lc();t.b=lc();t.c=0}of.prototype.Fg=function(t){t=t.type;var e=this.a[t]||0;if(this.c<this.g&&e<this.i){var i=++this.f;this.c++;this.a[t]=e+1;this.b[i+""]=t;return i}return y};of.prototype.Sg=function(t){var e=this.b[t];if(!sc(e)||!this.a[e])throw new Xc(this.Sg,"Unknown requestId");this.c--;this.a[e]--;this.a[e]||delete this.a[e];delete this.b[t];this.dispatchEvent("allocatable")};of.prototype.f=-1;function qf(t,e,i,r){if(!this.b[t])throw new D(qf,0,"Mime type is not supported");this.g=t;t=r?Ta(r):{};"crossOrigin"in t||(t.crossOrigin="anonymous");this.a=t;rf.href=e.toString();de.call(this,rf.protocol+"//"+rf.hostname,e,i)}u(qf,de);qf.prototype.sj=function(){this.f=this.b[this.g].call(this);return!0};qf.prototype.le=function(){this.f&&(this.f.abort(),this.f=null)};qf.prototype.b={"application/json":function(){var t=this,e=sf(this.a),i=e.headers;e.headers=i=i?Ta(i):{};i.Accept="application/json";return new Rc(this.data,function(e){200<=e.status&&300>e.status?t.resolve(e.json()):t.reject(e)},e)},"text/plain":function(){var t=this;return new Rc(this.data,function(e){200<=e.status&&300>e.status?t.resolve(e.text()):t.reject(e)},sf(this.a))},image:function(){var t=x.document.createElement("img"),e=this,i=this.data;t.onload=A(this.resolve,this,t);t.onerror=function(){e.reject(Nc.error())};t.crossOrigin=this.a.crossOrigin;t.src=i;return{abort:function(){t.onerror=t.onload=null;Xe&&kf(t)||t.removeAttribute("src")}}}};(function(){try{var t=new XMLHttpRequest;t.open("get","/",!0)}catch(e){t={}}"response"in t&&(qf.prototype.b.arraybuffer=function(){var t=new XMLHttpRequest,e=this,i=this.a,r=i.headers,n;t.open("GET",this.data);tf(t,i);t.responseType="arraybuffer";if(r)for(n in r)t.setRequestHeader(n,r[n]);t.onerror=t.ontimeout=function(){e.reject(Nc.error())};t.onload=function(){e.resolve(new Nc(t.response))};t.send();return t})})();var uf=new ge(new of);qf.prototype.hh=function(){return uf};var rf=x.document.createElement("a");function sf(t){var e=Ta(t);delete e.crossOrigin;tf(e,t);return e}function tf(t,e){t.withCredentials="use-credentials"===e.crossOrigin}function I(t,e){this.x=+t;this.y=+e}t("H.math.Point",I);I.prototype.set=I;I.prototype.set=I.prototype.set;I.prototype.clone=function(t){t?(t.x=this.x,t.y=this.y):t=new I(this.x,this.y);return t};I.prototype.clone=I.prototype.clone;I.prototype.add=function(t){this.x+=t.x;this.y+=t.y;return this};I.prototype.add=I.prototype.add;I.prototype.sub=function(t){this.x-=t.x;this.y-=t.y;return this};I.prototype.sub=I.prototype.sub;I.prototype.scale=function(t,e){this.x*=t;this.y*=void 0===e?t:e;return this};I.prototype.scale=I.prototype.scale;I.prototype.round=function(){this.x=wd(this.x);this.y=wd(this.y);return this};I.prototype.round=I.prototype.round;I.prototype.floor=function(){this.x=xd(this.x);this.y=xd(this.y);return this};I.prototype.floor=I.prototype.floor;I.prototype.ceil=function(){this.x=yd(this.x);this.y=yd(this.y);return this};I.prototype.ceil=I.prototype.ceil;I.prototype.la=function(t){return!(!t||this.x!==t.x||this.y!==t.y)};I.prototype.equals=I.prototype.la;I.prototype.zj=function(t,e){var i=e.x-t.x,r=e.y-t.y,n=t;if(i||r){var o=((this.x-t.x)*i+(this.y-t.y)*r)/(i*i+r*r);0>=o?n=t:1<=o?n=e:n=new I(t.x+o*i,t.y+o*r)}return n};I.prototype.getNearest=I.prototype.zj;I.prototype.Ya=function(t){return Bd(Cd(this.x-t.x,2)+Cd(this.y-t.y,2))};I.prototype.distance=I.prototype.Ya;function vf(t){if(!t)throw Error("invalid argument");return t instanceof I?t:new I(t.x,t.y)}I.fromIPoint=vf;function wf(t){var e=xf[t];if(!e)if(t in yf)e=xf[t]=t;else{e=zf.length;var i="",r=t.charAt(0).toUpperCase()+t.substr(1),n="",o=!1;Af&&(n=Af+r,o=n in yf);for(;e--&&!o;)i=zf[e],n=i+r,o=n in yf;o&&(Af=i);if(e=o?n:null)xf[t]=e;else throw Error("Could not find any variant of CSS property ["+t+"]")}return e}t("H.dom.cssPrefixer.prefix",wf);var zf=["O","Ms","ms","Moz","Webkit"],xf={},Af="",yf=document.createElement("span").style;function Bf(t,e,i,r){if(!t||!e||!i)throw new D(Bf,null,"Must specify name, version and revision parameter");this.name=t;this.version=e;this.revision=i;r&&Va(this,r)}t("H.util.BuildInfo",Bf);Bf.prototype.toString=function(){var t,e=[];for(t in this)yc(this[t])&&e.push(this[t]);return e.join(";")};var Cf={};function Df(t,e,i,r){if(!t)throw new D(Df,1,"Must specify a name parameter");return Cf[t]||(Cf[t]=new Bf(t,e,i,r))}Bf.get=Df;function Ef(){Ef.l.constructor.call(this);this.a=Ff(this);this.f=lc();this.c=A(this.c,this);this.a.addEventListener("message",this.c);this.b={}}u(Ef,F);Ef.prototype.u=function(){this.a.terminate()};Ef.prototype.i=function(t){var e=t.type,i=!!this.f[e],r=t.data,n=Gf++,o=r&&r.ro?r.ro:B,a=!0;i?(this.b[n]=t,Hf(this,e,n,r&&r.message,o)):(t.reject(new D(this.i,0,"processor_not_found")),a=!1);return a};Ef.prototype.c=function(t){t=t.data;var e=this.b[t.taskId],i=t.taskId,r=t.data,n=this;if(2===t.type)new qf("arraybuffer",r).then(function(t){return t.arrayBuffer()}).then(function(t){n.a.postMessage(["3",i,[t]],[t])},function(){n.a.postMessage(["3",i,[null,"ERROR"]])});else{if(e){switch(t.type){case 1:e.resolve(r);break;case 0:e.reject(r)}delete this.b[i]}this.dispatchEvent(new qd(this.g.IDLE))}};var Gf=0;function If(t,e,i){var r=Gf++,n;t.b[r]=n=Yb();Hf(t,e,r,i);return n.ei}function Hf(t,e,i,r,n){r===B||Aa(r)||(r=[r]);try{t.a.postMessage([e,i,r],n)}catch(e){t=t.b[i],t.reject(e.message)}}Ef.prototype.g={IDLE:"idle",Qi:"error"};Ef.prototype.j=function(t,e){var i=this.m||(this.m=new qd(this.g.Qi));i.data=e;delete this.f[t];this.dispatchEvent(i)};function Ff(a){var b=x.H.__bootstrap__;b=Ba(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b;if(x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(mf(b,"application/javascript")))}catch(t){}c||(a=new Jf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Kf(a));return c}function Kf(t){F.call(this);this.a=t}u(Kf,F);Kf.prototype.postMessage=function(t){x.setTimeout(A(this.b,this,t),0)};Kf.prototype.b=function(t){var e=new qd("message");e.data=t;this.a.dispatchEvent(e)};Kf.prototype.terminate=function(){this.a.B();this.B()};function Jf(a){F.call(this);this.a=a;this.addEventListener=A(this.addEventListener,this);this.removeEventListener=A(this.removeEventListener,this);this.postMessage=A(this.postMessage,this);this.eval=A(eval,this)}u(Jf,F);Jf.prototype.postMessage=function(t){var e=new qd("message");e.data=t;x.setTimeout(A(this.a.c,this.a,e),0)};function Lf(){var t=Mf;t||(t=Mf=this,F.call(t),Nf(this));return t}var Mf;u(Lf,F);Lf.prototype.u=function(){Lf.l.u.call(this);Nf(this)};function Nf(t){var e=t.b,i;if(e)for(i=e.length;i--;)e[i].B();t.b=[];Ec(t.b);t.c=lc();t.f=lc()}Lf.prototype.Fg=function(t){var e;t=t.type;if(e=this.f[t]){var i=this.b;var r=i[0];r||(r=i[0]=new Ef,this.tb(Ia(pd,r)),Sa(this.c)||(i=x.Object.keys(this.c),If(r,"0",i)));i=r;i.f[t]||(i.f[t]=e,If(i,"1",[t,Ba(e)?e+"":e]).then(hd,A(i.j,i,t)))}else throw new Xc(this.Fg,'Unknown type "'+t+'"');return r};Lf.prototype.Sg=function(){};Lf.prototype.a=function(t,e){var i=this.f,r=i[t];if(r){if(e!==r)throw new Xc(this.a,'Type "'+t+'" is already registered')}else i[t]=e};function Pf(t,e,i){de.call(this,t,e,i)}var Qf;u(Pf,de);Pf.prototype.hh=function(){Qf||(Qf=new ge(new Lf));return Qf};Pf.prototype.le=function(){};Pf.prototype.sj=function(t){return t.i(this)};function Rf(t,e,i){var r=Xd(+t,-90,90);if(e&&E(r))throw new D(e,i,t);return r}function Sf(t,e,i){var r=+t;if(-180>r||180<r)r=Vd(r+180,360)-180;if(e&&E(r))throw new D(e,i,t);return r}function Tf(t,e,i){var r;if(t!==B&&E(r=+t)&&e)throw new D(e,i,t);return r}function Uf(t,e){return 0!==(0>t^0>e)&&180<zd(e-t)}t("H.geo.isDBC",Uf);function Vf(){tc(this,Vf)}t("H.geo.AbstractGeometry",Vf);Vf.prototype.getBoundingBox=Vf.prototype.F;Vf.prototype.equals=Vf.prototype.la;Vf.prototype.lb="";Vf.prototype.Jb="";Vf.prototype.toString=function(){return this.Lc([this.lb.toUpperCase()," "]).join("")};Vf.prototype.toString=Vf.prototype.toString;Vf.prototype.Kc=function(){return{type:this.Jb,coordinates:this.$c()}};Vf.prototype.toGeoJSON=Vf.prototype.Kc;Vf.prototype.V=function(){return{type:this.lb,coordinates:this.rc(),boundingBox:this.F().V()}};Vf.prototype.forWorkerMessage=Vf.prototype.V;function Wf(t,e,i){this.lat=Rf(t,Wf,0);this.lng=Sf(e,Wf,1);i!==B&&(this.alt=Tf(i,Wf,2))}u(Wf,Vf);t("H.geo.Point",Wf);Wf.prototype.la=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)};Wf.prototype.equals=Wf.prototype.la;Wf.prototype.Ya=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*Qd;var i=t.lat*Qd;t=12742001.58*Fd(ud(1,Bd(Cd(Ed((e-i)/2),2)+Gd(e)*Gd(i)*Cd(Ed((this.lng*Qd-t.lng*Qd)/2),2))))}return t};Wf.prototype.distance=Wf.prototype.Ya;Wf.prototype.tg=function(t,e,i){if(i){if(e/=6371000.79){t*=Qd;var r=Qd*this.lat;var n=Ed(r);var o=Ed(e);var a=Gd(e);var s=Qd*this.lng;var l=Gd(r);r=Fd(l*Gd(t)*o+n*a);t=Jd(Ed(t)*l*o,a-n*Ed(r));t=(s+t+Ld)%(2*Ld)-Ld;l=t*Rd}return e?new Wf(r*Rd,(l+540)%360-180):this}t=(t%360+360)%360;if(0===(t+90)%180)return r=this.lng+e/(6371000.79*Od*Gd(this.lat*Qd))*(270===t?-360:360),new Wf(this.lat,(r+540)%360-180);if(e/=6371000.79){t*=Qd;s=this.lat*Qd;n=this.lng*Qd;o=s+e*Gd(t);a=o-s;r=Ad(Hd(o/2+Nd)/Hd(s/2+Nd));r=E(a/r)?Gd(s):a/r;var u=e*Ed(t)/r;zd(o)>Md&&(o=0<o?Ld-o:-(Ld+o))}return e?new Wf(o*Rd,((n+u+Pd+(zd(s+a)>Md?Ld:0))%Od-Ld)*Rd):this};Wf.prototype.walk=Wf.prototype.tg;Wf.prototype.F=function(){return new K(this.lat,this.lng,this.lat,this.lng)};Wf.prototype.getBoundingBox=Wf.prototype.F;function Xf(t,e,i){var r=Ca(t)&&!(E(t.lat=Rf(t.lat))||E(t.lng=Sf(t.lng))||t.alt!==B&&E(t.alt=Tf(t.alt)));if(!r&&e)throw new D(e,i,t);return r}Wf.validate=Xf;function Yf(t){if(!t)throw new D(Yf,0,t);return new Wf(t.lat,t.lng,t.alt)}Wf.fromIPoint=Yf;n=Wf.prototype;n.lb="Point";n.Lc=function(t){t.push("(",this.lng," ",this.lat,")");return t};n.Jb="Point";n.$c=function(){return[this.lng,this.lat,this.alt||0]};n.rc=function(){return[this.lat,this.lng,this.alt||0]};function K(t,e,i,r){Zf(this,Rf(t,K,0),Sf(e,K,1),Rf(i,K,2),Sf(r,K,3))}u(K,Vf);t("H.geo.Rect",K);K.prototype.lb="Polygon";K.prototype.Lc=function(t){var e=this.ha,i=this.aa,r=this.ka,n=this.da;t.push("(","(",i," ",e,",",n," ",e,",",n," ",r,",",i," ",r,",",i," ",e,")",")");return t};K.prototype.la=function(t){return this===t||!!t&&this.ha===t.ha&&this.aa===t.aa&&this.ka===t.ka&&this.da===t.da};K.prototype.equals=K.prototype.la;K.prototype.clone=function(){return new K(this.ha,this.aa,this.ka,this.da)};K.prototype.clone=K.prototype.clone;function Zf(t,e,i,r,n){t.aa=i;t.da=n;e<r&&(i=e,e=r,r=i);t.ha=e;t.ka=r;t.c=t.a=t.b=null;return t}K.prototype.Ob=function(){this.c||(this.c=new Wf(this.ha,this.aa));return this.c};K.prototype.getTopLeft=K.prototype.Ob;K.prototype.Lb=function(){this.a||(this.a=new Wf(this.ka,this.da));return this.a};K.prototype.getBottomRight=K.prototype.Lb;K.prototype.Xm=function(){return this.ha};K.prototype.getTop=K.prototype.Xm;K.prototype.Xl=function(){return this.ka};K.prototype.getBottom=K.prototype.Xl;K.prototype.xm=function(){return this.aa};K.prototype.getLeft=K.prototype.xm;K.prototype.Rm=function(){return this.da};K.prototype.getRight=K.prototype.Rm;K.prototype.jb=function(){this.b||(this.b=new Wf(this.ka+(this.ha-this.ka)/2,$f(this.aa,this.Ab())));return this.b};K.prototype.getCenter=K.prototype.jb;K.prototype.Ab=function(){return ag(this.aa,this.da)};K.prototype.getWidth=K.prototype.Ab;K.prototype.Ld=function(){return this.ha-this.ka};K.prototype.getHeight=K.prototype.Ld;K.prototype.Bb=function(){return this.aa>this.da};K.prototype.isCDB=K.prototype.Bb;K.prototype.Rf=function(){return!this.Ab()&&!this.Ld()};K.prototype.isEmpty=K.prototype.Rf;K.prototype.F=function(){return new K(this.ha,this.aa,this.ka,this.da)};K.prototype.getBoundingBox=K.prototype.F;K.prototype.wf=function(t,e,i){var r=this.jb();i||(t=Rf(t,this.wf,0),e=Sf(e,this.wf,1));e=this.Wc(t,e,i);t=e.jb();return t.lat===r.lat&&t.lng===r.lng&&this.Ld()===e.Ld()&&this.Ab()===e.Ab()};K.prototype.containsLatLng=K.prototype.wf;K.prototype.Cd=function(t,e){e||Xf(t,this.Cd,0);return this.wf(t.lat,t.lng,e)};K.prototype.containsPoint=K.prototype.Cd;K.prototype.Mg=function(t,e){var i=this.jb();if(!e&&!C(t,K))throw new D(this.Mg,0,t);e=this.ic(t,e);t=e.jb();return t.lat===i.lat&&t.lng===i.lng&&this.Ld()===e.Ld()&&this.Ab()===e.Ab()};K.prototype.containsRect=K.prototype.Mg;K.prototype.Wc=function(t,e,i,r){if(!i){if(E(t=Rf(t)))throw new D(this.Wc,0,t);if(E(e=Sf(e)))throw new D(this.Wc,1,e)}return bg(this.ha,this.aa,this.ka,this.da,t,e,t,e,r)};K.prototype.mergeLatLng=K.prototype.Wc;K.prototype.jk=function(t,e,i){e||Xf(t,this.jk,0);return this.Wc(t.lat,t.lng,e,i)};K.prototype.mergePoint=K.prototype.jk;K.prototype.ic=function(t,e,i){if(!e&&!C(t,K))throw new D(this.ic,0,t);return bg(this.ha,this.aa,this.ka,this.da,t.ha,t.aa,t.ka,t.da,i)};K.prototype.mergeRect=K.prototype.ic;K.prototype.Ac=function(t,e,i,r,n,o){n||(t=Rf(t,this.Ac,0),e=Sf(e,this.Ac,1),i=Rf(i,this.Ac,2),r=Sf(r,this.Ac,3));return bg(this.ha,this.aa,this.ka,this.da,t,e,i,r,o)};K.prototype.mergeTopLeftBottomRight=K.prototype.Ac;K.prototype.ld=function(t,e){var i=this.aa<=this.da,r=t.aa<=t.da,n=this.aa<t.da,o=t.aa<this.da;if(!e&&!C(t,K))throw new D(this.ld,0,t);return this.ka<=t.ha&&t.ka<=this.ha&&(!i&&(!r||n||o)||!r&&(n||o)||n&&o)};K.prototype.intersects=K.prototype.ld;function ag(t,e){t=e-t;return t+(0>t?360:0)}function $f(t,e){t+=e/2;return t-(180<t?360:0)}function bg(t,e,i,r,n,o,a,s,l){i=ud(i,a);t=vd(t,n);n=ag(e,r);var u=$f(e,n);a=ag(o,s);var c=$f(o,a)-u;c+=0>c-1e-6?360:0;if(180>c-1e-6){u=e;var h=s}else c=360-c,u=o,h=r;c=c+n/2+a/2;360<=c+5e-7?(u=-180,h=180):c-5e-7<n?(u=e,h=r):c-5e-7<a&&(u=o,h=s);return l?Zf(l,t,u,i,h):new K(t,u,i,h)}K.merge=bg;function cg(t,e,i){i||(Xf(t,cg,0),Xf(e,cg,1));return new K(t.lat,t.lng,e.lat,e.lng)}K.fromPoints=cg;function dg(t,e){var i=1,r=t.length,n=null;if(!Aa(t))throw new D(dg,0,t);if(0<r){var o=t[0];for(n=cg(o,o,e);i<r;i++)o=t[i],n.Wc(o.lat,o.lng,e,n)}return n}K.coverPoints=dg;function eg(t,e){var i=3,r=t.length,n;if(!(e||t&&null!=t.length))throw new D(eg,0,t);if(0<r)for(n=new K(t[0],t[1],t[0],t[1]);i<r;i+=3)n.Wc(t[i],t[i+1],e,n);return n}K.coverLatLngAlts=eg;function fg(t,e){var i=1,r=t.length,n;if(e&&(!t||null==t.length))throw new D(fg,0,t);if(0<r)for(n=new K(t[0].ha,t[0].aa,t[0].ka,t[0].da);i<r;i++)n.ic(t[i],e,n);return n}K.coverRects=fg;K.prototype.Fk=function(t,e){var i=this.aa,r=this.ha,n=this.da,o=this.ka,a=this.jb().lng;Xf(t,this.Fk,0);var s=t.lat-o-(r-o)/2;var l=t.lng-a;l=180<l||-180>l?-(a+t.lng):l;t=i+(0>l?2*l:0);t=-180>t?360+t:t;n+=0<l?2*l:0;n=180<n?n-360:n;r=0<s?r+2*s:r;90<=r&&(r=90);o=0>s?o+2*s:o;-90>=o&&(o=-90);return e?Zf(e,r,t,o,n):new K(r,t,o,n)};K.prototype.resizeToCenter=K.prototype.Fk;K.prototype.Jb="Polygon";K.prototype.$c=function(){return[[this.aa,this.ha,0],[this.da,this.ha,0],[this.da,this.ka,0],[this.aa,this.ka,0],[this.aa,this.ha,0]]};K.prototype.V=function(){return this.rc()};K.prototype.rc=function(){return[this.ha,this.aa,this.ka,this.da]};function gg(t,e,i,r,n,o){tc(this,gg);this.c=t||10;this.b=this.a=null;this.f=r||0;this.g=n||0;this.i=e||1;this.j=i||1;this.o=!!o;this.flush()}function hg(t){var e=t.b;if(t.o&&!e){var i=t.head;if(i.entries||i[0]||i[1]||i[2]||i[3])e=[i],e=ig([e,e,e,e],[i[6],i[7],i[4],i[5]]),t.b=e}return e}function ig(t,e){var i,r,n,o,a=0;for(i=3;0<=i;i--){var s=i+4;var l=0<i%3;var u=[];var c=e[i];var h=t[i];for(r=h.length;r--;){var f=h[r];if(n=f.entries)for(o=n.length;o--;){var p=n[o].hd(i);if(l?p>c:p<c)c=p}for(o=4;o--;)(n=f[o])&&(l?n[s]>c:n[s]<c)&&u.push(n)}a+=u.length;e[i]=c;t[i]=u}a&&(e=ig(t,e));return e}function jg(t,e,i){var r,n;if(t.o&&(r=t.b))for(n=3;0<=n;n--){var o=e.hd(n);if(n%3?o>=r[n]:o<=r[n])if(i)r[n]=o;else{t.b=null;break}}}gg.prototype.remove=function(t){var e,i,r,n=!1;t&&(e=t.node)&&e.b===this&&(i=e.entries)&&0<=(r=i.indexOf(t))&&(i.splice(r,1),this.m(e),jg(this,t,!1),n=!0);return n};gg.prototype.flush=function(){var t=new kg(null,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);t.b=this;this.head=this.a=t;this.b=null};function lg(t,e){var i=t.head,r;if(e){var n=e;if(n!==i)for(i=n;n=n.parent;)if(n.entries||1<n.a)i=n}else for(;!i.entries&&2>(r=i.a);)if(r)i=n;else break;t.head=i}gg.prototype.$a=function(t,e,i,r,n,o){var a=[],s=this.head,l=this.a;t<=s[5]&&e<=s[6]&&(n?i>=s[7]:i>s[7])&&(o?r>=s[4]:r>s[4])&&mg(this,s,a,t,e,i,r,o||r>=l[6],n||i>=l[5]);return a};function mg(t,e,i,r,n,o,a,s,l){var u=e.entries,c=e[7],h=e[4],f=e[5],p=e[6],d=e[8],y=e[9],g;if(u){var v=u.length;if(n>h||r>c||a<p||o<f)for(;v--;){c=u[v];h=c.hd(3);f=c.hd(0);p=c.hd(1);var _=c.hd(2);_>=n&&p>=r&&(f<a||s&&f==a)&&(h<o||l&&h==o)&&i.push(c)}else for(;v--;)i.push(u[v])}if(o>d||l&&o==d)n<y&&(g=e[1])&&mg(t,g,i,r,n,o,a,s,l),(a>y||s&&a==y)&&(g=e[3])&&mg(t,g,i,r,n,o,a,s,l);r<d&&(n<y&&(g=e[0])&&mg(t,g,i,r,n,o,a,s,l),(a>y||s&&a==y)&&(g=e[2])&&mg(t,g,i,r,n,o,a,s,l))}gg.prototype.Mc=ba(1);var ng=0;function kg(t,e,i,r,n,o){this.c=e;t&&(this.parent=t,this.b=t.b,e&1?(i=t[8],n=t[5]):(i=t[7],n=t[8]),e&2?(r=t[9],o=t[6]):(r=t[4],o=t[9]));this[7]=i;this[5]=n;this[8]=(i+n)/2;this[4]=r;this[6]=o;this[9]=(r+o)/2}kg.prototype.a=0;function og(t,e){return t[e]||(++t.a,t[e]=new kg(t,e))}kg.prototype.removeChild=function(t){var e=t.c;this[e]===t&&(delete this[e],delete t.parent,--this.a)};kg.prototype.Mc=ba(0);function pg(t,e){(t.entries||(t.entries=[])).push(e);e.node=t}function qg(t,e,i,r,n){var o=t[5],a=t[6];return t[7]<=e&&t[4]<=i&&(o>r||o===r&&o===t.b.a[5])&&(a>n||a===n&&a===t.b.a[6])}function rg(t,e,i,r,n,o){rg.l.constructor.apply(this,arguments)}u(rg,gg);rg.prototype.m=function(t){for(var e,i,r=this.head;t;){if(!(e=t.entries)||!e.length)if(e&&delete t.entries,!t.a&&(i=t.parent)){i.removeChild(t);r===t&&(r=i);t=i;continue}t=y}this.head!==r&&(this.head=r,lg(this))};function sg(t,e,i,r,n){if(qg(t.a,e,i,r,n))return tg(t,t.a,e,i,r,n,t.c);throw Error("Coordinates out of bounds")}rg.prototype.yc=function(t,e){return sg(this,t,e,t,e)};function tg(t,e,i,r,n,o,a){var s=e[8],l=e[9],u,c;a&&(n<s||(u=i>=s))&&(o<l||(c=r>=l))?i=tg(t,og(e,u|c<<1),i,r,n,o,a-1):(pg(e,i=new ug(i,r,n,o)),jg(t,i,!0),lg(t,e));return i}function ug(t,e,i,r){this.id=ng++;this[0]=e;this[1]=i;this[2]=r;this[3]=t}ug.prototype.hd=function(t){return this[t]};function vg(t){this.f=new rg(+t||10,180,90,0,0,!0);this.c=[];this.g=!1;this.a=this.b=this.L=null}t("H.geo.QuadTree",vg);n=vg.prototype;n.Gh=0;n.Tc=function(){return this.Gh};n.Bb=function(){return this.g};n.F=function(){var t,e;if(!this.L){var i=[];!this.b&&(t=hg(this.f))&&(this.b=new K(-t[0],t[3],-t[2],t[1]));(e=this.b)&&i.push(e);var r,n,o;if(!this.a&&(o=(n=this.c).length)){t=90;var a=360;var s=-90;for(r=0;o--;){var l=n[o];t=ud(t,l[0]);a=ud(a,l[3]);s=vd(s,l[2]);r=vd(r,l[1])}this.a=new K(-t,a,-s,r-360)}(e=this.a)&&i.push(e);if(e=i[0])i[1]&&(e=e.ic(i[1],!0)),this.L=e}return this.L};function wg(t,e,i,r,n,o){o?(o=new ug(n,-e,i+360,-r),t.c.push(o),t.g=!0,t.a&&t.a.Ac(e,i,r,n,!0,t.a)):(o=sg(t.f,i,-e,n,-r),t.b&&t.b.Ac(e,i,r,n,!0,t.b));++t.Gh;t.L=null;return o}n.yc=function(t){var e=t.lng;t=t.lat;return wg(this,t,e,t,e,!1)};n.Oj=function(t){var e=t.Ob(),i=t.Lb();return(t=t.Bb())?wg(this,e.lat,i.lng,i.lat,e.lng,t):wg(this,e.lat,e.lng,i.lat,i.lng,t)};vg.prototype.insertBoundingBox=vg.prototype.Oj;vg.prototype.remove=function(t){var e;if(t.node){var i=this.f.remove(t);this.b=null}else if(t=(e=this.c).indexOf(t),i=0<=t)e.splice(t,1),this.g=0<e.length,this.a=null;i&&(--this.Gh,this.L=null);return i};vg.prototype.remove=vg.prototype.remove;function xg(t,e,i,r,n,o,a){t=t.c;var s=t.length,l=[],u;if(s){var c=i+360;for(u=n+360;s--;){var h=t[s];yg(h,e,i,r,n,o,a)?l.push(h):yg(h,e,c,r,u,o,a)&&l.push(h)}}return l}function yg(t,e,i,r,n,o,a){var s=t[3],l=t[0],u=t[1];t=t[2];return(o?l<=r:l<r)&&(a?s<=n:s<n)&&t>=e&&u>=i}function zg(t,e){var i,r,n;if(i=e.length){var o=t.length;for(r={};o--;)r[t[o].id]=1;for(;i--;)(n=e[i]).id in r||t.push(n)}}vg.prototype.Qf=function(t,e,i){var r=this.f,n=t.Ob(),o=t.Lb(),a=-n.lat;n=n.lng;var s=-o.lat;o=o.lng;!e&&a===s||!i&&n===o?t=[]:t.Bb()?(t=r.$a(-180,a,o,s,i,e),zg(t,r.$a(n,a,180,s,!1,e)),zg(t,xg(this,a,o,s,n+360,e,i))):(t=r.$a(n,a,o,s,i,e),zg(t,xg(this,a,n,s,o,e,i)));return t};vg.prototype.intersectBoundingBox=vg.prototype.Qf;function Ag(t){return x.H.gl.flexpolyline.encode(t)}t("H.util.flexiblePolyline.encode",Ag);function Bg(t){return x.H.gl.flexpolyline.decode(t)}t("H.util.flexiblePolyline.decode",Bg);function L(t){L.l.constructor.call(this);t&&Cg(t,L,0);this.W=t||[];this.a=Dg(this,0,this.W.length)}u(L,Vf);t("H.geo.LineString",L);function Dg(t,e,i){t=t.W;var r=0;e=vd(e,0);i=ud(i,t.length);i-=2;for(e+=1;e<i;)r+=Uf(t[e],t[e+=3]);return r}L.prototype.ii=function(t,e,i){Eg(this,t,e,i,this.ii)};L.prototype.pushLatLngAlt=L.prototype.ii;function Eg(t,e,i,r,n){var o=t.W.length;e=Rf(e,n);i=Sf(i,n);t.W.push(Rf(e,n),Sf(i,n),r===B?0:Tf(r,n));o&&(t.a+=Uf(t.W[o-2],i));delete t.L;delete t.b}L.prototype.hf=function(t,e,i){i&&Cg(i,this.hf,2);void 0===e&&(e=this.W.length);e&&(this.a-=Dg(this,t-3,t+e+3));var r=i?this.W.splice.apply(this.W,[t,e].concat(i)):this.W.splice(t,e);i&&(this.a+=Dg(this,t-3,t+i.length+3));e&&!i&&(this.a+=Dg(this,t-3,t-3));delete this.L;delete this.b;return r};L.prototype.spliceLatLngAlts=L.prototype.hf;L.prototype.Pj=function(t,e,i,r){this.hf(t,0,[e,i,r])};L.prototype.insertLatLngAlt=L.prototype.Pj;L.prototype.Bk=function(t){this.hf(t,3)};L.prototype.removeLatLngAlt=L.prototype.Bk;L.prototype.pd=function(t){Eg(this,t.lat,t.lng,t.alt,this.pd)};L.prototype.pushPoint=L.prototype.pd;L.prototype.yc=function(t,e){this.Pj(3*t,e.lat,e.lng,e.alt)};L.prototype.insertPoint=L.prototype.yc;L.prototype.Ue=function(t){this.Bk(3*t)};L.prototype.removePoint=L.prototype.Ue;L.prototype.qe=function(t,e){var i=this.W,r=3*t;t=i[r];var n=i[r+1];i=i[r+2];e&&(e.lat=t,e.lng=n,e.alt=i);return e||new Wf(t,n,i)};L.prototype.extractPoint=L.prototype.qe;L.prototype.Ll=function(t,e,i){var r=this.W;e=e||0;i=Ye(i,r.length/3);for(var n=3*e;e<i;)t(r[n++],r[n++],r[n++],e++)};L.prototype.eachLatLngAlt=L.prototype.Ll;L.isDBC=Uf;L.prototype.eh=function(t){var e=this.a;t&&(t=this.W,e+=Uf(t[t.length-2],t[1]));return e};L.prototype.getDBCs=L.prototype.eh;L.prototype.Ce=function(){return this.W.length/3};L.prototype.getPointCount=L.prototype.Ce;L.prototype.vm=function(){return this.W};L.prototype.getLatLngAltArray=L.prototype.vm;L.prototype.L=y;L.prototype.F=function(){var t;if(!(t=this.L)){t=this.W;var e=t.length,i=3,r,n,o=y;if(3<=e){var a=r=t[0];var s=n=t[1];for(o=new K(a,s,r,n);i<e;i+=3){a=t[i-3];s=t[i-2];r=t[i];n=t[i+1];if(s>n&&180<n-s||s<n&&-180>s-n||n<s&&180>zd(n-s)){var l=s;s=n;n=l}a<r&&(l=a,a=r,r=l);bg(o.ha,o.aa,o.ka,o.da,a,s,r,n,o)}}t=this.L=o}return t};L.prototype.getBoundingBox=L.prototype.F;L.prototype.fn=function(){return this.L!==y};L.prototype.hasBoundingBox=L.prototype.fn;function Cg(t,e,i){for(var r=t.length,n=!(r%3),o;n&&r;)n=!(E(t[--r]=Tf((o=t[r])===B?0:o))||E(t[--r]=Sf(t[r]))||E(t[--r]=Rf(t[r])));if(!n&&e)throw new D(e,i,t)}function Fg(t){var e=new L,i=0,r=t.length;if(r%2)throw new D(Fg,0,t);for(;i<r;)Eg(e,t[i++],t[i++],0,Fg);return e}L.fromLatLngArray=Fg;L.prototype.la=function(t){var e=this===t,i;if(!e&&(e=C(t,L))){var r=this.W;t=t.W;for(e=(i=r.length)===t.length;e&&i--;)e=r[i]==t[i]}return e};L.prototype.equals=L.prototype.la;function Gg(t,e){return t.a-e.a}function Hg(t,e){var i=t.W,r=-2,n=[],o;var a=t.b;if(!a){a=t.b=new vg;var s=0;var l=t.W;var u=l.length;for(o=0;o<u;o+=3){var c=l[o];var h=l[o+1];if(o){if(p<h){var f=p;var p=h}else f=h;if(y<c)var d=c;else{d=y;var y=c}f=wg(a,d,f,y,p,180<p-f);f.a=s++}y=c;p=h}}a=a.Qf(e).sort(Gg);l=a.length;for(e=0;e<l;e++){s=a[e];s=s.a;u=3*s;if(s>r+1){var g=[i[u],i[u+1]];n.push(g)}r=s;g.push(i[u+3],i[u+4])}if(t.a){i=[];r=n.length;for(e=0;e<r;e++)if(g=n[e],a=g.length){l=[];for(t=0;t<a;t+=2)s=g[t],u=g[t+1],l.push(s,u),o=g[t-1],t&&Uf(u,o)&&(i.push(l),l=[],o+=0>o?360:-360,l.push(g[t-2],o,s,u));i.push(l)}n=i}return n}n=L.prototype;n.lb="LineString";n.Lc=function(t,e){var i=this.W,r=i.length,n;if(r){t.push("(");for(n=0;n<r;n+=3)n&&t.push(","),t.push(i[n+1]," ",i[n]);e&&(i[0]!==i[r-3]||i[1]!==i[r-2])&&t.push(",",i[1]," ",i[0]);t.push(")")}else t.push("EMPTY");return t};n.Jb="LineString";n.$c=function(){var t=[],e=this.W,i=e.length,r;for(r=0;r<i;r+=3)t.push([e[r+1],e[r],e[r+2]]);return t};n.rc=function(){var t=this.W,e;if(this.F().Bb()){t=t.slice();var i=1;for(e=t.length;i<e;i+=3)0>t[i]&&(t[i]+=360)}return t};n.po=function(t){t=void 0===t?5:t;for(var e=this.W,i=e.length,r=[],n=0;n<i;n+=3)r.push([e[n],e[n+1],e[n+2]]);return Ag({polyline:r,precision:t,thirdDim:2,thirdDimPrecision:t})};L.prototype.toFlexiblePolyline=L.prototype.po;function Ig(t){var e=Bg(t);t=e.polyline;var i=e.thirdDim;e=2===i;i=0===i;if(!t)throw new D(Ig,0,"data");if(e||i){i=t.length;var r=Array(3*i);for(var n=0,o=0;n<i;n++)r[o++]=t[n][0],r[o++]=t[n][1],r[o++]=e?t[n][2]:0}if(!r)throw new D(Ig,0,"only ALTITUDE and ABSENT dimension types are supported");return new L(r)}L.fromFlexiblePolyline=Ig;function Jg(t){Jg.l.constructor.call(this);void 0!==t&&(this.data=t)}u(Jg,F);t("H.map.Feature",Jg);Jg.prototype.getData=function(){return this.data};Jg.prototype.getData=Jg.prototype.getData;Jg.prototype.u=function(){Jg.l.u.call(this);delete this.data};function Kg(){}t("H.map.provider.Invalidations",Kg);Kg.MARK_INITIAL=Td;Kg.prototype.update=function(t,e){e!==Lg.NONE&&(this.a=t,e&Lg.SPATIAL&&(this.f=t),e&Lg.VISUAL&&(this.g=t),e&Lg.ADD&&(this.b=t),e&Lg.REMOVE&&(this.c=t),e&Lg.Z_ORDER&&(this.j=t),e&Lg.VOLATILITY&&(this.i=t))};Kg.prototype.update=Kg.prototype.update;Kg.prototype.Bm=function(){return this.a};Kg.prototype.getMark=Kg.prototype.Bm;Kg.prototype.a=Td;Kg.prototype.kn=function(t){return this.a>t};Kg.prototype.isAny=Kg.prototype.kn;Kg.prototype.g=Td;Kg.prototype.Ud=function(t){return this.g>t};Kg.prototype.isVisual=Kg.prototype.Ud;Kg.prototype.f=Td;Kg.prototype.zh=function(t){return this.f>t};Kg.prototype.isSpatial=Kg.prototype.zh;Kg.prototype.b=Td;Kg.prototype.Qj=function(t){return this.b>t};Kg.prototype.isAdd=Kg.prototype.Qj;Kg.prototype.c=Td;Kg.prototype.Sf=function(t){return this.c>t};Kg.prototype.isRemove=Kg.prototype.Sf;Kg.prototype.j=Td;Kg.prototype.Ah=function(t){return this.j>t};Kg.prototype.isZOrder=Kg.prototype.Ah;Kg.prototype.i=Td;Kg.prototype.on=function(t){return this.i>t};Kg.prototype.isVolatility=Kg.prototype.on;var Lg={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};Kg.Flag=Lg;function Mg(t,e,i){Mg.l.constructor.call(this,t);this.oldValue=i;this.newValue=e}u(Mg,qd);t("H.util.ChangeEvent",Mg);function M(t){tc(this,M);M.l.constructor.call(this,t?t.data:B);this.K=Ng.next();if(t){var e="min";Bc(t[e])&&(this.s=t[e]);e="max";Bc(t[e])&&(this.v=t[e]);e="visibility";e in t&&(this.c=!!t[e]);e="volatility";e in t&&(this.G=!!t[e]);e="zIndex";e in t&&(this.o=+t[e]||0);e="provider";e in t&&!C(t[e],N)&&(this.a=t[e],this.ta(Lg.ADD))}}u(M,Jg);t("H.map.Object",M);var Ng=new $e(1),Og={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};M.Type=Og;M.prototype.cb=function(){return this.K};M.prototype.getId=M.prototype.cb;M.prototype.zi=function(t){if(!Bc(t)&&!yc(t))throw new D(this.zi,0,"id must be a number or a string");this.m=t;return this};M.prototype.setRemoteId=M.prototype.zi;M.prototype.Qm=function(){return this.m};M.prototype.getRemoteId=M.prototype.Qm;M.prototype.s=-1/0;M.prototype.v=1/0;M.prototype.Cm=function(){return this.v};M.prototype.getMax=M.prototype.Cm;M.prototype.Em=function(){return this.s};M.prototype.getMin=M.prototype.Em;M.prototype.c=!0;M.prototype.sb=function(t){var e=this.c;(t=!!t)^e&&(this.c=t,this.invalidate(Lg.VISUAL));return this};M.prototype.setVisibility=M.prototype.sb;M.prototype.wc=function(t){for(var e=this,i;(i=e.c)&&t&&(e=e.Va););return i};M.prototype.getVisibility=M.prototype.wc;M.prototype.G=!1;M.prototype.Nf=function(t){for(var e=this,i;!(i=e.G)&&t&&(e=e.Va););return i};M.prototype.getVolatility=M.prototype.Nf;M.prototype.Xk=function(t){var e=this.G;e^t&&(this.G=!e,this.invalidate(Lg.VOLATILITY));return this};M.prototype.setVolatility=M.prototype.Xk;M.prototype.o=B;M.prototype.Gj=function(){return this.o};M.prototype.getZIndex=M.prototype.Gj;M.prototype.ef=function(t){t!==this.o&&(this.Xe(),this.o=t,this.invalidate(Lg.Z_ORDER));return this};M.prototype.setZIndex=M.prototype.ef;M.prototype.D=B;function Pg(t){var e=t.D,i,r;if(!e){var n=(i=t.o)!==B;(e=t.Va)?(e=Pg(e).slice(),e[0]|=n):e=[n|0];e.push(i||0,0>(r=t.Ci)?t.K:r);t.D=e}return e}M.prototype.Xe=function(){this.D=B};function Qg(t,e,i){var r,n;if(!i||t[0]|e[0]){var o=t.length;var a=e.length;var s=ud(o,a);var l=1;for(n=1+i;l<s;l+=n)if(r=t[l]-e[l])return r}return i?0:o-a}function Rg(t,e){return t.ej(e)}M.compareZOrder=Rg;M.prototype.ej=function(t){return this.ug-t.ug||Qg(Pg(this),Pg(t),!1)};M.prototype.compareZOrder=M.prototype.ej;n=M.prototype;n.previousSibling=y;n.nextSibling=y;n.Ci=-1;n.Va=y;n.Gm=function(){return this.Va};M.prototype.getParentGroup=M.prototype.Gm;M.prototype.fc=function(){for(var t=this,e;e=t.Va;)t=e;return t};M.prototype.getRootGroup=M.prototype.fc;M.prototype.contains=function(t){return this===t};M.prototype.contains=M.prototype.contains;M.prototype.ga=function(t){if(this.Va)throw new Xc(this.ga,"Not allowed for a child of a group");M.l.ga.call(this,t)};M.prototype.setParentEventTarget=M.prototype.ga;M.prototype.a=y;M.prototype.na=function(){return this.a};M.prototype.getProvider=M.prototype.na;M.prototype.be=function(t,e){var i=this.a,r;if(r=i!==t){if(e&&(i&&!C(i,N)||t&&!C(t,N)))throw new Xc(e,"Only LocalObjectProvider allows an object transfers");e=this.type!==Og.GROUP;i&&(this.invalidate(Lg.REMOVE),e&&i.Ga(this));if(this.a=t)e&&t.ca(this),this.ja=y,this.invalidate(Lg.ADD)}return r};M.prototype.Nb=function(){return this.ja||(this.ja=new Kg)};M.prototype.getInvalidations=M.prototype.Nb;M.prototype.ta=function(t){var e=this.na(),i;(i=!!e)&&e.invalidateObject(this,t);return i};M.prototype.invalidate=M.prototype.ta;M.prototype.u=function(){this.Va&&this.Va.Ga(this);M.l.u.call(this)};M.prototype.setData=function(t){this.data=t;return this};M.prototype.setData=M.prototype.setData;M.prototype.Kc=function(t){if(t&&!Ba(t))throw new D(M.prototype.Kc,0,"opt_callback must be a function");t={type:"Feature",properties:Sg(this,t?t(this.data):this.data,!!t),geometry:this.$().Kc()};this.m&&(t.id=this.m);return t};M.prototype.toGeoJSON=M.prototype.Kc;function Sg(t,e,i){if(null===e||e===B)return null;if(0<=Object.keys(e).length&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(Tg(t,i));try{return JSON.stringify(e),e}catch(e){throw Error(Tg(t,i))}}function Tg(t,e){return"Object Remote-Id: "+t.m+" - "+(e?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}M.prototype.V=function(){return{id:this.K,properties:{min:this.s,max:this.v,zIdx:this.o,sIdx:this.Ci,parent:this.Va?this.Va.cb():0,visible:this.wc(),volatile:this.Nf()},type:"Feature"}};M.prototype.forWorkerMessage=M.prototype.V;function Ug(t){var e;if(t){var i=Vg;for(e=C(t,Ug);i--;){var r=Wg[i];if(t.hasOwnProperty(r)){var n=t[r];if(e)this[r]=n;else{if((n=Xg[i](n))===Yg)throw new D(Ug,0,r+": "+t[r]);n!==this[r]&&n!==B&&(this[r]=n)}}}i=e?t.Ge:this.lineWidth&&We(this.strokeColor);i||(this.Ge=i);i=e?t.Pb:We(this.fillColor);i||(this.Pb=i);i=e?t.Fe:"none"!==this.strokeColor&&this.lineWidth;i||(this.Fe=i)}nc(this)}t("H.map.SpatialStyle",Ug);Ug.prototype.Pb=!0;Ug.prototype.Ge=!0;Ug.prototype.Fe=!0;var Wg=[];Ug.prototype[Wg[0]="strokeColor"]="rgba(0,85,170,.6)";Ug.prototype[Wg[1]="fillColor"]="rgba(0,85,170,.4)";Ug.prototype[Wg[2]="lineWidth"]=2;Ug.prototype[Wg[3]="lineCap"]="round";Ug.prototype[Wg[4]="lineJoin"]="miter";Ug.prototype[Wg[5]="miterLimit"]=1;Ug.prototype[Wg[6]="lineDash"]=ef;Ug.prototype[Wg[7]="lineDashOffset"]=0;Ug.prototype[Wg[8]="lineHeadCap"]=B;Ug.prototype[Wg[9]="lineTailCap"]=B;var Vg=Wg.length;Ug.prototype.la=function(t){var e=this===t;if(!e&&t){for(e=0;e<Vg;e++){var i=Wg[e];if(this[i]!==t[i])break}e=e===Vg}return e};Ug.prototype.equals=Ug.prototype.la;Ug.prototype.xj=function(t){if(t){var e={};Va(e,this,t)}else e=this;return new Ug(e)};Ug.prototype.getCopy=Ug.prototype.xj;var Yg=nc({}),Xg=[function(t){return t?mc(t):Yg},function(t){return t?mc(t):Yg},function(t){return 0<=t&&100>=t?+t:Yg},function(t){t=mc(t);return"butt"===t||"square"===t||"round"===t||"arrow-head"===t||"arrow-tail"===t?t:Yg},function(t){return"round"===t||"bevel"===t||"miter"===t?t:Yg},function(t){return 0<t&&100>=t?+t:Yg},function(t){return t&&t.every&&t.every(Cc)?t:Yg},function(t){return E(+t)?Yg:+t},function(t){return sc(t)?Xg[3](t):B},function(t){return sc(t)?Xg[3](t):B}];Ug.MAX_LINE_WIDTH=100;var Zg=new Ug;Ug.DEFAULT_STYLE=Zg;var $g="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");Ug.prototype.V=function(){for(var t={},e=$g.length,i;e--;)i=$g[e],t[i]=this[i];return t};Ug.prototype.forWorkerMessage=Ug.prototype.V;function ah(t){var e;if(t){var i=C(t,ah);for(e in t)if(e in this){var r=t[e];r!==this[e]&&("fillColor"===e||0<(r=+r))&&(this[e]=r)}t=i?t.Pb:!!(We(this.fillColor)&&this.width&&this.width);t||(this.Pb=t)}nc(this)}t("H.map.ArrowStyle",ah);ah.prototype.Pb=!0;ah.prototype.fillColor="rgba(255,255,255,.75)";ah.prototype.width=1.2;ah.prototype.length=1.6;ah.prototype.frequency=5;ah.prototype.wj=function(){return new ah(this)};ah.prototype.la=function(t){var e=this===t;!e&&t&&(e=t.width===this.width&&t.fillColor===this.fillColor&&t.length===this.length&&t.frequency===this.frequency);return e};ah.prototype.equals=ah.prototype.la;function bh(t,e){var i;bh.l.constructor.call(this,e);e&&this.Zc(e.style);t&&(this.j=!0);e&&(i=e.arrows)&&this.Lk(i)}u(bh,M);t("H.map.Spatial",bh);bh.prototype.type=Og.SPATIAL;bh.prototype.ug=0;bh.prototype.style=Zg;bh.prototype.wa=function(){return this.style};bh.prototype.getStyle=bh.prototype.wa;bh.prototype.Zc=function(t){var e=!0;t?this.style=C(t,Ug)?t:new Ug(t):this.style?delete this.style:e=!1;e&&this.invalidate(Lg.VISUAL);return this};bh.prototype.setStyle=bh.prototype.Zc;bh.prototype.Ul=function(){return this.g};bh.prototype.getArrows=bh.prototype.Ul;bh.prototype.Lk=function(t){var e=this.g,i=!1;!t&&e?(delete this.g,i=!0):!t||e&&e.la(t)||(this.g=new ah(t),i=!0);i&&"none"!==this.style.strokeColor&&this.ta(1);return this};bh.prototype.setArrows=bh.prototype.Lk;function ch(t,e){var i=!1,r=!1,n;if(e.length){for(i=0;i<e.length;i++)if(e[i]!==dh){r=!0;break}e=t.style;i=r?e.Ge||e.Pb&&t.j||(n=t.g||!1)&&e.Fe&&n.Pb:e.Pb}return i&&t.wc(!0)}bh.prototype.j=!1;bh.prototype.mn=function(){return this.j};bh.prototype.isClosed=bh.prototype.mn;bh.prototype.getGeometriesForTile=bh.prototype.Kd;bh.prototype.ih=function(){return y};bh.prototype.getLabels=bh.prototype.ih;function eh(t,e){eh.l.constructor.call(this,t,e)}u(eh,bh);t("H.map.GeoShape",eh);eh.prototype.getBoundingBox=eh.prototype.F;function fh(t,e,i,r){var n=[],o=e.length,a;for(a=0;a<o;a++){var s=e[a];s.length&&n.push(gh(t,s,i,r))}return n}function gh(t,e,i,r){var n,o=[],a=e.length,s=0;t.U=0;for(n=n||0;s<a;)o.push(hh(t,e[s++],e[s++],n,r));i&&o.push(hh(t,e[0],e[1],n,r));return o}function hh(t,e,i,r,n){var o=t.U;o&&180<zd(o-i)&&(i+=0>o?-360:360);t.U=i;return n.Bh(e,i+r)}function ih(t,e,i){for(var r=e,n,o=t.length+e,a,s;r--;){e=t[r];a=e.length;for(n=Array(a);a--;)s=e[a],n[a]=new I(s.x+i,s.y);t[--o]=n}}var jh=new L([0,0,0,0,0,0,0,0,0]);function kh(t){tc(this,kh);kh.l.constructor.call(this);this.ma=lh(this,t,this.constructor,0)}u(kh,Vf);t("H.geo.MultiGeometry",kh);kh.prototype.splice=function(t,e,i){t=[t];e!==B&&t.push(e);i&&(e=lh(this,i,this.splice,2),t=t.concat(e));this.L=y;return this.ma.splice.apply(this.ma,t)};kh.prototype.splice=kh.prototype.splice;kh.prototype.kc=function(t){var e=this.ma.length;if(!(0<=t&&t<e))throw new ie(this.kc,t,[0,e-1]);this.L=y;return this.ma.splice(t,1)[0]};kh.prototype.removeAt=kh.prototype.kc;kh.prototype.remove=function(t){t=this.ma.indexOf(t);if(0<=t){var e=this.ma.splice(t,1)[0];this.L=y}return e||y};kh.prototype.remove=kh.prototype.remove;kh.prototype.om=function(){return this.ma};kh.prototype.getGeometries=kh.prototype.om;kh.prototype.push=function(t){var e=lh(this,[t],this.push,0)[0];this.L&&(this.L=this.L.ic(t.F()));this.ma.push(e)};kh.prototype.push=kh.prototype.push;kh.prototype.F=function(){var t;if(!(t=this.L)){t=y;var e,i;if(this.ma.length)for(t=this.ma[0].F(),i=1;i<this.ma.length;i++)if(e=this.ma[i].F())t=t?t.ic(e):e}return this.L=t};kh.prototype.getBoundingBox=kh.prototype.F;kh.prototype.L=y;function lh(t,e,i,r){var n,o=[];if(!xc(e))throw new D(i,r);for(n=0;n<e.length;n++)if(t.a(e[n]))o.push(t.b(e[n]));else throw new D(i,r);return o}kh.prototype.b=function(t){return t};kh.prototype.la=function(t){var e=this===t,i;if(!e&&(e=C(t,this.constructor))){var r=this.ma;t=t.ma;for(e=(i=r.length)===t.length;e&&i--;)e=r[i].la(t[i])}return e};kh.prototype.equals=kh.prototype.la;n=kh.prototype;n.Lc=function(t){var e=this.ma,i=e.length,r,n,o=!1;if(i){t.push("(");for(r=0;r<i;r++)(n=0<r&&o)&&t.push(","),e[r].Lc(t),"EMPTY"===t[t.length-1]?t.splice(-1-n,1+n):o=!0;o?t.push(")"):t.splice(-1,1,"EMPTY")}else t.push("EMPTY");return t};n.toString=function(){return this.Lc([this.lb.toUpperCase()," "]).join("")};n.rc=function(){for(var t=[],e=this.ma,i=e.length;i--;)t[i]=e[i].rc();return t};n.V=function(){var t=kh.l.V.call(this);t.type=this.lb;return t};n.$c=function(){for(var t=[],e=this.ma,i=e.length;i--;)t[i]=e[i].$c();return t};function mh(t){mh.l.constructor.call(this,t)}u(mh,kh);t("H.geo.MultiLineString",mh);mh.prototype.a=function(t){return C(t,L)};mh.prototype.lb="Multi"+L.prototype.lb;mh.prototype.Jb="Multi"+L.prototype.Jb;function nh(t,e){nh.l.constructor.call(this,!1,e);this.ba(t)}u(nh,eh);t("H.map.Polyline",nh);nh.prototype.F=function(){return this.bb.F()};nh.prototype.getBoundingBox=nh.prototype.F;nh.prototype.bb=y;nh.prototype.ba=function(t){var e=this.ba,i,r;if(C(t,mh)){var n=t.ma;if(i=n.length)for(r=0;r<i;r++)oh(n[r],e);else throw new D(e,0)}else oh(t,e);this.kd=!!n;this.bb=t;this.ta(Lg.SPATIAL);return this};nh.prototype.setGeometry=nh.prototype.ba;nh.prototype.$=function(){return this.bb};nh.prototype.getGeometry=nh.prototype.$;nh.prototype.clip=function(t){var e=this.bb;return Hg(this.kd?e.ma[0]:e,t)};nh.prototype.clip=nh.prototype.clip;nh.prototype.Kd=function(t){var e=this.bb;var i,r=[];if(this.kd)for(e=e.ma,i=e.length;i--;)ph(this,e[i],t,r);else ph(this,e,t,r);return r.length?r:B};nh.prototype.getGeometriesForTile=nh.prototype.Kd;function oh(t,e){if(!C(t,L)||2>t.Ce())throw new D(e,0)}function ph(t,e,i,r){var n=Hg(e,i.Hf());if(n.length&&(e=i.Jf(),t=fh(t,n,!1,e),n=t.length)){var o=i.Ee();e=e.w;i.x||ih(t,n,-e);i.x===(1<<i.z)-1&&ih(t,n,e);i=qh(t,o.left,o.top,o.right,o.bottom,!1);i.length&&r.push(new rh(i))}}nh.prototype.V=function(){var t=nh.l.V.call(this),e=t.properties;t.geometry=this.$().V();e.style=this.wa().V();e.height=0;return t};nh.prototype.forWorkerMessage=nh.prototype.V;function qh(t,e,i,r,n,o){var a,s,l=t.length,u,c;if(l)for(a=[];l--;){var h=t[l];var f=h.length;var p=0;for(u=1;u<f;u++)if(c=sh(h[u-1],h[u],i,e,r,n)){var d=c[0];var y=c[1];p&&p.la(d)?s.push(y):a.push(s=c);p=y;o&&(u=f,l=0)}}else a=t;return a}t("H.math.clipping.clipStrips",qh);function sh(t,e,i,r,n,o){var a=t.x;t=-t.y;var s=e.x;e=-e.y;i=-i;o=-o;if(a>s){if(s>n||a<r)return;var l=a;var u=t;a=s;t=e;s=l;e=u;l=1}else if(a>n||s<r)return;if(t>e){if(e>i||t<o)return;var c=1;t=-t;e=-e;u=o;o=-i;i=-u}else if(t>i||e<o)return;if(a<r){if((t+=(r-a)*(e-t)/(s-a))>i)return;a=r}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>n)return;t=o}s>n&&(e=t+(n-a)*(e-t)/(s-a),s=n);e>i&&(s=a+(i-t)*(s-a)/(e-t),e=i);c&&(t=-t,e=-e);return l?[new I(s,-e),new I(a,-t)]:[new I(a,-t),new I(s,-e)]}function th(t,e,i){t=uh(t,!0);e=uh(e,!1);var r,n;var o={};var a=r=1;switch(~~(i||0)){case 1:a=r=0;break;case 2:r=0;a=1;break;case 3:r=1,a=0}i=r;var s=a;if(e&&t){e.yf=vh(e.x,e.y,null,wh(e));t.yf=vh(t.x,t.y,null,wh(t));for(a=e;a.next;a=a.next)if(!a.$a)for(r=t;r.next;r=r.next)if(!r.$a){var l=xh(a.next);var u=xh(r.next);if(n=yh(a,l,r,u,o)){n=o.ul;var c=o.vl;var h=o.uo;var f=o.vo;n=vh(h,f,null,null,null,null,!0,0,0,n);zh(n,a,l);l=vh(h,f,null,null,null,null,!0,0,0,c);zh(l,r,u);n.Uh=l;l.Uh=n}}o=be(e,Ah(t));i&&(o=!o);for(a=e;a;a=a.next)a.$a&&(a.Wg=o,o=!o);o=be(t,Ah(e));s&&(o=!o);for(r=t;r.next;r=r.next)r.$a&&(r.Wg=o,o=!o);Bh(e);for(Bh(t);(t=Ch(e))!=e;){for(i=null;!t.sg;t=t.Uh){for(o=t.Wg;;){i=vh(t.x,t.y,i);i.artificial=t.$a||t.ln;t.sg=1;t=o?t.next:t.Rb;if(!t)break;if(t.$a){t.sg=1;break}}if(!t)break}i.Vh=p;var p=i}return p}}t("H.math.clipping.clipPolygon",th);function vh(t,e,i,r,n,o,a,s,l,u){t={x:t,y:e,next:i||null,Rb:r||null,Vh:n||null,Uh:o||null,$a:!!a,Wg:s||0,sg:l||0,alpha:u||0};r&&(t.Rb.next=t);i&&(t.next.Rb=t);return t}function xh(t){for(;t&&t.$a;)t=t.next;return t}function wh(t){if(t)for(;t.next;)t=t.next;return t}function Ch(t){var e=t;if(e){do{e=e.next}while(e!=t&&(!e.$a||e.$a&&e.sg))}return e}function Bh(t){var e=wh(t);e.Rb.next=t;t.Rb=e.Rb}function yh(t,e,i,r,n,o){var a,s=e.x-t.x,l=e.y-t.y;var u=r.x-i.x;var c=r.y-i.y;var h=s*c-l*u;if(!h)return 0;u=((i.x-t.x)*c-(i.y-t.y)*u)/h;h=(l*(i.x-t.x)-s*(i.y-t.y))/h;if(0>u||1<u||0>h||1<h)return 0;0===u?a=t:1===u?a=e:0===h?a=i:1===h&&(a=r);if(a&&!o)return a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.yf&&(a.yf.x=a.x,a.yf.y=a.y),yh(t,e,i,r,n);n.uo=t.x+u*s;n.vo=t.y+u*l;n.ul=u;n.vl=h;return 1}function Ah(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function zh(t,e,i){for(e=e.next;e!==i&&e.alpha<=t.alpha;)e=e.next;t.next=e;t.Rb=e.Rb;t.next.Rb=t;t.Rb.next=t}function uh(t,e){for(var i,r=null,n=0,o=t.length;n<o;n++){i=vh(t[n].x,t[n].y,r);i.ln=e;if(i.next=r)r.Rb=i;r=i}return r}function O(t,e){var i;O.l.constructor.call(this);C(t,L,O,0);if(e!==B&&xc(e,O,1)){for(i=0;i<e.length;i++)C(e[i],L,O,1,"index "+i);this.Ma=e}else this.Ma=[];this.ab=t;this.a=[]}u(O,Vf);t("H.geo.Polygon",O);function Dh(t){var e=O,i=L,r=t.ha,n=t.aa,o=t.ka,a=t.da;n=[r,n,B,r,a,B,o,a,B,o,n,B];180<=t.Ab()&&(n.splice(9,0,o,t=t.jb().lng,B),n.splice(3,0,r,t,B));return new e(new i(n))}var Eh={NORTH:90,SOUTH:-90};O.Direction=Eh;O.prototype.nd=Eh.NORTH;O.prototype.Sk=function(t){this.nd!==t&&(this.L=y,this.a.length=0,this.nd=t);return this};O.prototype.setPoleCovering=O.prototype.Sk;O.prototype.Lm=function(){return this.nd};O.prototype.getPoleCovering=O.prototype.Lm;O.prototype.im=function(){return this.ab};O.prototype.getExterior=O.prototype.im;O.prototype.Pk=function(t){if(!C(t,L))throw new D(this.Pk,0,t);this.ab=t;this.L=y};O.prototype.setExterior=O.prototype.Pk;O.prototype.sm=function(){return this.Ma};O.prototype.getInteriors=O.prototype.sm;O.prototype.rg=function(t,e,i){var r=arguments.length,n;for(n=2;n<r;n++)C(arguments[n],L,this.rg,n);var o=this.Ma.splice.apply(this.Ma,arguments);for(n=2;n<r;n++)arguments[n]=B;this.a.splice.apply(this.a,arguments);return o};O.prototype.spliceInteriors=O.prototype.rg;O.prototype.Xn=function(t){return this.rg(t,1)[0]};O.prototype.removeInteriorAt=O.prototype.Xn;O.prototype.Wn=function(t){t=this.Ma.indexOf(t);return 0>t?B:this.rg(t,1)[0]};O.prototype.removeInterior=O.prototype.Wn;O.prototype.zk=function(t){if(!C(t,L))throw new D(this.zk,0,t);this.Ma.push(t)};O.prototype.pushInterior=O.prototype.zk;O.prototype.F=function(){var t=this.L;t||(this.L=t=Fh(this.ab,this.nd));return t};O.prototype.getBoundingBox=O.prototype.F;n=O.prototype;n.vj=function(t){var e=this.Ma.length;if(0>t||t>=e)throw new ie(this.vj,t,[0,e-1]);(e=this.a[t])||(this.a[t]=e=Fh(this.Ma[t],this.nd));return e};n.ab=y;n.Ma=[];function Fh(t,e){var i,r,n;if(n=t.F())(i=t.eh(!0))&&(r=t.Ce())&&(n=n.ic(dg([t.qe(0),t.qe(r-1)],!0),!0)),360===n.Ab()&&1===i%2&&(n=n.Wc(e,0));return n}n.lb="Polygon";n.Lc=function(t){var e=this.Ma,i=e.length,r;if(this.ab.Ce()){t.push("(");this.ab.Lc(t,!0);for(r=0;r<i;r++)e[r].Ce()&&(t.push(","),e[r].Lc(t,!0));t.push(")")}else t.push("EMPTY");return t};n.Jb="Polygon";n.$c=function(){var t,e=[],i=this.Ma,r=this.ab.$c();r[0].toString()!==r[r.length-1].toString()&&r.push(r[0]);e.push(r);for(t=0;t<i.length;t++)r=i[t].$c(),r[0].toString()!==r[r.length-1].toString()&&r.push(r[0]),e.push(r);return e};n.V=function(){var t=O.l.V.call(this);this.F().Bb()&&(t.type="Multi"+t.type);return t};n.rc=function(){var t=[],e=this.Ma,i=e.length;for(t.push(this.ab.rc());i--;)t[i+1]=e[i].rc();return this.F().Bb()?[t]:t};n.la=function(t){var e=t.Ma,i=this.Ma.length,r=e.length;t=this.ab.la(t.ab)&&i===r;for(r=0;t&&r<i;)t=t&&this.Ma[r].la(e[r]),r++;return t};function Gh(t,e,i){var r=void 0===r?!0:r;var n=t.Ma,o=Hh.bind(null,e,i);return ae(e,i,t.ab.W,0,!0,3)!==$d.NONE?r?!n.some(o):!0:!1}function Hh(t,e,i){return ae(t,e,i.W,0,!0,3)===$d.SURFACE}function Ih(t,e){e=e.W;t=t.ab.W;var i,r,n=e.length-3,o=t.length-3,a={};for(i=0;i<n;i+=3){var s=e[i];var l=e[i+1];var u=e[i+3];var c=e[i+4];for(r=0;r<o;r+=3){var h=t[r];var f=t[r+1];var p=t[r+3];var d=t[r+4];if(yh({x:l,y:s},{x:c,y:u},{x:f,y:h},{x:d,y:p},a,!0))return!0}}return!1}function Jh(t,e){var i=e.ab,r=e.Ma,n=r.length,o=i.W,a=o.length,s=t.ab.W,l=s.length;if(Ih(t,i))return!0;for(i=0;i<a;i+=3)if(Gh(t,o[i],o[i+1]))return!0;for(i=0;i<l;i+=3)if(Gh(e,s[i],s[i+1]))return!0;for(i=0;i<n;i++)if(Ih(t,r[i]))return!0;return!1}function Kh(t){Kh.l.constructor.call(this,t)}u(Kh,kh);t("H.geo.MultiPolygon",Kh);Kh.prototype.a=function(t){return C(t,O)};Kh.prototype.lb="Multi"+O.prototype.lb;Kh.prototype.Jb="Multi"+O.prototype.Jb;function rh(t,e,i){this.paths=this.a=t;e!==B&&(this.interiorsIndex=this.b=e);i!==B&&(this.outlinesIndex=this.c=i)}rh.prototype.interiorsIndex=rh.prototype.b=Sd;rh.prototype.outlinesIndex=rh.prototype.c=Sd;var dh=oc(new rh([])),Lh=nc([]);function Mh(t,e){var i=e&&(+e.extrusion||+e.extrude),r=e&&+e.elevation,n=0;Mh.l.constructor.call(this,!0,e);0<r&&(n+=r,this.f=r);0<i&&(n+=i,this.i=i);if(n>Nh)throw new ie(Mh,n,[0,Nh]);C(t,L)?this.ba(new O(t)):this.ba(t)}u(Mh,eh);t("H.map.Polygon",Mh);Mh.prototype.i=0;Mh.prototype.f=0;Mh.prototype.bb=y;var Nh=2047;Mh.MAX_EXTRUDE_HEIGHT=Nh;Mh.prototype.oi=function(t){var e=+t;if(e!==t)throw new D(this.oi,0,t);if(0>e||this.f+e>Nh)throw new ie(this.oi,this.f+e,[0,Nh]);this.i=e;this.ta(Lg.SPATIAL)};Mh.prototype.setExtrusion=Mh.prototype.oi;Mh.prototype.jm=function(){return this.i};Mh.prototype.getExtrusion=Mh.prototype.jm;Mh.prototype.ni=function(t){var e=+t;if(e!==t)throw new D(this.ni,0,t);if(0>e||this.i+e>Nh)throw new ie(this.ni,this.i+e,[0,Nh]);this.f=e;this.ta(Lg.SPATIAL)};Mh.prototype.setElevation=Mh.prototype.ni;Mh.prototype.hm=function(){return this.f};Mh.prototype.getElevation=Mh.prototype.hm;Mh.prototype.$=function(){return this.bb};Mh.prototype.getGeometry=Mh.prototype.$;Mh.prototype.ba=function(t){if(t===y||C(t,O))var e=!1;else C(t,Kh,this.ba,0),e=!0;this.kd=e;e=this.bb;this.bb=t;e!==y&&this.ta(Lg.SPATIAL);return this};Mh.prototype.setGeometry=Mh.prototype.ba;Mh.prototype.F=function(){return this.$().F()};Mh.prototype.getBoundingBox=Mh.prototype.F;Mh.prototype.Kd=function(t){var e,i=this.$(),r,n;if(this.kd){i=i.ma;var o=0;for(n=i.length;o<n;o++)if(r=Oh(this,i[o],t,i[o].nd))e||(e=[]),e.push(r)}else r=this.Xa,r===B&&(r=this.kd?Eh.NORTH:this.$().nd),(r=Oh(this,i,t,r))&&(e=[r]);return e};Mh.prototype.getGeometriesForTile=Mh.prototype.Kd;function Oh(t,e,i,r){var n,o,a=0,s=!0;if(n=Ph(t,e.ab,i,r,e.F())){var l=new rh(n);var u=e.Ma;if(o=u.length)for(l.b=l.a.length;a<o;a++)if(n=Ph(t,u[a],i,r,e.vj(a)))l.a=l.a.concat(n);o=l.a.length;for(a=0;a<o;a++)if(l.a[a]!==Lh){s=!1;break}s&&(l=a%2?dh:B)}return l}function Ph(t,e,i,r,n){var o=i.Ee(),a=n,s=a.Ab();var l=[[]];var u=e.W;var c=[],h=u.length,f,p=!1;for(f=0;f<h;f+=3){var d=u[f];var y=u[f+1];p||180!=zd(y)||(c.push(d),c.push(y),c.push(d),c.push(-y),p=!0);c.push(d);c.push(y)}u=c;360>s&&-180==a.aa&&(a=new K(a.ha,180,a.ka,a.da));360>s&&180==a.da&&(a=new K(a.ha,a.aa,a.ka,-180));if(a.Bb()){s=u;d=s.length;u=-1;for(c=0;c<d-2;c+=2)if(Uf(s[c+1],s[c+3])){u=c+2;break}-1===u&&Uf(s[d-1],s[1])&&(u=d);-1!==u&&(h=s[u-2],c=s[u-1],f=s[u%d],p=s[(u+1)%d],180!==zd(h)&&180!==zd(f)&&(y=zd(f-h),d=zd(p-c),d+=180<d?-360:0,p=zd(180-p),p+=180<p?-360:0,d&&p&&(y/=zd(d)/zd(p),h=f+(f>h?-y:y),c=0<c?180:-180,s.splice(u,0,h,c,h,-c))));u=s}l[0]=Qh([].concat(u),a.aa);360>a.Ab()&&a.Cd(new Wf(a.ha,180))&&(u=Qh([].concat(u),a.da),l.push(u));a=i.Jf();t=fh(t,l,!0,a);if(360===n.Ab()&&1===e.eh(!0)%2){e=t;t=i.Ee();e[0][1].x>e[0][e[0].length-1].x&&(e[0]=e[0].reverse());u=[];s=e[0].length-1;for(l=0;l<s;l++)c=e[0][l],u[l]=new I(c.x-2*a.w,c.y),u[l+s]=new I(c.x-a.w,c.y),u[l+2*s]=new I(c.x,c.y),u[l+3*s]=new I(c.x+a.w,c.y),u[l+4*s]=new I(c.x+2*a.w,c.y);e[0]=u;l=a.Bh(r,0);l.y=2*t[r===Eh.NORTH?"top":"bottom"];r=l.clone();l.x=e[0][e[0].length-1].x+1;r.x=e[0][0].x-1;e[0].push(l,r);t=e}r=o.left;e=o.top;l=o.right;o=o.bottom;if(qh(t,r,e,l,o,!0).length){if(!i.Hf().Mg(n)){i=t;n=[new I(r,e),new I(l,e),new I(l,o),new I(r,o)];o=[];for(t=i.length;t--;)if(r=th(n,i[t]))for(e=Rh(r),o.push(e);r.Vh;)r=r.Vh,e=Rh(r),o.push(e);t=o}}else i=Sh(r,e,t[0]),t[1]&&(i^=Sh(r,e,t[1])),t=i?[Lh]:B;return t}function Sh(t,e,i){var r,n,o;var a=r=i[0].x;var s=n=i[0].y;var l=1;for(o=i.length;l<o;l++){var u=i[l].x;var c=i[l].y;u>r?r=u:u<a&&(a=u);c>n?n=c:c<s&&(s=c)}return a<=t&&t<=r&&s<=e&&e<=n&&be({x:t,y:e},ce(i.concat(i[0])))}function Rh(t){var e=[],i=t;do{var r=wd(100*(i.On?i.On:i.x))/100;var n=wd(100*(i.Pn?i.Pn:i.y))/100;if(!o||.01<Bd(Cd(o.x-r,2)+Cd(o.y-n,2))){var o=new I(r,n);e.push(o)}i=i.next}while(i&&i!==t);return e}Mh.prototype.I=y;function Qh(t,e){var i,r=Number.POSITIVE_INFINITY,n=-1,o=t.length;for(i=0;i<o;i+=2){var a=zd(t[i+1]-e);a+=180<a?360-a:a;a<r&&(r=a,n=i)}return 0<i?(e=t.splice(n,t.length-n),e.concat(t)):t}Mh.prototype.V=function(){var t=Mh.l.V.call(this),e=this.$(),i=this.kd?e.ma:[e],r,n=t.properties;var o=t.geometry=e.V();n.style=this.wa().V();n.height=this.i+this.f;n.min_height=this.f;if(this.F().Bb()&&(o.type="MultiPolygon",this.kd)){var a=[];i.forEach(function(t,e){r=o.coordinates[e];t.F().Bb()?a=a.concat(r):a.push(r)});o.coordinates=a}return t};Mh.prototype.forWorkerMessage=Mh.prototype.V;function Th(t,e,i){Th.l.constructor.call(this,jh,i);this.og(t);this.yi(e);i&&"precision"in i&&this.xi(i.precision)}u(Th,Mh);t("H.map.Circle",Th);Th.prototype.og=function(t){(t=Yf(t)).la(this.b)||(this.b=t,Uh(this))};Th.prototype.setCenter=Th.prototype.og;Th.prototype.jb=function(){return this.b};Th.prototype.getCenter=Th.prototype.jb;Th.prototype.yi=function(t){if(E(t=Xd(t,0,6371000.79*Ld/2)))throw new D(this.yi,0,t);this.sa!==t&&(this.sa=t,Uh(this))};Th.prototype.setRadius=Th.prototype.yi;Th.prototype.Pm=function(){return this.sa};Th.prototype.getRadius=Th.prototype.Pm;Th.prototype.C=60;Th.prototype.xi=function(t){if(!Bc(t))throw new D(this.xi,0,t);this.C!==(t=Xd(wd(t),4,360))&&(this.C=t,Uh(this))};Th.prototype.setPrecision=Th.prototype.xi;Th.prototype.Nm=function(){return this.C};Th.prototype.getPrecision=Th.prototype.Nm;Th.prototype.ba=function(){return this};Th.prototype.setGeometry=Th.prototype.ba;Th.prototype.$=function(){this.bb||Th.l.ba.call(this,Vh(this));return this.bb};Th.prototype.getGeometry=Th.prototype.$;function Uh(t){t.bb!==y&&Th.l.ba.call(t,Vh(t))}function Vh(t){var e=t.b,i=e.lat,r=t.sa,n=0,o=new L;if(90===zd(i))for(i=e.tg(0,r,!0).lat;360>n;n+=120)o.ii(i,n-180,B);else for(t=t.C,t=360/t;360>n;n+=t)o.pd(e.tg(n,r,!0));e=new O(o);0>i&&e.Sk(Eh.SOUTH);return e}function Wh(t,e){if(!C(t,Element)){Xh.innerHTML=t;t=Xh.firstElementChild;if(!t)throw new D(Wh,0,"No element data");Xh.removeChild(t);var i=!0;Xh.innerHTML=""}this.a=0!==gf(t).length;this.c=i?t:hf(t,x.document,this.a);e&&(i="onAttach",i in e&&vc(t=e[i],"Function",Wh,1,i)&&(this.Wh=t),i="onDetach",i in e&&vc(t=e[i],"Function",Wh,1,i)&&(this.b=t))}t("H.map.DomIcon",Wh);var Xh=document.createElement("DIV");Wh.prototype.Wh=null;Wh.prototype.b=null;Wh.prototype.wj=function(t){return hf(this.c,t,this.a)};Wh.prototype.a=!1;function Yh(t){Yh.l.constructor.call(this,t)}u(Yh,kh);t("H.geo.MultiPoint",Yh);Yh.prototype.a=function(t){return Xf(t)};Yh.prototype.b=function(t){return C(t,Wf)?t:Yf(t)};Yh.prototype.lb="Multi"+Wf.prototype.lb;Yh.prototype.Jb="Multi"+Wf.prototype.Jb;function Zh(t,e){this.w=+t;this.h=+e}t("H.math.Size",Zh);function $h(t,e){var i;var r=t;var n=e||[];if(t!==ai.NONE){e=i=n.length;if(-1===this.b.indexOf(r))throw new D($h,0,t);if(!n)throw new D($h,1,n);for(;i--;)if(E(n[i]))throw new D($h,1,n);r===ai.RECT&&3<e&&(n=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],r=ai.POLYGON);if(r===ai.CIRCLE&&2<e&&(t=n[2],0<t)){r=n[0];var o=n[1];i=ud(2*yd(t),40);var a=360/i;for(n=[];i--;){var s=a*i*Qd;n.push(r+Ed(s)*t,o+Gd(s)*t)}r=ai.POLYGON}if(r!==ai.POLYGON||!e||n.length%2)throw new D($h,1,n);this.a=n}}t("H.map.HitArea",$h);var ai={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};$h.ShapeType=ai;$h.prototype.b=[ai.RECT,ai.CIRCLE,ai.POLYGON];$h.prototype.Pf=function(t,e,i){return this.a?ae(t,e,this.a,i,!0):$d.NONE};$h.prototype.hitTest=$h.prototype.Pf;function bi(t,e){var i;tc(this,bi);bi.l.constructor.call(this,e);this.ba(t);e&&"icon"in e&&(i=e.icon);this.Hc(i||ci(this))}u(bi,M);t("H.map.AbstractMarker",bi);bi.prototype.$=function(){return this.b};bi.prototype.getGeometry=bi.prototype.$;bi.prototype.ba=function(t){var e=this.b;C(t,Wf)||C(t,Yh)?this.b=t:(Xf(t,this.ba,0),this.b=Yf(t));e&&this.ta(Lg.SPATIAL);return this};bi.prototype.setGeometry=bi.prototype.ba;bi.prototype.F=function(){return this.b.F()};bi.prototype.wb=function(){return this.icon};bi.prototype.getIcon=bi.prototype.wb;bi.prototype.Hc=function(t){var e=this.icon,i=!e;if(e!==t){if(!this.Tj(t)){if(i)throw new D(this.constructor,1,t);throw new D(this.Hc,0,t)}this.icon=t;i||this.ta(Lg.VISUAL)}return this};bi.prototype.setIcon=bi.prototype.Hc;function ci(t){var e=t.g;e||(e=t.constructor.prototype.g=t.f(di));return e}var di={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Zh(38,47),anchor:new I(19,45),hitArea:new $h(3,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};bi.prototype.V=function(){var t=bi.l.V.call(this),e=this.wb(),i=e.yb(),r=e.fd();t.geometry=this.$().V();i&&(e=t.properties.icon={id:e.uid},e.size={w:i.w,h:i.h},e.offset=[i.w/2-(r?r.x:0),i.h/2-(r?r.y:0)]);return t};bi.prototype.forWorkerMessage=bi.prototype.V;function ei(t,e){ei.l.constructor.call(this,t,e)}u(ei,bi);t("H.map.DomMarker",ei);ei.prototype.type=Og.DOM_MARKER;ei.prototype.ug=2;ei.prototype.f=function(t){var e=new Wh(t.svg,t);t=t.anchor;e.c.style.margin=-t.y+"px 0 0 -"+t.x+"px";return e};ei.prototype.Tj=function(t){return C(t,Wh)};function fi(t,e,i,r){fi.l.constructor.call(this,t,e,i);this.modifiers=r}u(fi,Mg);t("H.map.ChangeEvent",fi);var gi={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};fi.Type=gi;fi.prototype.ql=gi.SIZE;fi.prototype.SIZE=fi.prototype.ql;fi.prototype.Xi=gi.POSITION;fi.prototype.POSITION=fi.prototype.Xi;fi.prototype.Ri=gi.HEADING;fi.prototype.HEADING=fi.prototype.Ri;fi.prototype.Zi=gi.TILT;fi.prototype.TILT=fi.prototype.Zi;fi.prototype.Si=gi.INCLINE;fi.prototype.INCLINE=fi.prototype.Si;fi.prototype.$i=gi.ZOOM;fi.prototype.ZOOM=fi.prototype.$i;fi.prototype.Oi=gi.BOUNDS;fi.prototype.BOUNDS=fi.prototype.Oi;function hi(){this.a=[];hi.l.constructor.call(this)}u(hi,F);t("H.util.OList",hi);function ii(t,e,i){t=t.a.length;if(i)var r=t;else if(E(r=0>(r=+e)?vd(0,t+r):ud(t,r)))throw new ie(hi,e,[0,t-1]);return r}hi.prototype.add=function(t,e){e=ii(this,e,E(e));this.a.splice(e,0,t);this.dispatchEvent(new ji(this,this.b.ee,e,t,null,null))};hi.prototype.add=hi.prototype.add;function ki(t,e){var i=t.a.splice(e,1)[0];t.dispatchEvent(new ji(t,t.b.ge,e,null,i,null));return i}hi.prototype.kc=function(t){this.get(t);return ki(this,t)};hi.prototype.removeAt=hi.prototype.kc;hi.prototype.remove=function(t){t=this.indexOf(t);return 0<=t?(ki(this,t),!0):!1};hi.prototype.remove=hi.prototype.remove;hi.prototype.set=function(t,e){if(0!==this.a.length||0!==t){this.get(t);t=ii(this,t,!1);var i=this.a[t]}this.a[t]=e;this.dispatchEvent(new ji(this,this.b.he,t,e,i,null));return i};hi.prototype.set=hi.prototype.set;hi.prototype.indexOf=function(t){return this.a.indexOf(t)};hi.prototype.indexOf=hi.prototype.indexOf;hi.prototype.get=function(t){var e=ii(this,t,!1),i=this.a;if(e>=i.length)throw new ie(this.get,t,[0,i.length-1]);return i[e]};hi.prototype.get=hi.prototype.get;hi.prototype.ym=function(){return this.a.length};hi.prototype.getLength=hi.prototype.ym;hi.prototype.Ka=function(){return[].concat(this.a)};hi.prototype.asArray=hi.prototype.Ka;hi.prototype.flush=function(){for(var t=this.a.length;t--;)ki(this,t)};hi.prototype.flush=hi.prototype.flush;hi.prototype.u=function(){this.flush();hi.l.u.call(this)};hi.prototype.b={ee:"add",ge:"remove",he:"set",zo:"move"};function ji(t,e,i,r,n,o){ji.l.constructor.call(this,e,t);this.idx=i;this.added=r;this.removed=n;this.moved=o}u(ji,qd);var li={};t("H.geo.mercator",li);li.a=function(t){return ud(1,vd(0,.5-Ad(Hd(Nd+Md*t/180))/Ld/2))};li.b=function(t){return t/360+.5};li.Tf=function(t,e,i){i?(i.x=li.b(e),i.y=li.a(t)):i=new I(li.b(e),li.a(t));return i};li.latLngToPoint=li.Tf;li.Kb=function(t,e){return li.Tf(t.lat,t.lng,e)};li.geoToPoint=li.Kb;li.f=function(t){return 0>=t?90:1<=t?-90:Rd*(2*Id(Dd(Ld*(1-2*t)))-Md)};li.c=function(t){return 360*(1===t?1:Vd(t,1))-180};li.Oa=function(t,e,i){i?(i.lat=li.f(e),i.lng=li.c(t)):i=new Wf(li.f(e),li.c(t));return i};li.xyToGeo=li.Oa;li.bg=function(t,e){return li.Oa(t.x,t.y,e)};li.pointToGeo=li.bg;t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function mi(t,e){this.projection=t||li;this.b=0;this.a=this.exp=Ad(e||256)/Kd;ni(this);this.y=this.x=0}t("H.geo.PixelProjection",mi);var oi=zd(24)+zd(-8);mi.prototype.Ba=function(t){if(E(t))throw new D(this.Ba,0,t);var e=this.x/this.w;var i=this.y/this.h;this.b=t;this.a=this.exp+t;ni(this);this.x=e*this.w;this.y=i*this.h};mi.prototype.rescale=mi.prototype.Ba;function ni(t){t.a>oi&&(t.a=oi);t.w=Cd(2,t.a);t.h=Cd(2,t.a)}mi.prototype.Hj=function(){return this.b||0};mi.prototype.getZoomScale=mi.prototype.Hj;mi.prototype.ib=function(t,e){t=this.projection.Tf(t.lat,t.lng,e);t.x=t.x*this.w-this.x;t.y=t.y*this.h-this.y;return t};mi.prototype.geoToPixel=mi.prototype.ib;mi.prototype.Ne=function(t,e){return this.projection.Oa((t.x+this.x)/this.w,(t.y+this.y)/this.h,e)};mi.prototype.pixelToGeo=mi.prototype.Ne;mi.prototype.Oa=function(t,e,i){return this.projection.Oa((t+this.x)/this.w,(e+this.y)/this.h,i)};mi.prototype.xyToGeo=mi.prototype.Oa;mi.prototype.Bh=function(t,e,i){t=this.projection.Tf(t,e,i);t.x=t.x*this.w-this.x;t.y=t.y*this.h-this.y;return t};mi.prototype.latLngToPixel=mi.prototype.Bh;mi.prototype.Xc=function(t){return new I(t.x*this.w-this.x,t.y*this.h-this.y)};mi.prototype.pointToPixel=mi.prototype.Xc;var pi;function ri(t,e){if(x.URL)return new x.URL(t,e).toString();if(!t||!si(t))return t;if(!e||si(e))throw new TypeError("Failed to construct 'URL': Invalid base URL");pi||(pi=document.createElement("a"),Ec(pi));var i=pi;i.href=e;"/"!==t[0]?t=i.href.replace(/\/[^\/]*$/,"/")+t:((e=i.origin)||(e=i.protocol+"//"+i.host),t=e+t);return t}function si(t){var e=!1;"string"===typeof t&&(e=!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2)));return e}function ti(t,e){var i,r=arguments.length,n,o;for(i=1;i<r;i++)if((n=arguments[i])&&n!==t&&n!==a){var a=n;for(o in n){var s=n[o];t[o]!==s&&(ui(s)?ui(t[o])?t[o]=ti(t[o],s):t[o]=pc(s):void 0!==s&&(t[o]=pc(s)))}}return t}var vi=lc();function wi(t,e,i){var r=i[t];return e&&r in e&&0>rc.indexOf(r)?(e=e[r],++t<i.length?wi(t,e,i):e):vi}var xi=wi.bind(null,0),yi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},zi={data:1,draw:1,enabled:1,filter:1,properties:1},Ai=Object.keys(zi);function Bi(t,e,i,r,n,o){var a=r[t],s=i[a];if(++t<r.length){var l=e[a]||{};for(i=Ai.length;i--;){var u=Ai[i];if("draw"!==u||!o){var c=s[u];c!==B&&(l[u]=pc(c))}}Bi(t,l,s,r,n,o)}else n?l=pc(s):(l=s,delete i[a]);e[a]=e[a]?ti(e[a],l):l}var Ci=Bi.bind(null,0);function Di(t,e){t in yi&&(e[t]=1)}function Ei(t,e,i){var r,n,o;for(r in t)if(zi[r]){if("draw"===r){var a=t[r];for(n in a){var s=a[n];(o=s.style)?(s.style=e+o,Di(o,i)):(delete a[n],a[e+n]=s,Di(n,i))}}}else Ei(t[r],e,i)}function Fi(t,e){var i={},r,n,o,a;e+="_";t=ti({},t);if(r=t.styles)for(n in r){var s=r[n];delete r[n];r[e+n]=s;if(o=s.mix)for(yc(o)&&(o=[o]),a=o.length;a--;)Di(o[a],i),o[a]=e+o[a];if(a=s.base)o||(o=s.mix=[]),o.unshift(e+a),delete s.base,Di(a,i);Di(n,i)}else r=t.styles={};if(s=t.layers)for(n in s)o=s[n],delete s[n],(a=o.data)&&!a.layer&&(a.layer=n),s[e+n]=o,Ei(o,e,i);for(n in i)r[e+n]={base:n};return t}function Gi(t,e){var i=t.sources,r=Object.keys(i)[0],n=ti(i[r],{uid:e});i=t.layers;var o;t.sources={};t.sources[e]=n;for(o in i)t=i[o],t.data?t.data.source===r&&(t.data.source=e):t.data={source:e}}function Hi(t,e){var i;var r=t.textures;var n=t.fonts;for(i in r){var o=r[i];o.url&&(o.url=ri(o.url,e))}for(i in n)if(r=n[i],xc(r))for(o=0;o<r.length;o++){var a=r[o];a.url=a.url&&ri(a.url,e)}else a=t.fonts[i],a.url=a.url&&ri(a.url,e)}function Ii(t,e){return"function(){return "+("feature."+t+(e||""))+";}"}function Ji(t){return Ii("style."+t,void 0)}function Ki(t,e,i,r){t={base:t,blend:e,blend_order:i};r&&(t.clean_depth=!!r);return t}function Li(t){var e={};e["translucent-"+(t?"extruded-":"")+"polygons"]={color:Ji("fillColor"),order:1,interactive:!0,extrude:t};return e}function Mi(t,e,i,r){t={data:{source:t,layer:e}};i&&(t.draw=i);r&&(t.filter=r);return t}function ui(t){return Ca(t)&&!xc(t)}function Ni(t){t=t||{};Ni.l.constructor.call(this);this.min=0;this.max=22;this.Fl=!!t.dark;t.min&&this.ui(t.min);t.max&&this.si(t.max);this.pixelProjection=new mi(t.projection,t.minWorldSize);t.provider&&(this.a=t.provider,this.g=A(this.g,this),this.a.addEventListener(Oi.prototype.g.Ca,this.g,!1,this),this.i=A(this.i,this),this.a.addEventListener(Oi.prototype.g.fe,this.i,!1,this))}u(Ni,F);t("H.map.layer.Layer",Ni);Ni.prototype.b={Ca:"update",fe:"configchange",Wi:"minchange",Vi:"maxchange"};Ni.prototype.na=function(){return this.a};Ni.prototype.getProvider=Ni.prototype.na;Ni.prototype.nn=function(t){return this.min<=t&&t<=this.max};Ni.prototype.isValid=Ni.prototype.nn;function Pi(t,e,i){var r=t[e],n="min"===e,o=n?t.ui:t.si;if(i!==r)if(n?i<=t.max:i>=t.min)t[e]=i,t.g(),t.i(),t.dispatchEvent(new Mg(n?t.b.Wi:t.b.Vi,i,r));else throw new D(o,0,"Invalid condition min <= max");return t}Ni.prototype.ui=function(t){return Pi(this,"min",+t)};Ni.prototype.setMin=Ni.prototype.ui;Ni.prototype.si=function(t){return Pi(this,"max",+t)};Ni.prototype.setMax=Ni.prototype.si;Ni.prototype.g=function(){this.dispatchEvent(this.b.Ca)};Ni.prototype.i=function(){this.dispatchEvent(this.b.fe)};Ni.prototype.u=function(){Ni.l.u.call(this)};Ni.prototype.ra=function(){return null};Ni.prototype.getCopyrights=Ni.prototype.ra;function Qi(t){var e;Qi.l.constructor.call(this);this.dispatchEvent=A(this.dispatchEvent,this);if(t){var i=t.length;for(e=0;e<i;e++)this.add(t[e])}}u(Qi,hi);t("H.map.DataModel",Qi);function Ri(t,e){var i=e.getProvider&&e.getProvider();i&&(Si[i.uid]=i);e.ga(t)}function Ti(t){var e=t.getProvider&&t.getProvider();e&&delete Si[e.uid];t.ga(null)}Qi.prototype.add=function(t,e){C(t,Ni,this.add,0);Ri(this,t);Qi.l.add.call(this,t,e)};Qi.prototype.add=Qi.prototype.add;Qi.prototype.set=function(t,e){C(e,Ni,this.set,0);Ri(this,e);(t=Qi.l.set.call(this,t,e))&&Ti(t);return t};Qi.prototype.set=Qi.prototype.set;Qi.prototype.kc=function(t){var e;(e=Qi.l.kc.call(this,t))&&Ti(e);return e};Qi.prototype.removeAt=Qi.prototype.kc;Qi.prototype.remove=function(t){var e;(e=Qi.l.remove.call(this,t))&&Ti(t);return e};Qi.prototype.remove=Qi.prototype.remove;Qi.prototype.flush=function(){for(var t=this.a.length;t--;)this.kc(t);Qi.l.flush.call(this)};Qi.prototype.flush=Qi.prototype.flush;var Si={};Ec(Si);function Ui(t,e,i){if(t=Si[t])return C(t[e],Function,Ui,1,"invalid method"),t[e].apply(t,i)}Qi.invoke=Ui;function Vi(t,e){Ba(t)&&(this.i=t);Bc(e)&&(this.a=e)}t("H.util.Request",Vi);Vi.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var Wi=[0,1,2,3,4];Vi.prototype.A=0;Vi.prototype.getState=function(){return this.A};Vi.prototype.getState=Vi.prototype.getState;Vi.prototype.R=function(t){if(0>Wi.indexOf(t))throw new D(this.R,0,t);if(this.A!==t||1===t&&1<this.a)this.A=t,this.i&&this.i(this)};Vi.prototype.a=1;Vi.prototype.Ym=function(){return this.a};Vi.prototype.getTotal=Vi.prototype.Ym;Vi.prototype.b=0;Vi.prototype.Om=function(){return this.b};Vi.prototype.getProcessed=Vi.prototype.Om;Vi.prototype.g=0;Vi.prototype.km=function(){return this.g};Vi.prototype.getFailed=Vi.prototype.km;function Xi(t,e){t.b<t.a&&(sc(e)||(e=2),0===e||1===e||0!==t.A&&1!==t.A||(t.b++,2!==e&&t.g++,t.R(t.b<t.a?1:2)))}Vi.prototype.le=function(){};Vi.prototype.cancel=function(){3!==this.A&&(this.le(),this.R(3))};Vi.prototype.cancel=Vi.prototype.cancel;function Yi(){}t("H.util.ICapturable",Yi);Yi.prototype.capture=function(){};Yi.prototype.capture=Yi.prototype.capture;t("H.util.Disposable",md);md.prototype.tb=md.prototype.tb;md.prototype.addOnDisposeCallback=md.prototype.tb;t("H.util.dispose",pd);function Zi(t,e){var i=t.J(),r=i.ownerDocument;Zi.l.constructor.call(this);this.a=t;this.N=i=i.appendChild($i(r,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint"));this.qf=$i(r,"DIV","margin: 0 0 "+aj+"px "+aj+"px;display:inline-block;",bj,"H_logo");i.appendChild(this.qf);i=i.appendChild($i(r,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright"));this.g=i.appendChild($i(r,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use"));this.g.target="_blank";this.f=i.appendChild($i(r,"SPAN","margin:0px 8px"));this.j=Ta(cj);this.vi(e);this.c=A(this.c,this);this.b=A(this.b,this);this.a.addEventListener(this.a.o.Ui,this.c);this.a.a.addEventListener("add",this.b);this.a.a.addEventListener("remove",this.b);this.a.a.addEventListener("set",this.b);this.b()}var dj;u(Zi,md);t("H.map.Imprint",Zi);var aj=16,cj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};Zi.prototype.vi=function(t){var e,i=this.qf.firstChild.firstChild.childNodes;t||(this.j=Ta(cj));var r=this.j;for(e in r)t&&e in t&&(r[e]=t[e]);t=(this.xh=t=r.invert)?ej:fj;i[0].style.fill=t.Yk;i[0].style.fillOpacity=t.Zk;i[1].style.fill=t.cl;i[1].style.fillOpacity=t.dl;t=r.locale;gj[t]||(t="en-US",r.locale=t);this.g.innerHTML=gj[t];t=t.split("-");this.g.href=r.href.replace("{LN}",t[0]).replace("{CN}",t[1].toLowerCase());this.N.style.font=r.font};Zi.prototype.setOptions=Zi.prototype.vi;function $i(t,e,i,r,n){t=t.createElement(e);i&&(t.style.cssText=i);r&&(t.innerHTML=r);n&&(t.className=n);return t}Zi.prototype.J=function(){return this.N};Zi.prototype.c=function(){this.f.innerHTML=this.i+" "+this.ra()};Zi.prototype.b=function(){this.c();setTimeout(this.c,5e3)};var bj='<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',fj={cl:"#0F1621",dl:.3,Yk:"#fff",Zk:.6},ej={cl:"#fff",dl:1,Yk:"#0F1621",Zk:.7},hj="1987&ndash;"+vd(2015,(new Date).getFullYear())+" HERE";Zi.prototype.ra=function(){var t=this.a,e=t.ob(),i=t.b.nb().bounds;t=t.a;var r=t.a.length,n={},o=0,a,s,l,u=[hj];if(i)for(;o<r;o++)if(s=t.get(o).getCopyrights(i.F(),e))for(a=0;a<s.length;a++)n[l=s[a].label]||(u.push(l),n[l]=1);return u.join(", ")};Zi.prototype.getCopyrights=Zi.prototype.ra;Zi.prototype.wa=function(){return this.N.style};Zi.prototype.i=String.fromCharCode(169);Zi.prototype.u=function(){this.a.removeEventListener(this.a.o.Ui,this.c);this.a.a.removeEventListener("add",this.b);this.a.a.removeEventListener("remove",this.b);this.a.a.removeEventListener("set",this.b);if(this.N.parentNode){var t=this.N;t.parentNode.removeChild(t)}};Zi.prototype.capture=function(t,e,i,r){var n=t.getContext("2d"),o=window.getComputedStyle(this.f.parentElement),a=2*zc(o.paddingLeft,10),s=(this.f.offsetWidth+2*a)*e,l=this.f.offsetHeight*e,u=Ac(o.getPropertyValue("font-size")),c=this.N.ownerDocument,h=+t.width,f=+t.height,p=aj*e,d=this.qf.childNodes[0].getBoundingClientRect(),y=d.width*e,g=d.height*e,v=hd;Ba(r)&&(v=function(){r("capture_error")});n.fillStyle=o.backgroundColor;n.fillRect(h-s,f-l,s,l);s=this.i+" "+function(t){t=$i(c,"div",null,t);return t.textContent||t.innerText||""}(this.ra());n.font=u*e+"px "+o.getPropertyValue("font-family");n.fillStyle=o.getPropertyValue("color");n.textBaseline="bottom";n.textAlign="right";n.fillText(s,h-a*e,f);ij(this,n.font,function(e){new qf("image",e).then(function(e){n.drawImage(e,p,f-(g+p),y,g);i(t)},v)},v)};Zi.prototype.capture=Zi.prototype.capture;function ij(t,e,i,r){jj(A(function(t){t?this.xh?i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):(t=this.qf.cloneNode(!0),t.firstChild.setAttribute("style","font:"+e),i(Ze(t.innerHTML)))},t),r)}Zi.prototype.xh=!1;function jj(t,e){var i="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(bj),r=dj;sc(r)?t(r):new qf("image",i).then(function(e){Ve.drawImage(e,0,0);try{Ve.getImageData(0,0,1,1),r=!1}catch(t){r=18===t.code}finally{dj=r,t(r)}},e)}var gj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki wiadczenia usugi","pt-BR":"Termos de servio","pt-PT":"Termos do servio","ru-RU":" ","tr-TR":"Servis Koullar","zh-CN":""};function P(t){var e={};this.i=e.previousSibling=e.nextSibling=e;this.j=new $e;P.l.constructor.call(this,t);t&&"objects"in t&&this.cc(t.objects)}u(P,M);t("H.map.Group",P);P.prototype.type=Og.GROUP;P.prototype.be=function(t,e){this.f=!0;t=P.l.be.call(this,t,e);this.f=!1;t&&this.forEach(kj,!0);return t};P.prototype.setProvider=P.prototype.be;function kj(t,e,i){t.be(i.a)}P.prototype.contains=function(t){var e=this===t;if(!e&&this.b&&C(t,M))for(;!e&&t;)t===this?e=!0:t=t.Va;return e};P.prototype.contains=P.prototype.contains;P.prototype.Xe=function(){this.D=B;this.forEach(lj,!0)};P.prototype.resetZInfo=P.prototype.Xe;function lj(t){t.Xe()}P.prototype.f=!1;P.prototype.ta=function(t){var e=P.l.ta.call(this,t);e&&!this.f&&(this.g=t,this.forEach(mj,!0),delete this.g);return e};P.prototype.invalidate=P.prototype.ta;function mj(t,e,i){t.ta(i.g)}P.prototype.forEach=function(t,e,i){var r;if(this.b){var n=this.i;var o=n.nextSibling;for(r=0;o!==n;){var a=o.nextSibling;t.call(i,o,r++,this);e&&C(o,P)&&o.forEach(t,e,i);o=a}}};P.prototype.forEach=P.prototype.forEach;P.prototype.Ua=function(t){var e=[];this.forEach(nj,t,e);return e};P.prototype.getObjects=P.prototype.Ua;P.prototype.F=function(){var t=null;this.b&&this.forEach(function(e){(e=e.F())&&(t?t=t.ic(e):t=e)});return t};P.prototype.getBoundingBox=P.prototype.F;function nj(t){this.push(t)}P.prototype.b=0;P.prototype.Zl=function(){return this.b};P.prototype.getChildCount=P.prototype.Zl;P.prototype.ca=function(t){var e=this.i,i=e.previousSibling;C(t,M,this.ca,0);if(t.contains(this))throw new Xc(this.ca,"The new object contains the parent group");var r=t.Nf(!0);var n=t.Va;if(n!==this){if(n){n=t.previousSibling;var o=t.nextSibling;n.nextSibling=o;o.previousSibling=n}t.Va=this;M.l.ga.call(t,this);i.nextSibling=t;t.previousSibling=i;t.nextSibling=e;e.previousSibling=t;this.b++}t.Ci=this.j.next();t.Xe();e=t.be(this.a,this.ca);t.Nf(!0)^r&&t.ta(Lg.VOLATILITY);e||t.ta(Lg.Z_ORDER);return t};P.prototype.addObject=P.prototype.ca;P.prototype.cc=function(t){var e;xc(t,this.cc,0);var i=t.length;for(e=0;e<i;e++)this.ca(t[e])};P.prototype.addObjects=P.prototype.cc;P.prototype.Ga=function(t){if(!t||t.Va!==this)throw new Xc(this.Ga,"object not found");var e=t.previousSibling,i=t.nextSibling;e.nextSibling=i;i.previousSibling=e;t.Va=null;M.l.ga.call(t,null);delete t.previousSibling;delete t.nextSibling;C(t.a,N)&&t.be(null,this.Ga);this.b--;return t};P.prototype.removeObject=P.prototype.Ga;P.prototype.qd=function(t){var e;xc(t,this.qd,0);var i=t.length;for(e=0;e<i;e++)this.Ga(t[e])};P.prototype.removeObjects=P.prototype.qd;P.prototype.qa=function(){var t=this.Ua();this.qd(t)};P.prototype.removeAll=P.prototype.qa;P.prototype.Kc=function(t){for(var e=this.Ua(),i=0,r=e.length,n=[],o,a,s;i<r;i++)s=e[i],s instanceof P?(o=t?t(s.getData()):s.getData(),a=Sg(this,o,!!t),o={type:"Feature"},o.properties=a,s.m&&(o.id=s.m),o.geometry={},o.geometry.type="GeometryCollection",o.geometry.geometries=oj(this,s.Ua()),n.push(o)):n.push(s.Kc(t));return{type:"FeatureCollection",features:n}};P.prototype.toGeoJSON=P.prototype.Kc;function oj(t,e){for(var i=0,r=e.length,n,o,a=[];i<r;i++)n=e[i],o={},n instanceof P?(o.type="GeometryCollection",o.geometries=oj(t,n.Ua())):o=n.$().Kc(),a.push(o);return a}P.prototype.V=function(){var t=P.l.V.call(this);t.type="Group";return t};P.prototype.forWorkerMessage=P.prototype.V;function pj(t,e,i,r,n){e&&(this.b=e);sc(i)&&(this.Gg=!!i);this.Gg&&r&&(this.Ig=new Zh(r.w,r.h));sc(n)&&(this.c={crossOrigin:n});switch(qj[wc(t)]){case 2:this.od=t;rj(this,1);break;case 1:if(kf(t)){this.od=t;sj(this);rj(this,1);break}t=t.src;case 0:if(t){t=Ze(t);this.a=new qf("image",t,B,this.c);this.a.then(A(this.Ln,this),A(this.Kn,this));break}default:throw rj(this,-1),new D(pj,0,"No image data")}}n=pj.prototype;n.A=0;n.getState=function(){return this.A};function rj(t,e){t.A=e;delete t.a;t.b&&t.b(e,t)}n.Gg=!0;function sj(t){if(t.Gg){var e=t.od,i=tj(t),r=i&&i.w||+e.width,n=i&&i.h||+e.height,o=Re();if(C(e,x.HTMLCanvasElement))i=e;else{i=e.ownerDocument.createElement("canvas");i.width=r*o;i.height=n*o;var a=i.getContext("2d");a.scale(o,o);a.drawImage(e,0,0,r,n);$c&&(a.clearRect(0,0,r,n),a.drawImage(e,0,0,r,n))}t.od=i}}n.od=y;n.getData=function(){return this.od};var qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};n=pj.prototype;n.Ig=y;n.yb=function(){return 1===this.A?tj(this):y};function tj(t){var e=t.Ig,i;if(!e){var r=t.od;e=r.naturalWidth||r.width;if(0===e&&Xe&&1===qj[wc(r)]){var n=!0;if(i=r.parentNode)var o=r.nextSibling;document.body.appendChild(r)}t.Ig=e=new Zh(r.naturalWidth||r.width,r.naturalHeight||r.height);n&&(i?i.insertBefore(r,o):document.body.removeChild(r))}return e}n.Ln=function(t){this.od=t;sj(this);rj(this,1)};n.Kn=function(){rj(this,-1)};n.cancel=function(){this.a&&this.a.cancel()};function uj(t,e){var i,r="anonymous";this.uid=vj.next();uj.l.constructor.call(this);if(e){var n="size";if(n in e){var o=e[n];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(uj,1,n);this.c=new Zh(o.w,o.h)}n="anchor";if(n in e){o=e[n];if(!o||isNaN(o.x)||isNaN(o.y))throw new D(uj,1,n);this.b=new I(o.x,o.y)}n="hitArea";n in e&&(o=e[n],C(o,$h,uj,1),this.g=e[n]);n="asCanvas";n in e&&(i=e[n]);n="crossOrigin";n in e&&(r=e[n]);o=e.stickHeight;o===+o&&0<o&&(this.ko=o);n="stickColor";o=e[n];n in e&&yc(o)&&(this.jo=o)}t=new pj(t,A(this.i,this),i,this.c,r);e=this.A=t.getState();0!==e?this.i(e,t):this.f=t}u(uj,F);t("H.map.Icon",uj);var vj=new $e;uj.State={ERROR:-1,LOADING:0,READY:1};uj.prototype.getState=function(){return this.A};uj.prototype.getState=uj.prototype.getState;uj.prototype.i=function(t,e){this.a=e.getData();if(1===t){var i=this.c;i||(i=this.c=e.yb());this.b||(this.b=new I(i.w/2|0,i.h))}this.f&&(this.A=t,delete this.f,this.dispatchEvent("statechange"))};uj.prototype.a=y;uj.prototype.Sc=function(){return this.a};uj.prototype.getBitmap=uj.prototype.Sc;uj.prototype.c=y;uj.prototype.yb=function(){return this.c};uj.prototype.getSize=uj.prototype.yb;uj.prototype.b=y;uj.prototype.fd=function(){return this.b};uj.prototype.getAnchor=uj.prototype.fd;uj.prototype.g=y;uj.prototype.pm=function(){return this.g};uj.prototype.getHitArea=uj.prototype.pm;uj.prototype.u=function(){uj.l.u.call(this);this.a?(this.a.removeAttribute("src"),delete this.a):(this.f.cancel(),delete this.f)};function wj(t,e,i,r,n,o){wj.l.constructor.call(this,isNaN(t)?15:t,e,i,r,n,o)}u(wj,gg);wj.prototype.m=function(t){for(var e,i,r,n=this.head;t;){if(e=t.entries)if(i=e.length){if(2>i&&(r=t.parent)&&1===r.a){r.removeChild(t);n===t&&(n=r);r.entries=e;t=e[0].node=r;continue}}else if(delete t.entries,r=t.parent)if(r.removeChild(t),n===t&&(n=r),1===r.a){t=r.a?r[0]||r[1]||r[2]||r[3]:null;continue}t=y}this.head!==n&&(this.head=n,lg(this))};wj.prototype.yc=function(t,e){if(qg(this.a,t,e,t,e))return xj(this,this.a,t,e,this.c);throw Error("Coordinates out of bounds")};function xj(t,e,i,r,n){var o=e.entries;if(n)if(e.a)o=yj(t,e,i,r,n);else if(o){o=o[0];var a=og(e,o[1]>=e[8]|(o[0]>=e[9])<<1);a.entries=e.entries;delete e.entries;o.node=a;lg(t,a);o=yj(t,e,i,r,n)}else pg(e,o=new zj(i,r)),lg(t,e),jg(t,o,!0);else o||lg(t,e),pg(e,o=new zj(i,r)),jg(t,o,!0);return o}function yj(t,e,i,r,n){return xj(t,og(e,i>=e[8]|(r>=e[9])<<1),i,r,n-1)}function zj(t,e){this.id=ng++;this[0]=e;this[1]=t}zj.prototype.hd=function(t){return this[t%2]};function Aj(){this.a=new wj(10,180,90,0,0,!0)}n=Aj.prototype;n.Fh=0;n.Tc=function(){return this.Fh};n.L=null;n.F=function(){var t=this.L,e;!t&&(e=hg(this.a))&&(this.L=t=new K(-e[0],e[3],-e[2],e[1]));return t};n.yc=function(t){++this.Fh;this.L=null;return this.a.yc(t.lng,-t.lat)};n.remove=function(t){if(t=this.a.remove(t))--this.Fh,this.L=null;return t};n.Qf=function(t,e,i){var r=this.a,n=t.Ob(),o=t.Lb(),a=-n.lat;n=n.lng;var s=-o.lat;o=o.lng;var l;t.Bb()?l=r.$a(-180,a,o,s,i,e).concat(r.$a(n,a,180,s,i,e)):l=r.$a(n,a,o,s,i,e);return l};function Bj(t,e,i){this.c=t;this.a=e;this.g=i;this.f=this.c&1?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B;this.b={}}function Cj(t){return{"translucent-pattern-lines":{color:Ji("strokeColor"),width:Ji("lineWidth * $meters_per_pixel"),join:t?t:Ji("lineJoin"),cap:Ji("lineCap"),tail_cap:Ji("lineTailCap"),head_cap:Ji("lineHeadCap"),miter_limit:Ji("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:Ji("lineDash"),extrude:!0,dash_phase:Ji("lineDashOffset")}}}function Dj(t,e,i,r){this.a=t;this.b=e;this.c=i;this.kf=r}function Ej(t,e,i,r){t={type:e,uid:t.b,tiled:i,max_zoom:t.c};r&&Va(t,r);return t}function Fj(t){this.a=t}function Gj(t,e,i,r,n){this.a=t;this.b=e;this.c=i;this.f=r;this.kf=n}function Hj(t){if(t.a&32&&!(t.a&16))return{};var e=new Dj(t.a,t.b,t.c,t.kf);var i=new Fj(t.a);t=new Bj(t.a,t.b,t.f);var r={},n=e.b;e=e.a&1?Ej(e,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(e.a&256)}):e.a&2?Ej(e,"RemoteRasterTileSource",!0,{url:""}):Ej(e,"ObjectTileSource",!0,{tile_size:e.kf});r[n]=e;e={};i.a&2&&(e={"translucent-raster":Ki("raster","inlay",1)});if(i.a&28){n=!!(i.a&64);var o={"translucent-polygons":Ki("polygons","inlay",2),"translucent-extruded-polygons":Ki("polygons","translucent",3),"translucent-pattern-lines":Ki("pattern-lines","translucent",4),"translucent-overlays":Ki("overlays","inlay",5),markers:Ki("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(i.a&128);o["translucent-pattern-lines"].crop_by_tile=n;o.markers.suppress_fade=!0;o.markers.stick=!0;Va(e,o)}t.c&2&&(t.b["tile_layer_"+t.a]=Mi(t.a,"_default",{"translucent-raster":{color:[1,1,1,t.g],order:0}}));if(t.c&4){i=Cj();n=t.b;o="polygon_layer_"+t.a;var a=Mi(t.a,"polygons",void 0,t.f);a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:Li(!1)};a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:Li(!0)};n[o]=a;t.b["outline_layer_"+t.a]=Mi(t.a,"outlines",i,t.f);i=Cj("round");t.b["polyline_layer_"+t.a]=Mi(t.a,"polylines",i,t.f)}t.c&8&&(t.b["overlay_layer_"+t.a]=Mi(t.a,"overlays",{"translucent-overlays":{color:[1,1,1,t.g],order:8190,interactive:!0}}));t.c&16&&(t.b["marker_layer_"+t.a]=Mi(t.a,"markers",{markers:{sprite:Ii("icon.id"),offset:Ii("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:Ii("icon.stick_color"),height:Ii("icon.stick_height")}}},t.f));return{sources:r,styles:e,layers:t.b}}function Ij(t,e){Ij.l.constructor.call(this);this.A=Jj.INIT;this.a=null;if(e&&si(e))throw new D(Ij,1,"Base URL must be absolute");this.b=e;if(Kj.test(t)&&-1===t.indexOf("import:"))this.c=t,e||(this.b=si(this.c)?B:this.c);else if(yc(t))this.f=t;else if(Ca(t))Lj(this,pc(t));else throw new D(Ij,0,Mj)}u(Ij,F);t("H.map.Style",Ij);Ij.prototype.getState=function(){return this.A};Ij.prototype.getState=Ij.prototype.getState;Ij.prototype.gd=function(){return this.b};Ij.prototype.getBaseUrl=Ij.prototype.gd;Ij.prototype.we=function(){return pc(this.a)};Ij.prototype.getConfig=Ij.prototype.we;Ij.prototype.load=function(){var t=this;this.c?(this.A=Jj.LOADING,new qf("text/plain",this.c).then(function(e){var i={};return Nj(e,t.b,!1,(i[t.b]=!0,i))}).then(function(e){return Lj(t,e)},function(e){return Oj(t,e.message)}),this.c=null):this.f&&(this.A=Jj.LOADING,Nj(this.f,this.b).then(function(e){return Lj(t,e)},function(e){return Oj(t,e.message)}),this.f=null)};Ij.prototype.load=Ij.prototype.load;Ij.prototype.Rk=function(t,e,i){var r;Pj(this);t=Qj(this,t,this.Rk,i);for(i=0;i<t.length;i++){var n=t[i].eb.draw;for(r in n){var o=n[r];ui(o)&&(o.interactive=!!e)}}Rj(this)};Ij.prototype.setInteractive=Ij.prototype.Rk;Ij.prototype.setProperty=function(t,e,i){var r,n=t.split("."),o=0,a=n.length;Pj(this);if(!sc(e))throw new D(this.setProperty,1,"value");if(r=Sj(this.a,n)){if(!(r.parent instanceof Object)||r.parent instanceof Array)if(i)n.pop(),n=Sj(this.a,n),r.parent=n.parent[n.cg]={};else throw new D(this.setProperty,0,t+" property is not primitive type");r.parent[r.cg]=e}else{for(r=this.a;o!==a-1;)r[n[o]]={},r=r[n[o++]];r[n[o]]=e}Tj(this)&&Rj(this)};Ij.prototype.setProperty=Ij.prototype.setProperty;Ij.prototype.mh=function(t){Pj(this);return(t=Sj(this.a,t.split(".")))?pc(t.node):void 0};Ij.prototype.getProperty=Ij.prototype.mh;Ij.prototype.removeProperty=function(t){Pj(this);(t=Sj(this.a,t.split(".")))&&t.parent&&t.parent.hasOwnProperty(t.cg)&&(delete t.parent[t.cg],Tj(this)&&Rj(this))};Ij.prototype.removeProperty=Ij.prototype.removeProperty;Ij.prototype.Ke=function(t){Pj(this);if(!Ca(t))throw new D(this.Ke,0,"config");Lj(this,ti(this.a,t))};Ij.prototype.mergeConfig=Ij.prototype.Ke;Ij.prototype.Df=function(t,e,i){var r;Pj(this);var n=this.a;var o=n.layers;var a=Qj(this,t,this.Df,!1);t=a.length;for(r={};t--;)Ci(r,o,a[t].id,!!e,!!i);i={};a=Object.keys(n);for(t=a.length;t--;){var s=a[t];var l=n[s];i[s]=l===o?r:pc(l)}e||Rj(this);return i};Ij.prototype.extractConfig=Ij.prototype.Df;Ij.prototype.toString=function(){return this.A===Jj.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""};Ij.prototype.u=function(){Ij.l.u.call(this);this.a=this.f=this.c=null};function Tj(t){var e=t.a,i;if(Ca(e)){var r;if(r=t.g){e=e&&e.sources;r=!1;for(var n in e)if(e[n].type===t.g){r=!0;break}r=!(e?r:1)}r&&(i="invalid source, the only valid type is "+t.g)}else i=Mj;i&&Oj(t,i);return!i}function Oj(t,e){t.a=null;t.A=Jj.ERROR;var i=Uj;re(t.ia,void 0!==i?String(i):void 0)?t.dispatchEvent(new sd(Uj,e,t)):console.error(e)}function Rj(t){t.dispatchEvent(new qd(Vj,t))}function Lj(t,e){t.a=e;Tj(t)&&(t.A=Jj.READY,Rj(t))}function Pj(t){if(t.A!==Jj.READY)throw new Xc(t.Ke,"style is not ready yet")}function Qj(t,e,i,r){var n=[],o=xc(e)?e:[e],a,s;void 0===r&&(r=!0);for(o=o.sort().reverse();a=o.pop();){e=String(a).split(".");t:{var l=t.a;for(var u=e.length;u--&&!zi[e[u]];);if(l&&0>u&&(l=xi(l.layers,e),ui(l)))break t;l=vi}if(l===vi)throw new D(i,0,'Unresolvable layer ID "'+a+'"');n.push({id:e,eb:l});if(r)for(s in l)!zi[s]&&ui(l[s])&&o.push(a+"."+s)}return n}function Sj(t,e){var i=0,r;for(r=e.length;i!==r;){var n=e[i++];var o=t;t=o[n];if(!t)break}return i===r?{node:t,parent:o,cg:n}:void 0}var Kj=/^(http[s]?)?.*\.ya?ml/,Mj="invalid style configuration";function Nj(t,e,i,r){i=void 0===i?!1:i;r=void 0===r?{}:r;try{var n=x.H.gl.yaml.safeLoad(t,{json:!0})}catch(t){return Promise.reject(t)}return n&&(t=n["import"],yc(t)&&(t=[t]),i&&e&&Wj(n,e),delete n["import"],xc(t)&&t.length)?(i=t.reduce(function(t,i){var n=e?ri(i,e):i;r[n]||(r[n]=!0,t.push(new qf("text/plain",n).then(function(t){return Nj(t,n,!0,r)})));return t},[]),Promise.all(i).then(function(t){var e={};t.forEach(function(t){return t&&ti(e,t)});ti(e,n);return e})):Promise.resolve(n)}function Wj(t,e){function i(t){t.url&&(t.url=ri(t.url,e))}var r=t&&t.fonts;if(r)for(var n in r)xc(r[n])?r[n].forEach(i):i(r[n]);if(t=t&&t.textures)for(var o in t)i(t[o])}var Jj={ERROR:-1,INIT:0,LOADING:1,READY:2};Ij.State=Jj;var Vj="change",Uj="error",Xj={ad:Vj,Qi:Uj};function Oi(t){var e=""+bf(),i;Oi.l.constructor.call(this);t=t||{};this.min=t.min||0;this.max=t.max||22;if(i=t.uri){if(/_/.test(i))throw new D(Oi,0,"uri "+i)}else i=e;this.uri=i||e;this.uid=e;t.getCopyrights&&vc(t.getCopyrights,"Function",Oi)&&(this.getCopyrights=t.getCopyrights);this.f=this.f.bind(this);this.ja=!0}u(Oi,F);t("H.map.provider.Provider",Oi);Oi.prototype.g={fe:"configchange",Ca:"update"};function Yj(t,e){t.dispatchEvent(new qd(t.g.Ca,e))}Oi.prototype.f=function(){this.dispatchEvent(this.g.fe)};Oi.prototype.u=function(){F.prototype.u.call(this);this.c&&(this.c.removeEventListener(Vj,this.f),this.c=null)};Oi.prototype.ra=function(){return null};Oi.prototype.getCopyrights=Oi.prototype.ra;Oi.prototype.m=function(){var t=0;this.gi()&&(t|=1);this.providesRasters()&&(t|=2);this.providesSpatials()&&(t|=4);this.providesOverlays()&&(t|=8);this.providesMarkers()&&(t|=16);this.providesDomMarkers()&&(t|=32);return t};Oi.prototype.gi=df;Oi.prototype.Qe=df;Oi.prototype.providesRasters=Oi.prototype.Qe;Oi.prototype.Bc=df;Oi.prototype.providesSpatials=Oi.prototype.Bc;Oi.prototype.hi=df;Oi.prototype.providesOverlays=Oi.prototype.hi;Oi.prototype.Tb=df;Oi.prototype.providesMarkers=Oi.prototype.Tb;Oi.prototype.Sb=df;Oi.prototype.providesDomMarkers=Oi.prototype.Sb;Oi.prototype.di=hd;Oi.prototype.i=1;function Zj(t,e){e=Xd(e,0,1);E(e)&&(e=1);t.i!==e&&(t.i=e,t.ja&&ak(t),t.f(),Yj(t))}Oi.prototype.vd=function(t,e){this.c&&(this.c.removeEventListener(Vj,this.f),this.c.removeEventListener(Uj,this.f));this.c=t;this.c.addEventListener(Vj,this.f);this.c.addEventListener(Uj,this.f);e||this.f();this.ja=!1};Oi.prototype.setStyleInternal=Oi.prototype.vd;Oi.prototype.zb=function(){this.c||ak(this);return this.c};Oi.prototype.getStyleInternal=Oi.prototype.zb;function ak(t){var e=new Gj(t.m(),t.uid,t.max,t.i,t.tileSize);t.c=new Ij(Hj(e));t.ja=!0}function bk(t){t=t.m();var e=ck;t&1?e=dk:t&2?e=null:t&28&&(e=ek);return e}Oi.prototype.lm=function(){return!1};Oi.prototype.getFeatureProxy=Oi.prototype.lm;function fk(t){var e;tc(this,fk);fk.l.constructor.call(this,t);this.Pa=t=[];for(e in Og)t[Og[e]]=new Kg}u(fk,Oi);t("H.map.provider.ObjectProvider",fk);fk.prototype.gi=cf;fk.prototype.providesByViewport=fk.prototype.gi;fk.prototype.Nb=function(t){return this.Pa[t||Og.ANY]};fk.prototype.getInvalidations=fk.prototype.Nb;fk.prototype.Sd=function(t,e){if(e!==Lg.NONE){var i=this.Pa[Og.ANY];var r=i.a+1;i.update(r,e);i=this.Pa[t.type];i.update(r,e);t.Nb().update(r,e);Yj(this,t)}};fk.prototype.invalidateObject=fk.prototype.Sd;fk.prototype.requestOverlays=fk.prototype.rd;fk.prototype.requestSpatials=fk.prototype.hg;fk.prototype.requestSpatialsByTile=fk.prototype.ig;fk.prototype.Qa=!1;fk.prototype.requestMarkers=fk.prototype.Dc;fk.prototype.requestDomMarkers=fk.prototype.Cc;function N(t){t=t||{};N.l.constructor.call(this,t);this.b=t=new P({min:t.min,max:t.max});t.a=this;t.ga(this);t.ta(Lg.ADD);this.C=new vg;this.j=new vg;this.v=new Aj;this.s=new vg;this.D=new Aj;this.I=new vg}u(N,fk);t("H.map.provider.LocalObjectProvider",N);N.prototype.m=function(){return 125};N.prototype.zb=function(){if(!this.sa){this.sa=N.l.zb.call(this);var t=new Gj(this.m()|256,this.uid+"_vol",this.max,this.i,this.tileSize);this.sa.Ke(Hj(t))}return this.sa};N.prototype.fc=function(){return this.b};N.prototype.getRootGroup=N.prototype.fc;N.prototype.Sd=function(t,e){e&Lg.SPATIAL&&this.ca(t);N.l.Sd.call(this,t,e)};N.prototype.invalidateObject=N.prototype.Sd;N.prototype.ca=function(t){var e;C(t,M,this.ca,0);if(t.a!==this)throw new Xc(this.ca,"foreign object");this.Ga(t);var i=t.type;if(i===Og.MARKER)if((e=t.$())instanceof Wf){var r=!0;i=this.v}else i=this.s;else i===Og.DOM_MARKER?(e=t.$())instanceof Wf?(r=!0,i=this.D):i=this.I:i=i===Og.OVERLAY?this.C:this.j;r=r?i.yc(e):i.Oj(t.F());r.Ni=t;t.ea=r};N.prototype.Ga=function(t){var e;if(t)if(t.a!==this){if(C(t,M))throw new Xc(this.Ga,"foreign object")}else if(e=t.ea){var i=t.type;i===Og.MARKER?this.v.remove(e)||this.s.remove(e):i===Og.DOM_MARKER?this.D.remove(e)||this.I.remove(e):i===Og.OVERLAY?this.C.remove(e):this.j.remove(e);delete e.Ni;delete t.ea}};N.prototype.removeObject=N.prototype.Ga;function gk(t,e,i,r,n,o,a){a=a||[];if(e.Tc())for(t=e!==t.v&&e!==t.s,n=!n,e=e.Qf(i,o,o),i=e.length,o=0;o<i;o++){var s=e[o].Ni;for(var l,u=xd(r),c=s;(l=c.s<=u&&c.v>=u)&&(c=c.Va););l&&(n||s.wc(!0))&&(t||1===s.wb().getState())&&a.push(s)}return a}N.prototype.hi=function(){return 0<this.C.Tc()};N.prototype.providesOverlays=N.prototype.hi;N.prototype.rd=function(t,e,i){return gk(this,this.C,t,e,i,!1).filter(function(t){return t.Sc()})};N.prototype.requestOverlays=N.prototype.rd;N.prototype.Bc=function(){return 0<this.j.Tc()};N.prototype.providesSpatials=N.prototype.Bc;N.prototype.hg=function(t,e,i){return gk(this,this.j,t,e,i,!1)};N.prototype.requestSpatials=N.prototype.hg;N.prototype.ig=function(t,e){return gk(this,this.j,t.Hf(),t.zL,e,!1)};N.prototype.requestSpatialsByTile=N.prototype.ig;N.prototype.Tb=function(){return 0<this.v.Tc()+this.s.Tc()};N.prototype.providesMarkers=N.prototype.Tb;N.prototype.Dc=function(t,e,i){return hk(this,t,e,i,!1)};N.prototype.requestMarkers=N.prototype.Dc;function hk(t,e,i,r,n){var o=gk(t,t.v,e,i,r,n);gk(t,t.s,e,i,r,n,o);return o}N.prototype.Sb=function(){return 0<this.D.Tc()+this.I.Tc()};N.prototype.providesDomMarkers=N.prototype.Sb;N.prototype.Cc=function(t,e,i){return ik(this,t,e,i,!1)};N.prototype.requestDomMarkers=N.prototype.Cc;function ik(t,e,i,r,n){var o=gk(t,t.D,e,i,r,n);gk(t,t.I,e,i,r,n,o);return o}function jk(t,e,i){var r=i.$(),n,o=kk.bind(null,t);t=lk.bind(null,t);C(i,nh)?n=C(r,L)?o(r):r.ma.some(o):C(i,Mh)?n=C(r,O)?t(r):r.ma.some(t):C(i,mk)&&(n=t(Dh(r)));n&&e.push(i)}function kk(t,e){t:{var i=e.W;var r=Ih(t,e);if(!r){e=e.W.length;for(var n=0;n<e;n+=3)if(Gh(t,i[n],i[n+1])){t=!0;break t}}t=r}return t}function lk(t,e){return Jh(t,e)}function nk(t,e,i){for(var r=t.length;r--;){var n=t[r],o=n.$();if(C(o,Yh)){o=o.ma;for(var a=o.length,s;a--;)if(s=o[a],Gh(e,s.lat,s.lng)){i.push(n);break}}else Gh(e,o.lat,o.lng)&&i.push(n)}}N.prototype.Ua=function(t,e,i,r,n){for(var o=this,a=t.F(),s=[],l=Wb(),u=1;u&Og.ANY;){if(u&r)switch(u){case Og.MARKER:l=l.then(function(){return hk(o,a,i,e,!0)}).then(function(e){return nk(e,t,s)});break;case Og.DOM_MARKER:l=l.then(function(){return ik(o,a,i,e,!0)}).then(function(e){return nk(e,t,s)});break;case Og.SPATIAL:l=l.then(function(){return gk(o,o.j,a,i,e,!0)}).then(function(e){e.forEach(jk.bind(null,t,s))});break;case Og.OVERLAY:l=l.then(function(){return gk(o,o.C,a,i,e,!0)}).then(function(e){e.forEach(jk.bind(null,t,s))})}u<<=1}l.then(function(){return n(s)})};N.prototype.u=function(){N.l.u.call(this);this.b.qa()};var ok={PENDING:0,ACTIVE:1,DONE:2};t("H.map.render.RenderState",ok);function pk(t,e){e=e||{};var i;if(!C(t,Element))throw new D(pk,0,t);var r=t.ownerDocument.createElement("div");this.N=t;pk.l.constructor.call(this);this.padding=new qk(0,0,0,0);this.center=new I(0,0);this.margin=0;this.element=r;r.style.zIndex=0;r.style.height=r.style.width="100%";r.style.position="relative"===t.style.position?"absolute":"relative";this.resize();t.appendChild(r);(i=e.padding)!==B&&this.wi(i.top,i.right,i.bottom,i.left);this.ri((i=e.margin)!==B?i:0)}u(pk,F);t("H.map.ViewPort",pk);pk.prototype.a={Ca:"update",ie:"sync"};pk.prototype.ri=function(t){if(this.margin!==+t){if(E(this.margin=+t))throw new D(this.ri,0,t);rk(this);this.dispatchEvent(this.a.Ca)}};pk.prototype.setMargin=pk.prototype.ri;pk.prototype.wi=function(t,e,i,r){var n=this.padding;if(n.top!==t||n.right!==e||n.bottom!==i||n.left!==r){if(E(t+e+i+r))throw new D(this.wi);n.top=t;n.right=e;n.bottom=i;n.left=r;rk(this);this.dispatchEvent(this.a.Ca)}};pk.prototype.setPadding=pk.prototype.wi;function rk(t){var e=t.padding;t.center.set((t.width+e.left-e.right)/2<<0,(t.height+e.top-e.bottom)/2<<0)}pk.prototype.resize=function(){var t=this.N.offsetWidth,e=this.N.offsetHeight;if(this.width!==t||this.height!==e)this.c=new Zh(this.width,this.height),this.width=t,this.height=e,rk(this),this.dispatchEvent(this.a.Ca)};pk.prototype.resize=pk.prototype.resize;function sk(t,e){t.dispatchEvent(new fi(t.a.ie,t.c,e,gi.SIZE))}pk.prototype.u=function(){x.clearTimeout(this.b);this.b=null;this.N.removeChild(this.element);this.element=this.N=null;pk.l.u.call(this)};pk.prototype.nc=Mc;pk.prototype.startInteraction=pk.prototype.nc;pk.prototype.gc=Mc;pk.prototype.interaction=pk.prototype.gc;pk.prototype.vb=Mc;pk.prototype.endInteraction=pk.prototype.vb;function tk(t,e,i,r,n,o){var a;for(a=[];r<=n;r++)a=a.concat(uk(t,i,r));t=a.length;Vi.call(this,o,t);this.j=i=[];this.f=A(this.f,this);this.c=A(this.c,this);for(this.R(1);t--;)o=a[t],i.push(vk(e,o[0],o[1],o[2],this.f,this.c))}u(tk,Vi);tk.prototype.f=function(){Xi(this,2)};tk.prototype.c=function(){Xi(this,4)};tk.prototype.le=function(){for(var t=this.j,e=t.length;e--;)t[e].cancel();this.j=y};function wk(t,e){var i=this;if(!Ba(e))throw new D(xk,1,e);if(!Ba(t.next||Ba(t.cycle)))throw new D(wk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[];this.c=[];this.g=t;this.i=e;this.j=function(){yk(i)};this.a=null;this.f=function(){i.a||(i.a=x.setTimeout(i.j,1))}}t("H.util.AsyncQueue",wk);wk.prototype.push=function(t,e){if(!Ba(e))throw new D(this.push,1,e);t=zk(new Ak,t,this.f,e);this.b.push(t);this.f();return t};wk.prototype.push=wk.prototype.push;function yk(t){var e=t.c,i=0,r=t.g;r.Jc=Bk();for(t.a=null;i<e.length;){var n=e[i];n.Sj?e.splice(i,1):i++}for(;n=r.next(t.b,t.c);)n.cancelled?n.done(null,"cancelled"):(e.push(n),t.i(n,n.data))}function Ak(){zk(this,null,null,null)}wk.Task=Ak;function zk(t,e,i,r){t.data=e;t.cancelled=!1;t.Sj=!1;t.b=i;t.c=r;t.a=null;return t}Ak.prototype.done=function(t,e){this.Sj=!0;this.b();this.c(this,t,e)};Ak.prototype.done=Ak.prototype.done;Ak.prototype.cancel=function(){this.a&&this.a();this.cancelled=!0};Ak.prototype.cancel=Ak.prototype.cancel;Ak.prototype.bo=function(t){this.a=t;return this};Ak.prototype.setCancelFn=Ak.prototype.bo;function Ck(t,e){Ck.l.constructor.call(this,new Dk(t),e)}u(Ck,wk);t("H.util.SequentialQueue",Ck);function Dk(t){if(isNaN(t)||0>t)throw new D(Ck,1,'Argument "maxTime" must be a positive number');this.a=t;this.Jc=Bk()}Dk.prototype.next=function(t){return t.length&&Bk()-this.Jc<this.a?t=t.shift():null};function Ek(t){tc(this,Ek);Ek.l.constructor.call(this,t);if(t&&"tileSize"in t){var e=Ad(+t.tileSize)/Kd;if(isNaN(e)||e%1||0>e||30<e)throw new D(Ek,0,"tileSize: "+t.tileSize);this.tileSize=+t.tileSize}}u(Ek,Oi);t("H.map.provider.TileProvider",Ek);function Fk(t,e){return Ud(t)-8-wd(Ud(e))}Ek.getZoomLevelOffset=Fk;Ek.prototype.Rd=function(t,e,i){return this.uri.concat("_",t,"_",e,"_",i)};Ek.prototype.getTileKey=Ek.prototype.Rd;Ek.prototype.kf=256;Ek.prototype.tileSize=Ek.prototype.kf;function Gk(){}t("H.util.ICache",Gk);Gk.prototype.add=function(){};Gk.prototype.add=Gk.prototype.add;Gk.prototype.get=function(){};Gk.prototype.get=Gk.prototype.get;Gk.prototype.Bf=function(){};Gk.prototype.drop=Gk.prototype.Bf;Gk.prototype.forEach=function(){};Gk.prototype.forEach=Gk.prototype.forEach;Gk.prototype.qa=function(){};Gk.prototype.removeAll=Gk.prototype.qa;Gk.prototype.Yd=function(){};Gk.prototype.registerOnDrop=Gk.prototype.Yd;Gk.prototype.Rg=function(){};Gk.prototype.deRegisterOnDrop=Gk.prototype.Rg;function Hk(t,e,i){this.g=[];e&&this.Yd(e);if(i&&!Ba(i))throw new D(Hk,2,i);this.b=0;this.filter=i;this.a={};this.f=this.c=null;this.ti(t)}t("H.util.Cache",Hk);Hk.prototype.add=function(t,e,i){i=+i;if(!Bc(i)||0>i)throw new D(this.add,2,i);t=String(t);var r=this.a[t];var n=!0;this.filter&&(n=this.filter(t,e,i));r?n?(this.b+=i-r.size,r.size=i,r.data=e,Ik(this,r)):Jk(this,r,!0):n&&(this.a[t]=Kk(this,{id:t,data:e,size:i,jc:null,Yc:null},this.c));Lk(this);return n};Hk.prototype.add=Hk.prototype.add;Hk.prototype.Yd=function(t){if(!Ba(t))throw new D(this.Yd,0,t);this.g.push(t)};Hk.prototype.registerOnDrop=Hk.prototype.Yd;Hk.prototype.Rg=function(t){this.g=this.g.filter(function(e){return e!==t})};Hk.prototype.deRegisterOnDrop=Hk.prototype.Rg;Hk.prototype.get=function(t,e){return(t=e?this.a[t]:Ik(this,this.a[t]))&&t.data};Hk.prototype.get=Hk.prototype.get;Hk.prototype.Bf=function(t){var e;(e=this.a[t])&&Jk(this,e,!0)};Hk.prototype.drop=Hk.prototype.Bf;Hk.prototype.forEach=function(t,e,i){var r;for(r in this.a){var n=this.a[r];(i?i(r,n.data,n.size):1)&&t.call(e,r,n.data,n.size)}};Hk.prototype.forEach=Hk.prototype.forEach;Hk.prototype.qa=function(t){var e;for(e in this.a){var i=this.a[e];(t?t(e,i.data,i.size):1)&&Jk(this,this.a[e],!0)}};Hk.prototype.removeAll=Hk.prototype.qa;Hk.prototype.ti=function(t){if(!(0<+t))throw new D(Hk.prototype.ti,0,t);this.i=+t;Lk(this);return this};Hk.prototype.setMaxSize=Hk.prototype.ti;Hk.prototype.Dm=function(){return this.i};Hk.prototype.getMaxSize=Hk.prototype.Dm;Hk.prototype.dm=function(){return this.b};Hk.prototype.getCurrentSize=Hk.prototype.dm;function Ik(t,e){e&&(t.c=Kk(t,e,t.c));return e}function Lk(t){for(;t.b>t.i&&t.f;)Jk(t,t.f,!0)}function Kk(t,e,i){if(i!==e){(e.jc||e.Yc)&&Jk(t,e);if(e.jc=i)e.Yc=i.Yc,i.Yc=e;e.Yc||(t.c=e);e.jc||(t.f=e);t.b+=e.size}return e}function Jk(t,e,i){var r=e.Yc,n=e.jc;if(r||n||e==t.c&&e==t.f)if(r?r.jc=n:t.c=n,n?n.Yc=r:t.f=r,t.b-=e.size,i){for(i=t.g.length;i--;)t.g[i].call(t,e.id,e.data,e.size);delete t.a[e.id]}e.jc=e.Yc=null}var Mk,Nk=function(){function t(){}for(var e,i,r,n=qc("o ms moz webkit "),o=5;o--&&!e;)e=n[o],e=(i=x[e+(e?"R":"r")+"equestAnimationFrame"])&&!E(i.call(window,t))&&(r=x[e+(e?"C":"c")+"ancelAnimationFrame"]);Mk=e?function(t){return i.call(x,t)}:function(t){return x.setTimeout(t,25)};return e?function(t){return r.call(x,t)}:function(t){return x.clearTimeout(t)}}(),Bk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Ok(t,e,i,r){this.key="";this.x=t;this.y=e;this.z=i;this.data=r;this.valid=!0}t("H.map.provider.Tile",Ok);function Pk(t,e,i,r){t-=i;e-=r;return t*t+e*e}function Qk(t,e,i){return Rk(t,e*e,i||0,0,t.length-1)}t("H.math.simplifyDP",Qk);function Rk(t,e,i,r,n){var o=0,a=r,s=t[r].x,l=t[r].y,u=t[n].x,c=t[n].y,h=r+1,f=Pk(s,l,u,c);if(f)for(;h<n;){var p=t[h++];var d=p.x;p=p.y;var y=((d-s)*(u-s)+(p-l)*(c-l))/f;d=0>y?Pk(d,p,s,l):1<y?Pk(d,p,u,c):Pk(d,p,s+y*(u-s),l+y*(c-l));d>o&&(o=d,a=h-1)}else for(;h<n;)p=t[h++],d=p.x,p=p.y,d=Pk(d,p,s,l),d>o&&(o=d,a=h-1);o>=e||0<i&&a-r?(--i,1<a-r?(r=Rk(t,e,i,r,a),r.splice(r.length-1,1)):r=[t[r]],r=1<n-a?r.concat(Rk(t,e,i,a,n)):r.concat(t.slice(a,n+1))):r=[t[r],t[n]];return r}function Sk(t,e,i,r,n,o,a,s){Sk.l.constructor.call(this,e,i,r,null);this.key=t;this.v=s;this.a=n;this.g=o;this.i={};this.zL=a;this.o=yd(Ug.MAX_LINE_WIDTH/2*this.g+1)}u(Sk,Ok);t("H.map.provider.SpatialTile",Sk);Sk.prototype.c=Td;Sk.prototype.ia=Td;Sk.prototype.b=Td;function Tk(t){return t.v.getInvalidations(Og.SPATIAL)}function Uk(t){var e=Tk(t),i=e.a,r=t.c,n=r===i,o;if(!(n||e.Qj(r)||e.zh(r))){n=t.f;var a=t.i;if(e.Sf(r))for(o=n.length;o--;){var s=n[o];if(s.Nb().Sf(r)){n.splice(o,1);var l=l||Vk(t,s.cb())}}if(e.Ah(r)){for(o=n.length;o--;)if(s=n[o],s.Nb().Ah(r)){var u=1;if((s=a[s.cb()])&&s.a){l=1;break}}u&&n.sort(Wk)}if(!l&&e.Ud(r))for(o=n.length;o--;)if(n[o].Nb().Ud(r)){var c=1;break}t.ia!==r||c||(t.ia=i,t.b!==r||l||(t.b=i));t.c=i;n=!0}return n}Sk.prototype.Td=function(){var t=Tk(this),e=t.a,i=this.b,r=i===e;r||(this.v.Qa&&!t.Ud(i)?r=!0:Uk(this)&&(r=this.b===e));return r};Sk.prototype.isCanvasValid=Sk.prototype.Td;Object.defineProperty(Sk.prototype,"valid",{get:function(){return this.Td()},set:hd,configurable:!0});function Xk(t,e){this.b=t;this.a=e}function Vk(t,e){t=t.i;var i=t[e];if(i)return delete t[e],i.a}Sk.prototype.f=ef;function Yk(t){var e=Tk(t),i=t.c,r=t.f,n;if(!Uk(t)){for(n=r.length;n--;){var o=r[n];var a=o.Nb();(a.Sf(i)||a.zh(i))&&Vk(t,o.cb())}t.f=t.v.requestSpatialsByTile(t,!1,!1).sort(Wk);t.c=e.a}}function Wk(t,e){return Qg(Pg(t),Pg(e),!1)}Sk.prototype.Ua=function(){return this.f};Sk.prototype.getObjects=Sk.prototype.Ua;var Zk={};Sk.prototype.Ee=function(){var t=this.a+"_"+this.g,e=Zk[t];if(!e){e=-this.o;var i=this.a-e;e=Zk[t]=new qk(e,e,i,i)}return e};Sk.prototype.getPxClipRect=Sk.prototype.Ee;Sk.prototype.Hf=function(){var t=this.s;if(!t){var e=this.Jf();t=0;var i=this.a;this.z&&(i-=t+=this.Ee().top);t=this.s=cg(e.Ne(new I(t,t)),e.Ne(new I(i,i)))}return t};Sk.prototype.getGeoClipRect=Sk.prototype.Hf;Sk.prototype.Jf=function(){var t=this.mb;if(!t){var e=this.a;t=this.mb=new mi(B,e);t.Ba(this.z);t.x=this.x*e;t.y=this.y*e}return t};Sk.prototype.getPxProj=Sk.prototype.Jf;Sk.prototype.Za=function(){return this.g};Sk.prototype.getPixelRatio=Sk.prototype.Za;Sk.prototype.dg=function(){var t=this.data;this.data=null;this.b=Td;return t};Sk.prototype.releaseCanvas=Sk.prototype.dg;Sk.prototype.eg=function(){this.i={};delete this.f;this.c=Td};Sk.prototype.releaseData=Sk.prototype.eg;Sk.prototype.Y=function(t){var e=t.getContext("2d"),i,r,n,o,a=0;Yk(this);if(this.b<this.c){var s=this.f;if(i=s.length){t.width=t.height=this.a;e.clearRect(0,0,this.a,this.a);var l=this.i;for(r=0;r<i;r++){var u=s[r];var c=u.cb();if(o=(n=l[c])?n.b:u.getGeometriesForTile(this)){if(n)u.Nb().Ud(this.b)&&(n.a=ch(u,o)),n=n.a;else{n=ch(u,o);var h;var f=o;for(var p=u.j?2:0,d=f.length;d--;){var y=f[d];if(y!==dh){var g=y.a;for(h=g.length;h--;)y=g[h],4<y.length&&(g[h]=Qk(y,.6,p))}}this.i[c]=new Xk(o,n)}if(n){e.save();f=u.j?this.C:this.G;for(c=0;c<o.length;c++)f.call(this,u,o[c],u.wa(),e);if(o=u.getLabels(this))for(u=e,c=o.length;c--;)for(p=o[c],f=p.size,u.font=f+"px "+p.font,u.fillStyle=p.color,u.textAlign="center",u.translate(p.x,p.y),u.rotate(p.angle),f=p.lineHeight||1.375*f,d=p.lines,p=d.length;p--;)u.fillText(d[p],0,p*f);e.restore()}a|=n}}}this.data=a?t:null;this.ia=this.b=this.c}else this.data&&(a=1);return 0<a};Sk.prototype.render=Sk.prototype.Y;Sk.prototype.G=function(t,e,i,r){var n;i.Ge&&($k(r,i,this.g),al(e,r,!1,!0,!1,this.a,this.o));i.Fe&&(n=t.g)&&n.Pb&&(bl(r,n),cl(this,r,e,n,i.lineWidth))};Sk.prototype.C=function(t,e,i,r){var n=i.Pb,o=i.Ge,a,s=this.a,l=this.o;if(e===dh)n&&(bl(r,i),r.fillRect(0,0,s,s));else{o&&$k(r,i,this.g);if(i.Fe&&(a=t.g)){var u=i.lineWidth;a.Pb||(a=null)}t=e.c;if(t===Sd){if(o||n)bl(r,i),al(e,r,!0,o,n,s,this.o);a&&(bl(r,a),cl(this,r,e,a,u,0))}else n&&(bl(r,i),al(e,r,!0,!1,n,s,l,0,t)),o&&al(e,r,!1,o,!1,s,l,t),a&&(bl(r,a),cl(this,r,e,a,u,t))}};function al(t,e,i,r,n,o,a,s,l){var u=t.a,c=-a;a=o+a;s=s||0;l===B&&(l=u.length);if(n&&t===dh)e.fillRect(0,0,o,o);else if(l>s){e.beginPath();for(o=s;o<l;o++){var h=u[o];var f=h.length;if(h===Lh)e.moveTo(c,c),e.lineTo(c,a),e.lineTo(a,a),e.lineTo(a,c);else{var p=h[0];e.moveTo(p.x,p.y);for(s=1;s<f;s++)p=h[s],e.lineTo(p.x,p.y)}i&&e.closePath()}i&&n&&e.fill(t.b!==Sd?"evenodd":"nonzero");r&&e.stroke()}}function $k(t,e,i){var r;t.strokeStyle=e.strokeColor;t.lineWidth=e.lineWidth*i;t.lineCap=e.lineCap;t.lineJoin=e.lineJoin;t.miterLimit=e.miterLimit;t.setLineDash&&(r=e.lineDash)!==ef&&(t.setLineDash(r),t.lineDashOffset=e.lineDashOffset)}function bl(t,e){t.fillStyle=e.fillColor}function cl(t,e,i,r,n,o){var a=n*r.width/2;n=n*r.length/2;var s=n/2;r=2*n*r.frequency;var l=Bd(Cd(n,2)+Cd(a,2));t=t.a-l;t=new qk(l,l,t,t);i=i.a;var u,c,h,f,p,d,y,g=Ld/2;o=o||0;for(l=i.length;l-- >o;){var v=0;var _=i[l];if(c=u=_.length){var m=_;c=m.length;for(h=0;--c;)h+=m[c].Ya(m[c-1]);c=(m=h)>=r}if(c)for(c=ud(xd(m/r),1e3),c=m/(c+1),h=c/2;--u;){for(f=(p=_[u]).Ya(d=_[u-1]);h<=v+f;){var b=p.x+(d.x-p.x)*(y=(h-v)/f);y=p.y+(d.y-p.y)*y;t.xf(b,y)&&(e.save(),e.translate(b,y),e.rotate(-Id((d.y-p.y)/(p.x-d.x))+(p.x<d.x?g:-g)),e.beginPath(),e.moveTo(-a,-n),e.lineTo(0,n),e.lineTo(a,-n),e.lineTo(0,-s),e.closePath(),e.fill(),e.restore());h+=c}v+=f}}}var dl=[];Sk.prototype.Ea=function(t,e,i){for(var r=this.f,n=r.length,o,a,s,l,u,c,h=ef,f,p=this.g;n--;)if(a=r[n],a.wc(!0)&&(s=this.i[a.cb()])&&(l=s.b)){o=a.wa();c="none"!==o.fillColor&&a.j;f="none"===o.strokeColor?0:o.lineWidth*p;for(o=l.length;o--;){u=l[o];var d;if(!(d=c&&u===dh)&&(d=c||f)){var y;d=t;var g=e,v=c,_=f,m=u.b,b=u.c,x=b!==Sd,w=u.a,k=w.length,A=0,T=0,E=!1;for(u=0;u<k;u++){var M=w[u];var R=u>=b;var S=!R&&u>=m;if(M===Lh&&v)S?A++:T++;else{var O=M.length;dl.length=2*O;for(y=0;y<O;y++){var P=M[y];dl[2*y]=P.x;dl[2*y+1]=P.y}y=v&&!R;R=x&&!R?0:_;if(y||R)if(R=ae(d,g,dl,R,y),R===$d.EDGE||R===$d.VERTEX){E=!0;break}else if(R===$d.SURFACE)if(S)A++;else if(T++,m===Sd)break}}d=E||0<T&&!(A%2)}if(d){h===ef&&(h=[]);h.push(a);break}}if(i&&h.length)break}return h};function el(t,e){var i;el.l.constructor.call(this,e);this.G=t;this.K=t=e.pixelRatio;this.tileSize=i=1<<wd(Ud((e.tileSize||256)*t));this.I=Fk(i,t);this.Ih=A(this.Ih,this);this.Xh=A(this.Xh,this);this.Jh=A(this.Jh,this);this.Hh=A(this.Hh,this);this.s=A(this.s,this);this.G.addEventListener(Oi.prototype.g.Ca,this.s,!1,this);this.b=[];this.j=new Hk(e.tileCacheSize||256,this.Ih);this.v=new Hk(e.dataCacheSize||512,this.Xh);this.D=new Ck(20,this.Jh);this.a={};this.C=Bk()}u(el,Ek);el.prototype.s=function(t){t.target.type===Og.SPATIAL&&Yj(this,t.target)};el.prototype.gb=function(t,e,i,r){var n=this.getTileKey(t,e,i),o;if(o=this.j.get(n,r)){if(r||o.Td())return o;r||this.j.Bf(n)}if((o=this.v.get(n,r))&&(r||Uk(o)))return t=this.b.pop()||document.createElement("canvas"),o.Y(t)||this.b.push(t),this.j.add(n,o,1),o;r||((o=this.a[n])?o.count++:(o=this.D.push([n,t,e,i],this.Hh),o.count=1,this.a[n]=o))};el.prototype.requestTile=el.prototype.gb;el.prototype.dd=function(){};el.prototype.Oc=function(t,e,i){this.tf(this.getTileKey(t,e,i))};el.prototype.cancelTile=el.prototype.Oc;el.prototype.tf=function(t){var e;if(e=this.a[t])e.count--,e.count||(e.cancel(),delete this.a[t])};el.prototype.cancelTileByKey=el.prototype.tf;n=el.prototype;n.Jh=function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3];i=this.j.get(i)||new Sk(i,r,n,o,this.tileSize,this.K,o+this.I,this.G);r=i.data||this.b.pop()||document.createElement("canvas");i.Y(r)||this.b.push(r);e.push(i);t.done(i)};n.Hh=function(t,e){t=t.data[0];e&&this.j.add(t,e,1);delete this.a[t];Yj(this)};n.Ih=function(t,e){e.data&&this.b.push(e.dg());this.v.add(t,e,1)};n.Xh=function(t,e){e.eg()};n.u=function(){for(var t in this.a)this.a[t].cancel();this.j.qa();this.v.qa();this.b.length=0;el.l.u.call(this)};function fl(t,e){e=e||{};if(!t)throw new D(gl,0,t);this.tileSize=t.tileSize;this.c={};Ni.call(this,{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max,minWorldSize:this.tileSize,projection:e.Fo,dark:e.dark,provider:t})}u(fl,Ni);t("H.map.layer.BaseTileLayer",fl);fl.prototype.ue=function(t,e){var i=this.pixelProjection;if(!C(t,K))throw new D(this.ue,0,t);if(!E(e)){var r=i.Hj();i.Ba(e)}t=hl(i.ib(t.Ob()),i.ib(t.Lb()));!E(r)&&i.Ba(r);return t};fl.prototype.geoRectToRect=fl.prototype.ue;fl.prototype.Qd=function(t,e){var i=Cd(2,xd(e)),r=this.tileSize;if(!C(t,qk))throw new D(this.Qd,0,t);if(E(e=+e))throw new D(this.Qd,1,e);e=xd(t.left/r);e===i&&--e;var n=xd(t.right/r);n===i&&--n;return new qk(e,Xd(xd(t.top/r),0,i-1),n,Xd(xd(t.bottom/r),0,i-1))};fl.prototype.getTileBounds=fl.prototype.Qd;fl.prototype.gb=function(t,e,i,r){return this.a.requestTile(t,e,i,r)};fl.prototype.Oc=function(t,e,i){this.a.cancelTile(t,e,i)};fl.prototype.cancelTile=fl.prototype.Oc;fl.prototype.ra=function(t,e){return this.a.getCopyrights?this.a.getCopyrights(t,e):null};fl.prototype.getCopyrights=fl.prototype.ra;function il(t,e,i,r,n){r=xd(r);var o=Cd(2,r),a=e.left,s=e.top,l=e.right;i=l+(i?o+(l===e.left?0:1):1);var u=e.bottom,c=[];if(n){var h=a+(1+l-a)/2+n.x/t.tileSize-.5;var f=s+(1+u-s)/2+n.y/t.tileSize-.5}for(;a<i;){for(s=e.top;s<=u;)t=a%o,c.push([t,s,r,n?zd(h-a)+zd(f-s):0]),s++;a++}return c}function uk(t,e,i){i=xd(i);t.pixelProjection.Ba(i);e=t.ue(e);var r=t.Qd(e,i);return il(t,r,e.left>e.right,i)}fl.prototype.De=function(t,e,i,r,n,o){var a,s=[],l,u=this.a;o=null!=o?o:"__default__";var c=u.requestTile;if(!C(t,qk))throw new D(this.De,0,t);if(E(i=+i))throw new D(this.De,1,i);r||(a={});e=il(this,t,e,i,n);if(t=e.length)for(r||e.sort(jl),i=t;i--;)n=e[i],r||(a[u.Rd.apply(u,n)]=!0),n[3]=+r,(l=c.apply(u,n))&&s.push(l);if(!r){r=a;var h;a=this.c[o]||{};for(h in a)a.hasOwnProperty(h)&&a[h]&&!r[h]&&this.a.cancelTileByKey(h);this.c[o]=r}return{total:t,tiles:s}};fl.prototype.getProviderTiles=fl.prototype.De;function jl(t,e){return e[3]-t[3]}function Q(t){tc(this,Q);Q.l.constructor.call(this,t);this.bc=new kl;this.bd=A(this.bd,this);this.sa=ll;this.createTileInternal=this.dd.bind(this)}u(Q,Ek);t("H.map.provider.RemoteTileProvider",Q);Q.prototype.Jd=function(){return 1};Q.prototype.getEntryWeight=Q.prototype.Jd;var ll=new Hk(65536);Q.prototype.j={};Q.prototype.v={};Q.prototype.Mb=function(){return this.sa};Q.prototype.getCache=Q.prototype.Mb;Q.prototype.G=ba(2);Q.prototype.bd=function(t){var e=this.uri;return!t.indexOf(e)&&"_"===t.charAt(e.length)};Q.prototype.cacheFilter=Q.prototype.bd;Q.prototype.Xa=function(t,e){e.valid=!1};Q.prototype.reload=function(t){var e=this.getCache();t?e.qa(this.bd):e.forEach(this.Xa,this,this.bd);ml(this);Yj(this)};Q.prototype.reload=Q.prototype.reload;Q.prototype.Kg=function(){return!1};Q.prototype.MAX_STORE_TIME=Infinity;Q.prototype.Lf=function(){return this.bc};Q.prototype.ea=function(t,e){e(t)};function vk(t,e,i,r,n,o){r=~~r;return t.requestInternal(e,i,r,function(a,s){t.Lf().put(t.Rd(e,i,r),{raw:s&&s.raw||a,timestamp:x.Date.now()},n,o)},o,0)}Q.prototype.requestInternal=Q.prototype.O;Q.prototype.gb=function(t,e,i,r){var n=this;var o=this.getCache();if(E(t=+t))throw new D(this.gb,0,t);if(E(e=+e))throw new D(this.gb,0,e);if(E(i=+i))throw new D(this.gb,0,i);i=~~i;var a=this.getTileKey(t,e,i);o=o.get(a);o&&o.valid||r||this.j[a]||(o=B,this.requestTileAsPromise(t,e,i,r).then(function(t){Yj(n,t)},hd));return o};Q.prototype.requestTile=Q.prototype.gb;Q.prototype.Ek=function(t,e,i,r){var n=this,o=this.getCache(),a=this.getTileKey(t,e,i),s=this.j,l=this.v,u,c=this.Lf();if(l[a])return l[a];l[a]=l=new Ob(function(l,h){function f(u){var f,p;var d=function(r,s){p=n.createTileInternal(t,e,i,r,s);p.key=a;o.add(a,p,n.Jd(r));l(p);nl(n,a)};u&&(f=x.Date.now()-u.timestamp);u&&f<n.MAX_STORE_TIME?n.ea(u.raw,d):(f&&c.remove(a),(p=o.get(a))&&p.valid||r?l(p||null):s[a]=n.requestInternal(t,e,i,d,h))}u=c.get(a,f,f)});s[a]||(s[a]=u);l.then(function(){nl(n,a)},function(){nl(n,a)});return l};Q.prototype.requestTileAsPromise=Q.prototype.Ek;Q.prototype.Dk=function(t,e){var i=this,r=t.id,n=t.tile.coords;return new Ob(function(t,o){i.Ek(n.x,n.y,n.z,e).then(function(e){var i=y;e=e.Ua?e.Ua():e.data;for(var n=e.length,o;n--;)if(o=e[n],o.cb()===r){i=o;break}t(i)},o)})};Q.prototype.requestObjectAsPromise=Q.prototype.Dk;function nl(t,e){delete t.j[e];delete t.v[e]}function ml(t){for(var e in t.j)t.j[e].cancel(),t.v[e].cancel();t.constructor.prototype.j={};t.constructor.prototype.v={}}var ol={cancel:function(){}};Q.prototype.dd=function(t,e,i,r){return new Ok(t,e,i,r)};Q.prototype.tf=function(t){var e=this.j[t];e&&(e.cancel(),this.v[t].cancel(),nl(this,t))};Q.prototype.cancelTileByKey=Q.prototype.tf;Q.prototype.Oc=function(t,e,i){this.cancelTileByKey(this.getTileKey(t,e,i))};Q.prototype.cancelTile=Q.prototype.Oc;Q.prototype.u=function(){Q.l.u.call(this);this.getCache().qa(this.bd);ml(this)};function kl(){}Q.NullStorage=kl;kl.prototype.get=function(t,e){e();return ol};kl.prototype.get=kl.prototype.get;kl.prototype.put=function(t,e,i){i&&i()};kl.prototype.put=kl.prototype.put;kl.prototype.clear=function(t){t&&t()};kl.prototype.clear=kl.prototype.clear;kl.prototype.remove=function(t,e){e&&e()};kl.prototype.remove=kl.prototype.remove;function xk(t){xk.l.constructor.call(this,t);t&&(this.D={crossOrigin:t.crossOrigin||"anonymous",headers:t.headers||{}},this.C=t.getURL);if(!Ba(this.C))throw new D(xk,0,"getURL");Zj(this,t.opacity);this.b=x.URL||x.webkitURL;t=this.D.crossOrigin;if(!(t="anonymous"===t||"use-credentials"===t)){t=this.C(0,0,0);var e=window.location,i=document.createElement("a");i.href=t;t=i.hostname===e.hostname&&i.port===e.port&&i.protocol===e.protocol}(this.I=t&&!!qf.prototype.b.arraybuffer&&!!this.b)&&this.Mb().Yd(A(this.Pa,this))}u(xk,Q);t("H.map.provider.ImageTileProvider",xk);xk.prototype.lc=function(t){Zj(this,t)};xk.prototype.setOpacity=xk.prototype.lc;xk.prototype.Uc=function(){return this.i};xk.prototype.getOpacity=xk.prototype.Uc;xk.prototype.Qe=cf;xk.prototype.providesRasters=xk.prototype.Qe;xk.prototype.Jd=function(){return this.tileSize};xk.prototype.getEntryWeight=xk.prototype.Jd;xk.prototype.O=function(t,e,i,r,n,o){var a=this,s=this.C(t,e,i),l;t=null;if(s){var u=x.setTimeout(function(){a.I?l=new qf("arraybuffer",s,o,a.D).then(function(t){return t.blob()}).then(function(t){var e=new Image;e.onload=A(r,null,e,{raw:t});e.onerror=A(n,null,"bad url");try{e.src=a.b.createObjectURL(t)}catch(t){}},n):l=new qf("image",s,o,a.D).then(r,n)},150);t={cancel:function(){l?l.cancel():x.clearTimeout(u)}}}else r(null);return t};xk.prototype.requestInternal=xk.prototype.O;xk.prototype.ea=function(t,e){var i=new Image;i.onload=function(){e(this)};i.src=this.b.createObjectURL(t)};xk.prototype.Pa=function(t,e){(t=e.data)&&t instanceof HTMLImageElement&&this.b.revokeObjectURL(t.src)};function qk(t,e,i,r){this.left=+t;this.top=+e;this.right=+i;this.bottom=+r}t("H.math.Rect",qk);qk.prototype.set=qk;qk.prototype.set=qk.prototype.set;qk.prototype.Ob=function(){return this.c||(this.c=new I(this.left,this.top))};qk.prototype.getTopLeft=qk.prototype.Ob;qk.prototype.Lb=function(){return this.a||(this.a=new I(this.right,this.bottom))};qk.prototype.getBottomRight=qk.prototype.Lb;qk.prototype.xf=function(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e};qk.prototype.containsXY=qk.prototype.xf;function hl(t,e){return new qk(t.x,t.y,e.x,e.y)}qk.fromPoints=hl;qk.prototype.clone=function(){return new qk(this.left,this.top,this.right,this.bottom)};qk.prototype.clone=qk.prototype.clone;function gl(t,e){fl.call(this,t,e)}u(gl,fl);t("H.map.layer.TileLayer",gl);gl.prototype.sd=function(t,e,i,r,n){if(!C(t,K))throw new D(this.sd,0,t);if(E(e=+e))throw new D(this.sd,1,e);e=xd(e);this.pixelProjection.Ba(e);t=this.ue(t);var o=this.Qd(t,e);return this.De(o,t.left>t.right,e,i,r,n)};gl.prototype.requestTiles=gl.prototype.sd;function pl(t,e){e=e?Ta(e):{};e.tileSize=e.tileSize||256;e.pixelRatio=e.pixelRatio||Re();e.max=24;this.c=new el(t,e);this.f=new gl(this.c);e.minWorldSize=this.c.tileSize;e.provider=t;pl.l.constructor.call(this,e);this.tileSize=this.f.tileSize;this.j=A(this.j,this);this.c.addEventListener(this.c.g.Ca,this.j);t.addEventListener("update",this.j)}u(pl,Ni);t("H.map.layer.ObjectLayer",pl);pl.prototype.j=function(t){t.currentTarget!==this.c&&t.target.type===Og.SPATIAL||this.g()};var ql={markers:ef,total:0};pl.prototype.Dc=function(t,e,i){var r=this.a,n;return r.providesMarkers()&&(n=r.requestMarkers(t,e,!0,i)).length?{markers:n,total:n.length}:ql};pl.prototype.requestMarkers=pl.prototype.Dc;pl.prototype.Cc=function(t,e,i){var r=this.a,n;return r.providesDomMarkers()&&(n=r.requestDomMarkers(t,e,!0,i)).length?{markers:n,total:n.length}:ql};pl.prototype.requestDomMarkers=pl.prototype.Cc;var rl={tiles:ef,total:0};pl.prototype.sd=function(t,e,i,r){if(this.a.providesSpatials()){var n=this.f.sd(t,e,i,r);i||(i=this.c,n=Bk(),33<n-i.C&&(yk(i.D),i.C=n),n=this.f.sd(t,e,!0,r))}else n=rl;return n};pl.prototype.requestTiles=pl.prototype.sd;pl.prototype.gb=function(t,e,i,r){return this.f.gb(t,e,i,r)};pl.prototype.requestTile=pl.prototype.gb;pl.prototype.Oc=function(t,e,i){this.f.Oc(t,e,i)};pl.prototype.cancelTile=pl.prototype.Oc;var sl={overlays:ef,total:0};pl.prototype.rd=function(t,e,i){var r=this.a,n=sl;r.providesOverlays&&r.providesOverlays()&&(t=r.requestOverlays(t,e,!0,i),e=t.length)&&(n={overlays:t,total:e});return n};pl.prototype.requestOverlays=pl.prototype.rd;pl.prototype.u=function(){this.c.B();this.f.B();this.a.dispose();pl.l.u.call(this)};function tl(t,e,i,r){var n=new qk(0,0,0,0);tl.l.constructor.call(this);if(!t)throw new D(tl,0,t);if(!e)throw new D(tl,1,e);if(!i)throw new D(tl,2,i);if("object"!==typeof r)throw new D(tl,3,r+" is not an object");if("number"!==typeof r.pixelRatio)throw new D(tl,3,r.pixelRatio+" is not a number");this.pa=r.pixelRatio;this.zoom=0;this.fb=Ad(this.pa)/Kd;this.b=new mi;this.Fb={1:n.clone(),2:n.clone(),4:n.clone()};this.c=new I(.5,.5);this.j=t;ul(this,this.pa);this.nc=A(this.nc,this);this.gc=A(this.gc,this);this.vb=A(this.vb,this);t.startInteraction=this.nc;t.interaction=this.gc;t.endInteraction=this.vb;t.addEventListener(t.a.Ca,this.sa,!1,this);this.G=e;this.mc=A(this.mc,this);this.control=A(this.control,this);this.ub=A(this.ub,this);e.startControl=this.mc;e.control=this.control;e.endControl=this.ub;e.addEventListener(e.a.Ca,this.Pg,!1,this);this.f=i;this.Xf=A(this.Xf,this);this.Ie=A(this.Ie,this);this.Je=A(this.Je,this);this.Wf=A(this.Wf,this);i.addEventListener(Ni.prototype.b.Ca,this.Xf,!1,this);i.addEventListener(i.b.ee,this.Ie,!1,this);i.addEventListener(i.b.ge,this.Je,!1,this);i.addEventListener(i.b.he,this.Wf,!1,this)}u(tl,F);t("H.map.render.RenderEngine",tl);function ul(t,e){var i=t.j,r=i.width,n=i.height,o=i.padding,a=o.top,s=o.left,l=o.bottom;o=o.right;i=i.margin;var u=-(r+s-o)/2<<0,c=-(n+a-l)/2<<0;r+=u;n+=c;t=t.Fb;t[1].set((u-i)*e,(c-i)*e,(r+i)*e,(n+i)*e);t[2].set(u*e,c*e,r*e,n*e);t[4].set((u+s)*e,(c+a)*e,(r-o)*e,(n-l)*e)}tl.prototype.sa=function(){ul(this,this.pa)};tl.prototype.u=function(){var t=this.j,e=this.G,i=this.f;t.removeEventListener(t.a.Ca,this.sa,!1,this);t.startInteraction===this.nc&&(t.startInteraction=pk.prototype.nc);t.interaction===this.gc&&(t.interaction=pk.prototype.gc);t.endInteraction===this.vb&&(t.endInteraction=pk.prototype.vb);e.removeEventListener(e.a.Ca,this.Pg,!1,this);e.startControl===this.mc&&(e.startControl=vl.prototype.mc);e.control===this.control&&(e.control=vl.prototype.control);e.endControl===this.ub&&(e.endControl=vl.prototype.ub);i.removeEventListener(Ni.prototype.b.Ca,this.Xf,!1,this);i.removeEventListener(i.b.ee,this.Ie,!1,this);i.removeEventListener(i.b.ge,this.Je,!1,this);i.removeEventListener(i.b.he,this.Wf,!1,this)};tl.prototype.control=function(){};tl.prototype.capture=function(){return Xb(Error("not implemented"))};function wl(t,e){t.style.transition="opacity 1.5s";t.addEventListener("transitionend",e,!1);t.style.opacity=0}var xl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};tl.InteractionModifiers=xl;n=tl.prototype;n.Xj={Yi:"render"};n.Xf=function(t){this.nk(t);this.oa()};n.Ie=function(t){this.Le(t.idx,t.added)};n.Je=function(t){this.Yh(t.idx,t.removed,t.type===this.f.b.he)};n.Wf=function(t){t.removed&&this.Je(t);this.Ie(t)};n.nk=hd;n.Le=function(t,e){this.vh(t,e);0===t&&this.Hb();C(e,Ni)&&yl(this,e,!0);this.$d();this.oa()};n.Hb=function(){var t=this.f.Ka();if(0<t.length){var e=t[0].max;this.Ag=t[0].min;this.vg=e}else t=this.getCapabilities().lookAt.zoom,e=t.max,this.Ag=t.min,this.vg=e;t=zl(this,this.zoom);t!==this.zoom&&(this.zoom=t,this.b.Ba(t),Al(this))};function Al(t,e){t.K=t.nb();e&&(t.K.position=e);t.K.zoom=t.zoom-t.fb;t.K.position.alt=0}n.no=0;n.heading=180;n.nb=function(){return Bl(this,{position:this.b.projection.bg(this.c),zoom:this.zoom,tilt:this.no,heading:this.heading})};function Bl(t,e){e.tilt=Cl(t,e.tilt);e.heading=Dl(t,e.heading);e.incline=t.getCapabilities().lookAt.incline.min;return e}function zl(t,e){var i=t.getCapabilities().lookAt.zoom;return Xd(e,vd(i.min,t.Ag),ud(i.max,t.vg))}function Cl(t,e){t=t.getCapabilities().lookAt.tilt;return Xd(e,t.min,t.max)}function Dl(t,e){t=t.getCapabilities().lookAt.heading;return Xd((e%360+360)%360,t.min,t.max)}function yl(t,e,i){i=i?e.addEventListener:e.removeEventListener;i.call(e,e.b.Wi,t.Zh,!1,t);i.call(e,e.b.Vi,t.Zh,!1,t)}n.vh=hd;n.Yh=hd;n.co=function(t,e){this.D={before:t,after:e}};tl.prototype.setOnRenderCallbacks=tl.prototype.co;var El={P2D:0,WEBGL:1};tl.EngineType=El;var Fl={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:xl.ZOOM,COORD:xl.COORD},capture:!0};t("H.map.render.webgl.capabilities",Fl);function Gl(t){var e,i=this,r=x.H.gl;Gl.l.constructor.call(this);this.a=e=r.Scene.create(x.URL.createObjectURL(mf(JSON.stringify(Hl))),{viewport:t.viewport,container:t.oc,disableRenderLoop:!0,devicePixelRatio:t.devicePixelRatio,logLevel:"error"});t.Mn&&e.subscribe({load:t.Mn});e.subscribe({view_complete:function(){i.f=!0;t.qk()}});var n=e.requestRedraw;e.requestRedraw=function(){n.apply(e);t.qk()};this.g=A(this.g,this);this.gg=A(this.gg,this);this.ji=A(this.ji,this);this.i=0;this.c={};this.b={}}u(Gl,md);Gl.prototype.f=!1;function Il(t){t=t.a.sources;var e;for(e in t){var i=t[e];if(i.hasPendingCommands&&i.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}Gl.prototype.Y=function(){var t=x.H.gl.Task;this.a.immediateRedraw();t.setState({user_moving_view:this.a.view.user_input_active});t.processAll();return this.f&&!this.a.dirty&&!this.a.building&&!Il(this)&&!Object.keys(this.b).length};function Jl(t){t.f=!1;t.a.resetViewComplete()}function Kl(t){return t.a.view}function Ll(t,e){function i(){var i=e.Ka(),n={},o={},a,s,l,u=++t.i,c,h;ti(o,Hl);for(s=0;s<i.length;s++){var f=i[s];if(a=f.na()){var p=a.zb();if(p.getState()===Jj.READY){var d=p.we();if(!Sa(d)){delete d.cameras;delete d.camera;n[s]=d=Fi(d,s);!C(f,pl)&&d.sources&&Gi(d,a.uid);for(l in d.sources){var g=d.sources[l];g.max_zoom=ud(a.max,Fl.lookAt.zoom.max);g.max_display_zoom=f.max;g.min_display_zoom=f.min;if(h=a.tileSize)2<=r&&256<h&&a instanceof xk&&(h/=2),g.tile_size=h}(c=p.gd())&&Hi(d,c);ti(o,d)}}}}ti(o.layers.skybox.draw.skybox.color,o.scene.sky);t.a.config=o;return t.a.updateConfig().then(function(){var e={},r,o;if(u!==t.i)return!1;t.i=0;for(o in n){f=i[+o];var a=n[o].sources;for(r in a)if(a=t.a.sources[r])e[r]=a,a.initialize&&f.getProvider()&&a.initialize(f.getProvider(),t.g,t.a.getWorkers().length,a.tiled?B:t.a.tile_manager.getWorkerForTile(y,a))}for(r in t.c)!e[r]&&t.c[r].dispose&&t.c[r].dispose();t.c=e;return!0})}var r=t.a.pixelRatio();t.a.initialized?i():t.a.load(y,{blocking:!1}).then(i)}Gl.prototype.g=function(t,e){var i=this.a.sources[t];e?!0!==this.b[t]&&(this.b[t]||(this.b[t]={el:{},Hg:[]}),C(e,Ok)?this.b[t].el[e.x+"/"+e.y+"/"+e.z]=!0:(e=e.boundingBox,this.b[t].Hg.push(new K(e[0],e[1],e[2],e[3])))):this.b[t]=!0;i&&i.has_volatile_data?this.gg():(x.clearTimeout(this.j),this.j=x.setTimeout(this.gg,Ml))};var Ml=100;n=Gl.prototype;n.ji=function(t){var e=!1,i=this.b[t.source.name],r=x.H.gl;if(i)if(!0===i)e=!0;else{var n=r.Tile.coord(r.Geo.wrapTile(t.coords));e=!!i.el[n.key];if(!e)for(t=r.Geo.getTileBoundingBox(n,t.source.tile_size,Ug.MAX_LINE_WIDTH/2),t=cg(t.getTopLeft(),t.getBottomRight()),r=0;r<i.Hg.length;r++)if(i.Hg[r].ld(t,!0)){e=!0;break}}return e};n.gg=function(){this.a.tile_manager.removeTiles(this.ji);this.a.tile_manager.updateTilesForView();Jl(this);this.b={}};n.we=function(){return this.a.config};function Nl(t,e,i,r){t.a.getFeatureAt(e,i,r);t.a.update()}function Ol(t){return t.a.screenshot(void 0).then(function(t){return new Ob(function(e,i){new pj(URL.createObjectURL(t.blob),function(t,r){1===t?e(r.getData()):i()},!1)})})}n.Za=function(){return this.a.pixelRatio()};n.u=function(){var t=this.c;Gl.l.u.call(this);this.a.destroy();this.b={};t&&Object.keys(t).forEach(function(e){t[e].dispose()});x.clearTimeout(this.j);this.c=this.a=null};var Hl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}};function Pl(t,e){if(E(this.x=+t))throw new D(Pl,0,t);if(E(this.y=+e))throw new D(Pl,1,e)}Pl.prototype.add=function(t){return new Pl(this.x+t.x,this.y+t.y)};Pl.prototype.a=function(t){if(!C(t,Pl))throw new D(this.a,0,t);t=this.b(t);return t.x+t.y};Pl.prototype.b=function(t){if(!C(t,Pl))throw new D(this.b,0,t);return new Pl(this.x*t.x,this.y*t.y)};Pl.prototype.Ba=function(t){return new Pl(this.x*t,this.y*t)};function Ql(t){return Bd(t.a(t))}function Rl(){this.s=sc(ff.Gn)?ff.Gn:3;this.v=sc(ff.En)?ff.En:300;this.ia=sc(ff.so)?ff.so:3;this.mb=sc(ff.oo)?ff.oo:50;this.f=[];this.clear()}Rl.prototype.start=function(t,e){var i=xl.HEADING,r=xl.TILT;this.a&&this.clear();this.b=t;this.m=!!e;this.a=!0;this.j=!(t&(i|r))||t===i||t===r};Rl.prototype.store=function(t,e,i,r,n){var o=!1;if(this.a){t=new Sl(t,e,i,r,n);o=t.c;this.o=this.c;this.c=t;if(this.g){if(this.i=!0,o){e=this.b;var a=this.j;if(!a&&this.i){n=xl.HEADING;var s=xl.TILT;i=xl.COORD;r=xl.ZOOM;var l=e&(i|s)?Tl(this,!0):Ul;var u=e&r?Vl(this,!0):1;var c=e&n?zd(this.i?Wl(this.g,this.c):0):0;var h=zd(l.x);var f=zd(l.y);l=10<h||10<f;h=10<f&&f>3*h;u=.8>u||1.2<u;c=7<c;e&s&&(c||u||l&&!h?Xl(this,s):h&&(Xl(this,~s>>>0),a=!0));!a&&e&n&&e&(i|r)&&(u||l?(Xl(this,n),a=!0):c&&(Xl(this,s),a=!0));this.j=a}}}else this.g=t,o||(this.j=!0);this.m&&this.f.push(t)}return o};Rl.prototype.clear=function(){this.f.length=0;this.a=this.m=this.i=this.j=!1;this.g=this.o=this.c=void 0};function Xl(t,e){t.b^=t.b&e}Rl.prototype.Fa=function(){return this.a};var Ul=nc(new Pl(0,0));function Yl(t){var e;if(t.m){var i=t.f;var r=i.length;var n=0;for(e=new Pl(0,0);--r&&n<t.ia;)e=e.add(Zl(i[r-1],i[r])),n++}else e=Tl(t);t=e;i=Ql(t);return 0!==i?new Pl(t.x/i,t.y/i):t}function $l(t){var e=Bk(),i,r;if(t.m){var n=t.f;var o=t.f.length;var a=t.f[o-1];for(r=i=0;--o&&i<t.ia;)r+=Ql(Zl(n[o],n[o-1])),i++;n=r/i}else a=t.c,n=Ql(Tl(t));return n=n>=t.s&&e-a.timestamp<=t.mb?n>t.v?t.v:n:0}function am(t){return t.c?bm(t.c):B}function Tl(t,e){return(e=e?t.g:t.o)?Zl(e,t.c):new Pl(0,0)}function Vl(t,e){var i=1;if(t.i){var r=t.c;t=e?t.g:t.o;if(t=cm(t))if(r=cm(r))i=r/t}return i}function Sl(t,e,i,r,n){this.a=new I(t,e);i!==B&&(this.b=new I(i,r),this.c=!0);this.timestamp=n!==B?n:Bk()}Sl.prototype.c=!1;function bm(t){var e=t.a;return(t=t.b)?new I(e.x-(e.x-t.x)/2,e.y-(e.y-t.y)/2):B}function dm(t,e){var i=t.a;return(t=t.b)&&t.Ya(e)<i.Ya(e)?t:i}function Zl(t,e){var i=t.b,r=e.b;r&&i?(e=bm(e),t=bm(t)):i?(e=e.a,t=dm(t,e)):r?(t=t.a,e=dm(e,t)):(e=e.a,t=t.a);return new Pl(e.x-t.x,e.y-t.y)}function Wl(t,e){var i=t.b,r=e.b,n=0;i&&r&&(t=t.a,e=e.a,n-=Jd(r.y-e.y,r.x-e.x)*Rd-Jd(i.y-t.y,i.x-t.x)*Rd);return n}function cm(t){var e=t.b;return e?t.a.Ya(e):0}var ck=1,dk=2,ek=3;function em(){F.call(this);this.reset()}u(em,F);em.prototype.start=function(t,e){this.a&&this.reset();E(t-e)||(this.b=+t,this.c=+e);this.a=!0};em.prototype.reset=function(){this.a=!1;this.b=this.c=null;this.f=new fm(0,0,0,0,0,0)};em.prototype.Fa=function(){return this.a};em.prototype.g={xg:"animationupdate"};function gm(t){gm.l.constructor.call(this,em.prototype.g.xg);this.c=t}u(gm,qd);em.prototype.set=function(t,e,i,r,n,o){var a=this.f;this.a&&(t=new fm(t/1e3,e/1e3,i/1e3,r/1e3,n/1e3,o/1e3),a.la(t)||(this.f=t,this.dispatchEvent(new gm(hm(this)))))};function hm(t){return x.Object.create(t.f)}function im(t){var e=hm(t);t=jm(hm(t))||1;return new fm(e.pb/t,e.qb/t,e.rb/t,e.Ye,e.Ze,e.mg)}em.prototype.u=function(){this.reset();em.l.u.call(this)};function fm(t,e,i,r,n,o){this.pb=t;this.qb=e;this.rb=i;this.Ye=r;this.Ze=n;this.mg=o}function jm(t){return Bd(t.pb*t.pb+t.qb*t.qb+t.rb*t.rb)}fm.prototype.la=function(t){return!!t&&this.pb===t.pb&&this.qb===t.qb&&this.rb===t.rb&&this.Ye===t.Ye&&this.Ze===t.Ze&&this.mg===t.mg};function km(t,e,i,r){km.l.constructor.call(this);this.oc=t;this.pa=r;this.a=t.appendChild(this.createElement(t.ownerDocument));lm(this,e,i)}u(km,md);n=km.prototype;n.J=function(){return this.a};function lm(t,e,i){t.size?(t.size.w=e,t.size.h=i):t.size=new Zh(e,i);t.Wk(t.a,t.a.style,e,i,t.pa)}n.yb=function(){return this.size};n.Za=function(){return this.pa};n.Uj=!0;n.sb=function(t){t!==this.Uj&&(this.a.style.display=t?"block":"none",this.Uj=t)};n.Kh=1;n.lc=function(t){this.Kh!==t&&(this.Yj(t),this.Kh=t)};n.Uc=function(){return this.Kh};n.ef=function(t){this.a.style.zIndex=t};n.Gj=function(){return+this.a.style.zIndex};n.Rc=function(){};n.clear=function(){};n.u=function(){this.clear();this.oc.removeChild(this.a);lm(this,0,0);this.a=this.oc=null;km.l.u.call(this)};n.Ak=0;n.kg=function(){++this.Ak};n.release=function(){--this.Ak||this.B()};function mm(t,e,i,r){mm.l.constructor.apply(this,arguments)}u(mm,km);n=mm.prototype;n.Id=function(){return"dom"};n.createElement=function(t){t=t.createElement("DIV");t.style.position="absolute";return t};n.Wk=function(t,e,i,r){e.width=i+"px";e.height=r+"px"};n.Yj=function(t){this.a.style.opacity=t};n.Rc=function(t,e,i){var r=this.pa,n=t.style;n[wf("transform")]="matrix(1,0,0,1,"+e/r+","+i/r+")";t.parentNode!==this.a&&(n.position="absolute",this.a.appendChild(t))};n.clear=function(t){t?this.a.removeChild(t):this.a.innerHTML=""};function nm(t,e,i,r,n,o){var a=n||"2d";nm.l.constructor.apply(this,arguments);this.b=this.a.getContext(a,o);this.c="2d"===a;this.f=a;this.vn=o}u(nm,km);n=nm.prototype;n.createElement=function(t){t=t.createElement("canvas");var e=t.style;e.position="absolute";e.top=e.left="0";return t};n.Wk=function(t,e,i,r,n){t.width=vd(i,1);t.height=vd(r,1);e.width=wd(i/n)+"px";e.height=wd(r/n)+"px"};n.Yj=function(t){this.b.globalAlpha=t};n.Rc=function(t,e,i,r,n){this.c&&this.b.drawImage(t,e,i,r,n)};n.Id=function(){return this.f};n.clear=function(t){var e,i;this.c&&(t?this.b.clearRect(e=t.left,i=t.top,t.right-e,t.bottom-i):this.a.width=this.size.w)};n.u=function(){this.a.width=this.a.height=0;this.b=y;nm.l.u.call(this)};function om(t){this.eb=t}u(om,md);om.prototype.xb=function(){return this.eb};om.prototype.df=function(t){var e=this.Eb;t!==e&&(this.Eb=t,t.kg(),e&&e.release())};om.prototype.u=function(){this.Eb.release()};om.prototype.Pd=function(){};function pm(t){var e="dom";pm.l.constructor.call(this,t);C(this.eb,qm)&&(e="2d"===t.Id()?"2d":"webgl");this.a=e}u(pm,om);pm.prototype.Y=function(t,e,i,r,n,o,a,s){a=this.eb;var l=this.Eb,u=!(C(l,nm)&&"2d"===l.Id());if(r>=a.min&&r<=a.max)return u&&l.sb(!0),a.Y(l.J(),{boundingBox:t,zoom:r,screenCenter:e,priorityCenter:o,projection:i,cacheOnly:n,size:l.yb(),pixelRatio:l.Za(),cameraMatrix:s});u&&l.sb(!1);return ok.DONE};pm.prototype.Pd=function(){return this.a};t("H.util.animation.ease.LINEAR",function(t){return t});t("H.util.animation.ease.EASE_IN_QUAD",function(t){return t*t});function rm(t){return-t*(t-2)}t("H.util.animation.ease.EASE_OUT_QUAD",rm);t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(t){t*=2;return 1>t?Cd(t,5)/2:(t-=2,Cd(t,5)/2+1)});t("H.util.animation.ease.EASE_OUT_CIRC",function(t){return Bd(2*t-t*t)});function sm(t,e,i,r){if(!Ba(this.i=t))throw new D(sm,0,t);if(E(this.g=+e))throw new D(sm,1,e);if(!Ba(this.f=i)&&null!=i)throw new D(sm,2,i);if(!Ba(this.c=r)&&null!=r)throw new D(sm,3,r);this.id=tm.next();this.a=!1}t("H.util.animation.Animation",sm);var tm=new $e;sm.prototype.start=function(){var t=this,e=Mk;var i=function(){var n=Bk(),o=n-t.Jc,a=o/t.g;if(1<=a){a=1;var s=!0}t.c&&(a=t.c(a));t.i(a,o,n-r,n);r=n;s?t.stop():t.b=e(i)};t.Jc=Bk();var r=t.Jc;t.a=!0;t.b=e(i)};sm.prototype.start=sm.prototype.start;sm.prototype.stop=function(t){Nk(this.b);this.a=!1;t||this.f&&this.f(this)};sm.prototype.stop=sm.prototype.stop;sm.prototype.Fa=function(){return this.a};sm.prototype.isRunning=sm.prototype.Fa;function um(t,e){um.l.constructor.call(this,t);this.qc=!(!e||!e.qc);this.c={}}u(um,om);um.prototype.df=function(t){um.l.df.call(this,t);this.f=t.oc.ownerDocument};var vm=function(t,e){e=e.$();return C(e,kh)?e.ma:(t[0]=e,t)}.bind(null,[]);um.prototype.Y=function(t,e,i,r,n,o,a){var s=this.eb,l,u,c,h;this.j=e=this.c;this.c=i={};if(r>=s.min&&r<=s.max){var f=this.tj(t,r,n,o);var p=f.markers;if(t=p.length){r=[];n=this.Eb;for(o=0;o<t;o++){s=p[o];var d=vm(s);for(l=d.length;l--;)if(u=a(d[l]))(h=e[c=s.cb()+"_"+l])?delete e[c]:h={ik:s},i[c]=h,r.push([h,s,s.wb(),n,u.x,u.y])}r.sort(wm);t=r.length;for(o=0;o<t;o++)this.Ck.apply(this,r[o])}}return!f||f.requested&&f.requested===f.total||!f.requested&&p.length===f.total?ok.DONE:ok.PENDING};function wm(t,e){var i=Pg(t[1]),r=Pg(e[1]);return Qg(i,r,!0)||t[5]-e[5]||Qg(i,r,!1)}um.prototype.Ea=function(){};function xm(t,e){xm.l.constructor.apply(this,arguments);this.b=0;this.a=[];this.Yg=A(this.Yg,this)}u(xm,um);n=xm.prototype;n.tj=function(){return this.eb.Cc.apply(this.eb,arguments)};n.Y=function(t,e,i,r,n,o,a){this.Yg();this.i=0;var s=xm.l.Y.apply(this,arguments);var l=this.Eb,u=this.j,c;for(c in u)ym(this,l,u[c]);return 0===this.a.length&&s?ok.DONE:ok.PENDING};n.df=function(t){xm.l.df.call(this,t);this.g=t.Za()};n.Yg=function(){for(var t=this.a.length,e,i,r;t--;)r=this.a[t],e=r.lf,i=r.lf.wb(),i.Wh(r,i,e);this.a.length=0};n.Ck=function(t,e,i,r,n,o){var a;var s=r.Za();var l=e.Nb();n*=s;o*=s;this.qc||(n=wd(n),o=wd(o));t.detail&&(l.Ud(t.jn)?ym(this,r,t):a=t.detail);a||(t.detail=a=i.wj(this.f),this.b++,Ba(i.Wh)&&this.a.push(a));t.jn=l.a;a.style.zIndex=this.i++;a.lf=e;r.Rc(a,n,o,0,0)};var zm,Am="pointer-events",Bm;if(Xe){var Cm;Xe&&Zc!==y&&(Zc=(Cm=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Cm[2]:y);Bm=Zc;9===Bm?Am="display":10===Bm&&(Am="visibility")}zm=Am;xm.prototype.Ea=function(t,e,i){var r=this.g,n=ef,o,a,s,l,u;if(this.b){t/=r;e/=r;r=this.f;var c=r.documentElement;var h=this.Eb.J();var f=h.getBoundingClientRect();t+=f.left;for(e+=f.top;(a=s=r.elementFromPoint(t,e))&&a!==h&&a!==c&&s!==p;){for(;(l=a.parentNode)&&(!Ba(l.contains)||!l.contains(h));)a=l;if(l===h&&(a!==s||"svg"!==a.nodeName)&&0>n.indexOf(u=a.lf)&&(n===ef&&(n=[]),n.push(u),i))break;o||(o=[]);var p=a.style;o.push({hj:p.getPropertyValue(zm),hn:p.getPropertyPriority(zm),style:p});p.setProperty(zm,"visibility"===zm?"hidden":"none","important");p=s}if(o)for(e=o.length;e--;)t=o[e],t.style.removeProperty(zm),yc(t.hj)&&t.style.setProperty(zm,t.hj,t.hn)}return n};xm.prototype.Pd=function(){return"dom"};function ym(t,e,i){e.clear(e=i.detail);delete e.lf;t.b--;i=(t=i.ik).wb();i.b&&i.b(e,i,t)}xm.prototype.u=function(){this.a.length=0;var t=this.Eb,e=this.c,i;for(i in e)ym(this,t,e[i]);this.Eb.B();xm.l.u.call(this)};function qm(t,e){var i=e||{},r=i.contextType;i=i.contextAttributes;qm.l.constructor.call(this,e);vc(t,"Function",qm,0,"invalid render callback");if(r){if(-1===Dm.indexOf(r))throw new D(qm,1,"invalid context type");this.f=r}i&&(this.m=i);this.j=t}u(qm,Ni);t("H.map.layer.CanvasLayer",qm);var Dm=["2d","webgl","webgl2","experimental-webgl"];qm.prototype.f="2d";qm.prototype.Id=function(){return this.f};qm.prototype.Y=function(t,e){this.c&&this.c.canvas===t||(this.c=t.getContext(this.f,this.m));return this.j(this.c,e)};qm.prototype.u=function(){qm.l.u.call(this);this.c=B};function Em(t,e){Em.l.constructor.call(this,e);vc(t,"Function",Em,0,"invalid render callback");this.c=t}u(Em,Ni);t("H.map.layer.DomLayer",Em);Em.prototype.Y=function(t,e){return this.c(t,e)};function Fm(t,e){if(E(this.b=+t))throw new D(Fm,0,t);this.a=0;e&&this.Qk(e)}t("H.util.kinetics.KineticMove",Fm);Fm.prototype.Qk=function(t){this.a=t;return this};Fm.prototype.setInitialSpeed=Fm.prototype.Qk;Fm.prototype.gm=function(){return Math.abs(this.a/this.b)};Fm.prototype.getDuration=Fm.prototype.gm;Fm.prototype.ye=function(t){return this.a+this.b*t};Fm.prototype.getCurrentSpeed=Fm.prototype.ye;Fm.prototype.cm=function(t){return this.a*t+this.b*t*t/2};Fm.prototype.getCurrentPath=Fm.prototype.cm;function Gm(t,e){this.a=t;this.b=e}function Hm(t,e,i){var r=[],n={oc:t.a,width:e.w,height:e.h,pa:t.b};for(t=0;t<i.length;t++){e=i[t];var o=e.Pd();var a={};Va(a,n);var s=e.Eb;switch(o){case"2d":C(e.xb(),qm)&&(a.Ng=e.xb().m);if(o=c&&"2d"===c.Id()){o=a.Ng;var l=c.vn;o=l===o?!0:l&&!o?!l.alpha&&!l.willReadFrequently:o&&!l?!o.alpha&&!o.willReadFrequently:!o.alpha===!o.alpha&&!l.willReadFrequently===!o.willReadFrequently}if(o)var u=!1;else if(s&&!u){var c=s;u=!1}else c=new nm(a.oc,a.width,a.height,a.pa,"2d",a.Ng),u=!0;break;case"dom":c=s||new mm(a.oc,a.width,a.height,a.pa);u=!s;break;default:c=s||new nm(a.oc,a.width,a.height,a.pa,e.xb().Id(),a.Ng),u=!s}r[r.length-1]!==c&&(c.ef(r.length),r.push(c));e.df(c)}return r}t("H.util.events.listenOnce",Be);t("H.util.events.dispatchEvent",function(t,e){return t.dispatchEvent(e)});t("H.util.events.fireListeners",function(t,e,i,r){return ke(t)?t.ed(e,i,r):Le(t,e,i,r)});t("H.util.events.listen",Ae);t("H.util.events.unlisten",Ie);var Im=Me;Me=function(t,e){var i,r,n=!0;var o=e[e.currentTarget===e.target?"AT_TARGET":t.capture?"CAPTURING_PHASE":(i=!0,"BUBBLING_PHASE")];if(!i||"pointerenter"!==(r=e.type)&&"pointerleave"!==r)e.eventPhase=o,n=Im(t,e),i&&t.src&&t.src.ec&&null===t.src.ec()&&delete e.eventPhase;return n};function vl(){vl.l.constructor.call(this);this.c={};this.b={position:new Wf(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(Fg([90,-180,90,0,90,180,-90,180,-90,-180]))}}u(vl,F);t("H.map.ViewModel",vl);vl.prototype.a={Ca:"update",ie:"sync"};vl.prototype.Xb=function(t,e){if(!t)throw new D(this.Xb,0,t);var i=t[Jm];if(sc(i)&&!Xf(i))throw new D(this.Xb,0,Jm);i=t[Km];if(sc(i)&&E(+i))throw new D(this.Xb,0,Km);i=t[Lm];if(sc(i)&&!C(i,Vf))throw new D(this.Xb,0,Lm);t=x.Object.assign({},t);i=Mm(t,this.c,this.b);Nm(this,this.c,t);this.dispatchEvent(new Om(this.c,i,e));return this};vl.prototype.setLookAtData=vl.prototype.Xb;vl.prototype.nb=function(){var t={};t[Jm]=Yf(this.b[Jm]);Nm(this,t,this.b,!0);return t};vl.prototype.getLookAtData=vl.prototype.nb;var Jm="position",Km="zoom",Lm="bounds",Pm={Xi:Jm,$i:Km,Ri:"heading",Zi:"tilt",Si:"incline",Oi:Lm},Qm=Object.keys(Pm).map(function(t){return Pm[t]});function Nm(t,e,i,r){t.i={};t.g={};t.f=[];for(var n=t.m,o=t.j,a=Qm.length,s,l,u,c;a--;)if(s=Qm[a],c=i[s],l=e[s],null==l||!r)if(null!=c){sc(n)&&n.call(t,s,l,c);u=s;var h;(h="position"!==s)||(h=c,h=!h||E(h.lat)||E(h.lng)?!1:!0);e[u]=h?c:Yf(c);if(sc(o)){switch(s){case"position":u=c&&l&&(c.lat!==l.lat||c.lng!==l.lng);break;case"bounds":u=c&&l&&!c.la(l);break;default:u=c!==l}u&&o.call(t,s,l,c)}}else delete e[s]}vl.prototype.m=function(t,e,i){this.i[t]=e;this.g[t]=i};vl.prototype.j=function(t){this.f.push(Rm[t])};var Rm=Qm.reduce(function(t,e){t[e]=gi[e.toUpperCase()];return t},{});function Mm(t,e,i){var r=0;["tilt","incline","heading",Km].forEach(function(n){if(E(t[n])){var o=E(e[n])?i[n]:e[n];t[n]=o}else r|=Rm[n]});[Jm,Lm].forEach(function(n){t[n]?r|=Rm[n]:t[n]=e[n]||i[n]});return r}function Sm(t,e){var i={},r={};Nm(t,t.b,e);t.c={};i.lookAt=t.g;r.lookAt=t.i;e=t.f;e=e.length?e.reduce(Tm):0;t.dispatchEvent(new fi(t.a.ie,i,r,e))}function Tm(t,e){return t|e}vl.prototype.ff=function(t,e){if(E(t=+t))throw new D(this.ff,0,Km);this.Xb({zoom:t},e)};vl.prototype.ob=function(){return this.b.zoom};vl.prototype.mc=Mc;vl.prototype.startControl=vl.prototype.mc;vl.prototype.control=Mc;vl.prototype.control=vl.prototype.control;vl.prototype.ub=Mc;vl.prototype.endControl=vl.prototype.ub;function Om(t,e,i){Om.l.constructor.call(this,vl.prototype.a.Ca,t,null,e);this.b=!!i}u(Om,fi);function R(t,e,i,r){R.l.constructor.call(this,t,e,i,r);this.yd=new Hk(100);this.ea=new I(0,0);this.re=!!r.enableSubpixelRendering;this.$b=Um;this.v=new Rl;this.m=r=new em;this.ac=A(this.ac,this);r.addEventListener(r.g.xg,this.ac);r=t.element;this.I=t=r.ownerDocument.createElement("div");t.style.position="absolute";t.style.width=t.style.height="100%";t.style.zIndex=0;r.insertBefore(t,r.firstChild);this.zd=new Gm(this.I,this.pa);t=x.H.gl;if(!t)throw new Xc(R,'"H-webgl" module is missing');this.a=new Gl({viewport:this.j,oc:this.I,devicePixelRatio:this.pa,qk:A(this.oa,this)});t.WorkerBroker.addTarget("model",Qi);t=this.f.Ka();r=0;var n=t.length;this.o={Qc:[],fa:[]};for(this.g=t;r<n;r++){var o=t[r];this.Le(r,o);yl(this,o,!0)}this.Hb();this.bc=A(this.bc,this);this.Mh=A(this.Mh,this);this.Da=A(this.Da,this);i.addEventListener(Ni.prototype.b.fe,this.bc);this.A=Vm;this.We();this.zoom=zl(this,this.G.ob());this.Hb();this.b.Ba(this.zoom);this.c=this.b.projection.Kb(e.nb().position);this.b.x=this.b.w*this.c.x;this.b.y=this.b.h*this.c.y;this.sa()}u(R,tl);t("H.map.render.webgl.RenderEngine",R);R.prototype.bc=function(t){t=(t=t.target.na())&&t.zb();(t&&t.getState())===Jj.INIT?t.load():(Jl(this.a),Ll(this.a,this.f),this.oa())};R.prototype.type=El.WEBGL;R.prototype.type=R.prototype.type;var Vm=2;R.prototype.getState=function(){return this.A};R.prototype.getState=R.prototype.getState;function Wm(t,e,i){e=i-e;return zd(e)<t.b.w/2?e:e-t.b.w*i/zd(i)}R.prototype.Pg=function(t){var e=t.newValue,i=t.modifiers,r=Kl(this.a);Xm(this);this.ea.set(0,0);var n=Ym(this,e);Zm(this);Qm.forEach(function(e){i&t[e.toUpperCase()]||delete n[e]});t.b?$m(this,n,t):r.setLookAtData(n);an(this);Jl(this.a);this.oa()};function $m(t,e,i){var r=[],n=i.modifiers;i=Kl(t.a);var o=i.getLookAtData(),a,s,l,u=0,c={},h=i.setLookAtData.bind(i);Qm.forEach(function(t){switch(t){case"heading":case"tilt":case"incline":if(n&(gi.HEADING|gi.TILT|gi.INCLINE)){var i=e[t]-o[t];c[t]=-180<i&&180>=i?i:180<i?i-360:i+360;c[t]&&r.push(t)}break;case"zoom":n&gi.ZOOM&&(c[t]=e[t]-o[t],c[t]&&r.push(t));break;case"position":if(n&gi.POSITION){a=Yf(o.position);var u=e.position;i=u.lat*Qd;var h=a.lat*Qd,f=u.lng*Qd-a.lng*Qd;u=Ed(f)*Gd(i);i=Gd(h)*Ed(i)-Ed(h)*Gd(i)*Gd(f);i=Math.atan2(u,i);l=(0<=i?i:Od+i)*Rd;(s=a.Ya(e.position))&&r.push(t)}}delete o.bounds});r.length?bn(t,function(t){var e=t-u,i={};n&(gi.HEADING|gi.TILT|gi.INCLINE|gi.ZOOM)&&r.forEach(function(t){Bc(c[t])&&(o[t]+=c[t]*e,i[t]=o[t])});n&gi.POSITION&&(i.position=a.tg(l,s*t,!0));h(i);Jl(this.a);an(this);this.oa();u=t}.bind(t),t.U,function(){h(e);Jl(this.a);this.oa()}.bind(t),t.ja):h(e)}R.prototype.U=300;R.prototype.$e=function(t){var e=Bc(t);if(!e||e&&0>t)throw new D(this.$e,1,"positive number required");this.U=t};R.prototype.setAnimationDuration=R.prototype.$e;R.prototype.ah=function(){return this.U};R.prototype.getAnimationDuration=R.prototype.ah;R.prototype.ja=rm;R.prototype.af=function(t){if(!Ba(t))throw new D(this.af,1,"function required");this.ja=t};R.prototype.setAnimationEase=R.prototype.af;R.prototype.bh=function(){return this.ja};R.prototype.getAnimationEase=R.prototype.bh;R.prototype.We=function(){this.ja=rm;this.U=300};R.prototype.resetAnimationDefaults=R.prototype.We;n=R.prototype;n.nk=function(){Jl(this.a);this.oa()};n.Le=function(t,e){R.l.Le.call(this,t,e);cn(e)&&(Jl(this.a),(t=(t=e.na())&&t.zb())&&t.getState()===Jj.INIT&&t.load())};n.Yh=function(t,e,i){var r;this.Pa=Bk();if(e.requestDomMarkers||C(e,qm)||C(e,Em)){var n=this.o.fa;for(r=n.length;r--;){var o=n[r];if(o.xb()===e){n.splice(r,1);o.B();break}}}cn(e)&&Ll(this.a,this.f);this.g=this.f.Ka();0===t&&(yl(this,e,!1),this.Hb());Hm(this.zd,dn(this),this.o.fa.filter(sc));this.$d();i||this.oa()};function cn(t){return!(C(t,Em)||C(t,qm))}n.Zh=function(){this.Hb()};n.Hb=function(){R.l.Hb.call(this);var t=this.getCapabilities().lookAt.zoom;Kl(this.a).setZoomConstraints(vd(t.min,this.Ag),ud(t.max,this.vg))};n.vh=function(t,e){var i;if(e){t={qc:this.re,fb:this.fb};e.Y?C(e,qm)?i=new pm(e):C(e,Em)&&(i=new pm(e)):e.requestDomMarkers&&(i=new xm(e,t));if(i){this.o.fa.push(i);var r=this.f.Ka();this.o.fa.sort(function(t,e){return r.indexOf(t.eb)-r.indexOf(e.eb)});Hm(this.zd,dn(this),this.o.fa.filter(sc))}cn(e)&&Ll(this.a,this.f)}this.g=this.f.Ka()};function Ym(t,e){var i=e.position;return Bl(t,{zoom:zl(t,e.zoom),position:new Wf(i.lat,i.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})}function an(t){var e=t.b,i=Kl(t.a).getLookAtData();e.Ba(i.zoom);t.zoom=i.zoom;t.c=e.projection.Kb(i.position);e.x=e.w*t.c.x;e.y=e.h*t.c.y}n.Da=function(t){return Kl(this.a).geoToPixel(t)};R.prototype.geoToScreen=R.prototype.Da;R.prototype.Wa=function(t,e){return Kl(this.a).xyToGeo(t,e)};R.prototype.screenToGeo=R.prototype.Wa;R.prototype.ng=function(t,e){t=this.Wa(t,e);e=this.G.nb();e.position=t;return e};function en(t,e,i,r,n,o,a,s){var l,u,c=0,h;var f=function(){0===--c&&o(n)};if(s&&s.features)for(c=u=s.features.length,h=0;h<u;h++){var p=s.features[h];var d=p.id;if(l=t.a.a.sources[p.source_name]){var y=l.provider;var g=bk(y);if(g===dk){var v=p.source_layer;if("overlays"===v)fn(t,e,i,r,n,l,p.properties.overlays_config);else if(l=l.getMapObjectById(d))if("markers"!==v)n.push(l);else if(gn(t,e,i,l))n.push(l);else if(r&&!a){var _=!0;Nl(t.a,{x:e,y:i},{radius:hn,top_most_only:!1},function(a){en(t,e,i,r,n,o,!0,a)})}c--}else g===ck?(v=p.tile.coords,_=y.getFeatureProxy(p.properties,v,function(t){if(t){for(var e=t,i;e&&(i=e.ec())&&i!==y;)e=i;i||e.ga(y);n.push(t)}f()}),_||(l=t.yd.get(d),l||(l=new Jg(p),l.ga(y),t.yd.add(d,l,1)),n.push(l),c--)):g===ek&&(_=!0,y.Dk(p,!1).then(function(t){t&&(t instanceof bi?gn(this,e,i,t):1)&&n.push(t);f()},function(){f()},t))}}g&&(_||0!==c)||o(n)}function fn(t,e,i,r,n,o,a){var s=a.length;e=t.Wa(e,i);for(i=0;i<s&&!((t=o.getMapObjectById(a[i].id))&&t.$().Cd(e)&&(n.push(t),r));i++);}function gn(t,e,i,r){var n=r.wb(),o=n.g,a,s=!o;if(o)if(n=n.fd(),e+=n.x,i+=n.y,n=r.$(),C(n,Yh))for(r=n.ma,a=r.length;a--&&!s;)n=t.Da(r[a]),s=o.Pf(e-n.x,i-n.y,0)!==$d.NONE;else n=t.Da(n),s=o.Pf(e-n.x,i-n.y,0)!==$d.NONE;return s}R.prototype.Ea=function(t,e,i,r){var n=this,o=[];o=jn(o,this.o.fa,t*this.pa,e*this.pa,i);i&&o.length?r(o):this.a.a.initialized?Nl(this.a,{x:t,y:e},{radius:hn,top_most_only:i},function(a){en(n,t,e,i,o,r,!1,a)}):r(o)};R.prototype.getObjectsAt=R.prototype.Ea;function jn(t,e,i,r,n){for(var o=e.length,a;o--&&!((a=e[o])&&a.Ea&&(t=t.concat(a.Ea(i,r,n)),t.length&&n)););return t}R.prototype.Qa=y;function dn(t){t=t.Fb[2];return{w:t.right-t.left,h:t.bottom-t.top}}R.prototype.sa=function(){var t=this.o.fa.length;ul(this,this.pa);this.ea.set(0,0);var e=dn(this);var i=e.w;var r=e.h;for(this.a.a.handleViewportUpdate();t--;){e=this.o.fa[t].Eb;var n=e.yb();n.w===i&&n.h===r||lm(e,i,r)}this.Qa=new Zh(i,r);Jl(this.a);this.oa()};R.prototype.getCapabilities=function(){return Fl};R.prototype.getCapabilities=R.prototype.getCapabilities;function kn(t){(Il(t.a)||Bk()-t.Pa<t.$b)&&!t.C?t.yg=Mk(t.Mh):(t.C&&(t.$d(),ln(t)),t.A=Vm)}n=R.prototype;n.$d=function(){this.o.Qc.length=0};n.Mh=function(){this.D&&this.D.before();var t=Kl(this.a);var e=t.getLookAtData(!1);var i=t.getLookAtData(!0);t=this.j.center.clone();i=i.bounds.F();var r=this.zoom;var n=this.ea;var o=this.g;var a=o.length;for(this.$b=Um;a--;){var s=o[a];C(s,Ni)&&s.na()&&s.na().di(i,r)}o=this.C=this.a.Y();a=this.o;s=a.fa.length;var l=!0,u;for(u=0;u<s;u++){var c=a.fa[u];var h=a.Qc;if(c){var f=c.Y(i,t,void 0,r,!1,n,this.Da,this.a.a.getCameraMatrix());f===ok.ACTIVE&&(this.$b=Infinity);f!==ok.DONE||h[u]||(ln(this,c.xb()),h[u]=!0);h[u]||(l=!1)}}this.C=o&l;Sm(this.G,e);this.Qa&&(sk(this.j,this.Qa),this.Qa=y);this.D&&this.D.after();kn(this)};function ln(t,e){setTimeout(A(t.dispatchEvent,t,{type:t.Xj.Yi,target:e||t}),1)}n.u=function(){var t=this.f.Ka()[0],e=this.j;Nk(this.yg);Zm(this,!0);t&&yl(this,t,!1);this.o.fa.filter(sc).forEach(function(t){t.B()});e.element&&e.element.removeChild(this.I);this.I=null;this.A=3;this.a.B();R.l.u.call(this)};n.oa=function(){this.Pa=Bk();this.A===Vm&&(this.C=!1,this.A=1,kn(this))};function mn(t,e,i){Kl(t.a).applyPxOffset([e,i]);an(t);t.ea.set(0,0);Jl(t.a);t.oa()}n.de=function(t,e,i){t=zl(this,zl(this,t));nn(this,t,e,i)};R.prototype.zoomAt=R.prototype.de;function nn(t,e,i,r){Kl(t.a).setLookAtData({zoom:e},Bc(i)&&Bc(i)?[i,r]:B);an(t);Jl(t.a);t.oa()}function Xm(t){Zm(t,!0);t.m.Fa()&&t.ub(!0);t.v.Fa()&&t.vb(!0);Zm(t,!0)}function on(t,e){if(e){var i={};i.Pe=e.power;i.Fd=e.ease;i.duration=e.duration;t.s=i}}R.prototype.nc=function(t,e){var i=!!(e||t&(xl.HEADING|xl.TILT));Xm(this);on(this,e);this.v.start(t,i);Kl(this.a).setPanning(!0)};R.prototype.startInteraction=R.prototype.nc;R.prototype.gc=function(t,e,i,r,n){var o=this.v;var a=!1;if(o.Fa()){var s=Kl(this.a);var l=s.getLookAtData();var u=this.j.center;u=[u.x,u.y];e=o.store(t,e,i,r,n);i=am(o);t=Tl(o);r=Vl(this.v);n=this.v;n=n.i?Wl(n.o,n.c):0;o.j&&(0<(o.b&xl.TILT)&&(s.setLookAtData({tilt:Cl(this,l.tilt+t.y/this.j.height*-180)},u),a=!0),e&&1!==r&&0<(o.b&xl.ZOOM)&&(a=am(o),r=Ad(Cd(2,this.zoom)*r)/Kd,nn(this,zl(this,r),a.x,a.y),a=!0),0<(o.b&xl.COORD)&&0<Ql(t)&&(mn(this,-t.x,-t.y),a=!0),0<(o.b&xl.HEADING)&&(e?s.setLookAtData({heading:l.heading+Dl(this,n)},[i.x,i.y]):t.x&&s.setLookAtData({heading:Dl(this,l.heading+t.x/this.j.width*360)},u),a=!0),a&&(Jl(this.a),this.oa()))}};R.prototype.interaction=R.prototype.gc;R.prototype.vb=function(t){var e=this;if(this.v.Fa()&&!t){if(this.s){t=$l(this.v);var i=Yl(this.v);var r=this.s.duration;var n=(this.s.Pe||1)*t;var o=new Fm(-n/(0<r?r:1),n);!E(i.x)&&!E(i.y)&&0<n&&0<(e.v.b&xl.COORD)&&bn(this,function(t){n=o.ye(t*r);E(n)||mn(e,wd(-i.x*n),wd(-i.y*n))},r,void 0,this.s.Fd)}this.s=null;this.v.clear()}Kl(this.a).setPanning(!1);this.oa()};R.prototype.endInteraction=R.prototype.vb;R.prototype.mc=function(t,e,i){Xm(this);this.m.start(e,i);on(this,t);Kl(this.a).setPanning(!0)};R.prototype.startControl=R.prototype.mc;R.prototype.control=function(t,e,i,r,n,o){for(var a=0,s;a<arguments.length;a++)if(s=+arguments[a],s!==s)throw new D(this.control,a,s);this.m.Fa()&&this.m.set(t,e,i,r,n,o)};R.prototype.control=R.prototype.control;R.prototype.ub=function(t,e){var i=this,r;if(this.m.Fa()){Zm(this,!0);var n=Bk();var o=n-this.Xa;if(1<=o){var a=hm(this.m);pn(this,a,o)}if(!this.s||t||e)"function"===typeof e&&(t=Kl(this.a),t=t.getLookAtData(),e(t),qn(this,t));else{e=jm(hm(this.m));var s=im(this.m);var l=this.s.duration;var u=(this.s.Pe||1)*e;var c=new Fm(-u/(0<l?l:1),u);!E(s.pb)&&!E(s.qb)&&0<u&&bn(this,function(t,e,o,a){n&&(o=a-n,n=0);u=c.ye(t*l)*o;E(u)||((r=s.rb*u)&&nn(i,zl(i,i.zoom+r),i.m.b,i.m.c),mn(i,wd(s.pb*u),wd(s.qb*u)))},l,void 0,this.s.Fd)}this.m.reset();Kl(this.a).setPanning(!1);this.oa()}};R.prototype.endControl=R.prototype.ub;function qn(t,e){var i=t.c,r=t.b.projection.Kb(e.position),n=t.b.Xc(r);r=n.y;n=n.x;var o=e.zoom;i=t.b.Xc(i);e=i.y;var a=i.x;i=t.zoom;var s=jm(hm(t.m)),l=t.m.b,u=t.m.c,c=0;n=Wm(t,a,n);n-=a;r-=e;i=o-i;e=Bd(n*n+r*r+i*i);if(0!==s&&0!==e){var h=n/e;var f=r/e;var p=i/e;var d=s*s/(2*e);bn(t,function(e,i){var r;if(1!==e){e=s*i-d*i*i/2;i=e-c;if(r=p*i)r=zl(t,t.zoom+r),nn(t,r,l,u);mn(t,wd(h*i),wd(f*i));c=e}else nn(t,zl(t,o),l,u),t.oa()},2*e/s)}}R.prototype.ac=function(t){var e=this,i=t.c;this.ea.set(0,0);i.pb||i.qb||i.rb||i.Ye||i.Ze||i.mg?(this.Xa=Bk(),bn(this,function(t,r,n,o){e.Xa=o;pn(e,i,n)},Sd)):Zm(this,!0)};function pn(t,e,i){i=i||0;var r=t.m,n=Kl(t.a),o=n.getLookAtData();e.rb&&nn(t,zl(t,o.zoom+e.rb*i),r.b,r.c);n.setLookAtData({heading:Dl(t,o.heading+e.Ze*i),tilt:Cl(t,o.tilt+e.Ye*i)});an(t);mn(t,e.pb*i,e.qb*i)}function bn(t,e,i,r,n){t.i&&t.i.Fa()&&t.i.stop(!0);t.i=new sm(e,i,r,n);t.i.start()}function Zm(t,e){t.i&&t.i.Fa()&&t.i.stop(e)}R.prototype.Vg=function(){};R.prototype.enter=R.prototype.Vg;R.prototype.Cf=function(t){wl(this.I,t)};R.prototype.exit=R.prototype.Cf;R.prototype.capture=function(t,e,i,r){var n=this;return Ol(n.a).then(function(o){var a=n.I.ownerDocument.createElement("canvas"),s=n.pa,l=a.getContext("2d"),u=n.a.Za()/s,c=(i-t)*s;s*=r-e;a.width=c;a.height=s;l.drawImage(o,t*u,e*u,c*u,s*u,0,0,c,s);return a})};R.prototype.Ql=function(t){return Kl(this.a).geoToMeters(t)};R.prototype.geoToMeters=R.prototype.Ql;R.prototype.Fn=function(t){return Kl(this.a).metersToGeo(t)};R.prototype.metersToGeo=R.prototype.Fn;var Um=5e3,hn=2.575;function T(t,e,i){var r={};T.l.constructor.call(this);this.D=A(T.prototype.D,this);this.i=rn(i,T);this.b=i=new vl;this.K=!1;i.addEventListener(i.a.ie,this.ja,!1,this);if(!C(t,Element))throw new D(T,0,t);i=this.N=t.ownerDocument.createElement("div");var n=i.style;n.position="relative";n.height=i.style.width="100%";n.overflow="hidden";n.webkitTapHighlightColor="transparent";"transparent"!==n.webkitTapHighlightColor&&(n.webkitTapHighlightColor="rgba(0,0,0,0)");t.appendChild(i);this.za=new pk(this.N,this.i);this.za.addEventListener(this.za.a.ie,this.ja,!1,this);t=this.a=new Qi(this.i.layers);t.addEventListener(t.b.he,this.I,!1,this);t.addEventListener(t.b.ee,this.I,!1,this);t.addEventListener(t.b.ge,this.I,!1,this);!this.f&&sn(this);this.c=null;this.a.add(e,0);this.g=this.C(null!=this.i.engineType?this.i.engineType:tn.WEBGL,this.i);this.s=A(this.s,this);this.G=A(this.G,this);e=this.i.imprint;if(e!==B&&"object"!==typeof e)throw new D(T,1,"imprint");this.m=null===e?e:new Zi(this,e);e=this.i.autoColor;this.sa=e===B||!!e;un(this);(e=this.i.zoom)&&(r.zoom=e);(e=this.i.bounds)&&(r.bounds=e);(e=this.i.center)&&(r.position=e);this.b.Xb(r)}u(T,F);t("H.Map",T);function rn(t,e){if(t){var i=t.pixelRatio;if(i===B)t.pixelRatio=Re();else if(!(0<i))throw new D(e,0,"pixelRatio: "+i)}else t={},t.pixelRatio=Re();t.renderBaseBackground||(t.renderBaseBackground={lower:3,higher:2});return t}T.prototype.u=function(){this.sa=!1;this.m&&this.m.B();this.g.B();this.b.B();this.za.B();this.f.B();this.j.B();this.a.B();var t=this.N;t.parentNode.removeChild(t);this.N=null;F.prototype.u.call(this)};T.prototype.J=function(){return this.N};T.prototype.getElement=T.prototype.J;T.prototype.Za=function(){return this.i.pixelRatio};T.prototype.getPixelRatio=T.prototype.Za;function un(t){t.m&&t.sa&&t.m.vi({invert:t.c&&t.c.Fl})}T.prototype.I=function(t){var e=t.added,i=t.removed;e&&e.na()&&e.na().ga(this);i&&i.na()&&i.na().ga(null);i===this.f&&(this.j=this.f=null);i===this.c&&(this.c=null);0===t.idx&&(this.dispatchEvent(new Mg(this.o.mf,this.c=t.type!==this.a.b.ge?e:0<this.a.a.length?this.a.get(0):y,t.type!==this.a.b.ee?i:1<this.a.a.length?this.a.get(1):y)),un(this))};T.prototype.ja=function(t){t.modifiers&&(this.K||(vn(this,"start"),this.K=!0),vn(this,"",t),this.U&&x.clearTimeout(this.U),this.U=x.setTimeout(this.G,333))};function vn(t,e,i){t.dispatchEvent(i?new fi(t.o.Ti,i.newValue,i.oldValue,i.modifiers):t.o.Ti+e)}T.prototype.G=function(){vn(this,"end");this.K=!1};T.prototype.og=function(t,e){this.g.getCapabilities().lookAt&&this.b.Xb({position:t},!!e);return this};T.prototype.setCenter=T.prototype.og;T.prototype.jb=function(){var t=this.b.nb();return t?t.position:y};T.prototype.getCenter=T.prototype.jb;T.prototype.ff=function(t,e){this.b.ff(t,!!e);return this};T.prototype.setZoom=T.prototype.ff;T.prototype.ob=function(){return this.b.ob()};T.prototype.getZoom=T.prototype.ob;T.prototype.de=function(t,e,i){this.g.de(t,e,i)};T.prototype.zoomAt=T.prototype.de;T.prototype.bn=function(){return this.za};T.prototype.getViewPort=T.prototype.bn;T.prototype.an=function(){return this.b};T.prototype.getViewModel=T.prototype.an;T.prototype.wm=function(){return this.a};T.prototype.getLayers=T.prototype.wm;T.prototype.rm=function(){return this.m};T.prototype.getImprint=T.prototype.rm;T.prototype.capture=function(t,e,i,r,n,o){function a(t,e){f?t.cancel():(g.save(),e.capture(d,c,function(e){g.restore();t.done(e)},function(e){t.done(null,e);s(null)}))}function s(e){f||(f=!0,t(e))}var l=this.dc(),u=l.getCapabilities(),c=this.i.pixelRatio,h=this.za,f=!1,p=this,d,g;if(!Ba(t))throw new D(this.capture,0,t);i=i||0;r=r||0;n=n||h.width;o=o||h.height;var v=vd(0,ud(i,n));var _=vd(0,ud(r,o));i=ud(h.width,vd(i,n));r=ud(h.height,vd(r,o));u.capture?l.capture(v,_,i,r).then(function(t){var i=p.m,r=e||[];d=t;g=d.getContext("2d");d.style.width=d.width/c+"px";d.style.height=d.height/c+"px";var n=new Ck(10,a);r=r.concat(i).filter(function(t){return Ba(t&&t.capture)});r.length?(t=r.pop(),r.forEach(function(t){n.push(t,hd)}),n.push(t,A(s,p,d)),yk(n)):s(d)},function(){s(y)}):t(null)};T.prototype.capture=T.prototype.capture;T.prototype.dc=function(){return this.v||this.g};T.prototype.getEngine=T.prototype.dc;T.prototype.Ok=function(t){this.g.type===t||this.ea||(this.ea=!0,this.v=this.C(t),this.v.addEventListener("render",this.s));return this};T.prototype.setEngineType=T.prototype.Ok;T.prototype.s=function(t){t.target===this.v&&(this.v.removeEventListener("render",this.s),this.g.Cf(this.D))};T.prototype.D=function(){var t=this.g.type;this.g.B();this.g=this.v;this.v=B;this.ea=!1;this.dispatchEvent(new Mg(this.o.ml,this.g.type,t))};T.prototype.C=function(t,e){e=e?rn(e,this.C):this.i;if(t===tn.P2D)return un(this),new x.H.map.render.p2d.RenderEngine(this.za,this.b,this.a,e);if(t===tn.WEBGL)return un(this),new R(this.za,this.b,this.a,e);throw new D(this.Ok,0,t)};T.prototype.jf=function(t,e,i,r,n){e=sc(e)?C(e,K,this.jf,1,e)&&e:this.b.nb().bounds.F();n=n||this.c;if(!C(n,fl))throw new D(this.jf,4);var o=n.na(),a=this.Za(),s=n.tileSize;2<=a&&256<s&&o instanceof xk&&(s/=2);a=this.ob();s=Math.log2(s)-8;i=sc(i)?+i:a;r=sc(r)?+r:a;if(!(i<=r))throw new D(this.jf,B,"!(min <= max)");a=o.min;var l=o.max,u=this.dc().type===tn.WEBGL?xd:wd;i=Xd(u(i)-s,a,l);r=Xd(u(r)-s,a,l);if(!(o&&C(o,Q)&&ld()&&o.Kg()))throw new Xc(this.jf,"Storing is not supported");return new tk(n,o,e,i,r,t)};T.prototype.storeContent=T.prototype.jf;function wn(t){Vi.call(this,t)}u(wn,Vi);wn.prototype.f=function(){Xi(this,2)};wn.prototype.c=function(){Xi(this,4)};T.prototype.El=function(t){t=new wn(t);kd().clear(A(t.f,t),A(t.c,t));return t};T.prototype.clearContent=T.prototype.El;T.prototype.Dg=function(t,e){var i=this.a,r=i.indexOf(t),n=e!==+e;e=n?i.a.length-1:e;0>r?i.add(t,e):r-e&&(i.kc(r),i.add(t,n?e-1:e));return this};T.prototype.addLayer=T.prototype.Dg;T.prototype.Te=function(t){var e=this.a.indexOf(t);t!==this.c&&t!==this.f&&-1!==e&&this.a.kc(e);return this};T.prototype.removeLayer=T.prototype.Te;T.prototype.ud=function(t){this.c!==t&&(this.a.a.length&&this.a.get(0)!==this.f?this.a.set(0,t):this.a.add(t,0),this.c=t);return this};T.prototype.setBaseLayer=T.prototype.ud;T.prototype.Wl=function(){return this.c};T.prototype.getBaseLayer=T.prototype.Wl;T.prototype.Da=function(t){if(!Xf(t))throw new D(this.Da,0,t);return(t=this.g.Da(t))?vf(t):y};T.prototype.geoToScreen=T.prototype.Da;T.prototype.Wa=function(t,e){var i;if(i=+E(t)||2*E(e))throw new D(this.Wa,i-1,arguments[i-1]);return(i=this.g.Wa(t,e))?Yf(i):y};T.prototype.screenToGeo=T.prototype.Wa;T.prototype.ng=function(t,e){return this.g.ng(t,e)};T.prototype.screenToLookAtData=T.prototype.ng;T.prototype.ca=function(t){if(!C(t,M))throw new D(this.ca,0,t);!this.f&&sn(this);this.j.fc().ca(t);return t};T.prototype.addObject=T.prototype.ca;T.prototype.Ga=function(t){if(!C(t,M))throw new D(this.Ga,0,t);!this.f&&sn(this);this.j.fc().Ga(t);return t};T.prototype.removeObject=T.prototype.Ga;T.prototype.Ua=function(t){!this.f&&sn(this);return this.j.fc().Ua(t)};T.prototype.getObjects=T.prototype.Ua;T.prototype.cc=function(t){var e;xc(t,this.cc,0,t);!this.f&&sn(this);var i=t.length;for(e=0;e<i;e++)this.ca(t[e]);return this};T.prototype.addObjects=T.prototype.cc;T.prototype.qd=function(t){var e;xc(t,this.qd,0,t);!this.f&&sn(this);var i=t.length;for(e=0;e<i;e++)this.Ga(t[e]);return this};T.prototype.removeObjects=T.prototype.qd;T.prototype.Nd=function(t,e,i){var r;if(r=+E(t)||2*E(e))throw new D(this.Nd,r-1,arguments[r-1]);this.g.Ea(t,e,!0,function(t){i(t[0])})};T.prototype.getObjectAt=T.prototype.Nd;T.prototype.Ea=function(t,e,i){var r;if(r=+E(t)||2*E(e))throw new D(this.Nd,r-1,arguments[r-1]);this.g.Ea(t,e,!1,i)};T.prototype.getObjectsAt=T.prototype.Ea;T.prototype.kh=function(t,e,i){var r=i||ff;i=r.visiblesOnly;var n=r.zoom;r=r.types;var o=Og.ANY;C(t,O,this.kh,0,"area");vc(e,"Function",this.kh,1,"callback");this.j.Ua(t,sc(i)?!!i:!0,sc(n)?+n:this.b.ob(),sc(r)?r&o:o,e)};T.prototype.getObjectsWithin=T.prototype.kh;function sn(t){t.j=new N({max:24});t.f=new pl(t.j,t.i);t.a.add(t.f)}var tn={P2D:El.P2D,WEBGL:El.WEBGL};T.EngineType=tn;T.prototype.o={yo:"mapviewchangestart",Ti:"mapviewchange",Ui:"mapviewchangeend",mf:"baselayerchange",ml:"enginechange"};function xn(t,e){xn.l.constructor.call(this,t,e)}u(xn,bi);t("H.map.Marker",xn);n=xn.prototype;n.type=Og.MARKER;n.ug=1;n.ta=function(t){if(t!==Lg.VISUAL||1===this.yk||1===this.icon.getState())var e=xn.l.ta.call(this,t);return e||!1};n.yk=0;n.Tj=function(t){return C(t,uj)};n.yh=!1;n.mk=function(){this.ta(Lg.VISUAL)};n.Hc=function(t){var e=this.icon;this.yh&&(e.removeEventListener("statechange",this.mk,!1,this),delete this.yh);e&&(this.yk=e.getState());xn.l.Hc.call(this,t);0===t.getState()&&(this.yh=!0,Be(t,"statechange",this.mk,!1,this));return this};xn.prototype.setIcon=xn.prototype.Hc;xn.prototype.f=function(t){return new uj(t.svg,t)};xn.prototype.V=function(){var t=this.getIcon(),e=t.ko||0,i=xn.l.forWorkerMessage.call(this),r=i.properties.icon;r&&0<e&&Va(r,{stick_color:t.jo,stick_height:e});return i};xn.prototype.forWorkerMessage=xn.prototype.V;function yn(t,e){yn.l.constructor.call(this,jh,e);this.ae(t)}u(yn,Mh);t("H.map.Rect",yn);yn.prototype.ae=function(t){if(!C(t,K))throw new D(this.ae,0,t);t.la(this.I)||(this.I=this.L=t,this.bb!==y&&yn.l.ba.call(this,Dh(t)))};yn.prototype.setBoundingBox=yn.prototype.ae;yn.prototype.F=function(){return this.L};yn.prototype.getBoundingBox=yn.prototype.F;yn.prototype.ba=function(){return this};yn.prototype.setGeometry=yn.prototype.ba;yn.prototype.$=function(){this.bb||yn.l.ba.call(this,Dh(this.I));return this.bb};yn.prototype.getGeometry=yn.prototype.$;function mk(t,e,i){var r="anonymous",n=1;this.f=A(this.f,this);M.call(this,i);this.ba(t);i&&(t="crossOrigin",t in i&&(r=i[t]),t="opacity",t in i&&(n=i[t]));this.Nk(e,r);this.lc(n)}u(mk,M);t("H.map.Overlay",mk);mk.prototype.type=Og.OVERLAY;mk.prototype.F=function(){return this.L};mk.prototype.getBoundingBox=mk.prototype.F;mk.prototype.ae=function(t){C(t,K,this.ae,0,t);return this.ba(t)};mk.prototype.setBoundingBox=mk.prototype.ae;mk.prototype.$=function(){return this.L};mk.prototype.getGeometry=mk.prototype.$;mk.prototype.ba=function(t){var e=this.L,i=!e;C(t,K,this.ba,0,t);if(i||!e.la(t))this.L=t,i||this.ta(Lg.SPATIAL);return this};mk.prototype.setGeometry=mk.prototype.ba;mk.prototype.Sc=function(){return this.b.getData()};mk.prototype.getBitmap=mk.prototype.Sc;mk.prototype.Nk=function(t,e){var i=this.b;i&&1!==i.getState()&&i.cancel();this.b=new pj(t,this.f,!0,B,e);return this};mk.prototype.setBitmap=mk.prototype.Nk;mk.prototype.f=function(t,e){this.b=e;1===t&&this.ta(Lg.VISUAL)};mk.prototype.Uc=function(){return this.g};mk.prototype.getOpacity=mk.prototype.Uc;mk.prototype.lc=function(t){var e=this.g,i=2>e;if(0<=t&&1>=t)t!==e&&(this.g=t,i&&this.ta(Lg.VISUAL));else throw new D(this.lc,0);return this};mk.prototype.setOpacity=mk.prototype.lc;mk.prototype.V=function(){var t=mk.l.V.call(this);t.geometry=Dh(this.L).V();t.properties.overlay=!0;return t};mk.prototype.forWorkerMessage=mk.prototype.V;function zn(t){if(!t||!Ba(t.requestData))throw new D(zn,0,"options.requestData");zn.l.constructor.call(this,t);this.I=t.requestData;this.K=!!t.providesDomMarkers}u(zn,Q);t("H.map.provider.MarkerTileProvider",zn);zn.prototype.Jd=function(t){return t?t.length+1:1};zn.prototype.getEntryWeight=zn.prototype.Jd;zn.prototype.O=function(t,e,i,r,n){var o=this;return this.I(t,e,i,function(n){for(var a=[],s,l,u=n.length;u--;)l=n[u],l.mo=o.getTileKey(t,e,i),l.ga(o),s=l.wb(),(C(l,ei)||1===s.getState())&&a.push(n[u]);r(a)},n)};zn.prototype.requestInternal=zn.prototype.O;zn.prototype.Sd=function(t,e){e===Lg.VISUAL&&(t=this.Mb().get(t.mo))&&(t.valid=!1,Yj(this,t))};zn.prototype.invalidateObject=zn.prototype.Sd;zn.prototype.Sb=function(){return this.K};zn.prototype.providesDomMarkers=zn.prototype.Sb;zn.prototype.Tb=cf;zn.prototype.providesMarkers=zn.prototype.Tb;function An(t,e){An.l.constructor.call(this,t,e)}u(An,fl);t("H.map.layer.MarkerTileLayer",An);var Bn={markers:[],total:0,requested:0};function Cn(t,e,i,r,n){var o=xd(i);t.pixelProjection.Ba(o);e=t.Qd(t.ue(e),o);i=t.De(e,e.left>e.right,~~i,r,n);t=i.tiles;i=i.total;r=t.length;n=[];var a;for(a=0;a<r;a++)for(e=t[a],o=e.data.length;o--;)n.push(e.data[o]);return{markers:n,total:t.length,requested:i}}An.prototype.Dc=function(t,e,i,r){return this.a.providesDomMarkers()?Bn:Cn(this,t,e,i,r)};An.prototype.requestMarkers=An.prototype.Dc;An.prototype.Cc=function(t,e,i,r){return this.a.providesDomMarkers()?Cn(this,t,e,i,r):Bn};An.prototype.requestDomMarkers=An.prototype.Cc;function Dn(t,e,i){var r,n=6;if(e){for(r=' expected close to: "'+e;n--;)e=t.a.next(),-1!==e&&(r+=String.fromCharCode(e));r+='"'}throw new D(En,0,"- Malformed WKT: "+(r?i+r:"unexpected end of stream"))}var Fn={rl:" ",ol:"(",pl:")",ll:",",nl:""};Object.keys(Fn).reduce(function(t,e){t[Fn[e]]=!0;return t},lc());function Gn(t,e){var i=t.next();e=e?")":"(";i!==e&&Dn(t,i,'"'+e+'"')}function Hn(t){return","===In(t)?(t.next(),!0):!1}function Jn(t,e,i,r,n){var o,a,s=2+e+i;for(a=1;a<=s;a++)(i=t.next())?(o=+i)!==o?Dn(t,i,"number"):1===a?r[n+1]=o:2===a?r[n]=o:3===a&&(r[n+2]=o):Dn(t,i);e||(r[n+2]=0)}var Kn=[];function Ln(t,e,i,r){r||Gn(t,0);Jn(t,e,i,Kn,0);r||Gn(t,1);return new Wf(Kn[0],Kn[1],e?Kn[2]:B)}function Mn(t,e,i){var r=[];Gn(t,0);do{Jn(t,e,i,r,r.length)}while(Hn(t));Gn(t,1);return new L(r)}function Nn(t,e,i){Gn(t,0);var r=Mn(t,e,i);if(Hn(t)){var n=[];do{n.push(Mn(t,e,i))}while(Hn(t))}Gn(t,1);return new O(r,n)}var On=[],Pn=[Nn],Qn=[Ln],Rn={POINT:Qn,LINESTRING:[Mn],POLYGON:Pn,MULTIPOINT:[Ln,Yh],MULTILINESTRING:[Mn,mh],MULTIPOLYGON:[Nn,Kh],GEOMETRY:On,GEOMETRYCOLLECTION:On,CIRCULARSTRING:On,COMPOUNDCURVE:On,CURVEPOLYGON:On,MULTICURVE:On,MULTISURFACE:On,CURVE:On,SURFACE:On,POLYHEDRALSURFACE:On,TIN:On,TRIANGLE:On},Sn={Z:1,M:2,ZM:3};function En(t){t=new Tn(t);var e;var i=t.next();(e=Rn[i.toUpperCase()])||Dn(t,i,"type name");if(e!==On){i=In(t);i=Sn[i.toUpperCase()];var r=i&1;var n=i>>1;r|n&&t.next();i=In(t);if("EMPTY"===i)if(t.next(),r=e[1])var o=new r([]);else e!==Qn&&(o=new L([]),e===Pn&&(o=new O(o)));else if("("===i){o=e[0];e=e[1];if(e){var a=[];Gn(t,0);if(o===Ln){var s="("!==In(t);do{a.push(o(t,r,n,s))}while(Hn(t))}else{do{a.push(o(t,r,n))}while(Hn(t))}Gn(t,1);r=new e(a)}else r=o(t,r,n);o=r}else Dn(t,i,'"Z", "M", "ZM", "(" or "EMPTY"');t.next()&&Dn(t,i,"end of stream")}return o||y}function Tn(t){this.a=t}function In(t){var e=t.b;if(e===B){for(e=t.a;e.Qb()===Un;)e.next();if(Vn[e.Qb()])e=e.next(),e=e===Wn?"":String.fromCharCode(e);else{e.ce();do{e.next()}while(!Vn[e.Qb()]);e=String.fromCharCode.apply(null,e.Gd())}t.b=e}return e}Tn.prototype.next=function(){var t=In(this);""!==t&&delete this.b;return t};var Un=32,Wn=-1,Xn={rl:Un,ol:40,pl:41,ll:44,nl:Wn},Vn=Object.keys(Xn).reduce(function(t,e){t[Xn[e]]=!0;return t},lc());function Yn(){}t("H.util.ICharStream",Yn);Yn.prototype.next=function(){};Yn.prototype.ce=function(){};Yn.prototype.Gd=function(){};Yn.prototype.Qb=function(){};function Zn(t){this.c=String(t);this.f=0;this.a=[];this.b=!1}t("H.util.CharStream",Zn);Zn.prototype.next=function(){var t=this.c.charCodeAt(this.f++);t=isNaN(t)?-1:t;this.b&&this.a.push(t);return t};Zn.prototype.ce=function(){this.b=!0;this.a=[]};Zn.prototype.Gd=function(){var t=this.a.slice();this.b=!1;this.a=[];return t};Zn.prototype.Qb=function(){var t=this.c.charCodeAt(this.f);return isNaN(t)?-1:t};t("H.util.wkt.toGeometry",function(t){return En(new Zn(t))});t("H.buildInfo",function(){return Df("H-core","1.16.0","8e5b60f6")});var $n=function(){var a="maps"+eval('"js-"');var b=x.document.querySelector('script[src*="'+a+'"]');if(!b){var c=x.document.getElementsByTagName("script");var d=new RegExp("^.*"+a);var e=0;for(a=c.length;e<a;e++)if(d.test(c[e].src)){b=c[e];break}}return b?b.src.replace(/\/[^\/]*$/,"/"):""}();t("H.getScriptPath",function(){return $n})}).call(window);H.__bootstrap__='var l,ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ea(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}var fa;\nif("function"==typeof Object.setPrototypeOf)fa=Object.setPrototypeOf;else{var ha;a:{var ja={fb:!0},ka={};try{ka.__proto__=ja;ha=ka.fb;break a}catch(a){}ha=!1}fa=ha?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var la=fa;ea("Object.setPrototypeOf",function(a){return a||la});var p=this||self;\nfunction ma(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function na(){}\nfunction oa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==oa(a)}function qa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ra="closure_uid_"+(1E9*Math.random()>>>0),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ua(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function va(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va=ta:va=ua;return va.apply(null,arguments)}\nfunction wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){ma(a,b,void 0)}function xa(a,b){function c(){}c.prototype=b.prototype;a.V=b.prototype;a.prototype=new c;a.prototype.constructor=a};function x(){}t("H.util.ICache",x);x.prototype.add=function(){};x.prototype.add=x.prototype.add;x.prototype.get=function(){};x.prototype.get=x.prototype.get;x.prototype.sa=function(){};x.prototype.drop=x.prototype.sa;x.prototype.forEach=function(){};x.prototype.forEach=x.prototype.forEach;x.prototype.T=function(){};x.prototype.removeAll=x.prototype.T;x.prototype.ba=function(){};x.prototype.registerOnDrop=x.prototype.ba;x.prototype.qa=function(){};x.prototype.deRegisterOnDrop=x.prototype.qa;function ya(){var a=za,b;for(b in a)return!1;return!0}function Aa(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ba="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ca(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ba.length;f++)c=Ba[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var y=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}xa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=va,Ia=String,Ja=y.Object.freeze||function(a){return a},z=self.eval("undefined"),Ka=self.eval("null");function La(a){return Ia(a).split(","!==z?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new A(c,d,void 0!==z?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new A(b,c,d!==z?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:y.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(qa(g)&&g.window===g&&g.self===g||qa(g)&&0<g.nodeType&&r(g.cloneNode))&&qa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function B(a,b,c){this.g=[];b&&this.ba(b);if(c&&!r(c))throw new A(B,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ia(a)}t("H.util.Cache",B);B.prototype.add=function(a,b,c){c=+c;if(!Sa(c)||0>c)throw new A(this.add,2,c);a=String(a);var d=this.a[a];var e=!0;this.filter&&(e=this.filter(a,b,c));d?e?(this.b+=c-d.size,d.size=c,d.data=b,db(this,d)):eb(this,d,!0):e&&(this.a[a]=fb(this,{id:a,data:b,size:c,A:null,D:null},this.c));gb(this);return e};B.prototype.add=B.prototype.add;\nB.prototype.ba=function(a){if(!r(a))throw new A(this.ba,0,a);this.g.push(a)};B.prototype.registerOnDrop=B.prototype.ba;B.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};B.prototype.deRegisterOnDrop=B.prototype.qa;B.prototype.get=function(a,b){return(a=b?this.a[a]:db(this,this.a[a]))&&a.data};B.prototype.get=B.prototype.get;B.prototype.sa=function(a){var b;(b=this.a[a])&&eb(this,b,!0)};B.prototype.drop=B.prototype.sa;\nB.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};B.prototype.forEach=B.prototype.forEach;B.prototype.T=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&eb(this,this.a[b],!0)}};B.prototype.removeAll=B.prototype.T;B.prototype.Ia=function(a){if(!(0<+a))throw new A(B.prototype.Ia,0,a);this.o=+a;gb(this);return this};B.prototype.setMaxSize=B.prototype.Ia;B.prototype.yb=function(){return this.o};\nB.prototype.getMaxSize=B.prototype.yb;B.prototype.ub=function(){return this.b};B.prototype.getCurrentSize=B.prototype.ub;function db(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.o&&a.f;)eb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.A||b.D)&&eb(a,b);if(b.A=c)b.D=c.D,c.D=b;b.D||(a.c=b);b.A||(a.f=b);a.b+=b.size}return b}\nfunction eb(a,b,c){var d=b.D,e=b.A;if(d||e||b==a.c&&b==a.f)if(d?d.A=e:a.c=e,e?e.D=d:a.f=d,a.b-=b.size,c){for(c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size);delete a.a[b.id]}b.A=b.D=null};function C(){}t("H.service.extension.dataView.ITable",C);C.prototype.ya=function(){};C.prototype.getMeta=C.prototype.ya;C.prototype.za=function(){};C.prototype.getRowCount=C.prototype.za;C.prototype.ia=function(){};C.prototype.getRow=C.prototype.ia;C.prototype.C=function(){};C.prototype.getColumnNames=C.prototype.C;C.prototype.xa=function(){};C.prototype.getColumn=C.prototype.xa;C.prototype.s=function(){};C.prototype.getCell=C.prototype.s;C.prototype.concat=function(){};C.prototype.concat=C.prototype.concat;function hb(){}t("H.service.extension.dataView.IRow",hb);hb.prototype.C=function(){};hb.prototype.getColumnNames=hb.prototype.C;hb.prototype.s=function(){};hb.prototype.getCell=hb.prototype.s;hb.prototype.Aa=function(){};hb.prototype.getTable=hb.prototype.Aa;function ib(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",ib);ib.prototype.C=function(){return this.a.C()};ib.prototype.getColumnNames=ib.prototype.C;ib.prototype.s=function(a){return this.a.s(this.b,a)};ib.prototype.getCell=ib.prototype.s;ib.prototype.Aa=function(){return this.a};ib.prototype.getTable=ib.prototype.Aa;function jb(){}t("H.service.extension.dataView.IColumn",jb);jb.prototype.s=function(){};jb.prototype.getCell=jb.prototype.s;function kb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",kb);kb.prototype.s=function(a){return this.b.s(a,this.a)};kb.prototype.getCell=kb.prototype.s;function A(a,b,c){var d=arguments.length;b=b!==z?+b:b;if(b!==z){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?La(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ia(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,A.prototype);return d}xa(A,Error);t("H.lang.InvalidArgumentError",A);A.prototype.name="InvalidArgumentError";function D(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):z);this.F=a;if(b)for(this.N=b,this.pa=a=Object.create(Ka,void 0),d=b.length;d--;)a[b[d]]=!0;c!==z&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",D);l=D.prototype;l.Ca=z;l.F=z;l.N=z;l.pa=z;l.ya=function(){return this.Ca};D.prototype.getMeta=D.prototype.ya;D.prototype.za=function(){return this.F?this.F.length:0};D.prototype.getRowCount=D.prototype.za;D.prototype.ia=function(a){var b=this.F;return b&&b[a]?new ib(this,a):z};\nD.prototype.getRow=D.prototype.ia;D.prototype.C=function(){return this.N||lb};D.prototype.getColumnNames=D.prototype.C;D.prototype.xa=function(a){return this.pa[a]?new kb(this,a):z};D.prototype.getColumn=D.prototype.xa;D.prototype.s=function(a,b){var c=this.F;return(a=c&&this.pa[b]&&c[a])&&a[b]};D.prototype.getCell=D.prototype.s;\nD.prototype.concat=function(){var a=arguments.length,b,c=this.N,d=""+this.N,e=(this.F||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof D))throw new A(this.concat,b);if(f.F){if(c&&""+f.N!==d)throw new A(this.concat,b,"Incompatible columns!");e=e.concat(f.F)}}return new D(e,this.N,this.Ca)};D.prototype.concat=D.prototype.concat;function E(a,b){this.x=+a;this.y=+b}t("H.math.Point",E);E.prototype.set=E;E.prototype.set=E.prototype.set;E.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new E(this.x,this.y);return a};E.prototype.clone=E.prototype.clone;E.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};E.prototype.add=E.prototype.add;E.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};E.prototype.sub=E.prototype.sub;E.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nE.prototype.scale=E.prototype.scale;E.prototype.round=function(){this.x=mb(this.x);this.y=mb(this.y);return this};E.prototype.round=E.prototype.round;E.prototype.floor=function(){this.x=nb(this.x);this.y=nb(this.y);return this};E.prototype.floor=E.prototype.floor;E.prototype.ceil=function(){this.x=ob(this.x);this.y=ob(this.y);return this};E.prototype.ceil=E.prototype.ceil;E.prototype.G=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};E.prototype.equals=E.prototype.G;\nE.prototype.zb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new E(a.x+f*c,a.y+f*d)}return e};E.prototype.getNearest=E.prototype.zb;E.prototype.ra=function(a){return pb(qb(this.x-a.x,2)+qb(this.y-a.y,2))};E.prototype.distance=E.prototype.ra;E.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof E?a:new E(a.x,a.y)};var F=Math,rb=F.min,sb=F.max,mb=F.round,nb=F.floor,ob=F.ceil,tb=F.abs,ub=F.log,pb=F.sqrt,qb=F.pow,vb=F.exp,wb=F.sin,xb=F.asin,yb=F.cos,zb=F.tan,Bb=F.atan,Cb=F.atan2,Db=F.LN2,I=F.PI,Eb=I/2,Fb=I/4,Gb=2*I,Hb=3*I,Ib=I/180,Jb=180/I,Kb=1/0;qb(-2,53);function Lb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-nb(a/b)*b+c});function Mb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Mb);function Nb(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Ob(a,b,c,d,e,f){return pb(qb((a-e)*(d-f)-(b-f)*(c-e),2)/(qb(c-e,2)+qb(d-f,2)))}var Pb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Pb);\nfunction Qb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Nb(b,g,k)&&0>=Ob(a,b,f,g,h,k)?2:0;else if(!n&&Nb(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Nb(b,g,k)&&0>=Ob(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Rb(a,b){return Qb(a.x,a.y,b)!==Pb.NONE}t("H.math.isPointInsidePolygon",Rb);function Sb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==z;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Sb);function Tb(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var J=0;for(m=1;m<u;m++)if(n=Ub(q[m-1],q[m],c,b,d,e)){var M=n[0];var v=n[1];J&&J.G(M)?h.push(v):g.push(h=n);J=v;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Tb);\nfunction Ub(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new E(h,-b),new E(g,-a)]:[new E(g,-a),new E(h,-b)]}\nfunction Vb(a,b,c){a=Wb(a,!0);b=Wb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.ga=Xb(b.x,b.y,null,Yb(b));a.ga=Xb(a.x,a.y,null,Yb(a));for(g=b;g.next;g=g.next)if(!g.B)for(d=a;d.next;d=d.next)if(!d.B){var k=Zb(g.next);var m=Zb(d.next);if(e=$b(g,k,d,m,f)){e=f.ib;var n=f.jb;var q=f.dc;var u=f.ec;e=Xb(q,u,null,null,null,null,!0,0,0,e);ac(e,g,k);k=Xb(q,u,null,null,null,null,!0,0,0,n);ac(k,d,m);e.Da=k;k.Da=e}}f=Rb(b,bc(a));\nc&&(f=!f);for(g=b;g;g=g.next)g.B&&(g.ta=f,f=!f);f=Rb(a,bc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.B&&(d.ta=f,f=!f);cc(b);for(cc(a);(a=dc(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.ta;;){c=Xb(a.x,a.y,c);c.artificial=a.B||a.Jb;a.na=1;a=f?a.next:a.u;if(!a)break;if(a.B){a.na=1;break}}if(!a)break}c.Wa=J;var J=c}return J}}t("H.math.clipping.clipPolygon",Vb);\nfunction Xb(a,b,c,d,e,f,g,h,k,m){a={x:a,y:b,next:c||null,u:d||null,Wa:e||null,Da:f||null,B:!!g,ta:h||0,na:k||0,alpha:m||0};d&&(a.u.next=a);c&&(a.next.u=a);return a}function Zb(a){for(;a&&a.B;)a=a.next;return a}function Yb(a){if(a)for(;a.next;)a=a.next;return a}function dc(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.B||b.B&&b.na))}return b}function cc(a){var b=Yb(a);b.u.next=a;a.u=b.u}\nfunction $b(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.ga&&(f.ga.x=f.x,f.ga.y=f.y),$b(a,b,c,d,e);e.dc=a.x+k*g;e.ec=a.y+k*h;e.ib=k;e.jb=n;return 1}function bc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction ac(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.u=b.u;a.next.u=a;a.u.next=a}function Wb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=Xb(a[e].x,a[e].y,d);c.Jb=b;if(c.next=d)d.u=c;d=c}return d};function ec(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,ec.prototype);return c}xa(ec,Error);t("H.lang.IllegalOperationError",ec);ec.prototype.name="IllegalOperationError";function fc(){if(!Qa("STATIC_DB"))throw new A(this.constructor,0);this.o=y.indexedDB||y.cc||y.Mb||y.Nb;if(!this.o)throw new ec(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var gc,hc;fc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new A(this.get,0);if(!r(b))throw new A(this.get,1);ic(this,function(e){d=e.get(a);jc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=kc)}}};\nfc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction lc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.o.open(mc+"STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.v);a.f=this.error;a.c.forEach(function(e){e(a.f)});a.a=a.c=null};a.v=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.v);a.a?(a.a.forEach(function(e){e(this.result)},this),a.a=a.c=null):(a.b=a.f=null,a.a=[],a.c=[])};a.a.push(b);c&&a.c.push(c)}}\nfunction ic(a,b,c){lc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function jc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){gc||(gc=new fc);return gc});var mc="H_";\nt("H.util.IndexedDBStorage.isSupported",function(){if(hc===z)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)hc=!1;else{var a=y.indexedDB||y.cc||y.Mb||y.Nb;var b=mc+"TEST_DB";try{var c=a&&a.open(b,1)}catch(d){}hc=!!c&&null===c.onupgradeneeded;c&&a.deleteDatabase&&a.deleteDatabase(b)}return hc});function nc(){0!=oc&&(pc[this[ra]||(this[ra]=++sa)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};nc.prototype.c=!1;nc.prototype.O=function(){if(!this.c&&(this.c=!0,this.ha(),0!=oc)){var a=this[ra]||(this[ra]=++sa);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nnc.prototype.M=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?va(a,b):a))};nc.prototype.ha=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.Ya=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.Ya=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.V.constructor.call(this,a,c);this.data=b}xa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.V.constructor.call(this,a,c);this.message=b}xa(rc,K);t("H.util.ErrorEvent",rc);function sc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}sc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function tc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function uc(){this.b=this.a=null}var yc=new sc(function(){return new vc},function(a){a.reset()});uc.prototype.add=function(a,b){var c=yc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function zc(){var a=Ac,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function vc(){this.next=this.b=this.a=null}vc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};vc.prototype.reset=function(){this.next=this.b=this.a=null};var Bc=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Cc(a,b){return a<b?-1:a>b?1:0};var Dc;a:{var Ec=p.navigator;if(Ec){var Fc=Ec.userAgent;if(Fc){Dc=Fc;break a}}Dc=""}function L(a){return-1!=Dc.indexOf(a)};function Gc(a,b){this.b=a===Hc&&b||"";this.a=Ic}var Ic={},Hc={},Jc=new Gc(Hc,"");function Kc(a,b){this.b=a===Lc&&b||"";this.a=Mc}var Mc={},Lc={};function Nc(){this.a="";this.b=Oc}function Pc(){var a=Qc;if(a instanceof Nc&&a.constructor===Nc&&a.b===Oc)return a.a;oa(a);return"type_error:SafeHtml"}var Oc={};function Rc(a){var b=new Nc;b.a=a;return b}Rc("<!DOCTYPE html>");var Qc=Rc("");Rc("<br>");function Sc(a){var b=new Kc(Lc,Jc instanceof Gc&&Jc.constructor===Gc&&Jc.a===Ic?Jc.b:"type_error:Const");b instanceof Kc&&b.constructor===Kc&&b.a===Mc?b=b.b:(oa(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Tc(a){Tc[" "](a);return a}Tc[" "]=na;var Uc=L("Opera"),Vc=L("Trident")||L("MSIE"),Wc=L("Edge"),Xc=L("Gecko")&&!(-1!=Dc.toLowerCase().indexOf("webkit")&&!L("Edge"))&&!(L("Trident")||L("MSIE"))&&!L("Edge"),Yc=-1!=Dc.toLowerCase().indexOf("webkit")&&!L("Edge");function Zc(){var a=p.document;return a?a.documentMode:void 0}var $c;\na:{var ad="",bd=function(){var a=Dc;if(Xc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Wc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Vc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Yc)return/WebKit\\/(\\S+)/.exec(a);if(Uc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();bd&&(ad=bd?bd[1]:"");if(Vc){var cd=Zc();if(null!=cd&&cd>parseFloat(ad)){$c=String(cd);break a}}$c=ad}var dd={},ed;ed=p.document&&Vc?Zc():void 0;function fd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function gd(a){p.setTimeout(function(){throw a;},0)}var hd;\nfunction id(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!L("Presto")&&(a=function(){var e=fd("IFRAME");e.style.display="none";Sc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Pc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=va(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!L("Trident")&&!L("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Na;c.Na=null;e()}};return function(e){d.next={Na:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in fd("SCRIPT")?function(e){var f=fd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function jd(a,b){kd||ld();md||(kd(),md=!0);Ac.add(a,b)}var kd;function ld(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);kd=function(){a.then(nd)}}else kd=function(){var b=nd;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!L("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(hd||(hd=id()),hd(b)):p.setImmediate(b)}}var md=!1,Ac=new uc;function nd(){for(var a;a=zc();){try{a.a.call(a.b)}catch(b){gd(b)}tc(yc,a)}md=!1};function od(a){this.a=pd;this.v=void 0;this.f=this.b=this.c=null;this.g=this.o=!1;if(a!=na)try{var b=this;a.call(void 0,function(c){qd(b,rd,c)},function(c){qd(b,sd,c)})}catch(c){qd(this,sd,c)}}var pd=0,rd=2,sd=3;function td(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}td.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var ud=new sc(function(){return new td},function(a){a.reset()});function vd(a,b,c){var d=ud.get();d.f=a;d.b=b;d.c=c;return d}\nfunction wd(a,b,c){xd(a,b,c,null)||jd(wa(b,a))}function yd(a){return new od(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],wd(k,wa(f,h),g);else b(e)})}function zd(){var a,b,c=new od(function(d,e){a=d;b=e});return new Ad(c,a,b)}od.prototype.then=function(a,b,c){return Bd(this,r(a)?a:null,r(b)?b:null,c)};od.prototype.$goog_Thenable=!0;\nod.prototype.cancel=function(a){if(this.a==pd){var b=new Cd(a);jd(function(){Dd(this,b)},this)}};function Dd(a,b){if(a.a==pd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==pd&&1==d?Dd(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Ed(c),Fd(c,e,sd,b)))}a.c=null}else qd(a,sd,b)}function Gd(a,b){a.b||a.a!=rd&&a.a!=sd||Hd(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Bd(a,b,c,d){var e=vd(null,null,null);e.a=new od(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Cd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Gd(a,e);return e.a}od.prototype.Ea=function(a){this.a=pd;qd(this,rd,a)};od.prototype.Ga=function(a){this.a=pd;qd(this,sd,a)};\nfunction qd(a,b,c){a.a==pd&&(a===c&&(b=sd,c=new TypeError("Promise cannot resolve to itself")),a.a=1,xd(c,a.Ea,a.Ga,a)||(a.v=c,a.a=b,a.c=null,Hd(a),b!=sd||c instanceof Cd||Id(a,c)))}function xd(a,b,c,d){if(a instanceof od)return Gd(a,vd(b||na,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(qa(a))try{var f=a.then;if(r(f))return Jd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Jd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Hd(a){a.o||(a.o=!0,jd(a.S,a))}function Ed(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}od.prototype.S=function(){for(var a;a=Ed(this);)Fd(this,a,this.a,this.v);this.o=!1};\nfunction Fd(a,b,c,d){if(c==sd&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Kd(b,c,d);else try{b.g?b.f.call(b.c):Kd(b,c,d)}catch(e){Ld.call(null,e)}tc(ud,b)}function Kd(a,b,c){b==rd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Id(a,b){a.g=!0;jd(function(){a.g&&Ld.call(null,b)})}var Ld=gd;function Cd(a){Da.call(this,a)}xa(Cd,Da);Cd.prototype.name="cancel";function Ad(a,b,c){this.a=a;this.b=b;this.reject=c};function Md(a,b,c){this.type=a;this.data=b;this.a=zd();this.Ua=Fa(this.Ua,this);this.reject=Fa(this.reject,this);this.priority=Nd;c!==z&&(this.priority=c);this.b().add(this)}var Nd=1,Od={gc:0,hc:Nd,fc:2};l=Md.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Ua=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;\nl.cancel=function(){this.a.a.cancel();if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c&&a.a[b].splice(c,1);this.Z=4}};function Pd(a){var b;this.a={};for(b in Od)this.a[Od[b]]=[];this.ma=a;this.ma.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Pd);var Qd=Object.keys(Od).map(function(a){return Od[a]}).sort().reverse();Pd.prototype.add=function(a){Na(a,Md,this.add,0);this.a[a.priority].push(a);this.b()};Pd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nPd.prototype.b=function(){Qd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ma.ic(b))!==Ka){var d=Fa(this.ma.jc,this.ma,c,b);b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Rd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Rd.prototype);return d}xa(Rd,Error);t("H.lang.OutOfRangeError",Rd);Rd.prototype.name="OutOfRangeError";var Sd="closure_listenable_"+(1E6*Math.random()|0),Td=0;function Ud(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ja=e;this.key=++Td;this.U=this.da=!1}function Vd(a){a.U=!0;a.listener=null;a.proxy=null;a.src=null;a.ja=null};function Wd(a){this.src=a;this.a={};this.b=0}Wd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Xd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Ud(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Yd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Vd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nWd.prototype.T=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Vd(d[e]);delete this.a[c];this.b--}return b};function Xd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.U&&f.listener==b&&f.capture==!!c&&f.ja==d)return e}return-1};var Zd;(Zd=!Vc)||(Zd=9<=Number(ed));var $d=Zd,ae;\nif(ae=Vc){var be;if(Object.prototype.hasOwnProperty.call(dd,"9"))be=dd["9"];else{for(var ce=0,de=Bc(String($c)).split("."),ee=Bc("9").split("."),fe=Math.max(de.length,ee.length),ge=0;0==ce&&ge<fe;ge++){var he=de[ge]||"",ie=ee[ge]||"";do{var je=/(\\d*)(\\D*)(.*)/.exec(he)||["","","",""],ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""];if(0==je[0].length&&0==ke[0].length)break;ce=Cc(0==je[1].length?0:parseInt(je[1],10),0==ke[1].length?0:parseInt(ke[1],10))||Cc(0==je[2].length,0==ke[2].length)||Cc(je[2],ke[2]);\nhe=je[3];ie=ke[3]}while(0==ce)}be=dd["9"]=0<=ce}ae=!be}var le=ae,me=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",na,b),p.removeEventListener("test",na,b)}catch(c){}return a}();function ne(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Xc){a:{try{Tc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:oe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}xa(ne,K);var oe={2:"touch",3:"pen",4:"mouse"};ne.prototype.stopPropagation=function(){ne.V.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\nne.prototype.c=function(){ne.V.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,le)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var pe="closure_lm_"+(1E6*Math.random()|0),qe={},re=0;function se(a,b,c,d,e){if(d&&d.once)te(a,b,c,d,e);else if("array"==oa(b))for(var f=0;f<b.length;f++)se(a,b[f],c,d,e);else c=ue(c),a&&a[Sd]?a.b.add(String(b),c,!1,qa(d)?!!d.capture:!!d,e):ve(a,b,c,!1,d,e)}\nfunction ve(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=qa(e)?!!e.capture:!!e,h=we(a);h||(a[pe]=h=new Wd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=xe();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)me||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");re++}}\nfunction xe(){var a=Ae,b=$d?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function te(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ue(c),a&&a[Sd]?a.b.add(String(b),c,!0,qa(d)?!!d.capture:!!d,e):ve(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=qa(d)?!!d.capture:!!d,c=ue(c),a&&a[Sd])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Xd(f,c,d,e),-1<c&&(Vd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=we(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Xd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.U){var b=a.src;if(b&&b[Sd])Yd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);re--;(c=we(b))?(Yd(c,a),0==c.b&&(c.src=null,b[pe]=null)):Vd(a)}}}function ze(a){return a in qe?qe[a]:qe[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=we(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.U&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ja||a.src;a.da&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.U)return!0;if(!$d){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new ne(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new ne(b,this))}function we(a){a=a[pe];return a instanceof Wd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ue(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){nc.call(this);this.b=new Wd(this);this.v=this;this.o=null}xa(N,nc);N.prototype[Sd]=!0;l=N.prototype;l.J=function(){return this.o};l.Ja=function(a){this.o=a};l.addEventListener=function(a,b,c,d){se(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.J();if(c)for(b=[];c;c=c.J())b.push(c);c=this.v;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ca(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.P(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.P(d,!0,a)&&e,a.a||(e=g.P(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.P(d,!1,a)&&e;return e};\nl.ha=function(){N.V.ha.call(this);this.b&&this.b.T(void 0);this.o=null};l.P=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.U&&f.capture==b){var g=f.listener,h=f.ja||f.src;f.da&&Yd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.Ya};t("H.util.EventTarget",N);N.prototype.Ja=N.prototype.Ja;N.prototype.setParentEventTarget=N.prototype.Ja;N.prototype.J=N.prototype.J;N.prototype.getParentEventTarget=N.prototype.J;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.O=N.prototype.O;N.prototype.dispose=N.prototype.O;N.prototype.M=N.prototype.M;N.prototype.addOnDisposeCallback=N.prototype.M;N.prototype.S=N.prototype.P;\nN.prototype.P=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.S.apply(this,arguments),d&&this.J&&null===this.J()&&delete c.eventPhase;return f};function O(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;O.V.constructor.call(this)}xa(O,N);t("H.util.ContextItem",O);O.prototype.wb=function(){return this.g};O.prototype.getLabel=O.prototype.wb;O.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};O.prototype.setLabel=O.prototype.Xb;O.prototype.Kb=function(){return this.f};O.prototype.isDisabled=O.prototype.Kb;\nO.prototype.Wb=function(a){a^this.f&&(this.f=a,this.dispatchEvent("update"));return this};O.prototype.setDisabled=O.prototype.Wb;var Ge=new O;O.SEPARATOR=Ge;function He(){if(y.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ka,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.tb?0:b.tb()))throw Error("goog.provide cannot be used within a module.");ma(a,void 0)});function Ie(){this.A=0}\nIe.prototype.next=function(a){if(9007199254740992===this.A)throw new Rd(a,this.A,[0,9007199254740991]);return this.A++};var Je=new Ie;Fa(Je.next,Je);function kc(){}var lb=Ja([]);Ja({});He();He();function Ke(a,b,c){var d=Mb(+a,-90,90);if(b&&Ra(d))throw new A(b,c,a);return d}function Le(a,b,c){var d=+a;if(-180>d||180<d)d=Lb(d+180,360)-180;if(b&&Ra(d))throw new A(b,c,a);return d}function Me(a,b,c){var d;if(a!==z&&Ra(d=+a)&&b)throw new A(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0!==(0>a^0>b)&&180<tb(b-a)});function Q(){var a=Q;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",Q);Q.prototype.getBoundingBox=Q.prototype.X;Q.prototype.equals=Q.prototype.G;Q.prototype.oa="";Q.prototype.wa="";Q.prototype.toString=function(){return this.cb([this.oa.toUpperCase()," "]).join("")};Q.prototype.toString=Q.prototype.toString;Q.prototype.Zb=function(){return{type:this.wa,coordinates:this.bb()}};Q.prototype.toGeoJSON=Q.prototype.Zb;\nQ.prototype.ua=function(){return{type:this.oa,coordinates:this.va(),boundingBox:this.X().ua()}};Q.prototype.forWorkerMessage=Q.prototype.ua;function S(a,b,c){this.lat=Ke(a,S,0);this.lng=Le(b,S,1);c!==z&&(this.alt=Me(c,S,2))}xa(S,Q);t("H.geo.Point",S);S.prototype.G=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.G;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*xb(rb(1,pb(qb(wb((b-c)/2),2)+yb(b)*yb(c)*qb(wb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};\nS.prototype.distance=S.prototype.ra;\nS.prototype.bc=function(a,b,c){if(c){if(b/=6371000.79){a*=Ib;var d=Ib*this.lat;var e=wb(d);var f=wb(b);var g=yb(b);var h=Ib*this.lng;var k=yb(d);d=xb(k*yb(a)*f+e*g);a=Cb(wb(a)*k*f,g-e*wb(d));a=(h+a+I)%(2*I)-I;k=a*Jb}return b?new S(d*Jb,(k+540)%360-180):this}a=(a%360+360)%360;if(0===(a+90)%180)return d=this.lng+b/(6371000.79*Gb*yb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(d+540)%360-180);if(b/=6371000.79){a*=Ib;h=this.lat*Ib;e=this.lng*Ib;f=h+b*yb(a);g=f-h;d=ub(zb(f/2+Fb)/zb(h/2+Fb));d=Ra(g/\nd)?yb(h):g/d;var m=b*wb(a)/d;tb(f)>Eb&&(f=0<f?I-f:-(I+f))}return b?new S(f*Jb,((e+m+Hb+(tb(h+g)>Eb?I:0))%Gb-I)*Jb):this};S.prototype.walk=S.prototype.bc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Ne(a,b,c){var d=qa(a)&&!(Ra(a.lat=Ke(a.lat))||Ra(a.lng=Le(a.lng))||a.alt!==z&&Ra(a.alt=Me(a.alt)));if(!d&&b)throw new A(b,c,a);return d}S.validate=Ne;\nfunction Oe(a){if(!a)throw new A(Oe,0,a);return new S(a.lat,a.lng,a.alt)}S.fromIPoint=Oe;l=S.prototype;l.oa="Point";l.cb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.wa="Point";l.bb=function(){return[this.lng,this.lat,this.alt||0]};l.va=function(){return[this.lat,this.lng,this.alt||0]};var W={};t("H.geo.mercator",W);W.a=function(a){return rb(1,sb(0,.5-ub(zb(Fb+Eb*a/180))/I/2))};W.b=function(a){return a/360+.5};W.ka=function(a,b,c){c?(c.x=W.b(b),c.y=W.a(a)):c=new E(W.b(b),W.a(a));return c};W.latLngToPoint=W.ka;W.qb=function(a,b){return W.ka(a.lat,a.lng,b)};W.geoToPoint=W.qb;W.f=function(a){return 0>=a?90:1<=a?-90:Jb*(2*Bb(vb(I*(1-2*a)))-Eb)};W.c=function(a){return 360*(1===a?1:Lb(a,1))-180};W.W=function(a,b,c){c?(c.lat=W.f(b),c.lng=W.c(a)):c=new S(W.f(b),W.c(a));return c};\nW.xyToGeo=W.W;W.Rb=function(a,b){return W.W(a.x,a.y,b)};W.pointToGeo=W.Rb;t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function Y(a,b){this.projection=a||W;this.b=0;this.a=this.exp=ub(b||256)/Db;Pe(this);this.y=this.x=0}t("H.geo.PixelProjection",Y);var Qe=tb(24)+tb(-8);Y.prototype.ca=function(a){if(Ra(a))throw new A(this.ca,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Pe(this);this.x=b*this.w;this.y=c*this.h};Y.prototype.rescale=Y.prototype.ca;function Pe(a){a.a>Qe&&(a.a=Qe);a.w=qb(2,a.a);a.h=qb(2,a.a)}Y.prototype.Ra=function(){return this.b||0};Y.prototype.getZoomScale=Y.prototype.Ra;\nY.prototype.pb=function(a,b){a=this.projection.ka(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};Y.prototype.geoToPixel=Y.prototype.pb;Y.prototype.Fa=function(a,b){return this.projection.W((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};Y.prototype.pixelToGeo=Y.prototype.Fa;Y.prototype.W=function(a,b,c){return this.projection.W((a+this.x)/this.w,(b+this.y)/this.h,c)};Y.prototype.xyToGeo=Y.prototype.W;\nY.prototype.Ba=function(a,b,c){a=this.projection.ka(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};Y.prototype.latLngToPixel=Y.prototype.Ba;Y.prototype.Sb=function(a){return new E(a.x*this.w-this.x,a.y*this.h-this.y)};Y.prototype.pointToPixel=Y.prototype.Sb;t("H.util.Disposable",nc);nc.prototype.M=nc.prototype.M;nc.prototype.addOnDisposeCallback=nc.prototype.M;t("H.util.dispose",function(a){a&&"function"==typeof a.O&&a.O()});function Re(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=zd()}Re.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};Re.prototype.reject=function(a){this.a.reject(a)};Re.prototype.cancel=function(){this.a.a.cancel()};function Se(a,b,c,d){if(!a||!b||!c)throw new A(Se,null,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ca(this,d)}t("H.util.BuildInfo",Se);Se.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Te={};function Ue(a,b,c,d){if(!a)throw new A(Ue,1,"Must specify a name parameter");return Te[a]||(Te[a]=new Se(a,b,c,d))}Se.get=Ue;function Z(a,b,c,d,e,f){if(a&&b)this.ab(a),this.Ha(b),this.Ka(c),this.$a(e),this.Za(f),this.La(d);else throw Error(\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Z);\nfunction Ve(a,b){var c=y.document,d,e=c&&c.createElement("a"),f="";if(c){if(b){var g=(d=c.getElementsByTagName("base")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement("base"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split("@")[1]);g=k;h=h&&0<h.length?h.substr(1):\n"";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new Z(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Z.parse=Ve;var We=0;Z.prototype.clone=function(){We++;var a={},b;for(b in this.a)a[b]=this.a[b];return new Z(this.o,this.f,this.b,a,this.g,this.c)};Z.prototype.clone=Z.prototype.clone;\nZ.prototype.ab=function(a){if(!a||"string"!==typeof a)throw Error(\'The "scheme" parameter must be a non-empty string.\');this.o=a;return this};Z.prototype.setScheme=Z.prototype.ab;Z.prototype.Db=function(){return this.o};Z.prototype.getScheme=Z.prototype.Db;Z.prototype.Ha=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw Error(\'The "host" parameter is not a valid host name.\');this.f=a;return this};Z.prototype.setHost=Z.prototype.Ha;\nZ.prototype.vb=function(){return this.f};Z.prototype.getHost=Z.prototype.vb;Z.prototype.Ka=function(a){this.b=a||void 0;return this};Z.prototype.setPath=Z.prototype.Ka;Z.prototype.Ab=function(){return this.b};Z.prototype.getPath=Z.prototype.Ab;Z.prototype.La=function(a){if(a)if("object"==typeof a)this.a=a;else throw Error(\'Parameter "params" must be an object.\');else this.a={};return this};Z.prototype.setQuery=Z.prototype.La;Z.prototype.Fb=function(){return!Xe(this)};Z.prototype.hasQuery=Z.prototype.Fb;\nZ.prototype.getQuery=function(){return this.a};Z.prototype.getQuery=Z.prototype.getQuery;Z.prototype.$a=function(a){if(a&&isNaN(parseInt(a,10)))throw Error(\'Parameter "port" must be a number or undefined\');this.g=+a||void 0;return this};Z.prototype.setPort=Z.prototype.$a;Z.prototype.Bb=function(){return this.g};Z.prototype.getPort=Z.prototype.Bb;Z.prototype.Za=function(a){this.c=a||void 0;return this};Z.prototype.setAnchor=Z.prototype.Za;Z.prototype.rb=function(){return this.c};\nZ.prototype.getAnchor=Z.prototype.rb;Z.prototype.$=function(a){if("object"!==typeof a)throw Error(\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Z.prototype.mergeQuery=Z.prototype.$;Z.prototype.gb=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ha(a+"."+this.f)};\nZ.prototype.addSubDomain=Z.prototype.gb;Z.prototype.hb=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subPath" must be a non-empty string\');return this.Ka((this.b?this.b+"/":"")+a)};Z.prototype.addSubPath=Z.prototype.hb;Z.prototype.toString=function(){return[this.o+"://",this.f,this.g?":"+this.g:"",this.b||!Xe(this)||this.c?"/":"",this.b?encodeURI(this.b):"",Ye(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Z.prototype.toString=Z.prototype.toString;\nfunction Ye(a){var b=[],c,d=a.a;for(c in d)if(d.hasOwnProperty(c)&&"function"!==typeof d[c]){var e=a.a[c];b.push(encodeURIComponent(c)+(void 0===e?"":"="+encodeURIComponent(e)))}return 0<b.length?"?"+b.join("&"):""}function Xe(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c};var Ze={};function $e(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function af(a){Ze[a]=null;this.postMessage(a)}function bf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(Ze[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function cf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}cf.prototype.postError=function(a){this.postMessage(a,z,0)};\ncf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===z?1:c,data:a},b||z)};function df(a,b,c){if(!Qa(a))throw new A(df,0,"InvalidArgument");if(!r(b))throw new A(df,1,"InvalidArgument");var d=ef++;ff[d]={mimeType:c||gf,kb:b};(new cf(["3",d,[]])).postMessage(a,[],2)}var ff={},ef=0;\nfunction hf(a,b){var c=a;if(ff[this.a]){var d=ff[this.a];var e=d.kb;delete ff[this.a];if(b)e(null,b);else{if(d.mimeType===jf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var gf=0,jf=1;function V(a,b,c,d){kf(this,Ke(a,V,0),Le(b,V,1),Ke(c,V,2),Le(d,V,3))}xa(V,Q);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.cb=function(a){var b=this.m,c=this.i,d=this.l,e=this.j;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.G=function(a){return this===a||!!a&&this.m===a.m&&this.i===a.i&&this.l===a.l&&this.j===a.j};V.prototype.equals=V.prototype.G;V.prototype.clone=function(){return new V(this.m,this.i,this.l,this.j)};\nV.prototype.clone=V.prototype.clone;function kf(a,b,c,d,e){a.i=c;a.j=e;b<d&&(c=b,b=d,d=c);a.m=b;a.l=d;a.c=a.a=a.b=null;return a}V.prototype.Qa=function(){this.c||(this.c=new S(this.m,this.i));return this.c};V.prototype.getTopLeft=V.prototype.Qa;V.prototype.Pa=function(){this.a||(this.a=new S(this.l,this.j));return this.a};V.prototype.getBottomRight=V.prototype.Pa;V.prototype.Eb=function(){return this.m};V.prototype.getTop=V.prototype.Eb;V.prototype.sb=function(){return this.l};\nV.prototype.getBottom=V.prototype.sb;V.prototype.xb=function(){return this.i};V.prototype.getLeft=V.prototype.xb;V.prototype.Cb=function(){return this.j};V.prototype.getRight=V.prototype.Cb;V.prototype.I=function(){this.b||(this.b=new S(this.l+(this.m-this.l)/2,lf(this.i,this.K())));return this.b};V.prototype.getCenter=V.prototype.I;V.prototype.K=function(){return mf(this.i,this.j)};V.prototype.getWidth=V.prototype.K;V.prototype.R=function(){return this.m-this.l};V.prototype.getHeight=V.prototype.R;\nV.prototype.Ib=function(){return this.i>this.j};V.prototype.isCDB=V.prototype.Ib;V.prototype.Lb=function(){return!this.K()&&!this.R()};V.prototype.isEmpty=V.prototype.Lb;V.prototype.X=function(){return new V(this.m,this.i,this.l,this.j)};V.prototype.getBoundingBox=V.prototype.X;V.prototype.ea=function(a,b,c){var d=this.I();c||(a=Ke(a,this.ea,0),b=Le(b,this.ea,1));b=this.L(a,b,c);a=b.I();return a.lat===d.lat&&a.lng===d.lng&&this.R()===b.R()&&this.K()===b.K()};V.prototype.containsLatLng=V.prototype.ea;\nV.prototype.fa=function(a,b){b||Ne(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;V.prototype.Oa=function(a,b){var c=this.I();if(!b&&!Na(a,V))throw new A(this.Oa,0,a);b=this.la(a,b);a=b.I();return a.lat===c.lat&&a.lng===c.lng&&this.R()===b.R()&&this.K()===b.K()};V.prototype.containsRect=V.prototype.Oa;\nV.prototype.L=function(a,b,c,d){if(!c){if(Ra(a=Ke(a)))throw new A(this.L,0,a);if(Ra(b=Le(b)))throw new A(this.L,1,b);}return nf(this.m,this.i,this.l,this.j,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.L;V.prototype.Va=function(a,b,c){b||Ne(a,this.Va,0);return this.L(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Va;V.prototype.la=function(a,b,c){if(!b&&!Na(a,V))throw new A(this.la,0,a);return nf(this.m,this.i,this.l,this.j,a.m,a.i,a.l,a.j,c)};V.prototype.mergeRect=V.prototype.la;\nV.prototype.aa=function(a,b,c,d,e,f){e||(a=Ke(a,this.aa,0),b=Le(b,this.aa,1),c=Ke(c,this.aa,2),d=Le(d,this.aa,3));return nf(this.m,this.i,this.l,this.j,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.aa;V.prototype.Ta=function(a,b){var c=this.i<=this.j,d=a.i<=a.j,e=this.i<a.j,f=a.i<this.j;if(!b&&!Na(a,V))throw new A(this.Ta,0,a);return this.l<=a.m&&a.l<=this.m&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Ta;function mf(a,b){a=b-a;return a+(0>a?360:0)}\nfunction lf(a,b){a+=b/2;return a-(180<a?360:0)}function nf(a,b,c,d,e,f,g,h,k){c=rb(c,g);a=sb(a,e);e=mf(b,d);var m=lf(b,e);g=mf(f,h);var n=lf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?kf(k,a,m,c,q):new V(a,m,c,q)}V.merge=nf;function of(a,b,c){c||(Ne(a,of,0),Ne(b,of,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=of;\nfunction pf(a,b){var c=1,d=a.length,e=null;var f=oa(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new A(pf,0,a);if(0<d)for(f=a[0],e=of(f,f,b);c<d;c++)f=a[c],e.L(f.lat,f.lng,b,e);return e}V.coverPoints=pf;function qf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new A(qf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.L(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=qf;\nfunction rf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new A(rf,0,a);if(0<d)for(e=new V(a[0].m,a[0].i,a[0].l,a[0].j);c<d;c++)e.la(a[c],b,e);return e}V.coverRects=rf;\nV.prototype.Xa=function(a,b){var c=this.i,d=this.m,e=this.j,f=this.l,g=this.I().lng;Ne(a,this.Xa,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?kf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.Xa;V.prototype.wa="Polygon";\nV.prototype.bb=function(){return[[this.i,this.m,0],[this.j,this.m,0],[this.j,this.l,0],[this.i,this.l,0],[this.i,this.m,0]]};V.prototype.ua=function(){return this.va()};V.prototype.va=function(){return[this.m,this.i,this.l,this.j]};function sf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var J=y.Float32Array;var M,v=[];if(b){b=La(b);a=La(a);e&&(f=La(c));c=b.length;d=d?1E-7:1E-5;for(M=new J(3*c);g<c;){J=b[g];var G=+J;var X=+a[g];e&&(q=+f[g]);tf.test(J)?0<=u&&(0<g-u&&v.push(u,g+1),u=-1):0>u&&(u=g);g++;m=M[h++]=m+X*d;k=M[h++]=k+G*d;e&&(n=M[h]=n+q);h++}0<=u&&1<c-u&&v.push(u,c)}else M=new J(0);return{path:M,outlineIndices:v}}var tf=/^-?0\\d/;\nfunction uf(a,b){for(var c=0,d=a.length/3,e=new y.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function vf(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var wf=1/Math.pow(10,10);function xf(a,b){var c=[],d=a.Qa();a=a.Pa();var e;180==a.lng&&(a.lng-=wf);d=vf(d,b);a=vf(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function yf(a,b){var c=a.tileSize||256;this.b={};this.v=Ve(a.serverUrl);this.g=b;this.$b=a.layerConfigs||[];this.o=a.projected;this.S=c;this.Ea=!1!==a.batchTiles;this.Ga=a.horizontalMargin||0;this.ac=a.onlyOutline;this.eb=new Y(Ka,c);this.f=new Y(Ka,c);this.f.ca(22-Math.log(c)/Math.LN2+8)}xa(yf,nc);l=yf.prototype;\nl.Vb=function(a,b,c){var d=this.S,e=this.Ga,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.eb;e.ca(c);f=e.Fa(f);d=e.Fa(d);return zf(this,new V(f.lat,f.lng,d.lat,d.lng),this.$b,{x:a,y:b,z:c})};l.Ub=function(a,b,c,d,e){return zf(this,new V(a,b,c,d),e)};\nfunction zf(a,b,c,d){var e=Af(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var J=q.level;g[u]=q.columns;q=xf(b,J);var M=q.length-1;for(h=0;h<M;h+=2){var v=[u,q[h+1],q[h],J].join("_");var G=k[v]||a.g.get(v);G||(G=new Re(q[h+1],q[h],J,u),G.key=v,k[v]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Bf(a,n):Cf(a,n));return yd(m.map(function(X){return X.then(Fa(this.nb,this,X.Y,Df(e))).then(Fa(this.Tb,this,X,d||{})).then(Fa(this.ob,this,g[X.Y]))},a))}\nl.nb=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new D(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ia(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Cf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Ef(a,k,m)}var d,e=b.length,f=a.v;for(d=0;d<e;d++){var g=b[d];var h=f.clone().$({tilex:g.x}).$({tiley:g.y}).$({level:g.b}).$({layer:g.Y});new df(h.toString(),Fa(c,null,g),jf)}}\nfunction Bf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Ff(a,e)}}function Ff(a,b){var c=a.v.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.La(g),new df(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Ef(a,b,h)},jf))}\nfunction Ef(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Gf(a,b[e],h)}}else Gf(a,b,c)}function Gf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Df(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==z?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Hf(a,b,c,d,e){return e?[new E(a,b),new E(c,b),new E(c,d),new E(a,d),new E(a,b)]:[a,b,c,b,c,d,a,d]}\nl.Tb=function(a,b,c){var d=this.f.Ra()-b.z,e=this.S<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,J=c.Rows,M=J.length,v,G=/^ADAS/.test(a.Y),X=this.f,pa=this.ac,R,ab=[],Ga=[],Ha=[],bb=[];for(a=0;a<M;a++){var w=v=J[a];var P=(R=G)?"HPY":"LAT";var T=R?"HPX":"LON";var da=R?"HPZ":"ZLEVEL";if(w[P]){var U=sf(w[P],w[T],w[da],R);w.geometry=U;delete w[P];delete w[T];delete w[da];if(w.INNER_LAT)for(P=w.INNER_LAT.split(";"),U=w.INNER_LON.split(";"),delete w.INNER_LAT,delete w.INNER_LON,\nw.interiors=da=[],T=P.length,w=0;w<T;w++)da.push(sf(P[w],U[w],"",R))}if(this.o){R=void 0;T=v;U=X;P=T.$$projected$$;if(!P){var aa=T.geometry;w=uf(aa.path,U);v=[w];T.$$projected$$=P={Qb:v};T=(da=T.interiors)?da.length:0;v.length+=T;R|=If(v,w,aa.outlineIndices);if(T)for(P.Gb=1,q=0;q<T;q++)aa=da[q],w=uf(aa.path,U),v[1+q]=w,R|=If(v,w,aa.outlineIndices);R&&(P.Ob=1+T)}w=P;R=w.Qb;v=w.Gb;var wc=w.Ob;U=[];P=T=Kb;var cb=da=z;w=R[0];if(1===w.length){var xc=xc||(xc=Hf(g,b,h,e,!1));v=w[0];Qb(v.x,v.y,xc)&&U.push(Jf(w,\ng,b,d))}else{var ye=R.length;for(aa=pa?wc:0;aa<ye&&(pa||!aa||U.length);aa++)if(w=R[aa],aa>=wc){aa===wc&&(P=U.length);var ia=Tb([w],k,m,n,f,!1);Kf(ia,g,b,d,U)}else{var Ab=Ab||(Ab=Hf(k,m,n,f,!0));if(aa>=v)if(aa===v&&(T=U.length),cb)for(q=cb.length;q--;){if(ia=Lf(cb[q],w),u=ia.length){for(da=da||[];u--;)da.push(q);Kf(ia,g,b,d,U)}}else ia=Lf(Ab,w),Kf(ia,g,b,d,U);else if(ia=Lf(Ab,w),Kf(ia,g,b,d,U),1<ia.length&&v<ye)for(cb=[],q=ia.length;q--;)cb[q]=ia[q]}}U.length&&(ab[a]=U,Ga[a]=T,Ha[a]=da,bb[a]=P)}}return{Yb:c,\nlb:ab,Hb:Ga,mb:Ha,Pb:bb}};function If(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Lf(a,b){var c,d=[];if(c=Vb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Wa)}else Rb(b[0],Sb(a))?d.push(b):Rb(a[0],Sb(b))&&d.push(a);return d}function Kf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Jf(a[f],b,c,d))}\nfunction Jf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nl.ob=function(a,b){var c=b.Yb,d=b.lb,e=b.Hb,f=b.Pb;b=b.mb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,J=c.Rows,M=J.length,v;q<M;q+=1)if(d[q]||!this.o){h={};u=J[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(v in u)"$$projected$$"!==v&&(h[v]=u[v]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,pa=d[q],R=e[q],ab=b[q],Ga=f[q],Ha=g;if(pa){var bb=pa.length;if(ab)for(G=R;G--;){if(G){var w={};for(m in X)w[m]=X[m]}else w=X;u=[pa[G]];var P=rb(bb,Ga)-R;for(h=0;h<P;h++)ab[h]===\nG&&u.push(pa[R+h]);P=u.length;if(!G)for(h=Ga;h<bb;h++)u.push(pa[h]);w.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:P};Ha.push(w)}else X.$HProjGeometry={paths:pa,interiorsIndex:R,outlinesIndex:Ga},Ha.push(X)}else Ha.push(X)}c.Meta&&(k.Meta=c.Meta);return k};l.ha=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};\nfunction Af(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=Aa(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=za[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(za[a]=new yf(c,Mf)),this.postMessage();else if(f)switch(b){case 1:try{f.Vb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.Ub.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.O();delete za[a];ya()&&Mf.T();break;default:e.postError("Unsupported command")}else e.postError("TileProvider is not initialized")});\nvar Mf=new B(26214400),za=Object.create(Ka,void 0);function Nf(a,b,c){var d=a[b];a=a[b+1];this.Sa=[];this.Ma=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Nf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Nf.prototype.I=function(){return this.b};var Of=new E(0,0);function Pf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Qf=new Y;function Rf(a,b,c,d,e){Qf.Ba(a,b,Of);d[e]=Of.x;d[e+1]=Of.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Pf:Rf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Qf.ca(d);g<h.length;){var J=h[g++];var M=h[g++];var v=h[g++];f(v,M,d,q,u);for(v=a.length;v--;)if(M=a[v],M.fa(q,u)){var G=M;break}G||(G=new Nf(q,u,b),a.push(G));v=u/2;G.Ma+=J||1;G.Sa.push(v);G=null;u+=2}for(v=a.length;v--;)M=a[v],b=M.Ma>=c,f=M.Sa,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new cf(a.data);var b=Ze[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new cf;var b=function(c,d){bf.apply(a,[c,d,!0])};b("0",$e);b("1",bf);b("2",af);b("3",hf)})();\n';!function(){var t=function(){if(("undefined"==typeof self||!("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope))&&("undefined"!=typeof module&&module.exports||"undefined"!=typeof window))var e=t.toString(),i="",r="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:"";!function(){"use strict";function t(t){return n.call(t).slice(8,-1)}var n={}.toString,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}function s(t){return t&&t.Math==Math&&t}function l(t){try{return!!t()}catch(t){return!0}}function u(t){return"object"==typeof t?null!==t:"function"==typeof t}function c(t){return w?x.createElement(t):{}}function h(t){if(!u(t))throw TypeError(String(t)+" is not an object");return t}function f(t,e){if(!u(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!u(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!u(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!u(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function p(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function d(t,e){try{E(m,t,e)}catch(i){m[t]=e}return e}function y(t){return"Symbol(".concat(void 0===t?"":t,")_",(++R+S).toString(36))}function g(t){return P[t]||(P[t]=O&&L[t]||(O?L:y)("Symbol."+t))}function v(e){var i,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(i=Object(e),I))?r:N?t(i):"Object"==(n=t(i))&&"function"==typeof i.callee?"Arguments":n}var _="object",m=s(typeof globalThis==_&&globalThis)||s(typeof window==_&&window)||s(typeof self==_&&self)||s(typeof o==_&&o)||Function("return this")(),b=!l(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),x=m.document,w=u(x)&&u(x.createElement),k=!b&&!l(function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a}),A=Object.defineProperty,T={f:b?A:function(t,e,i){if(h(t),e=f(e,!0),h(i),k)try{return A(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},E=b?function(t,e,i){return T.f(t,e,p(1,i))}:function(t,e,i){return t[e]=i,t},M=a(function(t){var e="__core-js_shared__",i=m[e]||d(e,{});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})}),R=0,S=Math.random(),O=!l(function(){return!String(Symbol())}),P=M("wks"),L=m.Symbol,I=g("toStringTag"),N="Arguments"==t(function(){return arguments}()),C={};C[g("toStringTag")]="z";function z(t,e){return G.call(t,e)}function j(t){return W[t]||(W[t]=y(t))}var D,F,B,U="[object z]"!==String(C)?function(){return"[object "+v(this)+"]"}:C.toString,G={}.hasOwnProperty,V=M("native-function-to-string",Function.toString),q=m.WeakMap,K="function"==typeof q&&/native code/.test(V.call(q)),W=M("keys"),Y={},X=m.WeakMap;if(K){var Z=new X,J=Z.get,Q=Z.has,$=Z.set;D=function(t,e){return $.call(Z,t,e),e},F=function(t){return J.call(Z,t)||{}},B=function(t){return Q.call(Z,t)}}else{var tt=j("state");Y[tt]=!0,D=function(t,e){return E(t,tt,e),e},F=function(t){return z(t,tt)?t[tt]:{}},B=function(t){return z(t,tt)}}var et={set:D,get:F,has:B,enforce:function(t){return B(t)?F(t):D(t,{})},getterFor:function(t){return function(e){var i;if(!u(e)||(i=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},it=a(function(t){var e=et.get,i=et.enforce,r=String(V).split("toString");M("inspectSource",function(t){return V.call(t)}),(t.exports=function(t,e,n,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof e||z(n,"name")||E(n,"name",e),i(n).source=r.join("string"==typeof e?e:"")),t!==m?(a?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=n:E(t,e,n)):s?t[e]=n:d(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||V.call(this)})}),rt=Object.prototype;U!==rt.toString&&it(rt,"toString",U,{unsafe:!0});function nt(t){return isNaN(t=+t)?0:(0<t?vt:gt)(t)}function ot(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(t){return wt(ot(t))}function st(t){return 0<t?Tt(nt(t),9007199254740991):0}function lt(t,e){var i,r=at(t),n=0,o=[];for(i in r)!z(Y,i)&&z(r,i)&&o.push(i);for(;e.length>n;)z(r,i=e[n++])&&(~Rt(o,i)||o.push(i));return o}function ut(t,e){for(var i=Nt(e),r=T.f,n=At.f,o=0;o<i.length;o++){var a=i[o];z(t,a)||r(t,a,n(e,a))}}function ct(t,e){var i=jt[zt(t)];return i==Ft||i!=Dt&&("function"==typeof e?l(e):!!e)}function ht(t,e){var i,r,n,o,a,s=t.target,l=t.global,u=t.stat;if(i=l?m:u?m[s]||d(s,{}):(m[s]||{}).prototype)for(r in e){if(o=e[r],n=t.noTargetGet?(a=Ut(i,r))&&a.value:i[r],!Bt(l?r:s+(u?".":"#")+r,t.forced)&&void 0!==n){if(typeof o==typeof n)continue;ut(o,n)}(t.sham||n&&n.sham)&&E(o,"sham",!0),it(i,r,o,t)}}var ft,pt,dt,yt,gt=Math.ceil,vt=Math.floor,_t={}.propertyIsEnumerable,mt=Object.getOwnPropertyDescriptor,bt={f:mt&&!_t.call({1:2},1)?function(t){var e=mt(this,t);return!!e&&e.enumerable}:_t},xt="".split,wt=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==t(e)?xt.call(e,""):Object(e)}:Object,kt=Object.getOwnPropertyDescriptor,At={f:b?kt:function(t,e){if(t=at(t),e=f(e,!0),k)try{return kt(t,e)}catch(t){}if(z(t,e))return p(!bt.f.call(t,e),t[e])}},Tt=Math.min,Et=Math.max,Mt=Math.min,Rt=(ft=!1,function(t,e,i){var r,n=at(t),o=st(n.length),a=function(t,e){var i=nt(t);return i<0?Et(i+e,0):Mt(i,e)}(i,o);if(ft&&e!=e){for(;a<o;)if((r=n[a++])!=r)return!0}else for(;a<o;a++)if((ft||a in n)&&n[a]===e)return ft||a||0;return!ft&&-1}),St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ot=St.concat("length","prototype"),Pt={f:Object.getOwnPropertyNames||function(t){return lt(t,Ot)}},Lt={f:Object.getOwnPropertySymbols},It=m.Reflect,Nt=It&&It.ownKeys||function(t){var e=Pt.f(h(t)),i=Lt.f;return i?e.concat(i(t)):e},Ct=/#|\.prototype\./,zt=ct.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},jt=ct.data={},Dt=ct.NATIVE="N",Ft=ct.POLYFILL="P",Bt=ct,Ut=At.f,Gt=!l(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Vt=j("IE_PROTO"),Ht=Object.prototype,qt=Gt?Object.getPrototypeOf:function(t){return t=function(t){return Object(ot(t))}(t),z(t,Vt)?t[Vt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ht:null},Kt=g("iterator"),Wt=!1;[].keys&&("next"in(yt=[].keys())?(dt=qt(qt(yt)))!==Object.prototype&&(pt=dt):Wt=!0),null==pt&&(pt={}),z(pt,Kt)||E(pt,Kt,function(){return this});function Yt(){}var Xt={IteratorPrototype:pt,BUGGY_SAFARI_ITERATORS:Wt},Zt=Object.keys||function(t){return lt(t,St)},Jt=b?Object.defineProperties:function(t,e){h(t);for(var i,r=Zt(e),n=r.length,o=0;o<n;)T.f(t,i=r[o++],e[i]);return t},Qt=m.document,$t=Qt&&Qt.documentElement,te=j("IE_PROTO"),ee="prototype",ie=function(){var t,e=c("iframe"),i=St.length,r="script";for(e.style.display="none",$t.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</"+r+">"),t.close(),ie=t.F;i--;)delete ie[ee][St[i]];return ie()},re=Object.create||function(t,e){var i;return null!==t?(Yt[ee]=h(t),i=new Yt,Yt[ee]=null,i[te]=t):i=ie(),void 0===e?i:Jt(i,e)};Y[te]=!0;function ne(t,e,i){t&&!z(t=i?t:t.prototype,ue)&&le(t,ue,{configurable:!0,value:e})}function oe(){return this}function ae(){return this}function se(t,e,i,r,n,o,a){function s(t){if(t===n&&g)return g;if(!ye&&t in d)return d[t];switch(t){case"keys":case ge:case ve:return function(){return new i(this,t)}}return function(){return new i(this)}}!function(t,e,i){var r=e+" Iterator";t.prototype=re(he,{next:p(1,i)}),ne(t,r,!1),ce[r]=oe}(i,e,r);var l,u,c,h=e+" Iterator",f=!1,d=t.prototype,y=d[pe]||d["@@iterator"]||n&&d[n],g=!ye&&y||s(n),v="Array"==e&&d.entries||y;if(v&&(l=qt(v.call(new t)),de!==Object.prototype&&l.next&&(qt(l)!==de&&(fe?fe(l,de):"function"!=typeof l[pe]&&E(l,pe,ae)),ne(l,h,!0))),n==ge&&y&&y.name!==ge&&(f=!0,g=function(){return y.call(this)}),d[pe]!==g&&E(d,pe,g),ce[e]=g,n)if(u={values:s(ge),keys:o?g:s("keys"),entries:s(ve)},a)for(c in u)!ye&&!f&&c in d||it(d,c,u[c]);else ht({target:e,proto:!0,forced:ye||f},u);return u}var le=T.f,ue=g("toStringTag"),ce={},he=Xt.IteratorPrototype,fe=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(i){}return function(i,r){return function(t,e){if(h(t),!u(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i,r),e?t.call(i,r):i.__proto__=r,i}}():void 0),pe=g("iterator"),de=Xt.IteratorPrototype,ye=Xt.BUGGY_SAFARI_ITERATORS,ge="values",ve="entries",_e="String Iterator",me=et.set,be=et.getterFor(_e);se(String,"String",function(t){me(this,{type:_e,string:String(t),index:0})},function(){var t,e=be(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=function(t,e,i){var r,n,o=String(ot(t)),a=nt(e),s=o.length;return a<0||s<=a?i?"":void 0:(r=o.charCodeAt(a))<55296||56319<r||a+1===s||(n=o.charCodeAt(a+1))<56320||57343<n?i?o.charAt(a):r:i?o.slice(a,a+2):n-56320+(r-55296<<10)+65536}(i,r,!0),e.index+=t.length,{value:t,done:!1})});var xe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},we=g("unscopables"),ke=Array.prototype;null==ke[we]&&E(ke,we,re(null));function Ae(t){ke[we][t]=!0}var Te="Array Iterator",Ee=et.set,Me=et.getterFor(Te),Re=se(Array,"Array",function(t,e){Ee(this,{type:Te,target:at(t),index:0,kind:e})},function(){var t=Me(this),e=t.target,i=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==i?{value:r,done:!1}:"values"==i?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");ce.Arguments=ce.Array,Ae("keys"),Ae("values"),Ae("entries");var Se=g("iterator"),Oe=g("toStringTag"),Pe=Re.values;for(var Le in xe){var Ie=m[Le],Ne=Ie&&Ie.prototype;if(Ne){if(Ne[Se]!==Pe)try{E(Ne,Se,Pe)}catch(o){Ne[Se]=Pe}if(Ne[Oe]||E(Ne,Oe,Le),xe[Le])for(var Ce in Re)if(Ne[Ce]!==Re[Ce])try{E(Ne,Ce,Re[Ce])}catch(o){Ne[Ce]=Re[Ce]}}}function ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function je(t,e,i){if(ze(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}function De(t,e,i,r){try{return r?e(h(i)[0],i[1]):e(i)}catch(e){var n=t.return;throw void 0!==n&&h(n.call(t)),e}}var Fe=g("iterator"),Be=Array.prototype,Ue=g("iterator"),Ge=a(function(t){var e={};(t.exports=function(t,i,r,n,o){var a,s,l,u,c,f=je(i,r,n?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[Ue]||t["@@iterator"]||ce[v(t)]}(t)))throw TypeError("Target is not iterable");if(function(t){return void 0!==t&&(ce.Array===t||Be[Fe]===t)}(s)){for(l=0,u=st(t.length);l<u;l++)if((n?f(h(c=t[l])[0],c[1]):f(t[l]))===e)return e;return}a=s.call(t)}for(;!(c=a.next()).done;)if(De(a,f,c.value,n)===e)return e}).BREAK=e}),Ve=g("iterator"),He=!1;try{var qe=0;({next:function(){return{done:!!qe++}},return:function(){He=!0}})[Ve]=function(){return this}}catch(o){}function Ke(t,e){var i,r=h(t).constructor;return void 0===r||null==(i=h(r)[ti])?e:ze(i)}function We(t){if(li.hasOwnProperty(t)){var e=li[t];delete li[t],e()}}function Ye(t){return function(){We(t)}}function Xe(t){We(t.data)}function Ze(t){m.postMessage(t+"",ei.protocol+"//"+ei.host)}var Je,Qe,$e,ti=g("species"),ei=m.location,ii=m.setImmediate,ri=m.clearImmediate,ni=m.process,oi=m.MessageChannel,ai=m.Dispatch,si=0,li={},ui="onreadystatechange";ii&&ri||(ii=function(t){for(var e=[],i=1;i<arguments.length;)e.push(arguments[i++]);return li[++si]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Je(si),si},ri=function(t){delete li[t]},"process"==t(ni)?Je=function(t){ni.nextTick(Ye(t))}:ai&&ai.now?Je=function(t){ai.now(Ye(t))}:oi?($e=(Qe=new oi).port2,Qe.port1.onmessage=Xe,Je=je($e.postMessage,$e,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||l(Ze)?Je=ui in c("script")?function(t){$t.appendChild(c("script"))[ui]=function(){$t.removeChild(this),We(t)}}:function(t){setTimeout(Ye(t),0)}:(Je=Ze,m.addEventListener("message",Xe,!1)));var ci,hi,fi,pi,di,yi,gi,vi={set:ii,clear:ri},_i=m.navigator,mi=_i&&_i.userAgent||"",bi=At.f,xi=vi.set,wi=m.MutationObserver||m.WebKitMutationObserver,ki=m.process,Ai=m.Promise,Ti="process"==t(ki),Ei=bi(m,"queueMicrotask"),Mi=Ei&&Ei.value;Mi||(ci=function(){var t,e;for(Ti&&(t=ki.domain)&&t.exit();hi;){e=hi.fn,hi=hi.next;try{e()}catch(t){throw hi?pi():fi=void 0,t}}fi=void 0,t&&t.enter()},pi=Ti?function(){ki.nextTick(ci)}:wi&&!/(iphone|ipod|ipad).*applewebkit/i.test(mi)?(di=!0,yi=document.createTextNode(""),new wi(ci).observe(yi,{characterData:!0}),function(){yi.data=di=!di}):Ai&&Ai.resolve?(gi=Ai.resolve(void 0),function(){gi.then(ci)}):function(){xi.call(m,ci)});function Ri(t){var e,i;this.promise=new t(function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r}),this.resolve=ze(e),this.reject=ze(i)}function Si(t,e){if(h(t),u(e)&&e.constructor===t)return e;var i=Hi.f(t);return(0,i.resolve)(e),i.promise}function Oi(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function Pi(t){return"function"==typeof t?t:void 0}function Li(t,e){return arguments.length<2?Pi(qi[t])||Pi(m[t]):qi[t]&&qi[t][e]||m[t]&&m[t][e]}function Ii(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e}function Ni(t,e,i){if(!e.notified){e.notified=!0;var r=e.reactions;Vi(function(){for(var n=e.value,o=1==e.state,a=0,s=function(i){var r,a,s,l=o?i.ok:i.fail,u=i.resolve,c=i.reject,h=i.domain;try{l?(o||(2===e.rejection&&yr(t,e),e.rejection=1),!0===l?r=n:(h&&h.enter(),r=l(n),h&&(h.exit(),s=!0)),r===i.promise?c(tr("Promise-chain cycle")):(a=Ii(r))?a.call(r,u,c):u(r)):c(n)}catch(i){h&&!s&&h.exit(),c(i)}};r.length>a;)s(r[a++]);e.reactions=[],e.notified=!1,i&&!e.rejection&&pr(t,e)})}}function Ci(t,e,i){var r,n;ur?((r=er.createEvent("Event")).promise=e,r.reason=i,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:i},(n=m["on"+t])?n(r):t===cr&&function(t,e){var i=m.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}("Unhandled promise rejection",i)}function zi(t,e,i,r){return function(n){t(e,i,n,r)}}function ji(t,e,i,r){e.done||(e.done=!0,r&&(e=r),e.value=i,e.state=2,Ni(t,e,!0))}var Di,Fi,Bi,Ui,Gi,Vi=Mi||function(t){var e={fn:t,next:void 0};fi&&(fi.next=e),hi||(hi=e,pi()),fi=e},Hi={f:function(t){return new Ri(t)}},qi=m,Ki=g("species"),Wi="Promise",Yi=vi.set,Xi=g("species"),Zi=et.get,Ji=et.set,Qi=et.getterFor(Wi),$i=m[Wi],tr=m.TypeError,er=m.document,ir=m.process,rr=m.fetch,nr=ir&&ir.versions,or=nr&&nr.v8||"",ar=Hi.f,sr=ar,lr="process"==t(ir),ur=!!(er&&er.createEvent&&m.dispatchEvent),cr="unhandledrejection",hr=Bt(Wi,function(){function t(){}var e=$i.resolve(1),i=(e.constructor={})[Xi]=function(e){e(t,t)};return!((lr||"function"==typeof PromiseRejectionEvent)&&e.then(t)instanceof i&&0!==or.indexOf("6.6")&&-1===mi.indexOf("Chrome/66"))}),fr=hr||!function(t,e){if(!e&&!He)return!1;var i=!1;try{var r={};r[Ve]=function(){return{next:function(){return{done:i=!0}}}},t(r)}catch(t){}return i}(function(t){$i.all(t).catch(function(){})}),pr=function(t,e){Yi.call(m,function(){var i,r=e.value;if(dr(e)&&(i=Oi(function(){lr?ir.emit("unhandledRejection",r,t):Ci(cr,t,r)}),e.rejection=lr||dr(e)?2:1,i.error))throw i.value})},dr=function(t){return 1!==t.rejection&&!t.parent},yr=function(t,e){Yi.call(m,function(){lr?ir.emit("rejectionHandled",t):Ci("rejectionhandled",t,e.value)})},gr=function(t,e,i,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===i)throw tr("Promise can't be resolved itself");var n=Ii(i);n?Vi(function(){var r={done:!1};try{n.call(i,zi(gr,t,r,e),zi(ji,t,r,e))}catch(i){ji(t,r,i,e)}}):(e.value=i,e.state=1,Ni(t,e,!1))}catch(i){ji(t,{done:!1},i,e)}}};hr&&($i=function(t){!function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation")}(this,$i,Wi),ze(t),Di.call(this);var e=Zi(this);try{t(zi(gr,this,e),zi(ji,this,e))}catch(t){ji(this,e,t)}},(Di=function(t){Ji(this,{type:Wi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,i){for(var r in e)it(t,r,e[r],i);return t}($i.prototype,{then:function(t,e){var i=Qi(this),r=ar(Ke(this,$i));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=lr?ir.domain:void 0,i.parent=!0,i.reactions.push(r),0!=i.state&&Ni(this,i,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Fi=function(){var t=new Di,e=Zi(t);this.promise=t,this.resolve=zi(gr,t,e),this.reject=zi(ji,t,e)},Hi.f=ar=function(t){return t===$i||t===Bi?new Fi(t):sr(t)},"function"==typeof rr&&ht({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Si($i,rr.apply(m,arguments))}})),ht({global:!0,wrap:!0,forced:hr},{Promise:$i}),ne($i,Wi,!1),Ui=Li(Wi),Gi=T.f,b&&Ui&&!Ui[Ki]&&Gi(Ui,Ki,{configurable:!0,get:function(){return this}}),Bi=qi[Wi],ht({target:Wi,stat:!0,forced:hr},{reject:function(t){var e=ar(this);return e.reject.call(void 0,t),e.promise}}),ht({target:Wi,stat:!0,forced:hr},{resolve:function(t){return Si(this,t)}}),ht({target:Wi,stat:!0,forced:fr},{all:function(t){var e=this,i=ar(e),r=i.resolve,n=i.reject,o=Oi(function(){var i=ze(e.resolve),o=[],a=0,s=1;Ge(t,function(t){var l=a++,u=!1;o.push(void 0),s++,i.call(e,t).then(function(t){u||(u=!0,o[l]=t,--s||r(o))},n)}),--s||r(o)});return o.error&&n(o.value),i.promise},race:function(t){var e=this,i=ar(e),r=i.reject,n=Oi(function(){var n=ze(e.resolve);Ge(t,function(t){n.call(e,t).then(i.resolve,r)})});return n.error&&r(n.value),i.promise}}),ht({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Ke(this,Li("Promise")),i="function"==typeof t;return this.then(i?function(i){return Si(e,t()).then(function(){return i})}:t,i?function(i){return Si(e,t()).then(function(){throw i})}:t)}});var vr;qi.Promise;if("function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map(function(e){return t[e]})}),Math.hypot=Math.hypot||function(){for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==!1&&(window.performance={}),vr=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==!1&&(self.performance={}),vr=self.performance),vr&&"function"!=typeof vr.now){var _r=+new Date;vr.now=function(){return+new Date-_r}}function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wr(t,e,i){return e&&xr(t.prototype,e),i&&xr(t,i),t}function kr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ar(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mr(t,e,i){return(Mr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&Er(n,i.prototype),n}).apply(null,arguments)}function Rr(t){var e="function"==typeof Map?new Map:void 0;return(Rr=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return Mr(t,arguments,Tr(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Er(i,t)})(t)}function Sr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Or(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Sr(t):e}function Pr(t,e,i){return(Pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tr(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function Lr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ir(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Nr,Cr,zr=!1,jr=!1;try{window.document!==HTMLDocument&&(jr=!0)}catch(o){void 0!==self&&(zr=!0,self.window={document:{}},self.document=self.window.document)}var Dr={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==Cr?Cr:zr||self.is_fake_worker},set is_worker(t){Cr=t},get is_main(){return void 0!==Nr?Nr:jr&&!self.is_fake_worker},set is_main(t){Nr=t},is_native_worker:zr},Fr={},Br=0,Ur={},Gr={},Vr={};function Hr(t,e,i){var r=2<arguments.length&&void 0!==i?i:Gr,n=[];if("string"==typeof t&&(t=(n=t.split(".")).pop()),Dr.is_main&&e&&1===n.length&&"self"===n[0])r=e;else for(var o=0;o<n.length;o++){if(!r[n[o]])return[];r=r[n[o]]}return[t,r]}Fr.addTarget=function(t,e){Dr.is_fake_worker?Vr[t]=e:Gr[t]=e},Fr.removeTarget=function(t){delete Gr[t],delete Vr[t]};var qr=" No object with that name is registered on main thread.",Kr=" Object has no method with that name.",Wr="_worker_broker_error_not_set_";function Yr(t){Array.isArray(t)&&t.filter(function(t){return t.parent&&t.property}).forEach(function(t){return delete t.parent[t.property]})}Fr.withTransferables=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(!(this instanceof Fr.withTransferables))return Mr(Fr.withTransferables,e);this.value=e,this.transferables=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return n;if(Array.isArray(e))e.forEach(function(i,r){return t(i,e,r,n)});else if("object"===mr(e))if(e instanceof ArrayBuffer)n.push({object:e,parent:i,property:r});else if(e.buffer instanceof ArrayBuffer)n.push({object:e.buffer,parent:i,property:r});else for(var o in e)t(e[o],e,o,n);return n}(this.value)},Dr.is_main&&(Fr.postMessage=function(t,e){for(var i=arguments.length,r=new Array(2<i?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];if(Array.isArray(t))return Promise.all(t.map(function(t){return Fr.postMessage.apply(Fr,[t,e].concat(Ir(r)))}));var o,a={};"object"===mr(e)&&(e=(a=e).method);var s="main_send";"string"==typeof t?(e=t,r=Array.prototype.slice.call(arguments,1),o=!0,s="worker_send"):t.init&&(o=!0);var l,u=[];if(r&&1===r.length&&r[0]instanceof Fr.withTransferables&&(u=r[0].transferables,r=r[0].value),l={type:s,message_id:++Br,method:e,message:r},o)return function(t,e){var i=t.type,r=Lr(Hr(t.method,e,"main_send"===i?Vr:Gr),2),n=r[0],o=r[1],a="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(a+qr);var s="function"==typeof o[n]&&o[n];if(!s)throw Error(a+Kr);return new Promise(function(e,i){var r;try{r=s.apply(o,t.message)}catch(r){return void i(r)}r instanceof Promise?r.then(function(t){t instanceof Fr.withTransferables&&(t=t.value[0]),e(t)},function(t){i(t instanceof Error?"".concat(t.message,": ").concat(t.stack):t)}):(r instanceof Fr.withTransferables&&(r=r.value[0]),e(r))})}(l,t&&t.init?t:void 0);var c=new Promise(function(t,i){Ur[Br]={method:e,message:r,resolve:t,reject:i}});return a.stringify&&(l=JSON.stringify(l)),t.postMessage(l,u.map(function(t){return t.object})),Yr(u),c},Fr.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",function(e){var i="string"==typeof e.data?JSON.parse(e.data):e.data,r=i.message_id;if("worker_reply"===i.type)Ur[r]&&(i.error?Ur[r].reject(i.error):Ur[r].resolve(i.message),delete Ur[r]);else if("worker_send"===i.type&&null!=r){var n=Lr(Hr(i.method),2),o=n[0],a=n[1],s="Worker broker could not dispatch message type ".concat(i.method," on target ").concat(i.target,".");if(!a)throw Error(s+qr);var l="function"==typeof a[o]&&a[o];if(!l)throw Error(s+Kr);var u,c=Wr;try{u=l.apply(a,i.message)}catch(e){c=e}var h,f=[];u&&"function"==typeof u.then?u.then(function(e){e instanceof Fr.withTransferables&&(f=e.transferables,e=e.value[0]),h={type:"main_reply",message_id:r,message:e},t.postMessage(h,f.map(function(t){return t.object})),Yr(f)},function(e){t.postMessage({type:"main_reply",message_id:r,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})}):(u instanceof Fr.withTransferables&&(f=u.transferables,u=u.value[0]),h={type:"main_reply",message_id:r,message:u,error:c instanceof Error?"".concat(c.message,": ").concat(c.stack):c},t.postMessage(h,f.map(function(t){return t.object})),Yr(f))}})},Fr.getMessages=function(){return Ur},Fr.getMessageId=function(){return Br}),Dr.is_worker&&(Fr.postMessage=function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n={};"object"===mr(t)&&(t=(n=t).method);var o,a=new Promise(function(e,r){Ur[Br]={method:t,message:i,resolve:e,reject:r}}),s=[];return i&&1===i.length&&i[0]instanceof Fr.withTransferables&&(s=i[0].transferables,i=i[0].value),o={type:"worker_send",message_id:Br,method:t,message:i},n.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map(function(t){return t.object})),Yr(s),Br++,a},self.addEventListener("message",function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,i=e.message_id;if("main_reply"===e.type)Ur[i]&&(e.hasOwnProperty("error")&&e.error!==Wr?Ur[i].reject(e.error):Ur[i].resolve(e.message),delete Ur[i]);else if("main_send"===e.type&&null!=i){var r=Lr(Hr(e.method),2),n=r[0],o=r[1],a="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(a+qr);var s,l,u="function"==typeof o[n]&&o[n];if(!u)throw Error(a+Kr);try{s=u.apply(o,e.message)}catch(t){l=t}var c,h=[];s instanceof Promise?s.then(function(t){t instanceof Fr.withTransferables&&(h=t.transferables,t=t.value[0]),c={type:"worker_reply",message_id:i,message:t},self.postMessage(c,h.map(function(t){return t.object})),Yr(h)},function(t){self.postMessage({type:"worker_reply",message_id:i,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})}):(s instanceof Fr.withTransferables&&(h=s.transferables,s=s.value[0]),c={type:"worker_reply",message_id:i,message:s,error:l instanceof Error?"".concat(l.message,": ").concat(l.stack):l},self.postMessage(c,h.map(function(t){return t.object})),Yr(h))}}));var Xr={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},Zr={},Jr={};function Qr(t){var e="object"===mr(t)?t.level:t;if(Xr[e]<=Xr[Qr.level]){for(var i=arguments.length,r=new Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(Dr.is_native_worker)Fr.postMessage.apply(Fr,[{method:"_logProxy",stringify:!0},t].concat(r));else{if("object"===mr(t)&&!0===t.once){if(Jr[JSON.stringify(r)])return;Jr[JSON.stringify(r)]=!0}var o=function(t){return Zr[t]=Zr[t]||(console[t]?console[t]:console.log).bind(console),Zr[t]}(e);1<r.length?o.apply(void 0,["Tangram [".concat(e,"]: ").concat(r[0])].concat(Ir(r.slice(1)))):o("Tangram [".concat(e,"]: ").concat(r[0]))}}}Qr.level="info",Qr.workers=null,Qr.setLevel=function(t){Qr.level=t,Dr.is_main&&Array.isArray(Qr.workers)&&Fr.postMessage(Qr.workers,"_logSetLevelProxy",t)},Dr.is_main&&(Qr.setWorkers=function(t){Qr.workers=t},Qr.reset=function(){Jr={}}),Fr.addTarget("_logProxy",Qr),Fr.addTarget("_logSetLevelProxy",Qr.setLevel);var $r,tn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},en={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},i="undefined"!=typeof window&&window===this?this:void 0!==tn&&null!=tn?tn:this;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var r;t:{var n={};try{n.__proto__={ea:!0},r=n.ea;break t}catch(t){}r=!1}t=r?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=t;!function(t,r){if(r){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in n||(n[a]={}),n=n[a]}(r=r(o=n[t=t[t.length-1]]))!=o&&null!=r&&e(n,t,{configurable:!0,writable:!0,value:r})}}("Object.setPrototypeOf",function(t){return t||o});var a=this||self;function s(t){var e=mr(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return"function"==s(t)}function u(t){var e=mr(t);return"object"==e&&null!=t||"function"==e}function c(t,e){t=t.split(".");var i,r=a;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===e?r=r[i]&&r[i]!==Object.prototype[i]?r[i]:r[i]={}:r[i]=e}function h(t,e){function i(){}i.prototype=e.prototype,t.ua=e.prototype,t.prototype=new i,t.prototype.constructor=t}var f=Math,p=f.min,d=f.max,y=f.round,g=f.floor,v=f.ceil,_=f.abs,m=f.log,b=f.sqrt,x=f.pow,w=f.sin,k=f.asin,A=f.cos,T=f.tan,E=f.atan2,M=f.PI,R=M/2,S=M/4,O=2*M,P=3*M,L=M/180,I=180/M;function N(t,e,i){return i<t?i:t<e?e:t}function C(t,e,i){return e<i?e<=t&&t<=i:i<=t&&t<=e}function z(t,e,i,r,n,o){return b(x((t-n)*(r-o)-(e-o)*(i-n),2)/(x(i-n,2)+x(r-o,2)))}c("H.math.normalize",function(t,e,i){return e-=i=i||0,(t-=i)-g(t/e)*e+i}),c("H.math.clamp",N);var j={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function D(t,e){var i=t.x;t=t.y;for(var r,n,o,a,s=e.length,l=s,u=e[0],c=0,h=0,f=0;1!=c&&1<l;)n=e[--l],r=e[--l],a=e[l?l-1:(s+(l-1))%s],o=e[l?l-2:(s+(l-2))%s],i<=r&&r<=i&&t<=n&&n<=t||i<=o&&o<=i&&t<=a&&a<=t?c=1:c||r!==i?!c&&C(i,r,o)&&((r<i&&i<o||i<r&&o<i)&&(h+=t<(u=n+(i-r)/(o-r)*(a-n)),f+=u<t),c=C(t,n,a)&&z(i,t,r,n,o,a)<=0?2:0):(o===i&&(n<t&&t<a||t<n&&a<t)||(u<=i&&i<o||i<=u&&o<i)&&(t<=n?++h:++f),c=C(t,n,a)&&z(i,t,r,n,o,a)<=0?2:0),u=r;return c||0===f||0==h%2||(c=3),c!==j.NONE}function F(t,e){this.x=+t,this.y=+e}function B(t,e,i,r,n,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,i=-i,o=-o,s<a){if(n<s||a<r)return;var l=a,u=t;a=s,t=e,s=l,e=u,l=1}else if(n<a||s<r)return;if(e<t){if(i<e||t<o)return;var c=1;t=-t,e=-e,u=o,o=-i,i=-u}else if(i<t||e<o)return;if(a<r){if((t+=(r-a)*(e-t)/(s-a))>i)return;a=r}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>n)return;t=o}return n<s&&(e=t+(n-a)*(e-t)/(s-a),s=n),i<e&&(s=a+(i-t)*(s-a)/(e-t),e=i),c&&(t=-t,e=-e),l?[new F(s,-e),new F(a,-t)]:[new F(a,-t),new F(s,-e)]}function U(t,e,i,r,n,o,a,s,l,u){return t={x:t,y:e,next:i||null,s:r||null,ta:n||null,X:o||null,o:!!a,T:s||0,O:l||0,alpha:u||0},r&&(t.s.next=t),i&&(t.next.s=t),t}function G(t){for(;t&&t.o;)t=t.next;return t}function V(t){if(t)for(;t.next;)t=t.next;return t}function H(t){var e=t;if(e)for(;(e=e.next)!=t&&(!e.o||e.o&&e.O););return e}function q(t){var e=V(t);(e.s.next=t).s=e.s}function K(t,e,i,r,n){var o,a=e.x-t.x,s=e.y-t.y,l=r.x-i.x,u=r.y-i.y,c=a*u-s*l;return c?(l=((i.x-t.x)*u-(i.y-t.y)*l)/c,c=(s*(i.x-t.x)-a*(i.y-t.y))/c,l<0||1<l||c<0||1<c?0:(0===l?o=t:1===l?o=e:0===c?o=i:1===c&&(o=r),o?(o.x+=2480549651603763e-20,o.y+=7321997314118067e-20,o.M&&(o.M.x=o.x,o.M.y=o.y),K(t,e,i,r,n)):(n.xa=t.x+l*a,n.ya=t.y+l*s,n.fa=l,n.ga=c,1))):0}function W(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function Y(t,e,i){for(e=e.next;e!==i&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.s=e.s,(t.next.s=t).s.next=t}function X(t,e){for(var i,r=null,n=0,o=t.length;n<o;n++)(i=U(t[n].x,t[n].y,r)).qa=e,(i.next=r)&&(r.s=i),r=i;return r}function Z(t,e,i,r){return(t-=i)*t+(e-=r)*e}c("H.math.CoverType",j),c("H.math.isPointInsidePolygon",D),c("H.math.flatten",function(t){for(var e=t.length,i=new Float64Array(2*e),r=e&&t[0].x!==$;e--;){var n=t[e],o=e<<1;i[o]=r?n.x:n[0],i[1+o]=r?n.y:n[1]}return i}),c("H.math.Point",F),F.prototype.set=F.prototype.set=F,F.prototype.clone=F.prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new F(this.x,this.y),t},F.prototype.add=F.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},F.prototype.sub=F.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},F.prototype.scale=F.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},F.prototype.round=F.prototype.round=function(){return this.x=y(this.x),this.y=y(this.y),this},F.prototype.floor=F.prototype.floor=function(){return this.x=g(this.x),this.y=g(this.y),this},F.prototype.ceil=F.prototype.ceil=function(){return this.x=v(this.x),this.y=v(this.y),this},F.prototype.equals=F.prototype.w=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},F.prototype.getNearest=F.prototype.la=function(t,e){var i=e.x-t.x,r=e.y-t.y,n=t;if(i||r){var o=((this.x-t.x)*i+(this.y-t.y)*r)/(i*i+r*r);n=o<=0?t:1<=o?e:new F(t.x+o*i,t.y+o*r)}return n},F.prototype.distance=F.prototype.R=function(t){return b(x(this.x-t.x,2)+x(this.y-t.y,2))},F.fromIPoint=function(t){if(!t)throw Error("invalid argument");return t instanceof F?t:new F(t.x,t.y)},c("H.math.clipping.clipStrips",function(t,e,i,r,n,o){var a,s,l,u,c=t.length;if(c)for(a=[];c--;){var h=t[c],f=h.length,p=0;for(l=1;l<f;l++)if(u=B(h[l-1],h[l],i,e,r,n)){var d=u[0],y=u[1];p&&p.w(d)?s.push(y):a.push(s=u),p=y,o&&(l=f,c=0)}}else a=t;return a}),c("H.math.clipping.clipPolygon",function(t,e,i){var r,n;t=X(t,!0),e=X(e,!1);var o={},a=r=1;switch(~~(i||0)){case 1:a=r=0;break;case 2:r=0,a=1;break;case 3:r=1,a=0}i=r;var s=a;if(e&&t){for(e.M=U(e.x,e.y,null,V(e)),t.M=U(t.x,t.y,null,V(t)),a=e;a.next;a=a.next)if(!a.o)for(r=t;r.next;r=r.next)if(!r.o){var l=G(a.next),u=G(r.next);if(n=K(a,l,r,u,o)){n=o.fa;var c=o.ga,h=o.xa,f=o.ya;Y(n=U(h,f,null,null,null,null,!0,0,0,n),a,l),Y(l=U(h,f,null,null,null,null,!0,0,0,c),r,u),(n.X=l).X=n}}for(o=D(e,W(t)),i&&(o=!o),a=e;a;a=a.next)a.o&&(o=!(a.T=o));for(o=D(t,W(e)),s&&(o=!o),r=t;r.next;r=r.next)r.o&&(o=!(r.T=o));for(q(e),q(t);(t=H(e))!=e;){for(i=null;!t.O;t=t.X){for(o=t.T;(i=U(t.x,t.y,i)).artificial=t.o||t.qa,t.O=1,t=o?t.next:t.s;)if(t.o){t.O=1;break}if(!t)break}i.ta=p;var p=i}return p}}),c("H.math.simplifyDP",function(t,e,i){return function t(e,i,r,n,o){var a=0,s=n,l=e[n].x,u=e[n].y,c=e[o].x,h=e[o].y,f=n+1,p=Z(l,u,c,h);if(p)for(;f<o;){var d=e[f++],y=d.x;d=d.y;var g=((y-l)*(c-l)+(d-u)*(h-u))/p;y=g<0?Z(y,d,l,u):1<g?Z(y,d,c,h):Z(y,d,l+g*(c-l),u+g*(h-u)),a<y&&(a=y,s=f-1)}else for(;f<o;)d=e[f++],y=d.x,d=d.y,y=Z(y,d,l,u),a<y&&(a=y,s=f-1);n=i<=a||0<r&&s-n?(--r,1<s-n?(n=t(e,i,r,n,s),n.splice(n.length-1,1)):n=[e[n]],1<o-s?n.concat(t(e,i,r,s,o)):n.concat(e.slice(s,o+1))):[e[n],e[o]];return n}(t,e*e,i||0,0,t.length-1)});var J=this,Q=String,$=self.eval("undefined"),tt=self.eval("null"),et="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(t,e){if(!0==(t instanceof e&&t.constructor===e))throw new TypeError("Illegal constructor "+st(e))}c("H.lang.isArray",function(t,e,i,r){var n;if(!(n="Array"===ot(t))&&e)throw new ft(e,i,r!==$?r:t);return n}),c("H.lang.isString",function(t){return"string"==typeof t});var rt=isNaN;function nt(t){return t===+t}function ot(t){var e=Object[et[0]][et[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:mr(t)}c("H.lang.isNumber",nt),c("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var at=[];function st(t,e,i,r){var n,o="",a=arguments.length<2;return a&&(e={H:J.H},i="",r=at.slice()),ct(e,!0,function(e,a){try{if(a=function(t,e){var i=[];return ct(t,!1,function(t,r){t[r]===e&&i.push(r)}),i.sort(lt)[0]}(e,n=e[a]),!(u(n)&&n.window===n&&n.self===n||u(n)&&0<n.nodeType&&l(n.cloneNode))&&u(n)){if(n===t)return o=i+"."+a,!0;if(r.indexOf(n)<0&&(r.push(n),o=st(t,n,i+"."+a,r)))return!0}}catch(e){}}),a&&(o=o?o.substr(1).replace("."+et[0]+".","#"):"~"+(l(t)?function(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}(t)+"()":ot(t))),o}function lt(t,e){return e.length-t.length}at.indexOf(at)<0&&at.push(at);var ut=Object[et[0]][et[2]];function ct(t,e,i){var r;if(t){for(n in t)if((!e||ut.call(t,n))&&i(t,n,!0))return;for(r=et.length;r--;){var n=et[r];if((!e||ut.call(t,n))&&i(t,n,!1))break}}}function ht(t,e,i){i[e]="#"+e}function ft(t,e,i){var r=arguments.length;if((e=e!==$?+e:e)!==$){var n,o=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,""));(o=n=o?Q(o[1].replace(/\s+/g,"")).split(","!==$?",":" "):[]).forEach(ht),o=o[e]||"#"+e}return n=t?st(t):"",r=2<r?Q(i):"",(o||r)&&(n+=" (Argument "+(o||"")+(r?" "+r:"")+")"),r=Error(n),Object.setPrototypeOf(r,ft.prototype),r}function pt(t,e,i){var r=N(+t,-90,90);if(e&&rt(r))throw new ft(e,i,t);return r}function dt(t,e,i){var r,n=+t;(n<-180||180<n)&&(n=(!1==(r=(n+180)%360)<0?r:360+r)-180);if(e&&rt(n))throw new ft(e,i,t);return n}function yt(t,e,i){var r;if(t!==$&&rt(r=+t)&&e)throw new ft(e,i,t);return r}function gt(){it(this,gt)}function vt(t,e,i){this.lat=pt(t,vt,0),this.lng=dt(e,vt,1),i!==$&&(this.alt=yt(i,vt,2))}function _t(t,e,i){var r=u(t)&&!(rt(t.lat=pt(t.lat))||rt(t.lng=dt(t.lng))||t.alt!==$&&rt(t.alt=yt(t.alt)));if(!r&&e)throw new ft(e,i,t);return r}function mt(t,e,i,r){bt(this,pt(t,mt,0),dt(e,mt,1),pt(i,mt,2),dt(r,mt,3))}function bt(t,e,i,r,n){return t.f=i,t.g=n,e<r&&(i=e,e=r,r=i),t.i=e,t.h=r,t.m=t.b=t.c=null,t}function xt(t,e){return(t=e-t)+(t<0?360:0)}function wt(t,e){return(t+=e/2)-(180<t?360:0)}function kt(t,e,i,r,n,o,a,s,l){i=p(i,a),t=d(t,n);var u=wt(e,n=xt(e,r)),c=wt(o,a=xt(o,s))-u;if((c+=c-1e-6<0?360:0)-1e-6<180){u=e;var h=s}else c=360-c,u=o,h=r;return 360<=(c=c+n/2+a/2)+5e-7?(u=-180,h=180):c-5e-7<n?(u=e,h=r):c-5e-7<a&&(u=o,h=s),l?bt(l,t,u,i,h):new mt(t,u,i,h)}function At(t,e,i){return i||(_t(t,At,0),_t(e,At,1)),new mt(t.lat,t.lng,e.lat,e.lng)}function Tt(t,e,i,r,n,o){it(this,Tt),this.sa=t||10,this.c=this.b=null,this.j=r||0,this.l=n||0,this.m=e||1,this.u=i||1,this.I=!!o,this.flush()}function Et(t,e,i){var r,n;if(t.I&&(r=t.c))for(n=3;0<=n;n--){var o=e[n];if(n%3?o>=r[n]:o<=r[n]){if(!i){t.c=null;break}r[n]=o}}}function Mt(t,e){var i,r=t.a;if(e){var n=e;if(n!==r)for(r=n;n=n.c;)(n.entries||1<n.a)&&(r=n)}else for(;!r.entries&&(i=r.a)<2&&i;)r=n;t.a=r}h(ft,Error),c("H.lang.InvalidArgumentError",ft),ft.prototype.name="InvalidArgumentError",c("H.geo.isDBC",function(t,e){return 0!=(t<0^e<0)&&180<_(e-t)}),c("H.geo.AbstractGeometry",gt),gt.prototype.getBoundingBox=gt.prototype.D,gt.prototype.equals=gt.prototype.w,gt.prototype.a="",gt.prototype.l="",gt.prototype.toString=gt.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},gt.prototype.toGeoJSON=gt.prototype.va=function(){return{type:this.l,coordinates:this.u()}},gt.prototype.forWorkerMessage=gt.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},h(vt,gt),c("H.geo.Point",vt),vt.prototype.equals=vt.prototype.w=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},vt.prototype.distance=vt.prototype.R=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*L,i=t.lat*L;t=12742001.58*k(p(1,b(x(w((e-i)/2),2)+A(e)*A(i)*x(w((this.lng*L-t.lng*L)/2),2))))}return t},vt.prototype.walk=vt.prototype.wa=function(t,e,i){if(i){if(e/=6371000.79){t*=L;var r=L*this.lat,n=w(r),o=w(e),a=A(e),s=L*this.lng,l=A(r);r=k(l*A(t)*o+n*a),l=(t=(s+(t=E(w(t)*l*o,a-n*w(r)))+M)%(2*M)-M)*I}return e?new vt(r*I,(l+540)%360-180):this}if(0==((t=(t%360+360)%360)+90)%180)return r=this.lng+e/(6371000.79*O*A(this.lat*L))*(270===t?-360:360),new vt(this.lat,(r+540)%360-180);if(e/=6371000.79){t*=L,s=this.lat*L,n=this.lng*L,a=(o=s+e*A(t))-s,r=m(T(o/2+S)/T(s/2+S)),r=rt(a/r)?A(s):a/r;var u=e*w(t)/r;_(o)>R&&(o=0<o?M-o:-(M+o))}return e?new vt(o*I,((n+u+P+(_(s+a)>R?M:0))%O-M)*I):this},vt.prototype.getBoundingBox=vt.prototype.D=function(){return new mt(this.lat,this.lng,this.lat,this.lng)},vt.validate=_t,vt.fromIPoint=function t(e){if(!e)throw new ft(t,0,e);return new vt(e.lat,e.lng,e.alt)},vt.prototype.a="Point",vt.prototype.I=function(t){return t.push("(",this.lng," ",this.lat,")"),t},vt.prototype.l="Point",vt.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},vt.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},h(mt,gt),c("H.geo.Rect",mt),mt.prototype.a="Polygon",mt.prototype.I=function(t){var e=this.i,i=this.f,r=this.h,n=this.g;return t.push("(","(",i," ",e,",",n," ",e,",",n," ",r,",",i," ",r,",",i," ",e,")",")"),t},mt.prototype.equals=mt.prototype.w=function(t){return this===t||!!t&&this.i===t.i&&this.f===t.f&&this.h===t.h&&this.g===t.g},mt.prototype.clone=mt.prototype.clone=function(){return new mt(this.i,this.f,this.h,this.g)},mt.prototype.getTopLeft=mt.prototype.W=function(){return this.m||(this.m=new vt(this.i,this.f)),this.m},mt.prototype.getBottomRight=mt.prototype.V=function(){return this.b||(this.b=new vt(this.h,this.g)),this.b},mt.prototype.getTop=mt.prototype.na=function(){return this.i},mt.prototype.getBottom=mt.prototype.ha=function(){return this.h},mt.prototype.getLeft=mt.prototype.ja=function(){return this.f},mt.prototype.getRight=mt.prototype.ma=function(){return this.g},mt.prototype.getCenter=mt.prototype.F=function(){return this.c||(this.c=new vt(this.h+(this.i-this.h)/2,wt(this.f,this.A()))),this.c},mt.prototype.getWidth=mt.prototype.A=function(){return xt(this.f,this.g)},mt.prototype.getHeight=mt.prototype.G=function(){return this.i-this.h},mt.prototype.isCDB=mt.prototype.N=function(){return this.f>this.g},mt.prototype.isEmpty=mt.prototype.ra=function(){return!this.A()&&!this.G()},mt.prototype.getBoundingBox=mt.prototype.D=function(){return new mt(this.i,this.f,this.h,this.g)},mt.prototype.containsLatLng=mt.prototype.L=function(t,e,i){var r=this.F();return i||(t=pt(t,this.L,0),e=dt(e,this.L,1)),(t=(e=this.B(t,e,i)).F()).lat===r.lat&&t.lng===r.lng&&this.G()===e.G()&&this.A()===e.A()},mt.prototype.containsPoint=mt.prototype.$=function(t,e){return e||_t(t,this.$,0),this.L(t.lat,t.lng,e)},mt.prototype.containsRect=mt.prototype.aa=function(t,e){var i=this.F();if(!(e||t instanceof mt))throw new ft(this.aa,0,t);return(t=(e=this.J(t,e)).F()).lat===i.lat&&t.lng===i.lng&&this.G()===e.G()&&this.A()===e.A()},mt.prototype.mergeLatLng=mt.prototype.B=function(t,e,i,r){if(!i){if(rt(t=pt(t)))throw new ft(this.B,0,t);if(rt(e=dt(e)))throw new ft(this.B,1,e)}return kt(this.i,this.f,this.h,this.g,t,e,t,e,r)},mt.prototype.mergePoint=mt.prototype.ca=function(t,e,i){return e||_t(t,this.ca,0),this.B(t.lat,t.lng,e,i)},mt.prototype.mergeRect=mt.prototype.J=function(t,e,i){if(!(e||t instanceof mt))throw new ft(this.J,0,t);return kt(this.i,this.f,this.h,this.g,t.i,t.f,t.h,t.g,i)},mt.prototype.mergeTopLeftBottomRight=mt.prototype.C=function(t,e,i,r,n,o){return n||(t=pt(t,this.C,0),e=dt(e,this.C,1),i=pt(i,this.C,2),r=dt(r,this.C,3)),kt(this.i,this.f,this.h,this.g,t,e,i,r,o)},mt.prototype.intersects=mt.prototype.ba=function(t,e){var i=this.f<=this.g,r=t.f<=t.g,n=this.f<t.g,o=t.f<this.g;if(!(e||t instanceof mt))throw new ft(this.ba,0,t);return this.h<=t.i&&t.h<=this.i&&(!i&&(!r||n||o)||!r&&(n||o)||n&&o)},mt.merge=kt,mt.fromPoints=At,mt.coverPoints=function t(e,i){var r=1,n=e.length,o=null,a=s(e);if("array"!=a&&("object"!=a||"number"!=typeof e.length))throw new ft(t,0,e);if(0<n)for(o=At(a=e[0],a,i);r<n;r++)a=e[r],o.B(a.lat,a.lng,i,o);return o},mt.coverLatLngAlts=function t(e,i){var r,n=3,o=e.length;if(!(i||e&&null!=e.length))throw new ft(t,0,e);if(0<o)for(r=new mt(e[0],e[1],e[0],e[1]);n<o;n+=3)r.B(e[n],e[n+1],i,r);return r},mt.coverRects=function t(e,i){var r,n=1,o=e.length;if(i&&(!e||null==e.length))throw new ft(t,0,e);if(0<o)for(r=new mt(e[0].i,e[0].f,e[0].h,e[0].g);n<o;n++)r.J(e[n],i,r);return r},mt.prototype.resizeToCenter=mt.prototype.da=function(t,e){var i=this.f,r=this.i,n=this.g,o=this.h,a=this.F().lng;_t(t,this.da,0);var s=t.lat-o-(r-o)/2,l=t.lng-a;return t=(t=i+((l=180<l||l<-180?-(a+t.lng):l)<0?2*l:0))<-180?360+t:t,n=180<(n+=0<l?2*l:0)?n-360:n,90<=(r=0<s?r+2*s:r)&&(r=90),(o=s<0?o+2*s:o)<=-90&&(o=-90),e?bt(e,r,t,o,n):new mt(r,t,o,n)},mt.prototype.l="Polygon",mt.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},mt.prototype.U=function(){return this.j()},mt.prototype.j=function(){return[this.i,this.f,this.h,this.g]},Tt.prototype.remove=function(t){var e,i,r,n=!1;if(t&&(e=t.a)&&e.b===this&&(i=e.entries)&&0<=(r=i.indexOf(t))){var o,a;for(i.splice(r,1),i=this.a;e;)if((o=e.entries)&&o.length||(o&&delete e.entries,e.a||!(a=e.c)))e=tt;else{r=a;var s=(n=e).j;r[s]===n&&(delete r[s],delete n.c,--r.a),i===e&&(i=a),e=a}this.a!==i&&(this.a=i,Mt(this)),Et(this,t,!1),n=!0}return n},Tt.prototype.flush=function(){var t=new St(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(t.b=this).a=this.b=t,this.c=null},Tt.prototype.o=function(t,e,i,r,n,o){var a=[],s=this.a,l=this.b;return t<=s[5]&&e<=s[6]&&(n?i>=s[7]:i>s[7])&&(o?r>=s[4]:r>s[4])&&function t(e,i,r,n,o,a,s,l,u){var c,h=i.entries,f=i[7],p=i[4],d=i[5],y=i[6],g=i[8],v=i[9];if(h){var _=h.length;if(p<o||f<n||s<y||a<d)for(;_--;){f=h[_],p=f[3],d=f[0],y=f[1];var m=f[2];o<=m&&n<=y&&(d<s||l&&d==s)&&(p<a||u&&p==a)&&r.push(f)}else for(;_--;)r.push(h[_])}(g<a||u&&a==g)&&(o<v&&(c=i[1])&&t(e,c,r,n,o,a,s,l,u),(v<s||l&&s==v)&&(c=i[3])&&t(e,c,r,n,o,a,s,l,u));n<g&&(o<v&&(c=i[0])&&t(e,c,r,n,o,a,s,l,u),(v<s||l&&s==v)&&(c=i[2])&&t(e,c,r,n,o,a,s,l,u))}(this,s,a,t,e,i,r,o||r>=l[6],n||i>=l[5]),a};var Rt=0;function St(t,e,i,r,n,o){this.j=e,t&&(this.c=t,this.b=t.b,n=1&e?(i=t[8],t[5]):(i=t[7],t[8]),o=2&e?(r=t[9],t[6]):(r=t[4],t[9])),this[7]=i,this[5]=n,this[8]=(i+n)/2,this[4]=r,this[6]=o,this[9]=(r+o)/2}function Ot(t,e,i,r,n,o){Ot.ua.constructor.apply(this,arguments)}function Pt(t,e,i,r,n,o,a){var s,l,u=e[8],c=e[9];return a&&(n<u||(s=u<=i))&&(o<c||(l=c<=r))?i=(u=Pt)(t,e=e[s|=l<<1]||(++e.a,e[s]=new St(e,s)),i,r,n,o,a-1):(r=i=new Lt(i,r,n,o),(e.entries||(e.entries=[])).push(r),r.a=e,Et(t,i,!0),Mt(t,e)),i}function Lt(t,e,i,r){this.id=Rt++,this[0]=e,this[1]=i,this[2]=r,this[3]=t}function It(t){this.l=new Ot(+t||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Nt(t,e,i,r,n,o){if(o)o=new Lt(n,-e,i+360,-r),t.j.push(o),t.m=!0,t.a&&t.a.C(e,i,r,n,!0,t.a);else{var a=-e,s=-r,l=(o=t.l).b,u=l[5],c=l[6];if(!(l[7]<=i&&l[4]<=a&&(n<u||u===n&&u===l.b.b[5])&&(s<c||c===s&&c===l.b.b[6])))throw Error("Coordinates out of bounds");o=Pt(o,o.b,i,a,n,s,o.sa),t.b&&t.b.C(e,i,r,n,!0,t.b)}return t.c=null,o}function Ct(t,e,i,r,n,o,a){var s,l=(t=t.j).length,u=[];if(l){var c=i+360;for(s=n+360;l--;){var h=t[l];zt(h,e,i,r,n,o,a)?u.push(h):zt(h,e,c,r,s,o,a)&&u.push(h)}}return u}function zt(t,e,i,r,n,o,a){var s=t[3],l=t[0],u=t[1];return t=t[2],(o?l<=r:l<r)&&(a?s<=n:s<n)&&e<=t&&i<=u}function jt(t,e){var i,r,n;if(i=e.length){var o=t.length;for(r={};o--;)r[t[o].id]=1;for(;i--;)(n=e[i]).id in r||t.push(n)}}function Dt(){}function Ft(t,e,i){if(this.l=[],e&&this.K(e),i&&!l(i))throw new ft(Ft,2,i);this.b=0,this.m=i,this.a={},this.j=this.c=null,this.Z(t)}function Bt(t,e){return e&&(t.c=Gt(t,e,t.c)),e}function Ut(t){for(;t.b>t.u&&t.j;)Vt(t,t.j,!0)}function Gt(t,e,i){return i!==e&&((e.H||e.v)&&Vt(t,e),(e.H=i)&&(e.v=i.v,i.v=e),e.v||(t.c=e),e.H||(t.j=e),t.b+=e.size),e}function Vt(t,e,i){var r=e.v,n=e.H;if((r||n||e==t.c&&e==t.j)&&(r?r.H=n:t.c=n,n?n.v=r:t.j=r,t.b-=e.size,i)){for(i=t.l.length;i--;)t.l[i].call(t,e.id,e.data,e.size);delete t.a[e.id]}e.H=e.v=null}St.prototype.a=0,h(Ot,Tt),c("H.geo.QuadTree",It),It.prototype.N=function(){return this.m},It.prototype.D=function(){var t;if(!this.c){var e,i,r,n,o=[];if(e=!this.b){var a=this.l,s=a.c;a.I&&!s&&((e=a.a).entries||e[0]||e[1]||e[2]||e[3])&&(s=function t(e,i){var r,n,o,a,s=0;for(r=3;0<=r;r--){var l=r+4,u=0<r%3,c=[],h=i[r],f=e[r];for(n=f.length;n--;){var p=f[n];if(o=p.entries)for(a=o.length;a--;){var d=o[a][r];(u?h<d:d<h)&&(h=d)}for(a=4;a--;)(o=p[a])&&(u?o[l]>h:o[l]<h)&&c.push(o)}s+=c.length,i[r]=h,e[r]=c}return s&&(i=t(e,i)),i}([s=[e],s,s,s],[e[6],e[7],e[4],e[5]]),a.c=s),e=a=s}if(e&&(this.b=new mt(-a[0],a[3],-a[2],a[1])),(t=this.b)&&o.push(t),!this.a&&(n=(r=this.j).length)){for(e=360,s=-(a=90),i=0;n--;){var l=r[n];a=p(a,l[0]),e=p(e,l[3]),s=d(s,l[2]),i=d(i,l[1])}this.a=new mt(-a,e,-s,i-360)}(t=this.a)&&o.push(t),(t=o[0])&&(o[1]&&(t=t.J(o[1],!0)),this.c=t)}return this.c},It.prototype.insertBoundingBox=It.prototype.oa=function(t){var e=t.W(),i=t.V();return(t=t.N())?Nt(this,e.lat,i.lng,i.lat,e.lng,t):Nt(this,e.lat,e.lng,i.lat,i.lng,t)},It.prototype.remove=It.prototype.remove=function(t){var e;if(t.a){var i=this.l.remove(t);this.b=null}else(i=0<=(t=(e=this.j).indexOf(t)))&&(e.splice(t,1),this.m=0<e.length,this.a=null);return i&&(this.c=null),i},It.prototype.intersectBoundingBox=It.prototype.pa=function(t,e,i){var r=this.l,n=t.W(),o=t.V(),a=-n.lat;n=n.lng;var s=-o.lat;return o=o.lng,!e&&a==s||!i&&n===o?t=[]:t.N()?(jt(t=r.o(-180,a,o,s,i,e),r.o(n,a,180,s,!1,e)),jt(t,Ct(this,a,o,s,n+360,e,i))):jt(t=r.o(n,a,o,s,i,e),Ct(this,a,n,s,o,e,i)),t},c("H.util.ICache",Dt),Dt.prototype.add=Dt.prototype.add=function(){},Dt.prototype.get=Dt.prototype.get=function(){},Dt.prototype.drop=Dt.prototype.S=function(){},Dt.prototype.forEach=Dt.prototype.forEach=function(){},Dt.prototype.removeAll=Dt.prototype.Y=function(){},Dt.prototype.registerOnDrop=Dt.prototype.K=function(){},Dt.prototype.deRegisterOnDrop=Dt.prototype.P=function(){},c("H.util.Cache",Ft),Ft.prototype.add=Ft.prototype.add=function(t,e,i){if(!nt(i=+i)||i<0)throw new ft(this.add,2,i);t=String(t);var r=this.a[t],n=!0;return this.m&&(n=this.m(t,e,i)),r?n?(this.b+=i-r.size,r.size=i,r.data=e,Bt(this,r)):Vt(this,r,!0):n&&(this.a[t]=Gt(this,{id:t,data:e,size:i,H:null,v:null},this.c)),Ut(this),n},Ft.prototype.registerOnDrop=Ft.prototype.K=function(t){if(!l(t))throw new ft(this.K,0,t);this.l.push(t)},Ft.prototype.deRegisterOnDrop=Ft.prototype.P=function(t){this.l=this.l.filter(function(e){return e!==t})},Ft.prototype.get=Ft.prototype.get=function(t,e){return(t=e?this.a[t]:Bt(this,this.a[t]))&&t.data},Ft.prototype.drop=Ft.prototype.S=function(t){var e;(e=this.a[t])&&Vt(this,e,!0)},Ft.prototype.forEach=Ft.prototype.forEach=function(t,e,i){var r;for(r in this.a){var n=this.a[r];i&&!i(r,n.data,n.size)||t.call(e,r,n.data,n.size)}},Ft.prototype.removeAll=Ft.prototype.Y=function(t){var e;for(e in this.a){var i=this.a[e];t&&!t(e,i.data,i.size)||Vt(this,this.a[e],!0)}},Ft.prototype.setMaxSize=Ft.prototype.Z=function(t){if(!(0<+t))throw new ft(Ft.prototype.Z,0,t);return this.u=+t,Ut(this),this},Ft.prototype.getMaxSize=Ft.prototype.ka=function(){return this.u},Ft.prototype.getCurrentSize=Ft.prototype.ia=function(){return this.b}}).call(en);var rn,nn=$r={};function on(t){return Mr(en.H.math.Point,Ir(t))}$r.clipPolygon=function(t,e){var i,r,n,o,a=[];if(i=en.H.math.clipping.clipPolygon(t.map(on),e.map(on)))do{for(r=[],n=i;r.push([(o=n).x,o.y]),n=n.next;);a.push(r)}while(i=i.nextPoly);else $r.isPointInsidePolygon(e[0],t)?a.push(e):$r.isPointInsidePolygon(t[0],e)&&a.push(t);return a},$r.isPointInsidePolygon=function(t,e){return en.H.math.isPointInsidePolygon({x:t[0],y:t[1]},en.H.math.flatten(e))},$r.clamp=function(t,e,i){return(t-=0)>i?i:t<e?e:t},$r.splitLegs=function(t,e){var i=[];t.push(t[0]);for(var r=0;r<t.length-1;r++){var n=t[r],o=t[r+1];if(i.push(n),Math.abs(o[0]-n[0])>=e){var a=[(n[0]+o[0])/2,(n[1]+o[1])/2];i.push(a)}}return i.length!==t.length-1?$r.splitLegs(i,e):i},$r.getBBox=function(t){var e=1/0,i=1/0,r=-1/0,n=-1/0;return t.forEach(function(t){t[0]<e&&(e=t[0]),t[1]<i&&(i=t[1]),t[0]>r&&(r=t[0]),t[1]>n&&(n=t[1])}),[e,i,r,n]},$r.getBBoxCenter=function(t){var e=Lr(t,4),i=e[0],r=e[1];return[i+(e[2]-i)/2,r+(e[3]-r)/2]},$r.getLineLength=function(t,e,i,r){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-r,2))};var an=rn={};rn.default_source_max_zoom=18,rn.default_view_max_zoom=20,rn.tile_size=256,rn.half_circumference_meters=20037508.342789244,rn.circumference_meters=2*rn.half_circumference_meters,rn.min_zoom_meters_per_pixel=rn.circumference_meters/rn.tile_size;var sn=[];rn.metersPerPixel=function(t){return sn[t]=sn[t]||rn.min_zoom_meters_per_pixel/Math.pow(2,t),sn[t]};var ln=[];rn.metersPerTile=function(t){return ln[t]=ln[t]||rn.circumference_meters/Math.pow(2,t),ln[t]},rn.tile_scale=4096,rn.units_per_pixel=rn.tile_scale/rn.tile_size,rn.height_scale=16;var un=[];rn.unitsPerMeter=function(t){return un[t]=un[t]||rn.tile_scale/(rn.tile_size*rn.metersPerPixel(t)),un[t]},rn.metersForTile=function(t){return{x:t.x*rn.circumference_meters/Math.pow(2,t.z)-rn.half_circumference_meters,y:-(t.y*rn.circumference_meters/Math.pow(2,t.z)-rn.half_circumference_meters)}},rn.tileForMeters=function(t,e){var i=Lr(t,2),r=i[0],n=i[1];return{x:Math.floor((r+rn.half_circumference_meters)/(rn.circumference_meters/Math.pow(2,e))),y:Math.floor((-n+rn.half_circumference_meters)/(rn.circumference_meters/Math.pow(2,e))),z:e}},rn.metersToExactTileCoords=function(t,e){var i=Lr(t,2),r=i[0],n=i[1];return{x:Math.pow(2,e-1)*(1+r/rn.half_circumference_meters),y:Math.pow(2,e-1)*(1-n/rn.half_circumference_meters),z:e}},rn.wrapTile=function(t){var e=t.x,i=t.y,r=t.z,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<r)-1;return n.x&&(e&=o),n.y&&(i&=o),{x:e,y:i,z:r}},rn.metersToLatLng=function(t){var e=Lr(t,2),i=e[0],r=e[1];return i/=rn.half_circumference_meters,r/=rn.half_circumference_meters,r=(2*Math.atan(Math.exp(r*Math.PI))-Math.PI/2)/Math.PI,[i*=180,r*=180]},rn.latLngToMeters=function(t){var e=Lr(t,2),i=e[0],r=e[1];return r=Math.log(Math.tan(r*Math.PI/360+Math.PI/4))/Math.PI,r*=rn.half_circumference_meters,r=Math.min(Math.max(r,-rn.half_circumference_meters),rn.half_circumference_meters),[i*=rn.half_circumference_meters/180,r]},rn.tileSpaceToMeters=function(t,e,i){var r=Lr(t,2),n=r[0],o=r[1],a=rn.unitsPerMeter(e);return[n/a+i.x,o/a+i.y]},rn.tileSpaceToLatlng=function(t,e,i){var r=rn.unitsPerMeter(e);return rn.transformGeometry(t,function(t){t[0]=t[0]/r+i.x,t[1]=t[1]/r+i.y;var e=Lr(rn.metersToLatLng(t),2),n=e[0],o=e[1];t[0]=n,t[1]=o}),t},rn.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map(function(t){return[t[0],t[1]]}):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map(function(t){return t.map(function(t){return[t[0],t[1]]})}):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0],t[1]]})})})),e}},rn.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach(function(t){return t.forEach(e)}):"MultiPolygon"===t.type&&t.coordinates.forEach(function(t){t.forEach(function(t){return t.forEach(e)})}))},rn.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},rn.findBoundingBox=function(t){for(var e=1/0,i=-1/0,r=1/0,n=-1/0,o=t[0].length,a=0;a<o;a++){var s=t[0][a];s[0]<e&&(e=s[0]),s[1]<r&&(r=s[1]),s[0]>i&&(i=s[0]),s[1]>n&&(n=s[1])}return[e,r,i,n]},rn.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},rn.centroid=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t&&0!==t.length){var i,r=0,n=0,o=0,a=t[0],s=a.length;e&&(i=a[0],a=a.map(function(t){return[t[0]-i[0],t[1]-i[1]]}));for(var l=0,u=s-1;l<s;u=l,l++){var c=a[l],h=a[u],f=c[1]*h[0]-h[1]*c[0];r+=(c[0]+h[0])*f,n+=(c[1]+h[1])*f,o+=3*f}var p=[r/o,n/o];return e&&(p[0]+=i[0],p[1]+=i[1]),p}},rn.multiCentroid=function(t){for(var e=t.length,i=[0,0],r=0;r<t.length;r++){var n=rn.centroid(t[r]);i[0]+=n[0],i[1]+=n[1]}return i[0]/=e,i[1]/=e,i},rn.signedPolygonRingAreaSum=function(t){for(var e=0,i=t.length,r=0;r<i-1;r++){var n=t[r],o=t[r+1];e+=n[0]*o[1]-o[0]*n[1]}return e+=t[i-1][0]*t[0][1]-t[0][0]*t[i-1][1]},rn.polygonRingArea=function(t){return Math.abs(rn.signedPolygonRingAreaSum(t))/2},rn.polygonArea=function(t){if(t)return rn.polygonRingArea(t[0])},rn.multiPolygonArea=function(t){for(var e=0,i=0;i<t.length;i++)e+=rn.polygonArea(t[i]);return e},rn.ringWinding=function(t){var e=rn.signedPolygonRingAreaSum(t);return 0<e?"CW":e<0?"CCW":void 0},rn.getTileBoundingBox=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=rn.wrapTile(t,{x:!0}),n=rn.metersForTile(r),o=rn.metersPerPixel(r.z),a=rn.metersToLatLng([n.x-i*o,n.y+i*o]),s=rn.metersToLatLng([n.x+(e+i)*o,n.y-(e+i)*o]),l=rn.isLastTile(r);return new en.H.geo.Rect(0===t.y?90:nn.clamp(a[1],-90,90),nn.clamp(a[0],-180,180),l.row?-90:nn.clamp(s[1],-90,90),l.column?180:nn.clamp(s[0],-180,180))},rn.isLastTile=function(t){var e=t.x,i=t.y,r=t.z;return{row:i===Math.pow(2,r)-1,column:e===Math.pow(2,r)-1}};var cn,hn=function(){function t(e){var i;return br(this,t),(i=Or(this,Tr(t).call(this))).name="MethodNotImplemented",i.message="Method "+e+" must be implemented in subclass",i}return Ar(t,Rr(Error)),t}();function fn(t,e,i){var r,n;return i=i||0,function(){var o=this,a=arguments;function s(){n=0,t.apply(o,a)}clearTimeout(r),n&&i&&Date.now()-n>=i?s():(n||(n=Date.now()),r=setTimeout(function(){s()},e))}}var pn=cn={};Fr.addTarget("Utils",cn),cn.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},cn.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},cn._requests={},cn._proxy_requests={},cn.io=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(Dr.is_worker&&cn.isMicrosoft())return Qr("debug","Proxying request for URL to worker",t),o&&(cn._proxy_requests[o]=!0),Fr.postMessage("Utils.io",t,e,i,r,n,o,!0);var s=new XMLHttpRequest,l=new Promise(function(n,o){s.open(r,t,!0),s.timeout=e,s.responseType=i,s.onload=function(){200===s.status?-1<["text","json"].indexOf(s.responseType)?n(s.responseText):n(s.response):o(Error("Request error with a status of "+s.statusText))},s.onerror=function(t){o(Error("There was a network error"+t.toString()))},s.ontimeout=function(t){o(Error("timeout "+t.toString()))},s.send()});return l=l.then(function(t){return o&&delete cn._requests[o],a?Fr.withTransferables(t):t}),o&&(cn._requests[o]=s),l},cn.cancelRequest=function(t){if(Dr.is_worker&&cn._proxy_requests[t])return Fr.postMessage("Utils.cancelRequest",t);cn._requests[t]?(Qr("trace","Cancelling network request key '".concat(t,"'")),cn._requests[t].abort(),delete cn._requests[t]):Qr("trace","Could not find network request key '".concat(t,"'"))},cn.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})},cn.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,function(t,e){return"function"==typeof e?e.toString():e})},cn.stringsToFunctions=function(t,e){if("string"==typeof t)t=cn.stringToFunction(t,e);else if(null!=t&&"object"===mr(t))for(var i in t)t[i]=cn.stringsToFunctions(t[i],e);return t},cn._use_count=0,cn._function_cache={};var dn,yn,gn=fn(function(){Qr("trace","Cleared cached ".concat(Object.keys(cn._function_cache).length," functions (reused ").concat(cn._use_count," times)")),cn._use_count=0,cn._function_cache={}},1e4),vn=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function _n(t){if("string"!=typeof t||-1!==t.search(/^(data|blob):/))return"";var e=t.indexOf("?");-1<e&&(t=t.substr(0,e));var i=t.indexOf("#");return-1<i&&(t=t.substr(0,i)),t.substr(0,t.lastIndexOf("/")+1)||""}function mn(t){if("string"==typeof t)return!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))}function bn(t){return void 0===dn&&"function"!=typeof(dn=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(dn=null,Qr("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),dn?dn(t):t}function xn(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}cn.stringToFunction=function(t,e){var i=t;e&&(i+=e.toString());var r=cn._function_cache[i];if(gn(),r)return cn._use_count++,r;var n="string"==typeof t&&t.match(vn);if(n&&2<n.length)try{var o=n[2],a=0<n[1].length&&n[1].split(",").map(function(t){return t.trim()}).filter(function(t){return t});a=0<a.length?a:["context"];var s=new Function(a.toString(),"function"==typeof e?e(o):o);return cn._function_cache[i]=s}catch(e){return t}return t},cn.device_pixel_ratio=1,cn.isPowerOf2=function(t){return 0==(t&t-1)},cn.interpolate=function(t,e,i){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var r,n,o,a,s;if(t<=e[0][0])a=e[0][1],"function"==typeof i&&(a=i(a));else if(t>=e[e.length-1][0])a=e[e.length-1][1],"function"==typeof i&&(a=i(a));else for(var l=0;l<e.length-1;l++)if(t>=e[l][0]&&t<e[l+1][0]){if(r=e[l][0],n=e[l+1][0],Array.isArray(e[l][1])){a=[];for(var u=0;u<e[l][1].length;u++)"function"==typeof i?(s=i(e[l][1][u]),o=i(e[l+1][1][u])-s,a[u]=o*(t-r)/(n-r)+s):(o=e[l+1][1][u]-e[l][1][u],a[u]=o*(t-r)/(n-r)+e[l][1][u])}else a="function"==typeof i?(s=i(e[l][1]),(o=i(e[l+1][1])-s)*(t-r)/(n-r)+s):(o=e[l+1][1]-e[l][1])*(t-r)/(n-r)+e[l][1];break}return a},cn.toCSSColor=function(t){return 1===t[3]?"rgb(".concat(t.slice(0,3).map(function(t){return Math.round(255*t)}).join(", "),")"):"rgba(".concat(t.map(function(t,e){return e<3&&Math.round(255*t)||t}).join(", "),")")},cn.pointInTile=function(t){return 0<=t[0]&&t[1]>-an.tile_scale&&t[0]<an.tile_scale&&t[1]<=0},cn.zoomToTileLevel=function(t){return Math.floor(t)};var wn=function(){function t(e,i){var r=this;br(this,t),this.config=e,this.sources=i,this.id=e.id,this.name=e.name,this.pad_scale=e.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(e.rasters)&&e.rasters.forEach(function(t){-1===r.rasters.indexOf(t)&&r.rasters.push(t)}),this.preprocess=e.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=e.transform,"function"==typeof this.transform&&this.transform.bind(this),this.extra_data=e.extra_data,this.scripts=e.scripts,this.max_zoom=null!=e.max_zoom?e.max_zoom:an.default_source_max_zoom,this.setTileSize(e.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=e.min_display_zoom?e.min_display_zoom:0,this.max_display_zoom=null!=e.max_display_zoom?e.max_display_zoom:null,this._has_volatile_data=!!e.has_volatile_data}return wr(t,[{key:"hasLabeledData",value:function(){return!0}},{key:"load",value:function(t){var e=this;t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Ir(this.rasters);return this._load(t,function(t){for(var i in t.source_data.layers){var r=t.source_data.layers[i];r&&r.features&&r.features.forEach(function(t){an.transformGeometry(t.geometry,function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-an.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-an.tile_scale*e.pad_scale/2))}),e.updateDefaultWinding(t.geometry)})}return t.default_winding=e.default_winding||"CCW",t})}},{key:"_load",value:function(t,e){throw new hn("_load")}},{key:"setTileSize",value:function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!pn.isPowerOf2(this.tile_size))&&(Qr({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(t,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=an.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=an.ringWinding(t.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var i=0;i<this.rasters.length;i++){var r=this.rasters[i];if(this.sources[r]&&this.sources[r]!==this&&!this.sources[r].includesTile(t,t.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(t){var e=0<arguments.length&&void 0!==t&&t;this._has_volatile_data=e}}],[{key:"create",value:function(e,i){for(var r in i)if(!t.changed(i[r],{config:e}))return i[r];if(t.types[e.type])return new t.types[e.type](e,i)}},{key:"changed",value:function(t,e){if(!t||!e)return!0;var i=Object.assign({},t.config,{id:null}),r=Object.assign({},e.config,{id:null});return JSON.stringify(i)!==JSON.stringify(r)}},{key:"coordsToMeters",value:function(t){var e=Lr(an.latLngToMeters(t),2),i=e[0],r=e[1];t[0]=i,t[1]=r}},{key:"projectData",value:function(e){for(var i in e.layers)for(var r=e.layers[i].features.length,n=0;n<r;n++){var o=e.layers[i].features[n];an.transformGeometry(o.geometry,t.coordsToMeters)}}},{key:"metersToTileUnits",value:function(t,e,i){i[0]=Math.round((i[0]-e.x)*t),i[1]=-1*Math.round((i[1]-e.y)*t)}},{key:"scaleData",value:function(e,i){var r=i.coords.z,n=i.min,o=(i.max,t.metersToTileUnits.bind(this,an.unitsPerMeter(r),n));for(var a in e.layers)for(var s=e.layers[a].features.length,l=0;l<s;l++){var u=e.layers[a].features[l];an.transformGeometry(u.geometry,o)}}},{key:"register",value:function(e,i){e&&i&&(t.types[i]=e)}}]),t}();wn.types={};var kn=0,An=function(){function t(e,i){var r;br(this,t),(r=Or(this,Tr(t).call(this,e,i))).response_type="";var n=Lr(function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var i=t.indexOf("?"),r=t.indexOf("#"),n="";-1<r&&(n=t.slice(r),t=t.slice(0,r)),-1===i&&(i=t.length,t+="?"),i++;var o="",a=[];for(var s in e)""===xn(s,t)?o+="".concat(s,"=").concat(e[s],"&"):a.push([s,e[s]]);return[t=t.slice(0,i)+o+t.slice(i)+n,a]}(e.url,e.url_params),2),o=n[0],a=n[1];if(r.url=o,a.forEach(function(t){var i=Lr(t,2),n=i[0],o=i[1];Qr({level:"warn",once:!0},"Data source '".concat(r.name,"': parameter '").concat(n,"' already present in URL '").concat(e.url,"', ")+"skipping value '".concat(n,"=").concat(o,"' specified in 'url_params'"))}),"string"!=typeof r.url)throw Error("Network data source must provide a string `url` property");return r}return Ar(t,wn),wr(t,[{key:"_load",value:function(t,e){var i=this,r=this.formatUrl(this.url,t),n=t.source_data;return n.url=r,new Promise(function(o,a){n.error=null;var s=kn+++"-"+r,l=pn.io(r,6e4,i.response_type,"GET",{},s);n.request_id=s,l.then(function(r){"function"==typeof i.preprocess&&(r=i.preprocess(r)),(r=r instanceof Promise?r:Promise.resolve(r)).then(function(r){i.parseSourceData(t,n,r),e(t),o(t)})},function(i){n.error=i.stack,e(t),o(t)})})}},{key:"formatUrl",value:function(t,e){throw new hn("formatUrl")}},{key:"parseSourceData",value:function(t,e,i){throw new hn("parseSourceData")}}]),t}(),Tn=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).tiled=!0,r.parseBounds(e),r.builds_geometry_tiles=!1,r.tms=!0===e.tms,-1<r.url.search("{s}")&&(Array.isArray(e.url_subdomains)&&0<e.url_subdomains.length?(r.url_subdomains=e.url_subdomains,r.next_url_subdomain=0):Qr({level:"warn",once:!0},"Data source '".concat(r.name,"': source URL includes '{s}' subdomain marker ('").concat(r.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),r}return Ar(t,An),wr(t,[{key:"parseBounds",value:function(t){if(Array.isArray(t.bounds)&&4===t.bounds.length){this.bounds=t.bounds;var e=Lr(this.bounds,4),i=e[0],r=e[1],n=e[2],o=e[3];this.bounds_meters={min:an.latLngToMeters([i,o]),max:an.latLngToMeters([n,r])},this.bounds_tiles={min:{},max:{}}}}},{key:"checkBounds",value:function(t){if(this.bounds){t=an.wrapTile(t,{x:!0});var e=this.bounds_tiles.min[t.z];e||(e=this.bounds_tiles.min[t.z]=an.tileForMeters(this.bounds_meters.min,t.z));var i=this.bounds_tiles.max[t.z];if(i||(i=this.bounds_tiles.max[t.z]=an.tileForMeters(this.bounds_meters.max,t.z)),t.x<e.x||t.x>i.x||t.y<e.y||t.y>i.y)return!1}return!0}},{key:"includesTile",value:function(e,i){return!!Pr(Tr(t.prototype),"includesTile",this).call(this,e,i)&&!!this.checkBounds(e)}},{key:"formatUrl",value:function(t,e){var i=an.wrapTile(e.coords,{x:!0});this.tms&&(i.y=Math.pow(2,i.z)-1-i.y);var r=t.replace("{x}",i.x).replace("{y}",i.y).replace("{z}",i.z);return null!=this.url_subdomains&&(r=r.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),r}},{key:"urlHasTilePattern",value:function(t){return t&&-1<t.search("{x}")&&-1<t.search("{y}")&&-1<t.search("{z}")}}]),t}(),En=Mn;function Mn(t,e){this.x=t,this.y=e}Mn.prototype={clone:function(){return new Mn(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,n=i*this.x+e*this.y;return this.x=r,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.x+i*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Mn.convert=function(t){return t instanceof Mn?t:Array.isArray(t)?new Mn(t[0],t[1]):t};var Rn=Sn;function Sn(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(On,this,e)}function On(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){var i=t.readVarint()+t.pos;for(;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function Pn(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],r+=((i=t[a]).x-e.x)*(e.y+i.y);return r}Sn.types=["Unknown","Point","LineString","Polygon"],Sn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(!n){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new En(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Sn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!r){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<a&&(a=n),s<n&&(s=n),(o+=t.readSVarint())<l&&(l=o),u<o&&(u=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,u]},Sn.prototype.toGeoJSON=function(t,e,i){var r,n,o=this.extent*Math.pow(2,i),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Sn.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-360*(i.y+s)/o;t[e]=[360*(i.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=Pn(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}i&&n.push(i);return n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)c(l[r][n])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Ln=In;function In(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Nn,this,e),this.length=this._features.length}function Nn(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){var e=null,i=t.readVarint()+t.pos;for(;t.pos<i;){var r=t.readVarint()>>3;e=1==r?t.readString():2==r?t.readFloat():3==r?t.readDouble():4==r?t.readVarint64():5==r?t.readVarint():6==r?t.readSVarint():7==r?t.readBoolean():null}return e}(i))}function Cn(t,e,i){if(3===t){var r=new Ln(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}In.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Rn(this._pbf,e,this.extent,this._keys,this._values)};var zn=function(t,e){this.layers=t.readFields(Cn,{},e)},jn=Rn;jn.prototype.loadGeometry=function(t){var e=this._pbf;e.pos=this._geometry;for(var i,r=e.readVarint()+e.pos,n=1,o=0,a=0,s=0,l=[];e.pos<r;){if(o<=0){var u=e.readVarint();n=7&u,o=u>>3}if(o--,1===n||2===n)a+=e.readSVarint(),s+=e.readSVarint(),1===n&&(i&&l.push(i),i=[]),i.push([a*t,s*t]);else{if(7!==n)throw new Error("unknown command "+n);i&&i.push(i[0].slice())}}return i&&l.push(i),l};var Dn={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function Fn(t){var e=[],i=t&&t.features;if(i)for(var r=0,n=i.length;r<n;r++){var o=i[r],a=o.type,s=void 0;switch(a){case Dn.POINT:s={type:"MultiPoint",coordinates:o.geometry.map(function(t){return t.slice()})};break;case Dn.LINESTRING:case Dn.POLYGON:if(s={type:"MultiLineString",coordinates:o.geometry.map(function(t){return t.map(function(t){return t.slice()})})},a===Dn.POLYGON&&null==(s=Bn(s)))continue;break;default:continue}e.push({id:o.id,type:"Feature",geometry:s,properties:o.tags})}return{type:"FeatureCollection",features:e}}function Bn(t){for(var e,i=[],r=[],n=0,o=t.coordinates.length;n<o;n++){var a=t.coordinates[n],s=an.ringWinding(a);null!=s&&(s===(e=e||s)&&r.length&&(i.push(r),r=[]),r.push(a))}return 0<r.length&&i.push(r),1===i.length?(t.type="Polygon",t.coordinates=i[0]):1<i.length?(t.type="MultiPolygon",t.coordinates=i):t=null,t}function Un(t){var e=t.coordinates.length;if(1<e){t.type="MultiPoint";for(var i=[],r=0;r<e;r++)i.push(t.coordinates[r][0]);t.coordinates=i}else t.type="Point",t.coordinates=t.coordinates[0][0];return t}function Gn(t,e,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var l=((t-i)*a+(e-r)*s)/(a*a+s*s);1<l?(i=n,r=o):0<l&&(i+=a*l,r+=s*l)}return(a=t-i)*a+(s=e-r)*s}function Vn(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)Hn(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)Hn(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)Hn(t,e[r][n])}(n),n}function Hn(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function qn(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Kn(i,t.features[r],e,r);else"Feature"===t.type?Kn(i,t,e):Kn(i,{geometry:t},e);return i}function Kn(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)Wn(n,s);else if("MultiPoint"===o)for(var u=0;u<n.length;u++)Wn(n[u],s);else if("LineString"===o)Yn(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(u=0;u<n.length;u++)s=[],Yn(n[u],s,a,!1),t.push(Vn(l,"LineString",s,e.properties));return}Xn(n,s,a,!1)}else if("Polygon"===o)Xn(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)Kn(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},i,r);return}for(u=0;u<n.length;u++){var c=[];Xn(n[u],c,a,!0),s.push(c)}}t.push(Vn(l,o,s,e.properties))}}function Wn(t,e){e.push(Zn(t[0])),e.push(Jn(t[1])),e.push(0)}function Yn(t,e,i,r){for(var n,o,a=0,s=0;s<t.length;s++){var l=Zn(t[s][0]),u=Jn(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=r?(n*u-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-o,2))),n=l,o=u}var c=e.length-3;e[2]=1,function t(e,i,r,n){for(var o,a=n,s=r-i>>1,l=r-i,u=e[i],c=e[i+1],h=e[r],f=e[r+1],p=i+3;p<r;p+=3){var d=Gn(e[p],e[p+1],u,c,h,f);if(a<d)o=p,a=d;else if(d===a){var y=Math.abs(p-s);y<l&&(o=p,l=y)}}n<a&&(3<o-i&&t(e,i,o,n),e[o+2]=a,3<r-o&&t(e,o,r,n))}(e,0,c,i),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Xn(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];Yn(t[n],o,i,r),e.push(o)}}function Zn(t){return t/360+.5}function Jn(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function Qn(t,e,i,r,n,o,a,s){if(r/=e,(i/=e)<=o&&a<r)return t;if(a<i||r<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,f=c.type,p=0===n?c.minX:c.minY,d=0===n?c.maxX:c.maxY;if(i<=p&&d<r)l.push(c);else if(!(d<i||r<=p)){var y=[];if("Point"===f||"MultiPoint"===f)$n(h,y,i,r,n);else if("LineString"===f)to(h,y,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===f)io(h,y,i,r,n,!1);else if("Polygon"===f)io(h,y,i,r,n,!0);else if("MultiPolygon"===f)for(var g=0;g<h.length;g++){var v=[];io(h[g],v,i,r,n,!0),v.length&&y.push(v)}if(y.length){if(s.lineMetrics&&"LineString"===f){for(g=0;g<y.length;g++)l.push(Vn(c.id,f,y[g],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===y.length?(f="LineString",y=y[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===y.length?"Point":"MultiPoint"),l.push(Vn(c.id,f,y,c.tags))}}}return l.length?l:null}function $n(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];i<=a&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function to(t,e,i,r,n,o,a){for(var s,l,u=eo(t),c=0===n?no:oo,h=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],y=t[f+2],g=t[f+3],v=t[f+4],_=0===n?p:d,m=0===n?g:v,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-v,2))),_<i?i<m&&(l=c(u,p,d,g,v,i),a&&(u.start=h+s*l)):r<_?m<r&&(l=c(u,p,d,g,v,r),a&&(u.start=h+s*l)):ro(u,p,d,y),m<i&&i<=_&&(l=c(u,p,d,g,v,i),b=!0),r<m&&_<=r&&(l=c(u,p,d,g,v,r),b=!0),!o&&b&&(a&&(u.end=h+s*l),e.push(u),u=eo(t)),a&&(h+=s)}var x=t.length-3;p=t[x],d=t[x+1],y=t[x+2],i<=(_=0===n?p:d)&&_<=r&&ro(u,p,d,y),x=u.length-3,o&&3<=x&&(u[x]!==u[0]||u[x+1]!==u[1])&&ro(u,u[0],u[1],u[2]),u.length&&e.push(u)}function eo(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function io(t,e,i,r,n,o){for(var a=0;a<t.length;a++)to(t[a],e,i,r,n,o,!1)}function ro(t,e,i,r){t.push(e),t.push(i),t.push(r)}function no(t,e,i,r,n,o){var a=(o-e)/(r-e);return t.push(o),t.push(i+(n-i)*a),t.push(1),a}function oo(t,e,i,r,n,o){var a=(o-i)/(n-i);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ao(t,e){var i=e.buffer/e.extent,r=t,n=Qn(t,1,-1-i,i,0,-1,2,e),o=Qn(t,1,1-i,2+i,0,-1,2,e);return(n||o)&&(r=Qn(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=so(n,1).concat(r)),o&&(r=r.concat(so(o,-1)))),r}function so(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=lo(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(lo(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(lo(o.geometry[s][u],e));n.push(l)}i.push(Vn(o.id,a,n,o.tags))}return i}function lo(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function uo(t,e){if(t.transformed)return t;var i,r,n,o=1<<t.z,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(co(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(n=0;n<u[r].length;n+=2)h.push(co(u[r][n],u[r][n+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function co(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}function ho(t,e,i,r,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,fo(a,t[s],o,n);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function fo(t,e,i,r){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)po(a,n,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)po(a,n[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)po(a,u[s],t,i,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(f.id=e.id),t.features.push(f)}}function po(t,e,i,r,n,o){var a=r*r;if(0<r&&e.size<(n?a:r))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(0<i===e)for(r=0,n=t.length;r<n/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=a,t[n-1-r]=s}}(s,o),t.push(s)}}function yo(t,e){return new go(t,e)}function go(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=qn(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=ao(r,e)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vo(t,e,i){return 32*((1<<t)*i+e)+t}go.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},go.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=[t,e,i,r],l=this.options,u=l.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=vo(e,i,r),f=this.tiles[h];if(!f&&(1<u&&console.time("creation"),f=this.tiles[h]=ho(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),u)){1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(f.source=t,n){if(e===l.maxZoom||e===n)continue;var d=1<<n-e;if(i!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==t.length){1<u&&console.time("clipping");var y,g,v,_,m,b,x=.5*l.buffer/l.extent,w=.5-x,k=.5+x,A=1+x;y=g=v=_=null,m=Qn(t,c,i-x,i+k,0,f.minX,f.maxX,l),b=Qn(t,c,i+w,i+A,0,f.minX,f.maxX,l),t=null,m&&(y=Qn(m,c,r-x,r+k,1,f.minY,f.maxY,l),g=Qn(m,c,r+w,r+A,1,f.minY,f.maxY,l),m=null),b&&(v=Qn(b,c,r-x,r+k,1,f.minY,f.maxY,l),_=Qn(b,c,r+w,r+A,1,f.minY,f.maxY,l),b=null),1<u&&console.timeEnd("clipping"),s.push(y||[],e+1,2*i,2*r),s.push(g||[],e+1,2*i,2*r+1),s.push(v||[],e+1,2*i+1,2*r),s.push(_||[],e+1,2*i+1,2*r+1)}}},go.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||24<t)return null;var a=1<<t,s=vo(t,e=(e%a+a)%a,i);if(this.tiles[s])return uo(this.tiles[s],n);1<o&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,u=t,c=e,h=i;!l&&0<u;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[vo(u,c,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,h),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,i),1<o&&console.timeEnd("drilling down"),this.tiles[s]?uo(this.tiles[s],n):null):null};var _o=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).load_data=null,r.tile_indexes={},r.max_zoom=Math.max(r.max_zoom||0,15),r.setTileSize(512),r.pad_scale=0,r}return Ar(t,An),wr(t,[{key:"_load",value:function(e){var i=this;return this.load_data||(this.load_data=Pr(Tr(t.prototype),"_load",this).call(this,{source_data:{layers:{}}}).then(function(t){t.source_data.error&&Qr("warn","data source load error(s) for source '".concat(i.name,"', URL '").concat(i.url,"': ").concat(t.source_data.error));var e=t.source_data.layers;for(var r in e)i.tile_indexes[r]=yo(e[r],{maxZoom:i.max_zoom,tolerance:1.5,extent:an.tile_scale,buffer:1e-4});return i.loaded=!0,t})),this.load_data.then(function(){for(var t in i.tile_indexes)e.source_data.layers[t]=i.getTileFeatures(e,t);return e})}},{key:"getTileFeatures",value:function(t,e){var i,r=an.wrapTile(t.coords,{x:!0}),n=this.tile_indexes[e].getTile(r.z,r.x,r.y);if(n&&n.features){i={type:"FeatureCollection",features:[]};for(var o=0;o<n.features.length;o++){var a=n.features[o],s={type:"Feature",geometry:{},properties:a.tags};if(1===a.type)s.geometry.coordinates=a.geometry.map(function(t){return[t[0],t[1]]}),s.geometry.type="MultiPoint";else{if(2!==a.type&&3!==a.type)continue;if(s.geometry.coordinates=a.geometry.map(function(t){return t.map(function(t){return[t[0],t[1]]})}),2===a.type)s.geometry.type="MultiLineString";else if(s.geometry=Bn(s.geometry),null==s.geometry)continue}i.features.push(s)}}return i}},{key:"formatUrl",value:function(t){return this.url}},{key:"parseSourceData",value:function(t,e,i){var r="string"==typeof i?JSON.parse(i):i,n=this.getLayers(r);e.layers=this.preprocessLayers(n)}},{key:"preprocessLayers",value:function(t){for(var e in t){var i=t[e];i.features=this.preprocessFeatures(i.features)}return"function"==typeof this.transform&&(1===Object.keys(t).length&&t._default?t._default=this.transform(t._default,this.extra_data):t=this.transform(t,this.extra_data)),t}},{key:"preprocessFeatures",value:function(t){if(t=t.filter(function(t){return null!=t.geometry}),this.config.generate_label_centroids){var e=[],i={label_placement:!0};t.forEach(function(t){var r,n;switch(t.geometry.type){case"Polygon":n=bo(r=t.geometry.coordinates,t.properties,i),e.push(n);break;case"MultiPolygon":r=t.geometry.coordinates;for(var o=-1/0,a=0,s=0;s<r.length;s++){var l=an.polygonArea(r[s]);o<l&&(o=l,a=s)}n=bo(r[a],t.properties,i),e.push(n)}}),e=e.filter(function(t){return t}),Array.prototype.push.apply(t,e)}return t}},{key:"getLayers",value:function(t){return"Feature"===t.type?{_default:{type:"FeatureCollection",features:[t]}}:"FeatureCollection"===t.type?{_default:t}:t}}]),t}(),mo=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).urlHasTilePattern(r.url)?Or(r,Sr(r)):"GeoJSON"===e.type?Or(r,new _o(e)):Or(r,null)}return Ar(t,Tn),wr(t,[{key:"parseSourceData",value:function(t,e,i){var r="string"==typeof i?JSON.parse(i):i;this.prepareGeoJSON(r,t,e)}},{key:"prepareGeoJSON",value:function(t,e,i){"function"==typeof this.transform&&(t=this.transform(t,this.extra_data)),i.layers=_o.prototype.getLayers(t);var r={coords:e.coords,min:an.metersForTile(an.wrapTile(e.coords,{x:!0}))};wn.projectData(i),wn.scaleData(i,r)}}]),t}();function bo(t,e,i){var r=an.centroid(t);if(r){var n={};return Object.assign(n,e,i),{type:"Feature",properties:n,geometry:{type:"Point",coordinates:r}}}}wn.register(mo,"GeoJSON");var xo=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).target_name="MapsJsSource"+e.uid,r.tiled=!!e.tiled,Fr.addTarget(r.target_name,Sr(r)),Dr.is_worker&&Fr.postMessage(r.target_name+".onWorkerInitialized"),Dr.is_main&&(r._workers_left=0),r}return Ar(t,wn),wr(t,[{key:"initialize",value:function(t,e,i,r){this._main_initialized||(this.provider=t,this.worker=r,this._workers_left+=i,this._on_update=e,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(t){this._isReady()&&this.onProviderUpdate(t)}},{key:"onProviderUpdate",value:function(t){this.dispatchUpdate()}},{key:"dispatchUpdate",value:function(t){this._on_update(this.name,t)}},{key:"dispose",value:function(){Fr.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),t}(),wo=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,f=i?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},ko=function(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,h=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));8<=n;t[i+p]=255&s,p+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;0<u;t[i+p]=255&a,p+=d,a/=256,u-=8);t[i+p-d]|=128*y},Ao=To;function To(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}To.Varint=0,To.Fixed64=1,To.Bytes=2,To.Fixed32=5;var Eo=4294967296,Mo=1/Eo;function Ro(t){return t.type===To.Bytes?t.readVarint()+t.pos:t.pos+1}function So(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Oo(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;t<=n;n--)i.buf[n+r]=i.buf[n]}function Po(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Lo(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Io(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function No(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Co(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function zo(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function jo(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Do(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Fo(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Bo(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Uo(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Go(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}To.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Bo(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Go(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Bo(this.buf,this.pos)+Bo(this.buf,this.pos+4)*Eo;return this.pos+=8,t},readSFixed64:function(){var t=Bo(this.buf,this.pos)+Go(this.buf,this.pos+4)*Eo;return this.pos+=8,t},readFloat:function(){var t=wo(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=wo(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return So(t,r,e);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return So(t,r,e);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return So(t,r,e);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return So(t,r,e);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return So(t,r,e);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return So(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){var r="",n=e;for(;n<i;){var o,a,s,l=t[n],u=null,c=239<l?4:223<l?3:191<l?2:1;if(i<n+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=Ro(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Ro(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===To.Varint)for(;127<this.buf[this.pos++];);else if(e===To.Bytes)this.pos=this.readVarint()+this.pos;else if(e===To.Fixed32)this.pos+=4;else{if(e!==To.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Uo(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Uo(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Uo(this.buf,-1&t,this.pos),Uo(this.buf,Math.floor(t*Mo),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Uo(this.buf,-1&t,this.pos),Uo(this.buf,Math.floor(t*Mo),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var i,r;0<=t?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:r=r+1|(i=0));if(0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!n){56319<r||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&Oo(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),ko(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ko(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;128<=r&&Oo(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,To.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,Po,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Lo,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Co,e)},writePackedFloat:function(t,e){this.writeMessage(t,Io,e)},writePackedDouble:function(t,e){this.writeMessage(t,No,e)},writePackedFixed32:function(t,e){this.writeMessage(t,zo,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,jo,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Do,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Fo,e)},writeBytesField:function(t,e){this.writeTag(t,To.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,To.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,To.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,To.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,To.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,To.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,To.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,To.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,To.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,To.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Vo={type:"FeatureCollection",features:[]},Ho=function(){function t(){return br(this,t),Or(this,Tr(t).apply(this,arguments))}return Ar(t,xo),wr(t,[{key:"fetchTile",value:function(t,e,i){return this.provider?this.provider.requestTileAsPromise(t,e,i).then(function(t){return t.data}):Promise.resolve()}},{key:"_parseSourceData",value:function(t,e,i){var r=new Uint8Array(i),n=new Ao(r);e.layers=function(t){var e={};for(var i in t.layers){for(var r=t.layers[i],n=[],o=an.tile_scale/r.extent,a=0,s=r.length;a<s;a++){var l,u=r.feature(a),c=jn.types[u.type];l=u.loadGeometry(o);var h=null;switch(c){case"Point":h=Un({coordinates:l});break;case"LineString":h=1===l.length?{type:c,coordinates:l[0]}:{type:"MultiLineString",coordinates:l};break;case"Polygon":h=Bn({coordinates:l})}h&&h.coordinates&&n.push({type:"Feature",geometry:h,properties:u.properties})}e[i]={type:"FeatureCollection",features:n}}return e}(new zn(n)),"function"==typeof this.transform&&(e.layers=this.transform(e.layers,this.extra_data))}},{key:"_load",value:function(t,e){var i=this,r=an.wrapTile(t.coords,{x:!0,y:!0}),n=r.x,o=r.y,a=r.z;return Fr.postMessage(this.target_name+".fetchTile",n,o,a).then(function(r){return r instanceof ArrayBuffer?i._parseSourceData(t,t.source_data,r):r?t.source_data.error=r:t.source_data.layers={_default:Vo},e(t),t})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),t}();wn.register(Ho,"MVT"),wn.register(Ho,"OMV");function qo(t){return Math.max(t,0)}function Ko(t){return isNaN(t)?0:t}function Wo(t){return Array.isArray(t)?t.map(parseFloat).map(Ko):Ko(parseFloat(t))}function Yo(t){return Array.isArray(t)?t.map(Wo).map(qo):qo(Wo(t))}var Xo=a(function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:255<t?255:t}function n(t){return t<0?0:1<t?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function s(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in i)return i[n].slice();if("#"===n[0])return 4===n.length?0<=(e=parseInt(n.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&0<=(e=parseInt(n.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var c=n.substr(0,l),h=n.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),y=a(h[2]),g=y<=.5?y*(d+1):y+d-y*d,v=2*y-g;return[r(255*s(v,g,p+1/3)),r(255*s(v,g,p)),r(255*s(v,g,p-1/3)),f];default:return null}}return null}}catch(t){}}),Zo=(Xo.parseCSSColor,{});Object.assign(Zo,{clampPositive:qo,noNaN:Ko,parseNumber:Wo,parsePositiveNumber:Yo}),Zo.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(t," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},Zo.zeroPair=Object.freeze([0,0]),Zo.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},Zo.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},Zo.getFeatureParseContext=function(t,e,i,r){return{feature:t,tile:e,global:i,sources:r,zoom:e.style_zoom,geometry:an.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var Jo={STATIC:0,DYNAMIC:1,ZOOM:2};Zo.CACHE_TYPE=Jo,Zo.createPropertyCache=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var i={value:t,type:Jo.STATIC};return Array.isArray(i.value)&&Array.isArray(i.value[0])?(i.zoom={},i.type=Jo.ZOOM):"function"==typeof i.value&&(i.type=Jo.DYNAMIC),"function"==typeof e&&(i.zoom?i.value=i.value.map(function(t,i){return[t[0],e(t[1],i)]}):"function"!=typeof i.value&&(i.value=e(i.value,0))),i}},Zo.createColorPropertyCache=function(t){return Zo.createPropertyCache(t,function(t){return"Style.color.pseudoRandomColor"===t?pn.stringToFunction(Zo.wrapFunction(Zo.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?Zo.macros["Style.color.randomColor"]:t})};function Qo(t){return"string"==typeof t&&"%"===t[t.length-1]}function $o(t){return"auto"===t}function ta(t){return Qo(t)||$o(t)}var ea="'size' can specify either width or height as derived from aspect ratio, but not both";Zo.createPointSizePropertyCache=function(t){var e=null,i=null;if(Qo(t))e=[!0];else if(Array.isArray(t))if(Array.isArray(t[0])){if(t.some(function(t){return Array.isArray(t[1])?t[1].some(function(t){return ta(t)}):Qo(t[1])})&&(e=t.map(function(t){return Array.isArray(t[1])?t[1].map(function(t){return Qo(t)}):Qo(t[1])}),(i=t.map(function(t){return Array.isArray(t[1])&&t[1].map(function(t){return $o(t)})})).some(function(t){return Array.isArray(t)&&t.every(function(t){return t})})))throw ea}else if(t.some(ta)&&(e=[t.map(Qo)],(i=[t.map($o)])[0].every(function(t){return t})))throw ea;return e?((t={value:t}).has_pct=e,t.has_ratio=i,t.sprites={}):t=Zo.createPropertyCache(t,Yo),t},Zo.evalCachedPointSizeProperty=function(t,e,i){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=Zo.createPropertyCache(t.value,function(i,r){return Array.isArray(i)?(i=i.map(function(e,i){return t.has_ratio[r][i]?e:Yo(e)}).map(function(i,n){return t.has_pct[r][n]?e.css_size[n]*i/100:i}),t.has_ratio[r][0]?i[0]=i[1]*e.aspect:t.has_ratio[r][1]&&(i[1]=i[0]/e.aspect)):(i=Yo(i),i=t.has_pct[r]?e.css_size.map(function(t){return t*i/100}):[i,i]),i})),Zo.evalCachedProperty(t.sprites[e.sprite],i)):void 0:Zo.evalCachedProperty(t,i)},Zo.evalCachedProperty=function(t,e){if(null!=t)return t.dynamic?t.dynamic(e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=pn.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static):(t.dynamic=t.value,t.dynamic(e))},Zo.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*an.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=Wo(t),t*=an.metersPerPixel(e.zoom)):t=Wo(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map(function(t){return[t[0],Zo.convertUnits(t[1],e)]}):t.map(function(t){return Zo.convertUnits(t,e)});return t},Zo.parseUnits=function(t){var e={val:Wo(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},Zo.evalCachedDistanceProperty=function(t,e){return t.dynamic?t.dynamic(e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?t.zoom?(t.zoom[e.zoom]=pn.interpolate(e.zoom,t.value,function(t){return Zo.convertUnits(t,e)}),t.zoom[e.zoom]):Zo.convertUnits(t.value,e):(t.dynamic=t.value,t.dynamic(e))},Zo.string_colors={},Zo.colorForString=function(t){if(Zo.string_colors[t])return Zo.string_colors[t];var e=null;return"none"!==t&&((e=Xo.parseCSSColor(t))&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=Zo.defaults.color),Zo.string_colors[t]=e},Zo.evalCachedColorProperty=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.dynamic){var i=t.dynamic(e);return"string"==typeof i&&(i=Zo.colorForString(i)),i&&null==i[3]&&(i[3]=1),i}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var r=t.dynamic(e);return"string"==typeof r&&(r=Zo.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if("string"==typeof t.value)return t.static=Zo.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var n=0;n<t.value.length;n++){var o=t.value[n];o&&"string"==typeof o[1]&&(o[1]=Zo.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=pn.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map(function(t){return t}),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},Zo.parseColor=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t&&(t=t(e)),"string"==typeof t)t=Zo.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var i=0;i<t.length;i++){var r=t[i];"string"==typeof r[1]&&(r[1]=Zo.colorForString(r[1]))}e.zoom&&(t=pn.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map(function(t){return t}))[3]&&(t[3]=1):t=[0,0,0,1],t},Zo.calculateOrder=function(t,e){return"function"==typeof t?t=t(e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:Yo(t)),t},Zo.evalProperty=function(t,e){return"function"==typeof t?t(e):t};var ia=function(){function t(e,i){br(this,t),this.key=e,this.repeat_dist=i,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return wr(t,[{key:"check",value:function(t){for(var e=t.position,i=0;i<this.positions.length;i++){var r=this.positions[i],n=e[0]-r[0],o=e[1]-r[1],a=n*n+o*o;if(a<this.repeat_dist_sq)return{dist_sq:a,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(t){t&&t.position&&this.positions.push(t.position)}}],[{key:"clear",value:function(t){this.groups[t]={}}},{key:"check",value:function(t,e,i){if(e.repeat_distance&&e.repeat_group&&this.groups[i][e.repeat_group])return this.groups[i][e.repeat_group].check(t)}},{key:"add",value:function(e,i,r){i.repeat_distance&&i.repeat_group&&(null==this.groups[r][i.repeat_group]&&(this.groups[r][i.repeat_group]=new t(i.repeat_group,i.repeat_distance*i.repeat_scale)),this.groups[r][i.repeat_group].add(e))}}]),t}();ia.groups={};var ra=function(){function t(e,i,r){br(this,t);var n=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(i/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)n.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=i,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}return wr(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}},{key:"insertCircle",value:function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)}},{key:"insertCircleList",value:function(t,e){for(var i=0;i<e.length-2;i+=3)this.insertCircle("".concat(t,"/").concat(i),e[i],e[i+1],e[i+2])}},{key:"_insertBoxCell",value:function(t,e,i,r,n,o){this.boxCells[n].push(o)}},{key:"_insertCircleCell",value:function(t,e,i,r,n,o){this.circleCells[n].push(o)}},{key:"_query",value:function(t,e,i,r,n,o){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}var f={hitTest:n,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,r,this._queryCell,a,f,o),n?0<a.length:a}},{key:"_queryCircle",value:function(t,e,i,r,n){var o=t-i,a=t+i,s=e-i,l=e+i;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[],c={hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,n),r?0<u.length:u}},{key:"query",value:function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)}},{key:"hitTest",value:function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)}},{key:"hitTestCircle",value:function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)}},{key:"hitTestCircleList",value:function(t,e){for(var i=0;i<t.length-2;i+=3)if(this.hitTestCircle(t[i],t[i+1],t[i+2],e))return!0;return!1}},{key:"_queryCell",value:function(t,e,i,r,n,o,a,s){var l=a.seenUids,u=this.boxCells[n];if(null!==u){var c=this.bboxes,h=!0,f=!1,p=void 0;try{for(var d,y=u[Symbol.iterator]();!(h=(d=y.next()).done);h=!0){var g=d.value;if(!l.box[g]){l.box[g]=!0;var v=4*g;if(t<=c[2+v]&&e<=c[3+v]&&i>=c[0+v]&&r>=c[1+v]&&(!s||s(this.boxKeys[g]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[g],x1:c[v],y1:c[1+v],x2:c[2+v],y2:c[3+v]})}}}}catch(t){f=!0,p=t}finally{try{h||null==y.return||y.return()}finally{if(f)throw p}}}var _=this.circleCells[n];if(null!==_){var m=this.circles,b=!0,x=!1,w=void 0;try{for(var k,A=_[Symbol.iterator]();!(b=(k=A.next()).done);b=!0){var T=k.value;if(!l.circle[T]){l.circle[T]=!0;var E=3*T;if(this._circleAndRectCollide(m[E],m[1+E],m[2+E],t,e,i,r)&&(!s||s(this.circleKeys[T]))){if(a.hitTest)return o.push(!0),!0;var M=m[E],R=m[1+E],S=m[2+E];o.push({key:this.circleKeys[T],x1:M-S,y1:R-S,x2:M+S,y2:R+S})}}}}catch(t){x=!0,w=t}finally{try{b||null==A.return||A.return()}finally{if(x)throw w}}}}},{key:"_queryCellCircle",value:function(t,e,i,r,n,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[n];if(null!==c){var h=this.bboxes,f=!0,p=!1,d=void 0;try{for(var y,g=c[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;if(!u.box[v]){u.box[v]=!0;var _=4*v;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[0+_],h[1+_],h[2+_],h[3+_])&&(!s||s(this.boxKeys[v])))return o.push(!0),!0}}}catch(t){p=!0,d=t}finally{try{f||null==g.return||g.return()}finally{if(p)throw d}}}var m=this.circleCells[n];if(null!==m){var b=this.circles,x=!0,w=!1,k=void 0;try{for(var A,T=m[Symbol.iterator]();!(x=(A=T.next()).done);x=!0){var E=A.value;if(!u.circle[E]){u.circle[E]=!0;var M=3*E;if(this._circlesCollide(b[M],b[1+M],b[2+M],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[E])))return o.push(!0),!0}}}catch(t){w=!0,k=t}finally{try{x||null==T.return||T.return()}finally{if(w)throw k}}}}},{key:"_forEachCell",value:function(t,e,i,r,n,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r),f=l;f<=c;f++)for(var p=u;p<=h;p++){var d=this.xCellCount*p+f;if(n.call(this,t,e,i,r,d,o,a,s))return}}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,i,r,n,o){var a=r-t,s=n-e,l=i+o;return a*a+s*s<l*l}},{key:"_circleAndRectCollide",value:function(t,e,i,r,n,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(s+i<l)return!1;var u=(a-n)/2,c=Math.abs(e-(n+u));if(u+i<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,f=c-u;return h*h+f*f<=i*i}}]),t}(),na=function(t,e,i,r){var n;if(r&&(n=function(t){return t!==r.id}),!e){if("point"===t.type&&!t.angle){var o=t.getAABB(),a=o.left,s=o.top,l=o.right,u=o.bottom;if(i.hitTest(a,-s,l,-u,n)){if(Array.isArray(t.layout.anchor))for(var c=1;c<t.layout.anchor.length;c++){t.setAnchor(t.layout.anchor[c]);var h=t.getAABB(),f=h.left,p=h.top,d=h.right,y=h.bottom;if(!i.hitTest(f,-p,d,-y,n))return!1}return!0}return!1}var g=t.getBoundingCircles();return i.hitTestCircleList(g,n)}if(e){if("point"===t.type&&!t.isFlat()){var v=t.getScreenSpaceBoundingBox(),_=v.left,m=v.top,b=v.right,x=v.bottom;return i.hitTest(_,m,b,x,n)}var w=t.getBoundingCircles();return i.hitTestCircleList(w,n)}return!1},oa=function(t,e,i){var r=t.id;if(t.placed=!0,!e)if("point"!==t.type||t.angle){var n=t.getBoundingCircles();i.insertCircleList(r,n)}else{var o=t.getAABB(),a=o.left,s=o.top,l=o.right,u=o.bottom;i.insert(r,a,-s,l,-u)}if(e)if("point"!==t.type||t.isFlat()){var c=t.getBoundingCircles();i.insertCircleList(r,c)}else{var h=t.getScreenSpaceBoundingBox(),f=h.left,p=h.top,d=h.right,y=h.bottom;i.insert(r,f,p,d,y)}},aa={tiles:{},startTile:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.apply_repeat_groups,n=void 0===r||r,o=i.return_hidden,a=void 0!==o&&o,s=i.grid_index,l=void 0===s?null:s,u=this.tiles[t]={grid_index:l||new ra(an.tile_scale,an.tile_scale,240),objects:{},labels:{},styles:{},repeat:n,return_hidden:a};null==u.complete&&(u.complete=new Promise(function(t,e){u.resolve=t,u.reject=e}))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,i){var r=this.tiles[i];if(!r)return Promise.resolve([]);for(var n=r.objects,o=0;o<t.length;o++){var a=t[o],s=a.label.layout.priority;n[s]=n[s]||{},n[s][e]=n[s][e]||[],n[s][e].push(a)}return delete r.styles[e],0===Object.keys(r.styles).length&&this.endTile(i),r.complete.then(function(){return r.resolve=null,r.labels[e]||[]})},endTile:function(t){var e=this.tiles[t],i=e.labels;e.repeat&&ia.clear(t);for(var r=Object.keys(e.objects).sort(function(t,e){return t-e}),n=0;n<r.length;n++){var o=e.objects[r[n]];if(o)for(var a in o){var s=o[a];i[a]=i[a]||[];for(var l=0;l<s.length;l++){var u=s[l];this.canBePlaced(u,t,u.linked,e)?u.linked?this.canBePlaced(u.linked,t,u,e)?(u.show=!0,(u.label.breach||u.linked.label.breach)&&(u.label.breach=!0,u.linked.label.breach=!0),i[a].push(u),this.place(u,t,e),this.place(u.linked,t,e)):e.return_hidden&&(u.show=!1,i[a].push(u)):(u.show=!0,i[a].push(u),this.place(u,t,e)):e.return_hidden&&(u.show=!1,i[a].push(u))}}}delete this.tiles[t],e.resolve()},canBePlaced:function(t,e,i,r){var n=2<arguments.length&&void 0!==i?i:null,o=(3<arguments.length&&void 0!==r?r:{}).repeat,a=void 0===o||o,s=t.label,l=t.label.layout;if(null!==s.placed)return s.placed;var u=this.tiles[e].grid_index;if(l.collide&&na(s,"main"===e,u,n&&n.label))l.collide&&(s.placed=!1);else{if(!(a&&ia.check(s,l,e)))return!0;s.placed=!1}return s.placed},place:function(t,e,i){var r=t.label,n=i.repeat,o=void 0===n||n;null===r.placed&&(o&&ia.add(r,r.layout,e),oa(r,"main"===e,this.tiles[e].grid_index))}},sa={id:0,queue:[],max_time:20,start_time:null,state:{},add:function(t){t.id=sa.id++,t.max_time=t.max_time||sa.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise(function(e,i){t.resolve=e,t.reject=i});return t.promise=e,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<sa.max_time&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);-1<e&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t))},processAll:function(){this.start_time=this.start_time||performance.now();for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=sa.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e||{})},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<sa.max_time},removeForTile:function(t){for(var e=this.queue.length-1;0<=e;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t},hasPendingTasks:function(){return!!this.queue.length}};function la(t){return{coords:t.coords,uid:t.uid,filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var ua=function(){function t(e,i,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};br(this,t),n=la(n),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.manager=r,this.bind(),this.name=i,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=n.filtering,this.density=n.density||1,this.sprites=n.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:i},n)),this.load(n),Qr("trace","creating Texture ".concat(this.name))}return wr(t,[{key:"destroy",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).force;0<this.retain_count&&!e?Qr("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,Qr("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&Qr("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then(function(){return e.calculateSprites(),e})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(t,e){var i=this,r=1<arguments.length&&void 0!==e?e:{};if(this.valid)return this.url=t,this.loading=new Promise(function(t,e){var n=new Image;n.onload=function(){try{i.setElement(n,r)}catch(t){i.loaded=!1,Qr("warn","Texture '".concat(i.name,"': failed to load url: '").concat(i.url,"'"),t,r),i.manager.trigger("warning",{message:"Failed to load texture from ".concat(i.url),error:t,texture:r})}i.loaded=!0,t(i)},n.onerror=function(e){i.loaded=!1,Qr("warn","Texture '".concat(i.name,"': failed to load url: '").concat(i.url,"'"),e,r),i.manager.trigger("warning",{message:"Failed to load texture from ".concat(i.url),error:e,texture:r}),t(i)},pn.isSafari()&&"data:"===i.url.slice(0,5)||(n.crossOrigin="anonymous"),n.src=i.url}),this.loading}},{key:"setData",value:function(t,e,i,r){var n=3<arguments.length&&void 0!==r?r:{};return this.width=t,this.height=e,Array.isArray(i)&&(i=new Uint8Array(i)),this.update(i,n),this.setFiltering(n),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var i=t;if("string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement)this.update(t,e),this.setFiltering(e);else{this.loaded=!1;var r="the 'element' parameter (`element: ".concat(JSON.stringify(i),"`) must be a CSS ");r+="selector string, or a <canvas>, <image> or <video> object",Qr("warn","Texture '".concat(this.name,"': ").concat(r),e),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(r),texture:e})}return this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};this.valid&&(this.bind(),t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLImageElement&&t.complete?(this.width=t.width,this.height=t.height,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==i.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)):(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)),this.manager.trigger("update",this))}},{key:"setFiltering",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(this.valid){e.filtering=e.filtering||"linear";var i=this.gl;this.bind(),pn.isPowerOf2(this.width)&&pn.isPowerOf2(this.height)?(this.power_of_2=!0,i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e.TEXTURE_WRAP_S||e.repeat&&i.REPEAT||i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e.TEXTURE_WRAP_T||e.repeat&&i.REPEAT||i.CLAMP_TO_EDGE),"mipmap"===e.filtering?(this.filtering="mipmap",i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.generateMipmap(i.TEXTURE_2D)):"linear"===e.filtering?(this.filtering="linear",i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):"nearest"===e.filtering&&(this.filtering="nearest",i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST))):(this.power_of_2=!1,i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),"nearest"===e.filtering?(this.filtering="nearest",i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)):(this.filtering="linear",i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR))),this.manager.trigger("update",this)}}},{key:"calculateSprites",value:function(){if(this.sprites)for(var t in this.sprites){var e=this.sprites[t];this.texcoords[t]=this.manager.getTexcoordsForSprite([e[0],e[1]],[e[2],e[3]],[this.width,this.height]),this.sizes[t]=[e[2],e[3]],this.css_sizes[t]=[e[2]/this.density,e[3]/this.density],this.aspects[t]=e[2]/e[3]}}}]),t}();function ca(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var i=e.indexOf(t);-1<i&&e.splice(i,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var i=arguments.length,r=new Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];e.forEach(function(e){if("function"==typeof e[t])try{e[t].apply(e,r)}catch(e){Qr("warn","Caught exception in listener for event '".concat(t,"':"),e)}})},hasSubscribersFor:function(t){var i=!1;return e.forEach(function(e){"function"==typeof e[t]&&(i=!0)}),i}})}var ha=function(){function t(e){br(this,t),this.default=t.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=e,Fr.addTarget("Texture"+this.scene_id,this),ca(this)}return wr(t,[{key:"create",value:function(e,i,r){for(var n=t.matchers_,o=0;o<n.length;o++){var a=n[o][0],s=n[o][1];if(s&&s(r))return new a(e,i,this,r)}return new ua(e,i,this,r)}},{key:"retain",value:function(t){this.textures[t]&&this.textures[t].retain()}},{key:"release",value:function(t){this.textures[t]&&this.textures[t].release()}},{key:"getRetainCount",value:function(t){if(this.textures[t])return this.textures[t].retain_count}},{key:"destroy",value:function(t){var e=this;Object.keys(this.textures).forEach(function(i){var r=e.textures[i];i!==e.default&&r.gl===t&&r.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(t,e){var i=this.textures[t];return i&&{size:i.sizes[e],css_size:i.css_sizes[e],aspect:i.aspects[e],texcoords:i.texcoords[e]}}},{key:"getTexcoordsForSprite",value:function(t,e,i){var r=i[1]-t[1]-e[1];return[t[0]/i[0],r/i[1],(e[0]+t[0])/i[0],(e[1]+r)/i[1]]}},{key:"createFromObject",value:function(t,e){var i=[];if(e)for(var r in e){var n=e[r];if(this.changed(r,n)){var o=this.create(t,r,n);i.push(o.loading)}}return Promise.all(i)}},{key:"createDefault",value:function(t){return this.create(t,this.default)}},{key:"changed",value:function(t,e){var i=this.textures[t];if(i){if("element"===i.config_type||null!=e.element)return!0;if(e=la(e),this.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0}},{key:"getInfo",value:function(t){var e=this;if(t||(t=Object.keys(this.textures)),Array.isArray(t))return Promise.all(t.map(function(t){return e.getInfo(t)}));var i=this.textures[t];return i?(i.loading||Promise.resolve(i)).then(function(){return{name:i.name,width:i.width,height:i.height,density:i.density,sprites:i.sprites,texcoords:i.texcoords,sizes:i.sizes,css_sizes:i.css_sizes,aspects:i.aspects,filtering:i.filtering,power_of_2:i.power_of_2,valid:i.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(t){var e=this;return Dr.is_main?Promise.all(t.map(function(t){var i=e.textures[t];return i&&i.loading||Promise.resolve()})).then(function(){return e.textures}):Fr.postMessage("Texture"+this.scene_id+".getInfo",t).then(function(t){return t.forEach(function(t){e.textures[t.name]=t}),e.textures})}},{key:"getMaxTextureSize",value:function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(e,i){var r=t.matchers_;if(!(e instanceof Function&&i instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(e),r.push([e,i])}},{key:"deRegister",value:function(e){for(var i=t.matchers_,r=0;r<i.length;r++)i[r][0]===e&&i.splice(r,1)}}]),t}();ha.DEFAULT_TEXTURE_NAME="__default",ha.matchers_=[];var fa={};function pa(t){return fa[t]||(fa[t]=new ha(t)),fa[t]}var da=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var ya={fromValues:function(t,e,i){var r=new Float64Array(3);return r[0]=t,r[1]=e,r[2]=i,r},transformMat4:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=i[3]*r+i[7]*n+i[11]*o+i[15];return a=a||1,t[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/a,t[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/a,t[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/a,t}},ga={normalFromMat4:function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],y=e[13],g=e[14],v=e[15],_=i*s-r*a,m=i*l-n*a,b=i*u-o*a,x=r*l-n*s,w=r*u-o*s,k=n*u-o*l,A=c*y-h*d,T=c*g-f*d,E=c*v-p*d,M=h*g-f*y,R=h*v-p*y,S=f*v-p*g,O=_*S-m*R+b*M+x*E-w*T+k*A;return O?(O=1/O,t[0]=(s*S-l*R+u*M)*O,t[1]=(l*E-a*S-u*T)*O,t[2]=(a*R-s*E+u*A)*O,t[3]=(n*R-r*S-o*M)*O,t[4]=(i*S-n*E+o*T)*O,t[5]=(r*E-i*R-o*A)*O,t[6]=(y*k-g*w+v*x)*O,t[7]=(g*b-d*k-v*m)*O,t[8]=(d*w-y*b+v*_)*O,t):null},invert:function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,f=-c*o+s*l,p=u*o-a*l,d=i*h+r*f+n*p;return d?(d=1/d,t[0]=h*d,t[1]=(-c*r+n*u)*d,t[2]=(s*r-n*a)*d,t[3]=f*d,t[4]=(c*i-n*l)*d,t[5]=(-s*i+n*o)*d,t[6]=p*d,t[7]=(-u*i+r*l)*d,t[8]=(a*i-r*o)*d,t):null},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},va={multiply:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],y=e[12],g=e[13],v=e[14],_=e[15],m=i[0],b=i[1],x=i[2],w=i[3];return t[0]=m*r+b*s+x*h+w*y,t[1]=m*n+b*l+x*f+w*g,t[2]=m*o+b*u+x*p+w*v,t[3]=m*a+b*c+x*d+w*_,m=i[4],b=i[5],x=i[6],w=i[7],t[4]=m*r+b*s+x*h+w*y,t[5]=m*n+b*l+x*f+w*g,t[6]=m*o+b*u+x*p+w*v,t[7]=m*a+b*c+x*d+w*_,m=i[8],b=i[9],x=i[10],w=i[11],t[8]=m*r+b*s+x*h+w*y,t[9]=m*n+b*l+x*f+w*g,t[10]=m*o+b*u+x*p+w*v,t[11]=m*a+b*c+x*d+w*_,m=i[12],b=i[13],x=i[14],w=i[15],t[12]=m*r+b*s+x*h+w*y,t[13]=m*n+b*l+x*f+w*g,t[14]=m*o+b*u+x*p+w*v,t[15]=m*a+b*c+x*d+w*_,t},translate:function(t,e,i){var r,n,o,a,s,l,u,c,h,f,p,d,y=i[0],g=i[1],v=i[2];e===t?(t[12]=e[0]*y+e[4]*g+e[8]*v+e[12],t[13]=e[1]*y+e[5]*g+e[9]*v+e[13],t[14]=e[2]*y+e[6]*g+e[10]*v+e[14],t[15]=e[3]*y+e[7]*g+e[11]*v+e[15]):(r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],t[0]=r,t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=f,t[10]=p,t[11]=d,t[12]=r*y+s*g+h*v+e[12],t[13]=n*y+l*g+f*v+e[13],t[14]=o*y+u*g+p*v+e[14],t[15]=a*y+c*g+d*v+e[15]);return t},scale:function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},perspective:function(t,e,i,r,n){var o=1/Math.tan(e/2),a=1/(r-n);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*a,t[15]=0,t},lookAt:function(t,e,i,r){var n,o,a,s,l,u,c,h,f,p,d=e[0],y=e[1],g=e[2],v=r[0],_=r[1],m=r[2],b=i[0],x=i[1],w=i[2];if(Math.abs(d-b)<1e-6&&Math.abs(y-x)<1e-6&&Math.abs(g-w)<1e-6)return da(t);c=d-b,h=y-x,f=g-w,p=1/Math.sqrt(c*c+h*h+f*f),n=_*(f*=p)-m*(h*=p),o=m*(c*=p)-v*f,a=v*h-_*c,(p=Math.sqrt(n*n+o*o+a*a))?(n*=p=1/p,o*=p,a*=p):a=o=n=0;s=h*a-f*o,l=f*n-c*a,u=c*o-h*n,(p=Math.sqrt(s*s+l*l+u*u))?(s*=p=1/p,l*=p,u*=p):u=l=s=0;return t[0]=n,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=f,t[11]=0,t[12]=-(n*d+o*y+a*g),t[13]=-(s*d+l*y+u*g),t[14]=-(c*d+h*y+f*g),t[15]=1,t},identity:da,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},invert:function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],y=e[13],g=e[14],v=e[15],_=i*s-r*a,m=i*l-n*a,b=i*u-o*a,x=r*l-n*s,w=r*u-o*s,k=n*u-o*l,A=c*y-h*d,T=c*g-f*d,E=c*v-p*d,M=h*g-f*y,R=h*v-p*y,S=f*v-p*g,O=_*S-m*R+b*M+x*E-w*T+k*A;return O?(O=1/O,t[0]=(s*S-l*R+u*M)*O,t[1]=(n*R-r*S-o*M)*O,t[2]=(y*k-g*w+v*x)*O,t[3]=(f*w-h*k-p*x)*O,t[4]=(l*E-a*S-u*T)*O,t[5]=(i*S-n*E+o*T)*O,t[6]=(g*b-d*k-v*m)*O,t[7]=(c*k-f*b+p*m)*O,t[8]=(a*R-s*E+u*A)*O,t[9]=(r*E-i*R-o*A)*O,t[10]=(d*w-y*b+v*_)*O,t[11]=(h*b-c*w-p*_)*O,t[12]=(s*T-a*M-l*A)*O,t[13]=(i*M-r*T+n*A)*O,t[14]=(y*m-d*x-g*_)*O,t[15]=(c*x-h*m+f*_)*O,t):null}},_a={transformMat4:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t},normalize:function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=i*i+r*r+n*n+o*o;0<a&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=o*a);return t},scale:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}},ma=0,ba=0,xa=function(){function t(e){var i=e.coords,r=e.style_zoom,n=e.source,o=e.worker,a=e.view,s=e.sceneId;br(this,t),this.textureManager=pa(s),this.id=ma++,this.worker=o,this.view=a,this.source=n,this.generation=null,this.valid=!0,this.visible=!1,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=r,this.coords=t.normalizedCoordinate(i,this.source,this.style_zoom),this.key=t.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=an.metersForTile(this.coords),this.max=an.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=an.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=an.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=an.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return wr(t,[{key:"freeResources",value:function(){for(var t in this.meshes)this.meshes[t].forEach(function(t){return t.destroy()});this.meshes={}}},{key:"destroy",value:function(){sa.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Fr.postMessage.apply(Fr,[this.worker].concat(e))}},{key:"build",value:function(t,e){var i=(1<arguments.length&&void 0!==e?e:{}).fade_in,r=void 0===i||i;return this.generation=t,this.fade_in=r,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(t,e){if(!this.error){this.build_id=ba++;var i={},r=this.mesh_data;if(r)for(var n in r){for(var o in r[n].meshes){var a=r[n].meshes[o];if(a.vertex_data){if(!t[n]){Qr("warn","Could not create mesh because style '".concat(n,"' not found, for tile ").concat(this.key,", aborting tile"));break}var s=Object.assign({},r[n]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.textures&&(s.textures=a.textures),a.labels&&(s.retain=!0);var l=t[n].makeMesh(a.vertex_data,a.vertex_elements,s);l.variant=s.variant,l.labels=a.labels,i[n]=i[n]||[],i[n].push(l),null==l.variant.order&&(l.variant.order=i[n].length-1)}}i[n]&&i[n].sort(function(t,e){var i=t.variant.order,r=e.variant.order;return null==i?1:null==r?-1:i<r?-1:1})}for(var u in delete this.mesh_data,i)this.meshes[u]&&this.meshes[u].forEach(function(t){return t.destroy()}),this.meshes[u]=i[u],this.new_mesh_styles.push(u);if(e.done){for(var c in this.meshes)-1===this.new_mesh_styles.indexOf(c)&&(this.meshes[c].forEach(function(t){return t.destroy()}),delete this.meshes[c]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(t){t?(this.visible=!0,this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_depth=1,t.proxied_as=t.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(t){return!this.proxy_for||this.proxy_for.some(function(e){return null==e.meshes[t]})}},{key:"setupProgram",value:function(t,e){var i=t.model,r=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),e.uniform("1f","u_tile_proxy_depth",this.proxy_depth),va.identity(i),va.translate(i,i,ya.fromValues(this.min.x,this.min.y,0)),va.scale(i,i,ya.fromValues(this.span.x/an.tile_scale,-1*this.span.y/an.tile_scale,1)),va.copy(r,i),e.uniform("Matrix4fv","u_model",r),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.selection_data?Object.assign(this.selection_data,t.selection_data):this.selection_data=t.selection_data,this}}],[{key:"coord",value:function(e){return{x:e.x,y:e.y,z:e.z,key:t.coordKey(e)}}},{key:"coordKey",value:function(t){return t.x+"/"+t.y+"/"+t.z}},{key:"key",value:function(t,e,i){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,i,t.x,t.y,t.z].join("/")}},{key:"normalizedKey",value:function(e,i,r){return t.key(t.normalizedCoordinate(e,i,r),i,r)}},{key:"normalizedCoordinate",value:function(e,i,r){return i.zoom_bias&&(e=t.coordinateAtZoom(e,Math.max(0,e.z-i.zoom_bias))),t.coordinateWithMaxZoom(e,i.max_zoom)}},{key:"coordinateAtZoom",value:function(e,i){var r=e.x,n=e.y,o=e.z;if(o!==i){var a=Math.pow(2,o-i);r=Math.floor(r/a),n=Math.floor(n/a),o=i}return t.coord({x:r,y:n,z:o})}},{key:"coordinateWithMaxZoom",value:function(e,i){var r=e.x,n=e.y,o=e.z;return void 0!==i&&i<o?t.coordinateAtZoom({x:r,y:n,z:o},i):t.coord({x:r,y:n,z:o})}},{key:"childrenForCoordinate",value:function(e){var i=e.x,r=e.y,n=e.z,o=e.key;return t.coord_children[o]||(n++,i*=2,r*=2,t.coord_children[o]=[t.coord({x:i,y:r,z:n}),t.coord({x:i+1,y:r,z:n}),t.coord({x:i,y:r+1,z:n}),t.coord({x:i+1,y:r+1,z:n})]),t.coord_children[o]}},{key:"isDescendant",value:function(e,i){if(i.z>e.z){var r=t.coordinateAtZoom(i,e.z),n=r.x,o=r.y;return e.x===n&&e.y===o}return!1}},{key:"cancel",value:function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(pn.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))}},{key:"buildGeometry",value:function(e,i){var r=i.scene_id,n=i.layers,o=i.styles,a=i.global,s=i.sources,l=e.source_data;for(var u in aa.startTile(e.id,{apply_repeat_groups:!0}),n){var c=n[u];if(c&&c.config_data){if(c.config_data.source===e.source)for(var h=t._getDataForSource(l,c.config_data,u),f=0;f<h.length;f++){var p=h[f],d=p.geom;if(d)for(var y=0;y<d.features.length;y++){var g=d.features[y];if(null!=g.geometry){var v=Zo.getFeatureParseContext(g,e,a,s);v.winding=e.default_winding,v.source=e.source,v.layer=p.layer;var _=c.buildDrawGroups(v,!0);if(_)for(var m in _){var b=_[m],x=b.style||m,w=o[x];w?null!=(b=w.preprocess(b,e.source))&&!1!==b.visible&&(v.layers=b.layers,w.addFeature(g,b,v)):Qr("warn","Style '".concat(x,"' not found, skipping layer '").concat(u,"':"),b,g)}}}}}else Qr("warn","Layer ".concat(u," was defined without a geometry data source and will not be rendered."))}var k=t._stylesForTile(e,o);t._sendStyleGroups(e,k,{scene_id:r},function(t){return t.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(t,e){var i=[];for(var r in e)e[r].hasDataForTile(t)&&i.push(e[r]);return i}},{key:"_sendStyleGroups",value:function(e,i,r,n){var o=r.scene_id,a={};i.forEach(function(t){var e=n(t);a[e]=a[e]||[],a[e].push(t)}),0<Object.keys(a).length?function(){var i={start:!0};e.mesh_data={};function r(r){var n=a[r];Promise.all(n.map(function(t){return t.endData(e)})).then(function(){Qr("trace","Finished style group '".concat(r,"' for tile ").concat(e.key)),a[r]=[],Object.keys(a).every(function(t){return 0===a[t].length})&&(i.done=!0),Fr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),Fr.withTransferables({tile:t.slice(e,["mesh_data","selection_data"]),progress:i})),i.start=null,e.mesh_data={},e.selection_data={},i.done&&aa.resetTile(e.id)},function(t){Qr("error","Error for style group '".concat(r,"' for tile ").concat(e.key),t)})}for(var n in a)r(n)}():(Fr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),Fr.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),aa.resetTile(e.id))}},{key:"_getDataForSource",value:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:null,n=[];return null!=e&&null!=t&&null!=t.layers&&(!e.layer&&t.layers._default?n.push({geom:t.layers._default}):"string"==typeof e.layer&&!t.layers[e.layer]&&new RegExp("^\\d+_"+e.layer+"$").test(r)&&t.layers._default?n.push({geom:t.layers._default}):!e.layer&&r?n.push({layer:r,geom:t.layers[r]}):"string"==typeof e.layer?n.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach(function(e){t.layers[e]&&t.layers[e].features&&n.push({layer:e,geom:t.layers[e]})})),n}},{key:"abortBuild",value:function(t,e){if(sa.removeForTile(t.id),aa.abortTile(t.id),t.mesh_data)for(var i in t.mesh_data){var r=t.mesh_data[i].textures;r&&r.forEach(function(i){var r=pa(e).textures[i];r&&(Qr("trace","releasing texture ".concat(i," for tile ").concat(t.key)),r.release())})}}},{key:"slice",value:function(t,e){var i=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&i.push.apply(i,Ir(e));for(var r={},n=0;n<i.length;n++){var o=i[n];r[o]=t[o]}return r}}]),t}();xa.coord_children={};var wa=function(){function t(e,i){var r;return br(this,t),-1===(r=Or(this,Tr(t).call(this,e,i))).rasters.indexOf(r.name)&&r.rasters.unshift(r.name),r.filtering=e.filtering,r.textures={},r}return Ar(t,Tn),wr(t,[{key:"load",value:function(t){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Ir(this.rasters);var e=an.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[e,0],[e,-e],[0,-e],[0,0]]]},properties:{}}]}},t.default_winding="CW",Promise.resolve(t)}},{key:"tileTexture",value:function(t){var e=t.coords.key;if(!this.textures[e]){var i=xa.coordinateWithMaxZoom(t.coords,this.max_zoom),r=this.formatUrl(this.url,{coords:i});this.textures[e]={url:r,filtering:this.filtering,coords:i}}return this.textures[e]}}]),t}();function ka(t){return t}function Aa(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return Ta(t,e)})}:Ta(t,e)}function Ta(t,e){var i=e.id,r=e.bbox,n=null==e.properties?{}:e.properties,o=function(t,e){var i=function(t){if(null==(e=t.transform))return ka;var e,i,r,n=e.scale[0],o=e.scale[1],a=e.translate[0],s=e.translate[1];return function(t,e){return e||(i=r=0),t[0]=(i+=t[0])*n+a,t[1]=(r+=t[1])*o+s,t}}(t),r=t.arcs;function n(t,e){e.length&&e.pop();for(var n=r[t<0?~t:t],o=0,a=n.length;o<a;++o)e.push(i(n[o].slice(),o));t<0&&function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i}(e,a)}function o(t){return i(t.slice())}function a(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0].slice());return e}function l(t){return t.map(s)}return function t(e){var i,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":i=o(e.coordinates);break;case"MultiPoint":i=e.coordinates.map(o);break;case"LineString":i=a(e.arcs);break;case"MultiLineString":i=e.arcs.map(a);break;case"Polygon":i=l(e.arcs);break;case"MultiPolygon":i=e.arcs.map(l);break;default:return null}return{type:r,coordinates:i}}(e)}(t,e);return null==i&&null==r?{type:"Feature",properties:n,geometry:o}:null==r?{type:"Feature",id:i,properties:n,geometry:o}:{type:"Feature",id:i,bbox:r,properties:n,geometry:o}}wn.register(wa,"Raster");var Ea=function(){function t(){return br(this,t),Or(this,Tr(t).apply(this,arguments))}return Ar(t,_o),wr(t,[{key:"parseSourceData",value:function(e,i,r){var n="string"==typeof r?JSON.parse(r):r;n=this.toGeoJSON(n);var o=this.getLayers(n);Pr(Tr(t.prototype),"preprocessLayers",this).call(this,o),i.layers=o}},{key:"toGeoJSON",value:function(t){if(t.objects&&1===Object.keys(t.objects).length){var e=Object.keys(t.objects)[0];t=Ma(t,t.objects[e])}else{var i={};for(var r in t.objects)i[r]=Ma(t,t.objects[r]);t=i}return t}}]),t}();function Ma(t,e){var i=Aa(t,e);return"Feature"===i.type&&(i={type:"FeatureCollection",features:[i]}),i}var Ra,Sa=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).urlHasTilePattern(r.url)?r:Or(r,new Ea(e))}return Ar(t,mo),wr(t,[{key:"parseSourceData",value:function(t,e,i){var r="string"==typeof i?JSON.parse(i):i;r=Ea.prototype.toGeoJSON(r),this.prepareGeoJSON(r,t,e)}}]),t}();wn.register(Sa,"TopoJSON");var Oa=Ra={},Pa={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(Ra.deepClone=function(t){return Array.isArray(t)?t.map(Ra.deepClone):t}),promoteId:null,generateId:!1};function La(t,e,i,r,n){var o=Object.assign({},Pa,n),a=qn(t,o),s=function(t){var e=2,i=-1,r=1,n=0,o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.minX<e&&(e=c.minX),c.maxX>i&&(i=c.maxX),c.minY<r&&(r=c.minY),c.maxY>n&&(n=c.maxY)}}catch(t){a=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return{minX:e,maxX:i,minY:r,maxY:n}}(a=ao(a,o)),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY,f=1<<e,p=o.buffer/o.extent,d=1+p;return uo(ho(a=Qn(a=Qn(a,f,i-p,i+d,0,l,c,o)||[],f,r-p,r+d,1,u,h,o)||[],e,i,r,o),o.extent)}function Ia(t,e){this.items=[],this.algorithm=t;var i=void 0===(e=e||{}).sort||e.sort;this.sort=i}Ia.prototype={addItem:function(t){this.items.push(t)},normalizeCoordinates:function(){var t=this.items,e=1/0,i=1/0;t.forEach(function(t){var r=t;e=Math.min(e,r.x),i=Math.min(i,r.y)}),t.forEach(function(t){var r=t;r.x-=e,r.y-=i})},getStats:function(){var t=this.items.map(function(t){return t}),e=t.map(function(t){return t.x}),i=t.map(function(t){return t.y}),r=t.map(function(t){return t.x+t.width}),n=t.map(function(t){return t.y+t.height});return{minX:Math.max.apply(Math,e),minY:Math.max.apply(Math,i),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,n)}},getItems:function(){return this.items},processItems:function(){var t=this.items;return this.sort&&(t=this.algorithm.sort(t)),t=this.algorithm.placeItems(t),this.items=t},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var t=this.exportItems(),e=this.getStats();return{height:e.maxY,width:e.maxX,items:t}}};var Na=Ia,Ca=[],za=[],ja="undefined"!=typeof Uint8Array?Uint8Array:Array,Da=!1;function Fa(){Da=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)Ca[e]=t[e],za[t.charCodeAt(e)]=e;za["-".charCodeAt(0)]=62,za["_".charCodeAt(0)]=63}function Ba(t){var e,i,r,n,o;Da||Fa();var a=t.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");n="="===t[a-2]?2:"="===t[a-1]?1:0,o=new ja(3*a/4-n),i=0<n?a-4:a;var s=0;for(e=0;e<i;e+=4,3)r=za[t.charCodeAt(e)]<<18|za[t.charCodeAt(e+1)]<<12|za[t.charCodeAt(e+2)]<<6|za[t.charCodeAt(e+3)],o[s++]=r>>16&255,o[s++]=r>>8&255,o[s++]=255&r;return 2==n?(r=za[t.charCodeAt(e)]<<2|za[t.charCodeAt(e+1)]>>4,o[s++]=255&r):1==n&&(r=za[t.charCodeAt(e)]<<10|za[t.charCodeAt(e+1)]<<4|za[t.charCodeAt(e+2)]>>2,o[s++]=r>>8&255,o[s++]=255&r),o}function Ua(t,e,i){for(var r,n,o=[],a=e;a<i;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(Ca[(n=r)>>18&63]+Ca[n>>12&63]+Ca[n>>6&63]+Ca[63&n]);return o.join("")}function Ga(t){var e;Da||Fa();for(var i=t.length,r=i%3,n="",o=[],a=0,s=i-r;a<s;a+=16383)o.push(Ua(t,a,s<a+16383?s:a+16383));return 1==r?(e=t[i-1],n+=Ca[e>>2],n+=Ca[e<<4&63],n+="=="):2==r&&(e=(t[i-2]<<8)+t[i-1],n+=Ca[e>>10],n+=Ca[e>>4&63],n+=Ca[e<<2&63],n+="="),o.push(n),o.join("")}function Va(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,f=i?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)}function Ha(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,h=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?f/l:f*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));8<=n;t[i+p]=255&s,p+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;0<u;t[i+p]=255&a,p+=d,a/=256,u-=8);t[i+p-d]|=128*y}var qa={}.toString,Ka=Array.isArray||function(t){return"[object Array]"==qa.call(t)};Za.TYPED_ARRAY_SUPPORT=void 0===tn.TYPED_ARRAY_SUPPORT||tn.TYPED_ARRAY_SUPPORT;var Wa=Ya();function Ya(){return Za.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Xa(t,e){if(Ya()<e)throw new RangeError("Invalid typed array length");return Za.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Za.prototype:(null===t&&(t=new Za(e)),t.length=e),t}function Za(t,e,i){if(!(Za.TYPED_ARRAY_SUPPORT||this instanceof Za))return new Za(t,e,i);if("number"!=typeof t)return Ja(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return $a(this,t)}function Ja(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);Za.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Za.prototype:t=ts(t,e);return t}(t,e,i,r):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!Za.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|rs(e,i),n=(t=Xa(t,r)).write(e,i);n!==r&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(is(e)){var i=0|es(e.length);return 0===(t=Xa(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?Xa(t,0):ts(t,e);if("Buffer"===e.type&&Ka(e.data))return ts(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Qa(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function $a(t,e){if(Qa(e),t=Xa(t,e<0?0:0|es(e)),!Za.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function ts(t,e){var i=e.length<0?0:0|es(e.length);t=Xa(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function es(t){if(t>=Ya())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ya().toString(16)+" bytes");return 0|t}function is(t){return!(null==t||!t._isBuffer)}function rs(t,e){if(is(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Ts(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Es(t).length;default:if(r)return Ts(t).length;e=(""+e).toLowerCase(),r=!0}}function ns(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function os(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=Za.from(e,r)),is(e))return 0===e.length?-1:as(t,e,i,r,n);if("number"==typeof e)return e&=255,Za.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):as(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function as(t,e,i,r,n){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=a=2,l/=2,i/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var c=-1;for(o=i;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<i+l&&(i=s-l),o=i;0<=o;o--){for(var h=!0,f=0;f<l;f++)if(u(t,o+f)!==u(e,f)){h=!1;break}if(h)return o}return-1}function ss(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?n<(r=Number(r))&&(r=n):r=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function ls(t,e,i,r){return Ms(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function us(t,e,i){return 0===e&&i===t.length?Ga(t):Ga(t.slice(e,i))}function cs(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,a,s,l,u=t[n],c=null,h=239<u?4:223<u?3:191<u?2:1;if(n+h<=i)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[n+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=h}return function(t){var e=t.length;if(e<=hs)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=hs));return i}(r)}Za.poolSize=8192,Za._augment=function(t){return t.__proto__=Za.prototype,t},Za.from=function(t,e,i){return Ja(null,t,e,i)},Za.TYPED_ARRAY_SUPPORT&&(Za.prototype.__proto__=Uint8Array.prototype,Za.__proto__=Uint8Array),Za.alloc=function(t,e,i){return function(t,e,i,r){return Qa(e),e<=0?Xa(t,e):void 0!==i?"string"==typeof r?Xa(t,e).fill(i,r):Xa(t,e).fill(i):Xa(t,e)}(null,t,e,i)},Za.allocUnsafe=function(t){return $a(null,t)},Za.allocUnsafeSlow=function(t){return $a(null,t)},Za.isBuffer=Rs,Za.compare=function(t,e){if(!is(t)||!is(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},Za.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Za.concat=function(t,e){if(!Ka(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Za.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;var r=Za.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!is(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},Za.byteLength=rs,Za.prototype._isBuffer=!0,Za.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ns(this,e,e+1);return this},Za.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ns(this,e,e+3),ns(this,e+1,e+2);return this},Za.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ns(this,e,e+7),ns(this,e+1,e+6),ns(this,e+2,e+5),ns(this,e+3,e+4);return this},Za.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?cs(this,0,t):function(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ds(this,e,i);case"utf8":case"utf-8":return cs(this,e,i);case"ascii":return fs(this,e,i);case"latin1":case"binary":return ps(this,e,i);case"base64":return us(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ys(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},Za.prototype.equals=function(t){if(!is(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Za.compare(this,t)},Za.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},Za.prototype.compare=function(t,e,i,r,n){if(!is(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(n<=r&&i<=e)return 0;if(n<=r)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,n),u=t.slice(e,i),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},Za.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},Za.prototype.indexOf=function(t,e,i){return os(this,t,e,i,!0)},Za.prototype.lastIndexOf=function(t,e,i){return os(this,t,e,i,!1)},Za.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||n<i)&&(i=n),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,s,l,u,c,h,f,p,d=!1;;)switch(r){case"hex":return ss(this,t,e,i);case"utf8":case"utf-8":return f=e,p=i,Ms(Ts(t,(h=this).length-f),h,f,p);case"ascii":return ls(this,t,e,i);case"latin1":case"binary":return ls(this,t,e,i);case"base64":return l=this,u=e,c=i,Ms(Es(t),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=i,Ms(function(t,e){for(var i,r,n,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,n=i%256,o.push(n),o.push(r);return o}(t,(o=this).length-a),o,a,s);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},Za.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var hs=4096;function fs(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function ps(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function ds(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||r<i)&&(i=r);for(var n="",o=e;o<i;++o)n+=As(t[o]);return n}function ys(t,e,i){for(var r=t.slice(e,i),n="",o=0;o<r.length;o+=2)n+=String.fromCharCode(r[o]+256*r[o+1]);return n}function gs(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function vs(t,e,i,r,n,o){if(!is(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function _s(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function ms(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function bs(t,e,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function xs(t,e,i,r,n){return n||bs(t,0,i,4),Ha(t,e,i,r,23,4),i+4}function ws(t,e,i,r,n){return n||bs(t,0,i,8),Ha(t,e,i,r,52,8),i+8}Za.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),Za.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=Za.prototype;else{var n=e-t;i=new Za(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+t]}return i},Za.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||gs(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},Za.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||gs(t,e,this.length);for(var r=this[t+--e],n=1;0<e&&(n*=256);)r+=this[t+--e]*n;return r},Za.prototype.readUInt8=function(t,e){return e||gs(t,1,this.length),this[t]},Za.prototype.readUInt16LE=function(t,e){return e||gs(t,2,this.length),this[t]|this[t+1]<<8},Za.prototype.readUInt16BE=function(t,e){return e||gs(t,2,this.length),this[t]<<8|this[t+1]},Za.prototype.readUInt32LE=function(t,e){return e||gs(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Za.prototype.readUInt32BE=function(t,e){return e||gs(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Za.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||gs(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return(n*=128)<=r&&(r-=Math.pow(2,8*e)),r},Za.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||gs(t,e,this.length);for(var r=e,n=1,o=this[t+--r];0<r&&(n*=256);)o+=this[t+--r]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},Za.prototype.readInt8=function(t,e){return e||gs(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Za.prototype.readInt16LE=function(t,e){e||gs(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},Za.prototype.readInt16BE=function(t,e){e||gs(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},Za.prototype.readInt32LE=function(t,e){return e||gs(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Za.prototype.readInt32BE=function(t,e){return e||gs(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Za.prototype.readFloatLE=function(t,e){return e||gs(t,4,this.length),Va(this,t,!0,23,4)},Za.prototype.readFloatBE=function(t,e){return e||gs(t,4,this.length),Va(this,t,!1,23,4)},Za.prototype.readDoubleLE=function(t,e){return e||gs(t,8,this.length),Va(this,t,!0,52,8)},Za.prototype.readDoubleBE=function(t,e){return e||gs(t,8,this.length),Va(this,t,!1,52,8)},Za.prototype.writeUIntLE=function(t,e,i,r){t=+t,e|=0,i|=0,r||vs(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},Za.prototype.writeUIntBE=function(t,e,i,r){t=+t,e|=0,i|=0,r||vs(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+i},Za.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,1,255,0),Za.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Za.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,2,65535,0),Za.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_s(this,t,e,!0),e+2},Za.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,2,65535,0),Za.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_s(this,t,e,!1),e+2},Za.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,4,4294967295,0),Za.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):ms(this,t,e,!0),e+4},Za.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,4,4294967295,0),Za.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):ms(this,t,e,!1),e+4},Za.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);vs(this,t,e,i,n-1,-n)}var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},Za.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);vs(this,t,e,i,n-1,-n)}var o=i-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},Za.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,1,127,-128),Za.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Za.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,2,32767,-32768),Za.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):_s(this,t,e,!0),e+2},Za.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,2,32767,-32768),Za.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):_s(this,t,e,!1),e+2},Za.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,4,2147483647,-2147483648),Za.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):ms(this,t,e,!0),e+4},Za.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||vs(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Za.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):ms(this,t,e,!1),e+4},Za.prototype.writeFloatLE=function(t,e,i){return xs(this,t,e,!0,i)},Za.prototype.writeFloatBE=function(t,e,i){return xs(this,t,e,!1,i)},Za.prototype.writeDoubleLE=function(t,e,i){return ws(this,t,e,!0,i)},Za.prototype.writeDoubleBE=function(t,e,i){return ws(this,t,e,!1,i)},Za.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n,o=r-i;if(this===t&&i<e&&e<r)for(n=o-1;0<=n;--n)t[n+e]=this[n+i];else if(o<1e3||!Za.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},Za.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Za.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=is(t)?t:Ts(new Za(t,r).toString()),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this};var ks=/[^+\/0-9A-Za-z-_]/g;function As(t){return t<16?"0"+t.toString(16):t.toString(16)}function Ts(t,e){var i;e=e||1/0;for(var r=t.length,n=null,o=[],a=0;a<r;++a){if(55295<(i=t.charCodeAt(a))&&i<57344){if(!n){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Es(t){return Ba(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(ks,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Ms(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function Rs(t){return null!=t&&(!!t._isBuffer||Ss(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ss(t.slice(0,0))}(t))}function Ss(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Os=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:Wa,Buffer:Za,SlowBuffer:function(t){return+t!=t&&(t=0),Za.alloc(+t)},isBuffer:Rs});tn.setTimeout,tn.clearTimeout;var Ps=tn.performance||{},Ls=(Ps.now||Ps.mozNow||Ps.msNow||Ps.oNow||Ps.webkitNow,"function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t});function Is(t,e){var i={seen:[],stylize:Cs};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),Fs(e)?i.showHidden=e:e&&function(t,e){if(!e||!Hs(e))return;var i=Object.keys(e),r=i.length;for(;r--;)t[i[r]]=e[i[r]]}(i,e),Gs(i.showHidden)&&(i.showHidden=!1),Gs(i.depth)&&(i.depth=2),Gs(i.colors)&&(i.colors=!1),Gs(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=Ns),zs(i,t,i.depth)}function Ns(t,e){var i=Is.styles[e];return i?"["+Is.colors[i][0]+"m"+t+"["+Is.colors[i][1]+"m":t}function Cs(t,e){return t}function zs(t,e,i){if(t.customInspect&&e&&Ws(e.inspect)&&e.inspect!==Is&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(i,t);return Us(r)||(r=zs(t,r,i)),r}var n=function(t,e){if(Gs(e))return t.stylize("undefined","undefined");if(Us(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(function(t){return"number"==typeof t}(e))return t.stylize(""+e,"number");if(Fs(e))return t.stylize(""+e,"boolean");if(Bs(e))return t.stylize("null","null")}(t,e);if(n)return n;var o=Object.keys(e),a=function(t){var e={};return t.forEach(function(t){e[t]=!0}),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Ks(e)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return js(e);if(0===o.length){if(Ws(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(Vs(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(qs(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ks(e))return js(e)}var l,u="",c=!1,h=["{","}"];!function(t){return Array.isArray(t)}(e)||(c=!0,h=["[","]"]),Ws(e)&&(u=" [Function"+(e.name?": "+e.name:"")+"]");return Vs(e)&&(u=" "+RegExp.prototype.toString.call(e)),qs(e)&&(u=" "+Date.prototype.toUTCString.call(e)),Ks(e)&&(u=" "+js(e)),0!==o.length||c&&0!=e.length?i<0?Vs(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=c?function(t,e,i,r,n){for(var o=[],a=0,s=e.length;a<s;++a)Zs(e,String(a))?o.push(Ds(t,e,i,r,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(Ds(t,e,i,r,n,!0))}),o}(t,e,i,a,o):o.map(function(r){return Ds(t,e,i,a,r,c)}),t.seen.pop(),function(t,e,i){if(60<t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0))return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(l,u,h)):h[0]+u+h[1]}function js(t){return"["+Error.prototype.toString.call(t)+"]"}function Ds(t,e,i,r,n,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),Zs(r,n)||(a="["+n+"]"),s||(t.seen.indexOf(l.value)<0?-1<(s=Bs(i)?zs(t,l.value,null):zs(t,l.value,i-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),Gs(a)){if(o&&n.match(/^\d+$/))return s;a=(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(a,"string"))}return a+": "+s}function Fs(t){return"boolean"==typeof t}function Bs(t){return null===t}function Us(t){return"string"==typeof t}function Gs(t){return void 0===t}function Vs(t){return Hs(t)&&"[object RegExp]"===Xs(t)}function Hs(t){return"object"==typeof t&&null!==t}function qs(t){return Hs(t)&&"[object Date]"===Xs(t)}function Ks(t){return Hs(t)&&("[object Error]"===Xs(t)||t instanceof Error)}function Ws(t){return"function"==typeof t}function Ys(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Xs(t){return Object.prototype.toString.call(t)}function Zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Js(t,e){if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0}Is.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Is.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Qs,$s=Object.prototype.hasOwnProperty,tl=Object.keys||function(t){var e=[];for(var i in t)$s.call(t,i)&&e.push(i);return e},el=Array.prototype.slice;function il(){return void 0!==Qs?Qs:Qs="foo"===function(){}.name}function rl(t){return Object.prototype.toString.call(t)}function nl(t){return!Rs(t)&&("function"==typeof tn.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function ol(t,e){t||hl(t,!0,e,"==",fl)}var al=/\s*function\s+([^\(\s]*)\s*/;function sl(t){if(Ws(t)){if(il())return t.name;var e=t.toString().match(al);return e&&e[1]}}function ll(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return ul(cl(t.actual),128)+" "+t.operator+" "+ul(cl(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||hl;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var r=i.stack,n=sl(e),o=r.indexOf("\n"+n);if(0<=o){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function ul(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function cl(t){if(il()||!Ws(t))return Is(t);var e=sl(t);return"[Function"+(e?": "+e:"")+"]"}function hl(t,e,i,r,n){throw new ll({message:i,actual:t,expected:e,operator:r,stackStartFunction:n})}function fl(t,e){t||hl(t,!0,e,"==",fl)}function pl(t,e,i,r){if(t===e)return!0;if(Rs(t)&&Rs(e))return 0===Js(t,e);if(qs(t)&&qs(e))return t.getTime()===e.getTime();if(Vs(t)&&Vs(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(nl(t)&&nl(e)&&rl(t)===rl(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Js(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(Rs(t)!==Rs(e))return!1;var n=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==n&&n===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,i,r){if(null==t||null==e)return!1;if(Ys(t)||Ys(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var n=dl(t),o=dl(e);if(n&&!o||!n&&o)return!1;if(n)return t=el.call(t),e=el.call(e),pl(t,e,i);var a,s,l=tl(t),u=tl(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;0<=s;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;0<=s;s--)if(a=l[s],!pl(t[a],e[a],i,r))return!1;return!0}(t,e,i,r))}return i?t===e:t==e}function dl(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function yl(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function gl(t,e,i,r){var n;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(r=i,i=null),n=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(i&&i.name?" ("+i.name+").":".")+(r?" "+r:"."),t&&!n&&hl(n,i,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&n&&!i;if((!t&&Ks(n)&&o&&yl(n,i)||a)&&hl(n,i,"Got unwanted exception"+r),t&&n&&i&&!yl(n,i)||!t&&n)throw n}Ls(ol.AssertionError=ll,Error),ol.fail=hl,ol.ok=fl,ol.equal=function t(e,i,r){e!=i&&hl(e,i,r,"==",t)},ol.notEqual=function t(e,i,r){e==i&&hl(e,i,r,"!=",t)},ol.deepEqual=function t(e,i,r){pl(e,i,!1)||hl(e,i,r,"deepEqual",t)},ol.deepStrictEqual=function t(e,i,r){pl(e,i,!0)||hl(e,i,r,"deepStrictEqual",t)},ol.notDeepEqual=function t(e,i,r){pl(e,i,!1)&&hl(e,i,r,"notDeepEqual",t)},ol.notDeepStrictEqual=function t(e,i,r){pl(e,i,!0)&&hl(e,i,r,"notDeepStrictEqual",t)},ol.strictEqual=function t(e,i,r){e!==i&&hl(e,i,r,"===",t)},ol.notStrictEqual=function t(e,i,r){e===i&&hl(e,i,r,"!==",t)},ol.throws=function(t,e,i){gl(!0,t,e,i)},ol.doesNotThrow=function(t,e,i){gl(!1,t,e,i)},ol.ifError=function(t){if(t)throw t};function vl(){}var _l={sort:function(t){return t.sort(function(t,e){return t.height-e.height}),t},placeItems:function(t){var e=0;return t.forEach(function(t){t.x=0,t.y=e,e+=t.height}),t}},ml={sort:function(t){return t.sort(function(t,e){return t.width-e.width}),t},placeItems:function(t){var e=0;return t.forEach(function(t){t.x=e,t.y=0,e+=t.width}),t}},bl={sort:function(t){return t.sort(function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))}),t},placeItems:function(t){var e=0,i=0;return t.forEach(function(t){t.x=e,t.y=i,e+=t.width,i+=t.height}),t}},xl={sort:function(t){return t.sort(function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))}),t},placeItems:function(t){var e=0,i=0;return t.forEach(function(t){var r=t.width;t.x=e-r,t.y=i,e-=r,i+=t.height}),t}};vl.prototype={fit:function(t){var e,i,r,n,o=t.length,a=0<o?t[0].width:0,s=0<o?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)r=t[e],n=(i=this.findNode(this.root,r.width,r.height))?this.splitNode(i,r.width,r.height):this.growNode(r.width,r.height),r.x=n.x,r.y=n.y},findNode:function(t,e,i){return t.used?this.findNode(t.right,e,i)||this.findNode(t.down,e,i):e<=t.width&&i<=t.height?t:null},splitNode:function(t,e,i){return t.used=!0,t.down={x:t.x,y:t.y+i,width:t.width,height:t.height-i},t.right={x:t.x+e,y:t.y,width:t.width-e,height:i},t},growNode:function(t,e){var i=t<=this.root.width,r=e<=this.root.height,n=r&&this.root.height>=this.root.width+t,o=i&&this.root.width>=this.root.height+e;return n?this.growRight(t,e):o?this.growDown(t,e):r?this.growRight(t,e):i?this.growDown(t,e):null},growRight:function(t,e){var i;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(i=this.findNode(this.root,t,e))?this.splitNode(i,t,e):null},growDown:function(t,e){var i;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(i=this.findNode(this.root,t,e))?this.splitNode(i,t,e):null}};var wl=vl,kl={sort:function(t){return t},placeItems:function(t){return function(t,e){e=e||{};var i=new wl,r=e.inPlace||!1,n=t.map(function(t){return r?t:{width:t.width,height:t.height,item:t}});n=n.sort(function(t,e){return e.width*e.height-t.width*t.height}),i.fit(n);var o={width:n.reduce(function(t,e){return Math.max(t,e.x+e.width)},0),height:n.reduce(function(t,e){return Math.max(t,e.y+e.height)},0)};r||(o.items=n)}(t,{inPlace:!0}),t}},Al={};function Tl(t,e){var i=t||"top-down";return"string"==typeof i&&ol(i=Al[t],"Sorry, the '"+t+"' algorithm could not be loaded."),new Na(i,e)}function El(t,e){Al[t]=e}Tl.PackingSmith=Na,Tl.addAlgorithm=El,Tl.algorithms=Al,El("top-down",_l),El("left-right",ml),El("diagonal",bl),El("alt-diagonal",xl),El("binary-tree",kl);var Ml=Tl;function Rl(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(i)for(var r in i){var n=i[r];null===n||"object"!==mr(n)||Array.isArray(n)?void 0!==n&&(t[r]=n):null===t[r]||"object"!==mr(t[r])||Array.isArray(t[r])?t[r]=Rl({},n):t[r]=Rl(t[r],n)}}return t}function Sl(t){var e;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=t.message}return e}function Ol(t,e,i){if(t instanceof HTMLImageElement){var r=t.ownerDocument.createElement("canvas");r.width=e,r.height=i,r.getContext("2d").drawImage(t,0,0,e,i),t=r}return t}var Pl=an.metersToLatLng([an.half_circumference_meters,an.half_circumference_meters]),Ll=Math.log(an.tile_size)/Math.LN2,Il=function(){function t(e,i){var r;return br(this,t),r=Or(this,Tr(t).call(this,e,i)),Dr.is_worker&&(r._quad_tree=new en.H.geo.QuadTree,r._marker_quad_tree=new en.H.geo.QuadTree,r._tree_entries_by_object_id={},r._groups_by_id={},r._layersCache=new en.H.util.Cache(100)),Dr.is_main&&(r._objects_by_id={},r._commands=[],r._sendCommands=fn(r._sendCommands,100,200),r.dispatchUpdate=r.dispatchUpdate.bind(Sr(r))),r}return Ar(t,xo),wr(t,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var t,e,i=this.provider.getRootGroup(),r=i.getObjects(!0),n=[];for(r.push(i),t=r.length;t--;)e=r[t],this._isObjectSupported(e)&&this._shouldBeStored(e)&&(this._objects_by_id[e.getId()]=e,n.push(e.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[n]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(t){var e=t.target,i=t.currentTarget.getInvalidations(e.type);if(this._isObjectSupported(e)){var r=this._synced_at,n=e.getId();if(i.isRemove(r))delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]});else if(i.isAdd(r))this._shouldBeStored(e)&&(this._objects_by_id[n]=e,this._commands.push({method_name:"addObjects",arguments:[[e.forWorkerMessage()]]}));else if(i.isSpatial(r)||i.isZOrder(r)){if(this._shouldBeStored(e)){var o=[{method_name:"removeObjectsByIds",arguments:[[n],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[n]=e).forWorkerMessage()]]}];this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(o):this._commands.push(o[0],o[1])}}else if(i.isVisual(r)){if(this._shouldBeStored(e)){var a={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[n]=e).forWorkerMessage()]};this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([a]):this._commands.push(a)}}else i.isVolatility(r)&&(delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]}),this._shouldBeStored(e)&&(this._objects_by_id[n]=e,this._commands.push({method_name:"addObjects",arguments:[[e.forWorkerMessage()]]})));this._commands.length&&this._sendCommands()}this._synced_at=i.getMark()}},{key:"_shouldBeStored",value:function(t){return 16===t.type||(!t.getIcon||1===t.getIcon().getState())&&this._hasSameVolatility(t)}},{key:"_hasSameVolatility",value:function(t){return t.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(t){t.length&&Fr.postMessage(this.worker,this.target_name+".executeCommands",t).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(t){return t.forWorkerMessage&&8!==t.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(t){return this._objects_by_id[t]}},{key:"getIconBitmapByObjectId",value:function(t,e){var i=this.getMapObjectById(t);if(i){var r=i.getIcon();if(r.uid===e&&1===r.getState()){var n=r.getSize();return Ol(r.getBitmap(),n.w,n.h)}}}},{key:"_getRastersForMarkers",value:function(t){for(var e={},i=Ml("binary-tree"),r=0;r<t.length;r++){var n=t[r],o=n.properties.icon;e[o.id]||(i.addItem({width:o.size.w,height:o.size.h,meta:{objectId:n.id,id:o.id}}),e[o.id]=!0)}return i.export()}},{key:"fetchFeaturesForTile",value:function(e){var i=[],r=[],n=[],o=[],a=[],s=this._marker_quad_tree.intersectBoundingBox(an.getTileBoundingBox(e.coords,this.tile_size));e.source_data.error=null;for(var l=0;l<s.length;l++){var u={id:s[l].$feature$.id,properties:Object.assign({},s[l].$feature$.properties),geometry:{type:s[l].$feature$.geometry.type,coordinates:Oa.deepClone(s[l].$feature$.geometry.coordinates)}};i.push(u)}s=this._quad_tree.intersectBoundingBox(an.getTileBoundingBox(e.coords,this.tile_size,100));for(var c=0;c<s.length;c++){var h={id:s[c].$feature$.id,properties:Object.assign({},s[c].$feature$.properties),geometry:{type:s[c].$feature$.geometry.type,coordinates:Oa.deepClone(s[c].$feature$.geometry.coordinates)}};if(h.properties.overlay)r.push(h);else if(h.geometry.type.includes("LineString"))n.push(h);else if(h.geometry.type.includes("Polygon")){o.push(h);var f={id:h.id,properties:h.properties,geometry:{type:h.geometry.type,coordinates:Oa.deepClone(h.geometry.coordinates)}};a.push(f)}}i.sort(function(e,i){return t._compareZInfo(i,e)}),o.sort(t._compareZInfo),r.sort(t._compareZInfo);var p=this.has_volatile_data?4096:0;a.sort(t._compareZInfo);for(var d=0;d<a.length;d++)a[d].properties.effectiveZIdx=p++;n.sort(t._compareZInfo);for(var y=0;y<n.length;y++)n[y].properties.effectiveZIdx=p++;e.source_data.layers.markers={type:"FeatureCollection",features:i},e.source_data.layers.polylines={type:"FeatureCollection",features:n},e.source_data.layers.polygons={type:"FeatureCollection",features:o},e.source_data.layers.outlines={type:"FeatureCollection",features:a},e.source_data.layers.overlays={type:"FeatureCollection",features:r}}},{key:"tileTexture",value:function(t){var e=t.source_data.layers.overlays;if(e){var i=this.name+"_"+t.coords.key,r=xa.coordinateWithMaxZoom(t.coords,this.max_zoom),n=e.features[0].properties.overlays_config;return{name:i,filtering:this.filtering,coords:r,width:an.tile_size,height:an.tile_size,overlays_config:n,source:this.name}}}},{key:"_load",value:function(t,e){var i=an.wrapTile(t.coords,{x:!0}),r=i.z,n=i.x,o=i.y,a="".concat(r,"_").concat(n,"_").concat(o),s=this._layersCache.get(a),l=!1;if(s)t.source_data.layers=s;else{this.fetchFeaturesForTile(t);var u={maxZoom:this.max_zoom,tolerance:1.5,extent:an.tile_scale},c=t.source_data.layers.overlays;c.features.length&&delete t.source_data.layers.overlays;var h=t.source_data.layers.markers;for(var f in h.features.length&&delete t.source_data.layers.markers,t.source_data.layers){var p=t.source_data.layers[f];if(p.features.length){u.buffer=f.includes("lines")?100*an.units_per_pixel:0;var d=La(p,r,n,o,u);t.source_data.layers[f]=Fn(d)}}t.source_data.layers.overlays=this._processOverlays(t,c);for(var y=t.source_data.layers.overlays.features.length;y--;)if(!t.source_data.layers.overlays.features[y].id){l=!0,this._layersCache.drop(a);break}t.source_data.layers.markers=this._processMarkers(t,h),e(t),l||this._layersCache.add(a,t.source_data.layers,1)}return t.rasters=this._getRastersForMarkers(t.source_data.layers.markers.features),Promise.resolve(t)}},{key:"_processMarkers",value:function(t,e){var i=e.features.length;if(i){for(var r=an.unitsPerMeter(t.coords.z),n=an.wrapTile(t.coords,{x:!0}),o=an.metersForTile(n),a=an.isLastTile(n),s=an.tile_scale,l=function(t){wn.coordsToMeters(t),wn.metersToTileUnits(r,o,t);var e=Lr(t,2),i=e[0],n=e[1];return 0<=i&&(a.column||i<s)&&0<=n&&(a.row||n<s)},u=[],c=0;c<i;c++){var h=e.features[c].geometry,f=!1;if("Point"===h.type){var p=h.coordinates;l(p)?h.coordinates=p:f=!0}else"MultiPoint"===h.type&&(h.coordinates=h.coordinates.filter(l),0===h.coordinates.length&&(f=!0));f||u.push(e.features[c])}e.features=u}return e}},{key:"_processOverlays",value:function(t,e){var i=this;if(!e.features.length)return e;var r={coords:t.coords,min:an.metersForTile(an.wrapTile(t.coords,{x:!0}))},n={coords:t.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:e.features}}}},o=Math.pow(2,t.coords.z+Ll);xo.projectData(n.source_data),xo.scaleData(n.source_data,r);var a=e.features.map(function(t){var e=t.geometry.coordinates[0],i=e[0],r=e[5===e.length?2:3],n=Math.floor(i[0]/an.tile_scale*an.tile_size),a=Math.floor(i[1]/an.tile_scale*an.tile_size),s=Math.floor(r[0]/an.tile_scale*an.tile_size),l=Math.floor(r[1]/an.tile_scale*an.tile_size)-a,u=s<=n,c=u?o-(n-s):s-n,h=[];return n<=an.tile_size&&h.push([n,a,c,l]),u&&0<s&&h.push([n-o,a,c,l]),{id:t.id,properties:t.properties,texcoords:h}}).filter(function(e){return i._isVisible(e.properties)&&i.isInMinMaxRange(e.properties,t.style_zoom)}),s=an.tile_scale;return t.pad_scale=this.pad_scale,t.default_winding="CW",e.features=a.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[s,0],[s,s],[0,s],[0,0]]]},properties:{overlays_config:a}}]:a,e}},{key:"executeCommands",value:function(t){for(var e,i=t.length<10,r=0;r<t.length;r++){var n=t[r];n.arguments.push(i);var o=this[n.method_name].apply(this,n.arguments);i&&(o&&e?e.mergeRect(o,!0,e):o&&(e=o))}return e?e.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(t){var e=t.geometry.boundingBox;return new en.H.geo.Rect(nn.clamp(e[0],-Pl[1],Pl[1]),e[1],nn.clamp(e[2],-Pl[1],Pl[1]),e[3])}},{key:"addObjects",value:function(e,i){for(var r,n=1<arguments.length&&void 0!==i&&i,o=0;o<e.length;o++){var a=e[o];if("Group"===a.type)a.$children_ids$={},this._groups_by_id[a.id]=a;else{t._preprocessGeometry(a.geometry);var s=this._getClampedGeoRectForFeature(a);n&&(r?r.mergeRect(s,!0,r):r=s);var l=-1!==a.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree,u=l.insertBoundingBox(s);u.$tree=l,u.$feature$=a,this._tree_entries_by_object_id[a.id]=u}}for(var c=0;c<e.length;c++){var h=e[c];if(h.properties.parent)this._groups_by_id[h.properties.parent].$children_ids$[h.id]=h.id;h.properties.ref={effectiveVisibility:this._isVisible(h.properties),zInfo:this._getZInfo([],h)}}return this._layersCache.removeAll(),r}},{key:"removeObjectsByIds",value:function(t,e,i){for(var r,n=2<arguments.length&&void 0!==i&&i,o=0;o<t.length;o++){var a=t[o],s=void 0,l=void 0;if(s=this._tree_entries_by_object_id[a]){if(n){var u=this._getClampedGeoRectForFeature(s.$feature$);r?r.mergeRect(u,!0,r):r=u}delete this._groups_by_id[s.$feature$.properties.parent].$children_ids$[a],s.$tree.remove(s),delete this._tree_entries_by_object_id[a]}else(l=this._groups_by_id[a])&&(l.properties.parent&&delete this._groups_by_id[l.properties.parent].$children_ids$[a],e&&this.removeObjectsByIds(Object.keys(l.$children_ids$),!0),delete this._groups_by_id[a])}return this._layersCache.removeAll(),r}},{key:"updateObjectProperties",value:function(t,e){var i,r=1<arguments.length&&void 0!==e&&e;return"Group"===t.type?(Rl(this._groups_by_id[t.id].properties,t.properties),this._groups_by_id[t.id].properties.ref.effectiveVisibility=this._isVisible(t.properties)):(this._tree_entries_by_object_id[t.id]||this.addObjects([t]),Rl(this._tree_entries_by_object_id[t.id].$feature$.properties,t.properties),this._tree_entries_by_object_id[t.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(t.properties),r&&(i=this._getClampedGeoRectForFeature(t))),i}},{key:"_getZInfo",value:function(t,e){var i=e.properties.zIdx,r=e.properties.sIdx;return t[0]|=void 0!==i,t.splice(1,0,i||0,r<0?e.id:r),0===e.properties.parent?t:this._getZInfo(t,this._groups_by_id[e.properties.parent])}},{key:"_isVisible",value:function(t){var e=t.visible,i=!t.parent||this._isVisible(this._groups_by_id[t.parent].properties);return e&&i}},{key:"isInMinMaxRange",value:function(t,e){var i=t.min<=e&&t.max>=e,r=!t.parent||this.isInMinMaxRange(this._groups_by_id[t.parent].properties,e);return i&&r}},{key:"dispose",value:function(){this._commands=[],Pr(Tr(t.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(t,e){for(var i,r=t.properties.ref.zInfo,n=e.properties.ref.zInfo,o=r.length,a=n.length,s=Math.min(o,a),l=1;l<s;l++)if(i=r[l]-n[l])return i;return o-a}},{key:"_preprocessGeometry",value:function(e){var i=e.type;e.coordinates="Point"===i?t._processPointCoordinates(e.coordinates):"MultiPoint"===i?e.coordinates.map(t._processPointCoordinates):"LineString"===i?t._processLineStringCoordinates(e.coordinates):"MultiLineString"===i?e.coordinates.map(t._processLineStringCoordinates):"Polygon"===i?e.coordinates.map(t._processPolygonCoordinates):"MultiPolygon"===i?e.coordinates.map(t._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(t){return[t[1],t[0],t[2]]}},{key:"_processLineStringCoordinates",value:function(e){return t._latLngAltArrayToLineString(e,!1)}},{key:"_processPolygonCoordinates",value:function(e){return t._latLngAltArrayToLineString(e,!0)}},{key:"_processMultiPolygonCoordinates",value:function(e){return e.map(t._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(t,e){for(var i=[],r=t.length,n=0;n<r;n+=3)i.push([t[n+1],t[n]]);return e&&i.push([t[1],t[0]]),i}}]),t}();xo.register(Il,"ObjectSource");var Nl=1,Cl=2,zl=3,jl=function(){function t(){br(this,t),this._map={}}return wr(t,[{key:"set",value:function(t,e,i){if(this._map[t])this._map[t].accumulator.add(i);else{var r=new Set;r.add(i),this._map[t]={value:e,accumulator:r}}}},{key:"get",value:function(t){return this._map[t]&&this._map[t].value}},{key:"delete",value:function(t,e){var i=this._map[t];i&&i.accumulator&&(i.accumulator.delete(e),0===i.accumulator.size&&delete this._map[t])}}]),t}(),Dl=function(){function t(e,i){var r;return br(this,t),r=Or(this,Tr(t).call(this,e,i)),Dr.is_worker?r._loading={}:r._icons=new jl,r}return Ar(t,xo),wr(t,[{key:"onProviderUpdate",value:function(t){t.target instanceof H.map.provider.Tile?this.dispatchUpdate(t.target):this.dispatchUpdate()}},{key:"onReady",value:function(){var t=this.provider;t.setTileCanvasRendering&&t.setTileCanvasRendering(!1),t.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),t.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){Pr(Tr(t.prototype),"dispose",this).call(this);var e=this.provider;e.providesMarkers()&&e.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(t,e,i){this.provider.cacheFilter(t)&&this._deleteIcons(t,e.data)}},{key:"_deleteIcons",value:function(t,e){for(var i=0,r=e.length;i<r;i++){var n=e[i].getIcon();this._icons.delete(n.uid,t)}}},{key:"getIconBitmapByObjectId",value:function(t,e){var i=this._icons.get(e);return i&&i.getBitmap()}},{key:"requestMarkerTile",value:function(t){var e=this;return new Promise(function(i,r){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then(function(t){var r,n,o=[];if(t.data)for(n=(r=t.data).length;n--;){var a=r[n],s=a.getIcon();e._icons.set(s.uid,s,t.key),o.push(a.forWorkerMessage())}i(o)}):i([])})}},{key:"requestSpatialTile",value:function(t){var e=this;return new Promise(function(i,r){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then(function(t){var e,r=[];if(t.getObjects){e=t.getObjects();for(var n=0;n<e.length;n++){var o=e[n];r.push({id:o.getId(),geometries:o.getGeometriesForTile(t),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}i(r)}):i([])})}},{key:"_pointToArray",value:function(t){var e=an.tile_scale/this.tile_size;return[t.x*e,t.y*e]}},{key:"_getGeoJsonMultiPolygon",value:function(t){for(var e=t.geometries,i=e.length,r=[],n={coordinates:r,type:"MultiPolygon"},o=0;o<i;o++){var a=e[o],s=a.paths,l=s.length,u=a.interiorsIndex,c=a.outlinesIndex,h=Math.min(u,c,l),f=void 0,p=void 0;for(p=0;p<h;p++)f=[s[p].map(this._pointToArray,this)],r.push(f);if(1===h)for(h=Math.min(c,l),p=u;p<h;p++)f.push(s[p].map(this._pointToArray,this))}return n}},{key:"_getGeoJsonMultiLineString",value:function(t,e){for(var i=1<arguments.length&&void 0!==e&&e,r={coordinates:[],type:"MultiLineString"},n=t.geometries,o=0;o<n.length;o++)for(var a=n[o],s=i?a.outlinesIndex:0,l=i?a.paths.length:Math.min(a.interiorsIndex,a.outlinesIndex,a.paths.length),u=s;u<l;u++){var c=a.paths[u].map(this._pointToArray,this);r.coordinates.push(c)}return r}},{key:"_getGeoJsonGeometry",value:function(t,e){var i;return(i=e===Nl?this._getGeoJsonMultiPolygon(t):this._getGeoJsonMultiLineString(t,e===zl)).coordinates.length?i:null}},{key:"_load",value:function(t,e){var i=this,r=t.coords;return new Promise(function(n,o){var a=i._loading[r.x+"_"+r.y+"_"+r.z];a||(a=Fr.postMessage(i.target_name+".requestMarkerTile",t.coords).then(i._prepareTileData.bind(i,t)),i._loading[r.x+"_"+r.y+"_"+r.z]=a);var s=new Promise(function(e,r){Fr.postMessage(i.target_name+".requestSpatialTile",t.coords).then(function(r){for(var n=[],o=[],a=[],s=0;s<r.length;s++){var l=r[s],u=void 0,c=void 0;c=l.isClosed?(u=o,Nl):(u=n,Cl);var h=i._getGeoJsonGeometry(l,c);if(h){var f={id:l.id,type:"Feature",properties:{height:0,style:l.style},geometry:h};c===Cl&&(f.properties.effectiveZIdx=n.length),u.push(f)}var p=i._getGeoJsonGeometry(l,zl);p&&a.push({id:l.id,type:"Feature",properties:{height:0,style:l.style,effectiveZIdx:a.length},geometry:p})}t.source_data.layers.polylines={type:"FeatureCollection",features:n},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},e(t)})});Promise.all([a,s]).then(function(){e(t),n(t)})})}},{key:"_prepareTileData",value:function(t,e){var i=t.coords;delete this._loading[i.x+"_"+i.y+"_"+i.z];var r=an.wrapTile(t.coords,{x:!0,y:!0}),n=an.metersForTile(r);t.source_data.layers={markers:{features:e,type:"FeatureCollection"}};var o={coords:r,min:n},a=t.source_data,s=Ml("binary-tree"),l={};for(var u in a.layers)for(var c=a.layers[u].features.length,h=0;h<c;h++){var f=a.layers[u].features[h],p=f.properties.icon;l[p.id]||(s.addItem({width:p.size.w,height:p.size.h,meta:{objectId:f.id,id:p.id}}),l[p.id]=!0),an.transformGeometry(f.geometry,function(t){var e=t[0];t[0]=t[1],t[1]=e})}return t.rasters=s.export(),xo.projectData(t.source_data),xo.scaleData(t.source_data,o),t}}]),t}();xo.register(Dl,"ObjectTileSource");var Fl=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).uid_=e.uid,r}return Ar(t,wa),wr(t,[{key:"initialize",value:function(t,e,i,r){this.provider=t,this._on_update=e,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(t){this._on_update(this.name)}},{key:"tileTexture",value:function(e){return Object.assign(Pr(Tr(t.prototype),"tileTexture",this).call(this,e),{uid:this.uid_,url:this.uid_+"_"+e.coords.key,coords:e.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),t}();wn.register(Fl,"RemoteRasterTileSource");var Bl={type:"FeatureCollection",features:[]},Ul=function(){function t(e,i){return br(this,t),e.tiled=!0,e.url="",Or(this,Tr(t).call(this,e,i))}return Ar(t,xo),wr(t,[{key:"fetchTile",value:function(t,e,i){return this.provider?this.provider.requestTileAsPromise(t,e,i).then(function(t){return t.data}):Promise.resolve(Bl)}},{key:"_load",value:function(t,e){var i=an.wrapTile(t.coords,{x:!0,y:!0}),r={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:an.tile_scale};return Fr.postMessage(this.target_name+".fetchTile",i.x,i.y,i.z).then(function(n){for(var o in t.source_data.layers="FeatureCollection"===n.type?{_default:n}:n,t.source_data.layers){var a=yo(t.source_data.layers[o],r).getTile(i.z,i.x,i.y);t.source_data.layers[o]=Fn(a)}return e(t),t})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),t}();wn.register(Ul,"GeoJSONTileSource");var Gl,Vl={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},Hl=function(){function t(e,i){return br(this,t),e.max_zoom=0,Or(this,Tr(t).call(this,e,i))}return Ar(t,wn),wr(t,[{key:"load",value:function(t){return t.source_data="0/0/0"===t.coords.key?Vl:void 0,Promise.resolve(t)}}]),t}();wn.register(Hl,"SkyBox");var ql=Gl={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_label_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};var Kl,Wl=0,Yl=1;function Xl(t,e){var i={};return e.forEach(function(e){return i[e]=t[e]}),i}var Zl=Kl={},Jl=0;Kl.getContext=function(t,e){var i=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),i=!0);var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("Couldn't create WebGL context.");return r._tangram_id=Jl++,i?(Kl.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",function(){Kl.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio)})):Kl.resize(r,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),r},Kl.resize=function(t,e,i,r){t.canvas.style.width=e+"px",t.canvas.style.height=i+"px",t.canvas.width=Math.round(e*r),t.canvas.height=Math.round(i*r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var Ql={parseUniforms:function(t){var e=[];for(var i in t){var r,n=i,o=t[i];if("number"==typeof o)e.push({type:"float",method:"1f",name:i,value:o,key:n,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:i,value:o,key:n,uniforms:t}):4<o.length&&e.push({type:"float[]",method:"1fv",name:i+"[0]",value:o,key:n,uniforms:t});else if("string"==typeof o[0])for(r=0;r<o.length;r++)e.push({type:"sampler2D",method:"1i",name:i+"["+r+"]",value:o[r],key:r,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(r=0;r<o.length;r++)e.push({type:"vec"+o[0].length,method:o[r].length+"fv",name:i+"["+r+"]",value:o[r],key:r,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:i,value:o,key:n,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:i,value:o,key:n,uniforms:t})}return e},defineVariable:function(t,e){var i,r;if("number"==typeof e)i="float";else if(Array.isArray(e))"number"==typeof e[0]?2<=e.length&&e.length<=4?i="vec"+e.length:(i="float",r=e.length):"string"==typeof e[0]&&(i="sampler2D",r=e.length);else if("boolean"==typeof e)i="bool";else{if("string"!=typeof e)return;i="sampler2D"}var n="";return n+="".concat(i," ").concat(t),r&&(n+="[".concat(r,"]")),n+=";\n"},defineUniform:function(t,e){var i=Ql.defineVariable(t,e);if(i)return"uniform "+i},isUniformDefined:function(t,e){var i=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+t+"\\b","g");return!!e.match(i)},isSymbolReferenced:function(t,e){var i=new RegExp("\\b"+t+"\\b","g");return 0<=e.search(i)},expandVec3:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(2!==t.length)return t;e=[].concat(Ir(t),[i]).map(parseFloat)}else e=[t,t,t].map(parseFloat);if(e&&e.every(function(t){return"number"==typeof t&&!isNaN(t)}))return e},expandVec4:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(3!==t.length)return t;e=[].concat(Ir(t),[i]).map(parseFloat)}else e=[t,t,t,i].map(parseFloat);if(e&&e.every(function(t){return"number"==typeof t&&!isNaN(t)}))return e}},$l=[];function tu(t,e){var i=$l.filter(function(e){return e[0]===t})[0];return(i=i&&i[1])||($l.push([t,{}]),i=$l[$l.length-1][1]),i[e]||(i[e]=t.getExtension(e)),i[e]}function eu(t){var e,i,r=0;if(0===t.length)return r;for(e=0,i=t.length;e<i;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}var iu=a(function(t){var e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",i=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,r=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,n=t.exports=function(t,e){return t?n.block(n.line(t,e),e):""};n.block=function(t,i){i=i||{};var r=new RegExp("\\/\\*"+e,"gm");return i.safe&&(r=new RegExp("\\/\\*(?!\\*?\\!)"+e,"gm")),t?t.replace(r,""):""},n.line=function(t,e){var n=i;return(e=e||{}).safe&&(n=r),t?t.replace(n,""):""}}),ru=function(t){t=String(t);var e,i=[];for(;e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var r=(a=e[1].trim()).split(":"),n=r.slice(2).join(":").trim(),o=parseInt(r[0],10),a=parseInt(r[1],10);i.push({message:n,file:o,line:a})}return i};var nu=/^\s*#pragma.*$/gm,ou=/\\\s*\n/gm,au=function(){function t(e,i,r,n,o){if(br(this,t),o=o||{},this.textureManager=pa(n),this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!t.polyfills[n]){t.polyfills[n]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(e){t.polyfills[n].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(e,i,r){t.polyfills[n].uniformMatrix3fv.call(this,e,i,new Float32Array(r))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(e){t.polyfills[n].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(e,i,r){t.polyfills[n].uniformMatrix4fv.call(this,e,i,new Float32Array(r))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=i,this.fragment_source=r,this.id=t.id++,this.name=o.name}return wr(t,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)}},{key:"compile",value:function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var i,r=this.checkExtensions(),n=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s=o[a];if(s&&(!Array.isArray(s)||0!==s.length)){i=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m");var l=this.computed_vertex_source.match(i),u=this.computed_fragment_source.match(i);if(null!=l||null!=u){var c="";s.forEach(function(t){var e="".concat(t.scope,", ").concat(t.key,", ").concat(t.num);c+="\n// tangram-block-start: ".concat(e,"\n"),c+=t.source,c+="\n// tangram-block-end: ".concat(e,"\n")}),null!=l&&(this.computed_vertex_source=this.computed_vertex_source.replace(i,c)),null!=u&&(this.computed_fragment_source=this.computed_fragment_source.replace(i,c)),n["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0}}}this.computed_vertex_source=this.computed_vertex_source.replace(nu,""),this.computed_fragment_source=this.computed_fragment_source.replace(nu,""),this.ensureUniforms(this.dependent_uniforms);var h="",f=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT);h=f&&0<f.precision?"precision highp float;\n":"precision mediump float;\n",n.TANGRAM_VERTEX_SHADER=!0,n.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=h+t.buildDefineString(n)+this.computed_vertex_source,n.TANGRAM_VERTEX_SHADER=!1,n.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(r)+h+t.buildDefineString(n)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(ou,""),this.computed_fragment_source=this.computed_fragment_source.replace(ou,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(r){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=r).type&&"fragment"!==r.type||(this.shader_errors=r.errors,this.shader_errors.forEach(function(t){t.type=r.type,t.block=e.block(r.type,t.line)})),r}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var e,i={};for(e in t.defines)i[e]=t.defines[e];for(e in this.defines)i[e]=this.defines[e];return i}},{key:"buildShaderBlockList",value:function(){var e,i={};for(e in t.blocks){var r;if(i[e]=[],Array.isArray(t.blocks[e]))(r=i[e]).push.apply(r,Ir(t.blocks[e].map(function(t,i){return{key:e,source:t,num:i,scope:"ShaderProgram"}})));else i[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}]}for(e in this.blocks)if(i[e]=i[e]||[],Array.isArray(this.blocks[e]))for(var n=this.block_scopes&&this.block_scopes[e]||[],o=null,a=0,s=0;s<this.blocks[e].length;s++)n[s]!==o&&(o=n[s],a=0),i[e].push({key:e,source:this.blocks[e][s],num:a,scope:o||this.name}),a++;else i[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return i}},{key:"ensureUniforms",value:function(t){if(t){var e,i=iu(this.computed_vertex_source),r=iu(this.computed_fragment_source),n=[],o=[];for(var a in t){var s=Ql.isUniformDefined(a,i),l=Ql.isUniformDefined(a,r);if(!s||!l){if(!(e=Ql.defineUniform(a,t[a])))continue;s||(Qr("trace","Program ".concat(this.name,": ").concat(a," not defined in vertex shader, injecting: '").concat(e,"'")),n.push(e)),l||(Qr("trace","Program ".concat(this.name,": ").concat(a," not defined in fragment shader, injecting: '").concat(e,"'")),o.push(e))}}0<n.length&&(this.computed_vertex_source=n.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;if(this.compiled){i&&(this.texture_unit=0);for(var r=Ql.parseUniforms(t),n=0;n<r.length;n++){var o=r[n];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(t){var e=t||this.uniforms;for(var i in e){var r=this.uniforms[i];r&&(r.saved_value=r.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(t){var e=t||this.uniforms;for(var i in e){var r=this.uniforms[i];r&&r.saved_value&&(r.value=r.saved_value,this.updateUniform(r))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(t,e){var i=this.textureManager.textures[e];null!=i?(i.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):Qr("warn","Cannot find texture '".concat(e,"'"))}},{key:"uniform",value:function(t,e,i){if(this.compiled){this.uniforms[e]=this.uniforms[e]||{};var r=this.uniforms[e];r.name=e,void 0===r.location&&(r.location=this.gl.getUniformLocation(this.program,e)),r.method=t,r.value=i,this.updateUniform(r)}}},{key:"updateUniform",value:function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))}},{key:"commitUniform",value:function(t){var e=t.location,i=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,i);break;case"1f":this.gl.uniform1f(e,i);break;case"2f":this.gl.uniform2f(e,i[0],i[1]);break;case"3f":this.gl.uniform3f(e,i[0],i[1],i[2]);break;case"4f":this.gl.uniform4f(e,i[0],i[1],i[2],i[3]);break;case"1iv":this.gl.uniform1iv(e,i);break;case"3iv":this.gl.uniform3iv(e,i);break;case"1fv":this.gl.uniform1fv(e,i);break;case"2fv":this.gl.uniform2fv(e,i);break;case"3fv":this.gl.uniform3fv(e,i);break;case"4fv":this.gl.uniform4fv(e,i);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,i);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,i)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location||(e.name=t,e.location=this.gl.getAttribLocation(this.program,t)),e}}},{key:"source",value:function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0}},{key:"lines",value:function(t){var e=this.source(t);return e?e.split("\n"):[]}},{key:"line",value:function(t,e){var i=this.lines(t);if(i)return i[e]}},{key:"block",value:function(t,e){for(var i,r=this.lines(t),n=0;n<e&&n<r.length;n++){var o=r[n],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&1<a.length?i={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<a.length&&(i=null),i&&(i.line=null==i.line?-1:i.line+1,i.source=o)}return i}},{key:"checkExtensions",value:function(){var t=this,e=[];return this.extensions.forEach(function(i){var r=tu(t.gl,i),n="TANGRAM_EXTENSION_".concat(i);t.defines[n]=null!=r,r?e.push(i):Qr("debug","Could not enable extension '".concat(i,"'"))}),e}}]),t}();au.polyfills={},au.id=0,au.current=null,au.defines={},au.blocks={},au.reset=function(){au.programs_by_source={},au.shaders_by_source={}},au.reset(),au.buildDefineString=function(t){var e="";for(var i in t)null!=t[i]&&!1!==t[i]&&("boolean"==typeof t[i]&&!0===t[i]?e+="#define "+i+"\n":"number"==typeof t[i]&&Math.floor(t[i])===t[i]?e+="#define "+i+" "+t[i].toFixed(1)+"\n":e+="#define "+i+" "+t[i]+"\n");return e},au.buildExtensionString=function(t){var e="";return(t=t||[]).forEach(function(t){e+="#ifdef GL_".concat(t,"\n#extension GL_").concat(t," : enable\n#endif\n")}),e},au.addBlock=function(t){var e;au.blocks[t]=au.blocks[t]||[];for(var i=arguments.length,r=new Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];(e=au.blocks[t]).push.apply(e,r)},au.removeBlock=function(t){au.blocks[t]=[]},au.replaceBlock=function(t){au.removeBlock(t);for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];au.addBlock.apply(au,[t].concat(i))},au.updateProgram=function(t,e,i,r){var n=eu(t._tangram_id+"::"+i+"::"+r);if(au.programs_by_source[n])return Qr("trace","Reusing identical source GL program object"),au.programs_by_source[n];var o=au.createShader(t,i,t.VERTEX_SHADER),a=au.createShader(t,r,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var s=t.getAttachedShaders(e),l=0;l<s.length;l++)t.detachShader(e,s[l]);else e=t.createProgram();if(null==o||null==a)return e;if(t.attachShader(e,o),t.attachShader(e,a),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return au.programs_by_source[n]=e;var u=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(t.getProgramParameter(e,t.VALIDATE_STATUS),"\n            ERROR: ").concat(t.getError(),"\n            --- Vertex Shader ---\n            ").concat(i,"\n            --- Fragment Shader ---\n            ").concat(r));throw Object.assign(new Error(u),{type:"program"})};var su={disabled:!(au.createShader=function(t,e,i){var r=eu(t._tangram_id+"::"+e);if(au.shaders_by_source[r])return Qr("trace","Reusing identical source GL shader object"),au.shaders_by_source[r];var n=t.createShader(i);if(t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return au.shaders_by_source[r]=n;var o=i===t.VERTEX_SHADER?"vertex":"fragment",a=t.getShaderInfoLog(n),s=ru(a);throw Object.assign(new Error(a),{type:o,errors:s})}),bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=tu(t,"OES_vertex_array_object")),null!=e?Qr("info","Vertex Array Object extension available"):!0!==this.disabled?Qr("warn","Vertex Array Object extension NOT available"):Qr("warn","Vertex Array Object extension force disabled")},create:function(t,e,i){var r={};r.setup=e,r.teardown=i;var n=tu(t,"OES_vertex_array_object");return null!=n&&(r._vao=n.createVertexArrayOES(),n.bindVertexArrayOES(r._vao)),r.setup(!0),r},getCurrentBinding:function(t){var e=this.bound_vao.filter(function(e){return e[0]===t})[0];return e&&e[1]},setCurrentBinding:function(t,e){var i=this.bound_vao,r=i.filter(function(e){return e[0]===t})[0];null==r?i.push([t,e]):r[1]=e},bind:function(t,e){var i=tu(t,"OES_vertex_array_object");if(null!=e)null!=i&&null!=e._vao?(i.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup(!1);else{var r=this.getCurrentBinding(t);null!=i?i.bindVertexArrayOES(null):null!=r&&"function"==typeof r.teardown&&r.teardown(),this.setCurrentBinding(t,null)}},destroy:function(t,e){var i=tu(t,"OES_vertex_array_object");null!=i&&null!=e&&null!=e._vao&&(i.deleteVertexArrayOES(e._vao),e._vao=null)}},lu=function(){function t(e,i){br(this,t),this._gl=e,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var r=pa(i).create(this._gl,"selection_fbo",{filtering:"nearest"});r.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,r.texture,0);var n=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,n),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,n),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return wr(t,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var e;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(e=this._gl).clearColor.apply(e,Ir(t.defaultColor))}},{key:"getFeatureAt",value:function(e,i,r){var n=i.radius,o=i.top_most_only,a=void 0===o||o;!e||e.x<0||e.y<0||1<e.x||1<e.y?r({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:e,radius:n,top_most_only:a,ttl:a?1:t.MAX_PICKING_TRIES,callback:r})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var t in this._requests){this._requests[t].callback(new Error("cleared")),delete this._requests[t]}this._pending_deep_request=null}},{key:"read",value:function(t){if(this.hasPendingRequests()){var e=this._gl;for(var i in e.bindFramebuffer(e.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,t),this._requests)if(this.processRequest(this._requests[i],t))break;e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(e,i){var r,n,o=this._gl,a=255,s=e.point,l=e.radius;if(l){var u=Math.min(this._fbo_size.width,this._fbo_size.height);n={x:Math.min(Math.ceil(2*l.x*this._fbo_size.width),u),y:Math.min(Math.ceil(2*l.y*this._fbo_size.height),u)}}else l={x:0,y:0},n={x:1,y:1};var c=n.x*n.y*4;if(null==this._pixels||this._pixels.byteLength<c)this._pixels=new Uint8Array(c);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,c);else for(var h=0;h<c;h++)this._pixels[h]=0;o.readPixels(Math.round((s.x-l.x)*this._fbo_size.width),Math.round((1-s.y-l.y)*this._fbo_size.height),n.x,n.y,o.RGBA,o.UNSIGNED_BYTE,this._pixels),e.ttl--;var f=4*(Math.round(n.y/2)*n.x+Math.round(n.x/2)),p=this._pixels.slice(0,4),d=this._pixels[f]+(this._pixels[f+1]<<8)+(this._pixels[f+2]<<16);if(0<d)r=d+(this._pixels[f+3]<<24)>>>0,a=this._pixels[f+3];else for(var y=-1>>>0,g=f=0;g<n.y;g++)for(var v=0;v<n.x;v++,f+=4)if(0<(d=this._pixels[f]+(this._pixels[f+1]<<8)+(this._pixels[f+2]<<16))){var _=(v-n.x/2)*(v-n.x/2)+(g-n.y/2)*(g-n.y/2);_<=y&&(p=this._pixels.slice(f,f+4),r=d+(this._pixels[f+3]<<24)>>>0,a=this._pixels[f+3],y=_)}if(255!==a){var m=this._getFeatureWithKey(r,i);if(e.features||(e.features=[]),!m)return void this._finishRead(e);if(e.features.every(function(t){return t.id!==m.id})&&e.features.push(m),e.ttl)return this._pending_deep_request=e,t._discardColor([p[0]/255,p[1]/255,p[2]/255,p[3]/255]),this._has_dirty_buffer=!0;this._finishRead(e)}else this._finishRead(e)}},{key:"_finishRead",value:function(e){var i=e.features||t.EMPTY_ARRAY;e.top_most_only||(this._pending_deep_request=null,t._resetDiscardedColors()),delete this._requests[e.id],e.callback({features:i})}},{key:"_getFeatureWithKey",value:function(t,e){for(var i=null,r=0;r<e.length;r++){var n=e[r];if(n.selection_data&&(i=n.selection_data[t])){i.tile={coords:n.coords};break}}return i}},{key:"setupDiscards",value:function(e){for(var i=t.MAX_PICKING_TRIES;i--;)e.uniform("4fv","u_selection_discard".concat(i),t._discarded_colors[i]||t.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(t){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var t=255&this.map_entry,e=this.map_entry>>8&255,i=this.map_entry>>16&255,r=this.map_prefix;return{key:t+(e<<8)+(i<<16)+(r<<24)>>>0,color:[t/255,e/255,i/255,r/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(t){this.map_prefix=t}},{key:"_discardColor",value:function(t){this._discarded_colors.push(t)}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),t}();lu._discarded_colors=[],lu.map_entry=0,lu.map_prefix=0,lu.defaultColor=[0,0,0,1],lu.MAX_PICKING_TRIES=10,lu.EMPTY_ARRAY=Object.freeze([]);var uu,cu=function(){function t(e,i,r,n,o,a){br(this,t),a=a||{},this.textureManager=pa(o),this.gl=e,this.vertex_data=i,this.element_data=r,this.vertex_layout=n,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=a.draw_mode||this.gl.TRIANGLES,this.data_usage=a.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=a.uniforms,this.textures=a.textures,this.retain=a.retain||!1,this.created_at=+new Date,this.fade_in_time=a.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return wr(t,[{key:"render",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(!this.valid)return!1;var i=e.program||au.current;i.use(),this.uniforms&&(i.saveUniforms(this.uniforms),i.setUniforms(this.uniforms,!1));var r=(+new Date-this.created_at)/1e3;return i.uniform("1f","u_visible_time",r),this.bind(i),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),su.bind(this.gl,null),this.uniforms&&i.restoreUniforms(this.uniforms),r<this.fade_in_time}},{key:"bind",value:function(t){var e=this,i=this.vaos[t.id];i?su.bind(this.gl,i):this.vaos[t.id]=su.create(this.gl,function(i){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enable(e.gl,t,i)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var t=this;if(!this.valid)return!1;for(var e in this.valid=!1,this.vaos)su.destroy(this.gl,this.vaos[e]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(e){return t.textureManager.release(e)}),!0}}]),t}(),hu=["emission","ambient","diffuse","specular"],fu=function(){function t(e){var i=this;br(this,t),e=e||{},hu.forEach(function(t){var r=e[t];null!=r&&(r.texture?i[t]={texture:r.texture,mapping:r.mapping||"spheremap",scale:Ql.expandVec3(null!=r.scale?r.scale:1),amount:Ql.expandVec4(null!=r.amount?r.amount:1)}:"number"==typeof r||Array.isArray(r)?i[t]={amount:Ql.expandVec4(r)}:i[t]="string"==typeof r?{amount:Zo.parseColor(r)}:r)}),this.specular&&(this.specular.shininess=e.shininess?parseFloat(e.shininess):.2),null!=e.normal&&(this.normal={texture:e.normal.texture,mapping:e.normal.mapping||"triplanar",scale:Ql.expandVec3(null!=e.normal.scale?e.normal.scale:1),amount:null!=e.normal.amount?e.normal.amount:1})}return wr(t,[{key:"inject",value:function(e){var i=this;hu.forEach(function(t){var r="TANGRAM_MATERIAL_".concat(t.toUpperCase()),n=r+"_TEXTURE";e.defines[r]=null!=i[t],i[t]&&i[t].texture&&(e.defines[n]=!0,e.defines[n+"_"+i[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(i[t].mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===i[t].mapping)}),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(t){var e=this;hu.forEach(function(i){e[i]&&(e[i].texture?(t.setTextureUniform("u_material_".concat(i,"_texture"),e[i].texture),t.uniform("3fv","u_material.".concat(i,"Scale"),e[i].scale),t.uniform("4fv","u_material.".concat(i),e[i].amount)):e[i].amount&&t.uniform("4fv","u_material.".concat(i),e[i].amount))}),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)}}]),t}();fu.block="material";var pu=uu={};uu.copy=function(t){for(var e=[],i=t.length,r=0;r<i;r++)e[r]=t[r];return e},uu.neg=function(t){for(var e=[],i=t.length,r=0;r<i;r++)e[r]=-t[r];return e},uu.add=function(t,e){for(var i=[],r=Math.min(t.length,e.length),n=0;n<r;n++)i[n]=t[n]+e[n];return i},uu.sub=function(t,e){for(var i=[],r=Math.min(t.length,e.length),n=0;n<r;n++)i[n]=t[n]-e[n];return i},uu.signed_area=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},uu.mult=function(t,e){var i,r=[],n=t.length;if("number"==typeof e)for(i=0;i<n;i++)r[i]=t[i]*e;else for(n=Math.min(t.length,e.length),i=0;i<n;i++)r[i]=t[i]*e[i];return r},uu.multMatrix=function(t,e){return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]]},uu.div=function(t,e){var i,r=[];if("number"==typeof e)for(i=0;i<t.length;i++)r[i]=t[i]/e;else{var n=Math.min(t.length,e.length);for(i=0;i<n;i++)r[i]=t[i]/e[i]}return r},uu.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},uu.rot=function(t,e){var i=Math.cos(e),r=Math.sin(e);return[t[0]*i-t[1]*r,t[0]*r+t[1]*i]},uu.angle=function(t){var e=Lr(t,2),i=e[0],r=e[1];return Math.atan2(r,i)},uu.angleBetween=function(t,e){var i=uu.dot(uu.normalize(uu.copy(t)),uu.normalize(uu.copy(e)));return 1<i&&(i=1),Math.acos(i)},uu.signedAngleBetween=function(t,e){return Math.atan2(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])},uu.isEqual=function(t,e){for(var i=t.length,r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0},uu.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:3<=t.length?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},uu.length=function(t){return Math.sqrt(uu.lengthSq(t))},uu.normalize=function(t){var e;if(2===t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(3<=t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},uu.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},uu.dot=function(t,e){for(var i=0,r=Math.min(t.length,e.length),n=0;n<r;n++)i+=t[n]*e[n];return i};var du=function(){function t(e,i){br(this,t),this.name=i.name,this.view=e,null==i.ambient||"number"==typeof i.ambient?this.ambient=Ql.expandVec3(i.ambient||0):this.ambient=Zo.parseColor(i.ambient).slice(0,3),null==i.diffuse||"number"==typeof i.diffuse?this.diffuse=Ql.expandVec3(null!=i.diffuse?i.diffuse:1):this.diffuse=Zo.parseColor(i.diffuse).slice(0,3),null==i.specular||"number"==typeof i.specular?this.specular=Ql.expandVec3(i.specular||0):this.specular=Zo.parseColor(i.specular).slice(0,3)}return wr(t,[{key:"inject",value:function(){var e="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),i="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");au.addBlock(t.block,e),au.addBlock("setup",i)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),t.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),t.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(e,i){if(t.types[i.type])return new t.types[i.type](e,i)}},{key:"setMode",value:function(e,i){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),i.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,i.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e}},{key:"inject",value:function(e){if(au.removeBlock(t.block),t.enabled){var i="";if(e&&0<Object.keys(e).length){var r={};for(var n in e)r[e[n].type]=!0;for(var o in r)t.types[o].inject();for(var a in e)e[a].inject(),i+="calculateLight(".concat(a,", _eyeToPoint, _normal);\n")}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(i,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");au.addBlock(t.block,s)}}}]),t}();du.types={},du.block="lighting",du.enabled=!0;var yu=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).type="ambient",r.struct_name="AmbientLight",r}return Ar(t,du),wr(t,[{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){au.addBlock(du.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),t}();du.types.ambient=yu;var gu=function(){function t(e,i){var r;if(br(this,t),(r=Or(this,Tr(t).call(this,e,i))).type="directional",r.struct_name="DirectionalLight",i.direction)r._direction=i.direction;else{var n=Math.sin(60*Math.PI/180);r._direction=[Math.cos(135*Math.PI/180)*n,Math.sin(135*Math.PI/180)*n,-.5]}return null==i.ambient&&(r.ambient=Ql.expandVec3(.5)),r.direction=r._direction.map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r}return Ar(t,du),wr(t,[{key:"update",value:function(){ya.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(e){Pr(Tr(t.prototype),"setupProgram",this).call(this,e),e.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=pu.normalize(pu.copy(t))}}],[{key:"inject",value:function(){au.addBlock(du.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),t}();du.types.directional=gu;var vu=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).type="point",r.struct_name="PointLight",r.position=i.position||[0,0,"100px"],r.position_eye=[],r.origin=i.origin||"ground",r.attenuation=isNaN(parseFloat(i.attenuation))?0:parseFloat(i.attenuation),i.radius?Array.isArray(i.radius)&&2===i.radius.length?r.radius=i.radius:r.radius=[null,i.radius]:r.radius=null,r}return Ar(t,du),wr(t,[{key:"inject",value:function(){Pr(Tr(t.prototype),"inject",this).call(this),au.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,au.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],au.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var t=this.view.lookAtManipulator.getLookAtData().zoom;if("world"===this.origin){var e=Lr(an.latLngToMeters(this.position),2),i=e[0],r=e[1];this.position_eye[0]=i-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=r-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=Zo.convertUnits(this.position[2],{zoom:t,meters_per_pixel:an.metersPerPixel(t)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance}else"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=Zo.convertUnits(this.position,{zoom:t,meters_per_pixel:an.metersPerPixel(t)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance));this.position_eye[3]=1}},{key:"setupProgram",value:function(e){Pr(Tr(t.prototype),"setupProgram",this).call(this,e),e.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),au.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&e.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var i=this.view.lookAtManipulator.getLookAtData().zoom;au.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&e.uniform("1f","u_".concat(this.name,".innerRadius"),Zo.convertUnits(this.radius[0],{zoom:i,meters_per_pixel:an.metersPerPixel(i)})),au.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&e.uniform("1f","u_".concat(this.name,".outerRadius"),Zo.convertUnits(this.radius[1],{zoom:i,meters_per_pixel:an.metersPerPixel(i)}))}}],[{key:"inject",value:function(){au.addBlock(du.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),t}();du.types.point=vu;var _u=function(){function t(e,i){var r;return br(this,t),(r=Or(this,Tr(t).call(this,e,i))).type="spotlight",r.struct_name="SpotLight",r.direction=r._direction=(i.direction||[0,0,-1]).map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r.exponent=i.exponent?parseFloat(i.exponent):.2,r.angle=i.angle?parseFloat(i.angle):20,r}return Ar(t,vu),wr(t,[{key:"setupProgram",value:function(e){Pr(Tr(t.prototype),"setupProgram",this).call(this,e),e.uniform("3fv","u_".concat(this.name,".direction"),this.direction),e.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),e.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){Pr(Tr(t.prototype),"update",this).call(this),ya.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=pu.normalize(pu.copy(t))}}],[{key:"inject",value:function(){au.addBlock(du.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),t}();du.types.spotlight=_u;var mu,bu="\n#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_rasters[TANGRAM_NUM_RASTER_SOURCES];uniform vec2 u_raster_sizes[TANGRAM_NUM_RASTER_SOURCES];uniform vec3 u_raster_offsets[TANGRAM_NUM_RASTER_SOURCES];\n#define adjustRasterUV(raster_index, uv) ((uv) * u_raster_offsets[raster_index].z + u_raster_offsets[raster_index].xy)\n#define currentRasterUV(raster_index) (adjustRasterUV(raster_index, v_modelpos_base_zoom.xy))\n#define currentRasterPixel(raster_index) (currentRasterUV(raster_index) * rasterPixelSize(raster_index))\n#define sampleRaster(raster_index) (texture2D(u_rasters[raster_index], currentRasterUV(raster_index)))\n#define sampleRasterAtPixel(raster_index, pixel) (texture2D(u_rasters[raster_index], adjustRasterUV(raster_index, (pixel) / rasterPixelSize(raster_index))))\n#define rasterPixelSize(raster_index) (u_raster_sizes[raster_index])\n#endif\n",xu={init:function(t){var e=0<arguments.length&&void 0!==t?t:{},i=e.generation,r=e.styles,n=e.sources,o=void 0===n?{}:n,a=e.introspection,s=e.id,l=void 0!==s?s+"/":"";this.scene_id=s,this.textureManager=pa(s),this.main_thread_target="".concat(l,"Style/").concat(this.name),this.setGeneration(i),this.styles=r,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof fu||(fu.isValid(this.material)||(this.material=Zo.defaults.material),this.material=new fu(this.material)),this.material.inject(this),du.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),Fr.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,Dr.is_main&&Fr.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(t,e,i,r){var n=r.size,o=r.offset;o=void 0===o?0:o;var a=t.index[e];if(void 0!==a)for(var s=0;s<n;++s){var l=i.length>s?i[s]:i;this.vertex_template[a+s+o]=l}else Qr("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(e,"'"))},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){var e=this.tile_data[t.id];if(this.tile_data[t.id]=null,e&&0<Object.keys(e.meshes).length){for(var i in e.meshes){var r=e.meshes[i];0!==r.vertex_data.vertex_count?(r.vertex_data.end(),r.vertex_elements=r.vertex_data.element_buffer,r.vertex_data=r.vertex_data.vertex_buffer):delete e.meshes[i]}return t.mesh_data[this.name]=e,this.buildRasterTextures(t,e).then(function(t){return t})}return Promise.resolve(null)},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var i=this.tile_data[t.id].meshes;return null==i[e.key]&&(i[e.key]={variant:e,vertex_data:this.vertexLayoutForMeshVariant(e).createVertexData()}),i[e.key]},vertexLayoutForMeshVariant:function(t){return this.vertex_layout},default_mesh_variant:{key:0},meshVariantTypeForDraw:function(t){return this.default_mesh_variant},addFeature:function(t,e,i){var r=i.tile;this.tile_data[r.id]||this.startData(r);var n=this.parseFeature(t,e,i);if(n){var o=this.getTileMesh(r,this.meshVariantTypeForDraw(n)),a=o.vertex_data.offset,s=o.vertex_data.vertex_count;0<this.buildGeometry(t.geometry,n,o,i)?t.generation=this.generation:o.vertex_data.vertex_count>s&&(o.vertex_data.vertex_buffer.fill(0,a,o.vertex_data.offset),o.vertex_data.vertex_count=s,o.vertex_data.offset=a)}},buildGeometry:function(t,e,i,r){var n;return"Polygon"===t.type?n=this.buildPolygons([t.coordinates],e,i,r):"MultiPolygon"===t.type?n=this.buildPolygons(t.coordinates,e,i,r):"LineString"===t.type?n=this.buildLines([t.coordinates],e,i,r):"MultiLineString"===t.type?n=this.buildLines(t.coordinates,e,i,r):"Point"===t.type?n=this.buildPoints([t.coordinates],e,i,r):"MultiPoint"===t.type&&(n=this.buildPoints(t.coordinates,e,i,r)),n},parseFeature:function(t,e,i){try{var r=this.feature_style;if(r.order=this.parseOrder(e.order,i),null==r.order&&"overlay"!==this.blend){var n="Layer '".concat(e.layers.join(", "),"', draw group '").concat(e.group,"': ");return n+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(n+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",n+="or JS function), but evaluated to null for one or more features"),void Qr({level:"warn",once:!0},n)}if(!(r=this._parseFeature(t,e,i)))return;if(this.selection?r.interactive=Zo.evalProperty(this.introspection||e.interactive,i):r.interactive=!1,!0===r.interactive){var o=lu.makeEntry(),a=o.color,s=o.key;r.selection_color=a,i.tile.selection_data||(i.tile.selection_data={}),i.tile.selection_data[s]={id:t.id||s,properties:t.properties,source_name:i.source,source_layer:i.layer,layers:i.layers}}else r.selection_color=lu.defaultColor;return r}catch(e){Qr("error","Style.parseFeature: style parsing error",t,r,e.stack)}},_parseFeature:function(t,e,i){return this.feature_style},preprocess:function(t,e){if(!t.preprocessed){if(this.draw)for(var i in this.draw){var r=this.draw[i];"object"!==mr(r)||Array.isArray(r)?null==t[i]&&(t[i]=r):t[i]=Rl({},r,t[i])}var n=e||"";if(!(t=this._preprocess(t,n)))return;t.preprocessed=!0}return t},_preprocess:function(t,e){return t},parseOrder:function(t,e){return"number"!=typeof t?Zo.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?Zo.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?Zo.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{},n=this.vertexLayoutForMeshVariant(r.variant);return new cu(this.gl,t,e,n,this.scene_id,r)},render:function(t){return t.render()},getProgram:function(t){var e=0<arguments.length&&void 0!==t?t:"program";this.compileSetup();var i=this[e];if(i&&!i.error){if(!i.compiled)try{i.compile()}catch(t){Qr("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,t.stack)}return i}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var t=this.buildDefineList();if(this.selection){var e=Object.assign({},t);e.TANGRAM_FEATURE_SELECTION=!0}var i=this.shaders&&this.shaders.blocks,r=this.shaders&&this.shaders.block_scopes,n=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in n)null==n[o]&&Qr({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new au(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:t,uniforms:n,blocks:i,block_scopes:r,extensions:a}),this.selection?this.selection_program=new au(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:e,uniforms:n,blocks:i,block_scopes:r,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(r)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null)},replaceShaderBlock:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:null;this.removeShaderBlock(t),this.addShaderBlock(t,e,r)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){var t=this;if(this.hasRasters()){"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=Object.keys(this.sources).filter(function(e){return t.sources[e]instanceof wa}).length;this.defines.TANGRAM_NUM_RASTER_SOURCES="".concat(e),0<e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",bu,"Raster"))}},buildRasterTextures:function(t,e){var i=this;if(!this.hasRasters())return Promise.resolve(e);var r={},n={};return t.rasters.map(function(t){return i.sources[t]}).filter(function(t){return t}).forEach(function(e,i){if(e instanceof wa){var o=e.tileTexture(t);r[o.url]=o,n[o.url]=i}}),0===Object.keys(r).length?Promise.resolve(e):Fr.postMessage(this.main_thread_target+".loadTextures",r).then(function(i){if(!i||i.length<1)return Qr("trace","Missing texture info for tile ".concat(t.key)),null;if(i.some(function(t){return!t.loaded}))return null;e.uniforms=e.uniforms||{},e.textures=e.textures||[];var o=e.uniforms.u_rasters=[],a=e.uniforms.u_raster_sizes=[],s=e.uniforms.u_raster_offsets=[];return i.forEach(function(i){var l=n[i.name],u=r[i.name].coords;if(o[l]=i.name,e.textures.push(i.name),a[l]=[i.width,i.height],t.coords.z>u.z){var c=t.coords.z-u.z,h=Math.pow(2,c);s[l]=[(t.coords.x%h+h)%h/h,(h-1-t.coords.y%h)/h,1/h]}else s[l]=[0,0,1]}),e})},loadTextures:function(t){var e=this;return this.textureManager.createFromObject(this.gl,t).then(function(){return Promise.all(Object.keys(t).map(function(t){return e.textureManager.textures[t]&&e.textureManager.textures[t].load()}).filter(function(t){return t}))}).then(function(t){return t.forEach(function(t){return t.retain()}),t.map(function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(au.current)},setUniforms:function(){var t=au.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(t){var e=[],i={};for(var r in t.forEach(function(t){var e=parseInt(t.name,10)||0;i[e]||(i[e]=[]),i[e].push(t)}),i)e.push.apply(e,Ir(i[r].sort(xu.blendOrderSort)));return e},blendOrderSort:function(t,e){return"opaque"===t.blend||"opaque"===e.blend?"opaque"===t.blend&&"opaque"===e.blend?t.name<e.name?-1:1:"opaque"===t.blend?-1:1:t.blend_order<e.blend_order?-1:t.blend_order>e.blend_order?1:xu.default_blend_orders[t.blend]<xu.default_blend_orders[e.blend]?-1:xu.default_blend_orders[t.blend]>xu.default_blend_orders[e.blend]?1:t.name<e.name?-1:1}},wu=mu={};mu.BYTE=5120,mu.UNSIGNED_BYTE=5121,mu.SHORT=5122,mu.UNSIGNED_SHORT=5123,mu.INT=5124,mu.UNSIGNED_INT=5125,mu.FLOAT=5126;var ku,Au=Math.pow(2,16)-1,Tu=!1,Eu=function(){function t(e){br(this,t),this.size_=e||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return wr(t,[{key:"push",value:function(t){if(!this.overflows_||Tu){if(Au<t){if(this.overflows_=!0,!Tu)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=t,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var t=this.buffer_,e=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,t.subarray(0,e)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var t=new this.ArrayType_(this.size_);t.set(this.buffer_),this.buffer_=t}}]),t}();Eu.setElementIndexUint=function(t){Tu=t};var Mu=(kr(ku={},wu.FLOAT,Float32Array),kr(ku,wu.BYTE,Int8Array),kr(ku,wu.UNSIGNED_BYTE,Uint8Array),kr(ku,wu.INT,Int32Array),kr(ku,wu.UNSIGNED_INT,Uint32Array),kr(ku,wu.SHORT,Int16Array),kr(ku,wu.UNSIGNED_SHORT,Uint16Array),ku),Ru=function(){function t(e){var i=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,r=void 0===i?500:i;br(this,t),this.vertex_layout=e,this.vertex_elements=new Eu,this.stride=this.vertex_layout.stride,0<t.array_pool.length?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),Qr("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=r,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return wr(t,[{key:"setBufferViews",value:function(){var t=this;this.views={},this.views[wu.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(e){if(null==t.views[e.type]){var i=Mu[e.type];t.views[e.type]=new i(t.vertex_buffer.buffer)}})}},{key:"checkBufferSize",value:function(){if(this.offset+this.stride>this.byte_length){this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size;var e=new Uint8Array(this.byte_length);e.set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++}}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),Qr("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),t}();Ru.array_pool=[];var Su=function(){function t(e){br(this,t),this.attribs=e,this.dynamic_attribs=this.attribs.filter(function(t){return!t.static}),this.components=[],this.index={},this.offset={};for(var i=this.stride=0,r=0,n=0;n<this.attribs.length;n++){var o=this.attribs[n];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var a=0;switch(o.type){case wu.FLOAT:case wu.INT:case wu.UNSIGNED_INT:o.byte_size*=4,a=2;break;case wu.SHORT:case wu.UNSIGNED_SHORT:o.byte_size*=2,a=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var s=o.offset>>a,l=0;l<o.size;l++)this.components.push({type:o.type,shift:a,offset:s++,index:r++});this.index[o.name]=i,i+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return wr(t,[{key:"enable",value:function(e,i,r){for(var n,o,a=0;a<this.attribs.length;a++)n=this.attribs[a],-1!==(o=i.attribute(n.name).location)&&(null==n.static?(t.enabled_attribs[o]&&!r||e.enableVertexAttribArray(o),e.vertexAttribPointer(o,n.size,n.type,n.normalized,this.stride,n.offset),t.enabled_attribs[o]=i):e[n.method]instanceof Function&&(e.enableVertexAttribArray(o),e[n.method](o,n.static),e.disableVertexAttribArray(o),delete t.enabled_attribs[o]));for(o in t.enabled_attribs)this.disableUnusedAttribute(e,o,i)}},{key:"disableUnusedAttribute",value:function(e,i,r){t.enabled_attribs[i]!==r&&(e.disableVertexAttribArray(i),delete t.enabled_attribs[i])}},{key:"createVertexData",value:function(){return new Ru(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var e=eu(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var i,r=["var t, o;"],n=Ir(this.components);n.sort(function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index});for(var o=0;o<n.length;o++){var a=n[o];i!==a.type&&(r.push("t = vs[".concat(a.type,"];")),r.push("o = off".concat(a.shift?" >> "+a.shift:"",";")),i=a.type),r.push("t[o + ".concat(a.offset,"] = v[").concat(a.index,"];"))}r=r.join("\n");var s=new Function("v","vs","off",r);t.add_vertex_funcs[e]=s}this.addVertex=t.add_vertex_funcs[e]}}]),t}();Su.enabled_attribs={},Su.add_vertex_funcs={};var Ou=[{x:0,y:0},{x:an.tile_scale,y:-an.tile_scale}],Pu=[0,0,1,1];function Lu(t,e,i){var r=Ou[0],n=Ou[1];return t[0]<=r.x+i&&e[0]<=r.x+i||t[0]>=n.x-i&&e[0]>=n.x-i||t[1]>=r.y-i&&e[1]>=r.y-i||t[1]<=n.y+i&&e[1]<=n.y+i}function Iu(t,e){e=e||0;var i=Ou[0],r=Ou[1];return t[0]<=i.x+e||t[0]>=r.x-e||t[1]>=i.y-e||t[1]<=r.y+e}var Nu=Cu;function Cu(t,e,i){i=i||2;var r,n,o,a,s,l,u,c=e&&e.length,h=c?e[0]*i:t.length,f=zu(t,0,h,i,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,i,r){var n,o,a,s,l,u=[];for(n=0,o=e.length;n<o;n++)a=e[n]*r,s=n<o-1?e[n+1]*r:t.length,(l=zu(t,a,s,r,!1))===l.next&&(l.steiner=!0),u.push(Ku(l));for(u.sort(Vu),n=0;n<u.length;n++)Hu(u[n],i),i=ju(i,i.next);return i}(t,e,f,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var d=i;d<h;d+=i)(s=t[d])<r&&(r=s),(l=t[d+1])<n&&(n=l),o<s&&(o=s),a<l&&(a=l);u=Math.max(o-r,a-n)}return Du(f,p,i,r,n,u),p}function zu(t,e,i,r,n){var o,a;if(n===0<ic(t,e,i,r))for(o=e;o<i;o+=r)a=$u(o,t[o],t[o+1],a);else for(o=i-r;e<=o;o-=r)a=$u(o,t[o],t[o+1],a);return a&&Xu(a,a.next)&&(tc(a),a=a.next),a}function ju(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Xu(r,r.next)&&0!==Yu(r.prev,r,r.next))r=r.next;else{if(tc(r),(r=e=r.prev)===r.next)return null;i=!0}}while(i||r!==e);return e}function Du(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){var n=t;for(;null===n.z&&(n.z=qu(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,l,u=1;do{for(i=t,o=t=null,a=0;i;){for(a++,r=i,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;0<s||0<l&&r;)0===s?(r=(n=r).nextZ,l--):0!==l&&r?i.z<=r.z?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,l--):(i=(n=i).nextZ,s--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(1<a)}(n)}(t,r,n,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Bu(t,r,n,o):Fu(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),tc(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?Du(t=Uu(t,e,i),e,i,r,n,o,2):2===a&&Gu(t,e,i,r,n,o):Du(ju(t),e,i,r,n,o,1);break}}}function Fu(t){var e=t.prev,i=t,r=t.next;if(0<=Yu(e,i,r))return!1;for(var n=t.next.next;n!==t.prev;){if(Wu(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=Yu(n.prev,n,n.next))return!1;n=n.next}return!0}function Bu(t,e,i,r){var n=t.prev,o=t,a=t.next;if(0<=Yu(n,o,a))return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,l=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,u=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,h=qu(s,l,e,i,r),f=qu(u,c,e,i,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Wu(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=Yu(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Wu(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=Yu(p.prev,p,p.next))return!1;p=p.prevZ}return!0}function Uu(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!Xu(n,o)&&Zu(n,r,r.next,o)&&Ju(n,o)&&Ju(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),tc(r),tc(r.next),r=t=o),r=r.next}while(r!==t);return r}function Gu(t,e,i,r,n,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Zu(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(a,s)&&Ju(a,s)&&Ju(s,a)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;i.y>o!=i.next.y>o&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(a,s))){var c=Qu(l,u);return l=ju(l,l.next),c=ju(c,c.next),Du(l,e,i,r,n,o),void Du(c,e,i,r,n,o)}u=u.next}l=l.next}while(l!==t)}function Vu(t,e){return t.x-e.x}function Hu(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&a<s){if((a=s)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i.prev;var l,u=i,c=i.x,h=i.y,f=1/0;r=i.next;for(;r!==u;)n>=r.x&&r.x>=c&&Wu(o<h?n:a,o,c,h,o<h?a:n,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(n-r.x))<f||l===f&&r.x>i.x)&&Ju(r,t)&&(i=r,f=l),r=r.next;return i}(t,e)){var i=Qu(e,t);ju(i,i.next)}}function qu(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ku(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i}function Wu(t,e,i,r,n,o,a,s){return 0<=(n-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(n-a)*(r-s)}function Yu(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Xu(t,e){return t.x===e.x&&t.y===e.y}function Zu(t,e,i,r){return!!(Xu(t,e)&&Xu(i,r)||Xu(t,r)&&Xu(i,e))||0<Yu(t,e,i)!=0<Yu(t,e,r)&&0<Yu(i,r,t)!=0<Yu(i,r,e)}function Ju(t,e){return Yu(t.prev,t,t.next)<0?0<=Yu(t,e,t.next)&&0<=Yu(t,t.prev,e):Yu(t,e,t.prev)<0||Yu(t,t.next,e)<0}function Qu(t,e){var i=new ec(t.i,t.x,t.y),r=new ec(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function $u(t,e,i,r){var n=new ec(t,e,i);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function tc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ec(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ic(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}Cu.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(ic(t,0,o,i));if(n)for(var s=0,l=e.length;s<l;s++){var u=e[s]*i,c=s<l-1?e[s+1]*i:t.length;a-=Math.abs(ic(t,u,c,i))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*i,p=r[s+1]*i,d=r[s+2]*i;h+=Math.abs((t[f]-t[d])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+d]-t[1+f]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Cu.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);0<n&&(r+=t[n-1].length,i.holes.push(r))}return i};var rc=[0,0,1];function nc(t,e,i,r){var n=r.texcoord_index,o=r.texcoord_scale,a=r.texcoord_normalize,s=e.vertex_elements;if(n){a=a||1;var l=Lr(o||Pu,4),u=l[0],c=l[1],h=l[2],f=l[3]}for(var p,d=0,y=t.length,g=0;g<y;g++){var v=e.vertex_count,_=t[g];if(n)var m=Lr(an.findBoundingBox(_),4),b=m[0],x=m[1],w=(h-u)/(m[2]-b),k=(f-c)/(m[3]-x);for(var A=0;A<_.length;A++)for(var T=_[A],E=0;E<T.length;E++){var M=T[E];i[0]=M[0],i[1]=M[1],n&&(i[n+0]=((M[0]-b)*w+u)*a,i[n+1]=((M[1]-x)*k+c)*a),e.addVertex(i)}for(var R=(p=Nu.flatten(_),Nu(p.vertices,p.holes,p.dimensions)),S=0;S<R.length;S++)s.push(v+R[S]);d+=R.length/3}return d}var oc="uniform vec2 u_resolution;uniform float u_time;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",ac="uniform vec2 u_resolution;uniform float u_time;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster(0);\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster(0).rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",sc=Object.create(xu);Object.assign(sc,{name:"polygons",built_in:!0,vertex_shader_src:oc,fragment_shader_src:ac,selection:!0,init:function(){xu.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(t){if(!this.vertex_layout){var e=[{name:"a_position",size:4,type:wu.SHORT,normalized:!1},{name:"a_normal",size:3,type:wu.BYTE,normalized:!0},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0}];this.texcoords&&e.push({name:"a_texcoord",size:2,type:wu.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new Su(e)}return this.vertex_layout},_parseFeature:function(t,e,i){var r=this.feature_style;return r.color=this.parseColor(e.color,i),r.color?(r.z=e.z&&Zo.evalCachedDistanceProperty(e.z,i)||Zo.defaults.z,r.z*=an.height_scale,r.extrude=Zo.evalProperty(e.extrude,i),r.extrude&&(!0===r.extrude?(r.height=void 0!==t.properties.height?t.properties.height:Zo.defaults.height,r.min_height=void 0!==t.properties.min_height?t.properties.min_height:Zo.defaults.min_height):"number"==typeof r.extrude?(r.height=r.extrude,r.min_height=0):Array.isArray(r.extrude)&&(r.min_height=r.extrude[0],r.height=r.extrude[1]),r.height*=an.height_scale,r.min_height*=an.height_scale),r.tile_edges=e.tile_edges,r):null},_preprocess:function(t){return t.color=Zo.createColorPropertyCache(t.color),t.z=Zo.createPropertyCache(t.z,Zo.parseUnits),t},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=127,this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.texcoords&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildPolygons:function(t,e,i,r){var n=this.makeVertexTemplate(e),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:an.tile_scale*r.tile.pad_scale*4,winding:r.winding};return e.extrude&&e.height?function(t,e,i,r,n,o,a,s,l){var u=l.remove_tile_edges,c=l.tile_edge_tolerance,h=l.texcoord_index,f=l.texcoord_scale,p=l.texcoord_normalize,d=l.winding,y=e+(r||0),g=e+i;o[2]=g;var v=nc(t,n,o,{texcoord_index:h,texcoord_scale:f,texcoord_normalize:p}),_=n.vertex_elements,m=n.vertex_count;if(h){p=p||1;var b=Lr(f||Pu,4),x=b[0],w=b[1],k=b[2],A=b[3],T=[[x,A],[x,w],[k,w],[k,A]]}for(var E=t.length,M=0;M<E;M++)for(var R=t[M],S=0;S<R.length;S++)for(var O=R[S],P=0;P<O.length-1;P++)if(!u||!Lu(O[P],O[P+1],c)){var L=void 0,I=void 0,N=[[O[I="CCW"===d?(L=P)+1:(L=P+1,P)][0],O[I][1],g],[O[I][0],O[I][1],y],[O[L][0],O[L][1],y],[O[L][0],O[L][1],g]],C=pu.normalize([O[I][0]-O[L][0],O[I][1]-O[L][1],0]),z=pu.cross(rc,C);o[a+0]=z[0]*s,o[a+1]=z[1]*s,o[a+2]=z[2]*s;for(var j=0;j<N.length;j++)o[0]=N[j][0],o[1]=N[j][1],o[2]=N[j][2],h&&(o[h+0]=T[j][0]*p,o[h+1]=T[j][1]*p),n.addVertex(o);_.push(m+0),_.push(m+1),_.push(m+2),_.push(m+2),_.push(m+3),_.push(m+0),m+=4,v+=2}return v}(t,e.z,e.height,e.min_height,i.vertex_data,n,this.vertex_layout.index.a_normal,127,o):nc(t,i.vertex_data,n,o)}});var lc=[0,0],uc={butt:0,square:1,round:2},cc={miter:0,bevel:1,round:2},hc={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},fc=an.tile_scale,pc=[0,0],dc=[1,0],yc=[.5,0];function gc(t,e){if(!(t.length<2)){var i,r,n,o,a=e.join_type,s=e.cap_type,l=e.closed_polygon,u=e.remove_tile_edges,c=e.tile_edge_tolerance,h=e.v_scale,f=e.miter_len_sq,p=e.crop_by_tile,d=null!=e.texcoord_index,y=0;if(l&&a===cc.miter){var g=function(t){if(Iu(t[0]))return 0;for(var e=0;e<t.length;e++){if(Iu(t[t.length-1-e]))return t.length-1-e}return 0}(t);if(0!==g){var v=function(t,e){for(var i=[],r=0;r<t.length;r++){var n=(r+e)%t.length;0!=n&&i.push(t[n])}return i.push(i[0]),i}(t,g);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(v)}}var _=0,m=t.length-1,b=0;for(i=t[_],r=t[_+1];pu.isEqual(i,r);)if(i=r,r=t[++_+1],b++,_===t.length-1)return;for(;pu.isEqual(t[m],t[m-1]);)if(b++,0===--m)return;if(!(t.length<2+b))if(o=pu.normalize(pu.perp(i,r)),u&&Lu(i,r,c)){var x=vc(t,_,c);x&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(x))}else{l?function(t,e,i,r,n){if(void 0===r||Iu(t)&&!n.crop_by_tile)wc(t,i,i,1,0,n,1),wc(t,i,i,0,0,n,-1);else{r===cc.miter?mc(0,t,e,i,n.miter_len_sq,!0,n):bc(r,0,t,e,i,!0,n)}}(i,n=pu.normalize(pu.perp(t[m-1],i)),o,a,e):(!p&&Iu(i)||(Tc(i,y,o,s,!0,e),d&&s!==uc.butt&&(y+=.5*h*e.texcoord_width)),wc(i,o,o,1,y,e,1),wc(i,o,o,0,y,e,-1)),d&&(y+=h*pu.length(pu.sub(r,i)));for(var w=_+1;w<m;w++){var k=w,A=w+1;if(i=t[k],r=t[A],!pu.isEqual(i,r)){if(u&&Lu(i,r,c)){wc(i,o,o,1,y,e,1),wc(i,o,o,0,y,e,-1),xc(1,e);var T=vc(t,k+1,c);return void(T&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(T)))}n=o,o=pu.normalize(pu.perp(i,r)),a===cc.miter?mc(y,i,n,o,f,!1,e):bc(a,y,i,n,o,!1,e),d&&(y+=h*pu.length(pu.sub(r,i)))}}i=r,n=o,l?function(t,e,i,r,n,o){if(Iu(t)&&!o.crop_by_tile)wc(t,e,e,1,n,o,1),wc(t,e,e,0,n,o,-1),xc(1,o);else{var a=_c(e,i);r===cc.miter&&pu.lengthSq(a)>o.miter_len_sq&&(r=cc.bevel),r===cc.miter?(wc(t,a,e,1,n,o,1),wc(t,a,e,0,n,o,-1)):(wc(t,e,e,1,n,o,1),wc(t,e,e,0,n,o,-1)),xc(1,o)}}(i,n,o=pu.normalize(pu.perp(i,t[1])),a,y,e):(wc(i,n,o,1,y,e,1),wc(i,n,o,0,y,e,-1),xc(1,e),!p&&Iu(i)||Tc(i,y,n,s,!1,e))}}}function vc(t,e,i){for(var r=e;t[r+1]&&Lu(t[r],t[r+1],i);)r++;return 2<=t.length-r&&t.slice(r)}function _c(t,e){var i=pu.normalize(pu.add(t,e)),r=2/(1+Math.abs(pu.dot(t,i)));return pu.mult(i,r*r)}function mc(t,e,i,r,n,o,a){var s=_c(i,r);pu.lengthSq(s)>n?bc(cc.bevel,t,e,i,r,o,a):(wc(e,s,s,1,t,a,1),wc(e,s,s,0,t,a,-1),o||xc(1,a))}function bc(t,e,i,r,n,o,a){var s=_c(r,n),l=0<n[0]*r[1]-n[1]*r[0];null!=a.texcoord_index&&(pc[1]=e,dc[1]=e),l?(wc(i,s,s,1,e,a,1),wc(i,r,s,0,e,a,-1),o||xc(1,a),Ac(i,pu.neg(r),s,pu.neg(n),s,pc,dc,pc,!1,t===cc.bevel,a),wc(i,s,s,1,e,a,1),wc(i,n,s,0,e,a,-1)):(wc(i,r,s,1,e,a,1),wc(i,s,s,0,e,a,-1),o||xc(1,a),Ac(i,r,pu.neg(s),n,s,dc,pc,dc,!1,t===cc.bevel,a),wc(i,n,s,1,e,a,1),wc(i,s,s,0,e,a,-1))}function xc(t,e){for(var i=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-2*t-2,n=0;n<t;n++)i.push(r+2*n+2),i.push(r+2*n+1),i.push(r+2*n+0),i.push(r+2*n+2),i.push(r+2*n+3),i.push(r+2*n+1),e.geom_count+=2}function wc(t,e,i,r,n,o,a){var s=o.vertex_template,l=o.vertex_data;s[0]=t[0],s[1]=t[1];var u=o.half_width*a;s[o.extrude_index+0]=e[0]*u,s[o.extrude_index+1]=e[1]*u,o.offset&&(s[o.offset_index+0]=i[0]*o.offset,s[o.offset_index+1]=i[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=r*o.texcoord_normalize,s[o.texcoord_index+1]=n*o.texcoord_normalize),l.addVertex(s)}var kc=[0,0];function Ac(t,e,i,r,n,o,a,s,l,u,c){for(var h=e[0]*r[1]-e[1]*r[0],f=pu.dot(e,r),p=Math.atan2(h,f);p>=Math.PI;)p-=2*Math.PI;if(u)d=1;else{var d=function(t,e){t<0&&(t=-t);var i=e>2*hc.MIN_FAN_WIDTH?Math.log2(e/hc.MIN_FAN_WIDTH):1;return Math.ceil(t/Math.PI*i)}(p,c.half_width);if(d<1)return}var y=c.vertex_data.vertex_count,g=c.vertex_data.vertex_elements;wc(t,i,n,a[0],a[1],c,1),wc(t,e,n,o[0],o[1],c,1);var v=e,_=null!=c.texcoord_index;if(_)if(l)var m=pu.sub(o,a);else{kc=pu.copy(o);var b=pu.div(pu.sub(s,o),d)}var x,w,k=p/d,A=p<0?-1:1;w=0<h?(x=2,1):(x=1,2);for(var T=0;T<d;T++)0===T&&p<0&&(v=pu.neg(v)),v=pu.rot(v,k),_&&(l?(m=pu.rot(m,k),kc[0]=m[0]+a[0],kc[1]=m[1]*c.texcoord_width*c.v_scale+a[1]):kc=pu.add(kc,b)),wc(t,v,n,kc[0],kc[1],c,A),g.push(y+T+x),g.push(y),g.push(y+T+w)}function Tc(t,e,i,r,n,o){var a=pu.neg(i),s=null!=o.texcoord_index;switch(r){case uc.square:var l;n?(l=[i[1],-i[0]],wc(t,pu.add(i,l),i,1,e,o,1),wc(t,pu.add(a,l),i,0,e,o,1),s&&(e+=.5*o.texcoord_width*o.v_scale),wc(t,i,i,1,e,o,1),wc(t,a,i,0,e,o,1)):(l=[-i[1],i[0]],wc(t,i,i,1,e,o,1),wc(t,a,i,0,e,o,1),s&&(e+=.5*o.texcoord_width*o.v_scale),wc(t,pu.add(i,l),i,1,e,o,1),wc(t,pu.add(a,l),i,0,e,o,1)),xc(1,o);break;case uc.round:var u,c,h=pc,f=dc,p=yc;n?(u=i,c=a,s&&(e+=.5*o.texcoord_width*o.v_scale,h=dc,f=pc,p=yc)):(u=a,c=i),s&&(pc[1]=e,dc[1]=e,yc[1]=e),Ac(t,u,lc,c,i,h,p,f,!0,!1,o);break;case uc.butt:return}}var Ec=[255,255,255,255],Mc=[0,0,0,0];var Rc=Object.create(xu);Rc.vertex_layouts=[[],[]],Rc.variants={},Rc.dash_textures={};function Sc(t,e){if(!(t.length<2)){for(var i=[t[0]],r=0,n=[],o=[],a=1,s=t.length;a<s;a++)if(t[a][0]!==t[a-1][0]||t[a][1]!==t[a-1][1]){i.push(t[a]);var l=pu.sub(t[a],t[a-1]),u=pu.length(l);n.push(l),o.push([r,r+u]),r+=u}if(!(i.length<2)){var c=0,h=n[n.length-1],f=n[0],p=n[1],d=[0,0];2<i.length&&(e.closed&&(d[0]=pu.signedAngleBetween(h,f)),d[1]=pu.signedAngleBetween(f,p));var y=i[0],g=o[0];e.closed?(Lc(y,e,c++,g,r,d,[h,f]),Lc(y,e,c++,g,r,d,[h,f])):(Lc(y,e,c++,g,r,d,[f,f]),Lc(y,e,c++,g,r,d,[f,f]));for(var v=1,_=i.length-1;v<_;v++)y=i[v],h=n[v-1],f=n[v],p=n[v+1],Lc(y,e,c++,g=o[v-1],r,d,[h,f]),Lc(y,e,c++,g,r,d,[h,f]),Oc(e),g=o[v],d[0]=d[1],d[1]=v!==_-1?pu.signedAngleBetween(f,p):e.closed?pu.signedAngleBetween(f,n[0]):0,Lc(y,e,c++,g,r,d,[h,f]),Lc(y,e,c++,g,r,d,[h,f]);y=i[i.length-1],g=o[o.length-1],f=n[n.length-1],e.closed?(Lc(y,e,c++,g,r,d,[f,n[0]]),Lc(y,e,c++,g,r,d,[f,n[0]])):(Lc(y,e,c++,g,r,d,[f,f]),Lc(y,e,c++,g,r,d,[f,f])),Oc(e)}}}function Oc(t){var e=t.vertex_data.vertex_elements,i=t.vertex_data.vertex_count-4;e.push(2+i),e.push(1+i),e.push(0+i),e.push(2+i),e.push(3+i),e.push(1+i),t.geom_count+=2}Object.assign(Rc,{name:"lines",built_in:!0,vertex_shader_src:oc,fragment_shader_src:ac,selection:!0,init:function(){xu.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(t,e){return t&&Zo.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var i=this.calcDistance(t,e);return e.zoom--,i},calcWidth:function(t,e,i){var r=this.calcDistance(t.width,i);if(!(r<0)){var n;if(n=t.next_width?this.calcDistanceNextZoom(t.next_width,i):r/2,0===r&&0===n||n<0)return!1;if(e.width_unscaled=r,e.next_width_unscaled=n,t.next_width){var o=.5*(r+(n*=2));e.width=o*i.units_per_meter_overzoom,e.width_scale=1-n/o}else e.width=r*i.units_per_meter_overzoom,e.width_scale=0;return t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*i.units_per_meter_overzoom/i.tile.overzoom2),!0}},calcOffset:function(t,e,i){if(t.offset_precalc)e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc;else if(t.offset){var r=this.calcDistance(t.offset,i);if(t.next_offset){var n=2*this.calcDistanceNextZoom(t.next_offset,i);Math.abs(r)>=Math.abs(n)?(e.offset=r*i.units_per_meter_overzoom,e.offset_scale=0!==r?1-n/r:0):(e.offset=n*i.units_per_meter_overzoom,e.offset_scale=0!=n?-1*(1-r/n):0)}else e.offset=r*i.units_per_meter_overzoom,e.offset_scale=0}else e.offset=0,e.offset_scale=0;Zo.evalProperty(t.offset_reverse,i)&&(e.offset*=-1)},_parseFeature:function(t,e,i){var r=this.feature_style;if(!1!==this.calcWidth(e,r,i)&&(this.calcOffset(e,r,i),r.color=this.parseColor(e.color,i),r.color)){if(r.variant=e.variant,r.z=e.z&&Zo.evalCachedDistanceProperty(e.z||0,i)||Zo.defaults.z,r.height=t.properties.height||Zo.defaults.height,r.extrude=Zo.evalProperty(e.extrude,i),r.extrude&&("number"==typeof r.extrude?r.height=r.extrude:Array.isArray(r.extrude)&&(r.height=r.extrude[1])),r.extrude&&r.height&&(r.z+=r.height),r.z*=an.height_scale,r.height*=an.height_scale,r.cap=Zo.evalProperty(e.cap,i),r.join=Zo.evalProperty(e.join,i),r.miter_limit=Zo.evalProperty(e.miter_limit,i),r.tile_edges=e.tile_edges,r.outline=r.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width){var n=2*this.calcDistance(e.outline.width,i),o=2*this.calcDistanceNextZoom(e.outline.next_width,i);0==n&&0==o||n<0||o<0?(r.outline.width.value=null,r.outline.next_width.value=null,r.outline.color=null,r.outline.inline_texcoord_width=null,r.outline.texcoords=!1):(r.outline.width.value=n+r.width_unscaled,r.outline.next_width.value=o+r.next_width_unscaled,r.outline.inline_texcoord_width=r.texcoord_width,r.outline.offset_precalc=r.offset,r.outline.offset_scale_precalc=r.offset_scale,r.outline.color=e.outline.color,r.outline.cap=e.outline.cap,r.outline.join=e.outline.join,r.outline.miter_limit=e.outline.miter_limit,r.outline.texcoords=e.outline.texcoords,r.outline.style=e.outline.style,r.outline.variant=e.outline.variant,e.outline.order?r.outline.order=this.parseOrder(e.outline.order,i):r.outline.order=r.order,r.outline.order>r.order&&(r.outline.order=r.order),r.outline.order-=.5,r.outline.variant_order=0)}else r.outline.width.value=null,r.outline.next_width.value=null,r.outline.color=null,r.outline.inline_texcoord_width=null;return r}},_preprocess:function(t,e){var i=this.sources[e]?this.sources[e].config.uid:"";if(t.color=Zo.createColorPropertyCache(t.color),t.width=Zo.createPropertyCache(t.width,Zo.parseUnits),t.width&&t.width.type!==Zo.CACHE_TYPE.STATIC&&(t.next_width=Zo.createPropertyCache(t.width,Zo.parseUnits)),t.offset=t.offset&&Zo.createPropertyCache(t.offset,Zo.parseUnits),t.offset&&t.offset.type!==Zo.CACHE_TYPE.STATIC&&(t.next_offset=Zo.createPropertyCache(t.offset,Zo.parseUnits)),t.z=Zo.createPropertyCache(t.z,Zo.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash,i),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&Zo.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.computeVariant(t),t.outline){t.outline.style=t.outline.style||this.name,t.outline.color=Zo.createColorPropertyCache(t.outline.color),t.outline.width=Zo.createPropertyCache(t.outline.width,Zo.parseUnits),t.outline.next_width=Zo.createPropertyCache(t.outline.width,Zo.parseUnits),t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=t.outline.miter_limit||t.miter_limit,t.outline.offset=t.offset;var r=this.styles[t.outline.style];r?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:r.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:r.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,i),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,i),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:r.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&Zo.parseColor(t.outline.dash_background_color),t.outline.texcoords=r.texcoords||t.outline.texture_merged?1:0,this.computeVariant(t.outline)):(Qr({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(t.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),t.outline=null)}return t},dashTextureKey:function(t,e){return"__dash_"+e+"_"+this.scene_id+"_"+JSON.stringify(t)},getDashTexture:function(t,e){var i=this.dashTextureKey(t,this.sources[e].config.uid);if(null==Rc.dash_textures[i]){Rc.dash_textures[i]=!0;var r=function(t,e){var i=1<arguments.length&&void 0!==e?e:{},r=i.dash_color||Ec,n=i.background_color||Mc,o=t,a=i.scale||1;o.length%2==1&&Array.prototype.push.apply(o,o);for(var s=!0,l=[],u=0;u<o.length;u++){for(var c=Math.floor(o[u]*a),h=0;h<c;h++)Array.prototype.push.apply(l,s?r:n);s=!s}return{pixels:l=new Uint8Array(l),length:l.length/4}}(t,{scale:20});this.textureManager.create(this.gl,i,{data:r.pixels,height:r.length,width:1,filtering:"nearest"})}},endData:function(t){var e=this;return xu.endData.call(this,t).then(function(i){if(i){i.uniforms.u_has_line_texture=!1,i.uniforms.u_texture=e.textureManager.default,i.uniforms.u_v_scale_adjust=an.tile_scale;var r=[],n=function(n){var o=i.meshes[n].variant;if(o.texture){var a=i.meshes[n].uniforms=i.meshes[n].uniforms||{};if(a.u_has_line_texture=!0,a.u_texture=o.texture,a.u_texture_ratio=1,o.dash&&(a.u_v_scale_adjust=20*an.tile_scale,a.u_dash_background_color=o.dash_background_color||[0,0,0,0]),o.dash_key&&null==Rc.dash_textures[o.dash_key]&&(Rc.dash_textures[o.dash_key]=!0,Fr.postMessage(e.main_thread_target+".getDashTexture",o.dash,t.source)),null==e.textureManager.textures[o.texture])r.push(e.textureManager.syncTexturesToWorker([o.texture]).then(function(t){var e=t[o.texture];e&&(a.u_texture_ratio=e.height/e.width)}));else{var s=e.textureManager.textures[o.texture];a.u_texture_ratio=s.height/s.width}}};for(var o in i.meshes)n(o);return t.mesh_data[e.name]=i,Promise.all(r).then(function(){return i})}return i})},computeVariant:function(t){var e=t.offset?1:0;t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged),e=eu(e+="/"+t.texcoords),t.variant=e,null==Rc.variants[e]&&(Rc.variants[e]={key:e,order:t.variant_order,offset:t.offset?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color})},vertexLayoutForMeshVariant:function(t){if(null==Rc.vertex_layouts[t.key]){var e=[{name:"a_position",size:4,type:wu.SHORT,normalized:!1},{name:"a_extrude",size:2,type:wu.SHORT,normalized:!1},{name:"a_offset",size:2,type:wu.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_scaling",size:2,type:wu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:wu.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0}];Rc.vertex_layouts[t.key]=new Su(e)}return Rc.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return Rc.variants[t.variant]},makeVertexTemplate:function(t,e){var i=0;return this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=t.z||0,this.vertex_template[i++]=this.scaleOrder(t.order),this.vertex_template[i++]=0,this.vertex_template[i++]=0,e.variant.offset&&(this.vertex_template[i++]=0,this.vertex_template[i++]=0),this.vertex_template[i++]=1024*t.width_scale,this.vertex_template[i++]=1024*t.offset_scale,e.variant.texcoords&&(this.vertex_template[i++]=0,this.vertex_template[i++]=0),this.vertex_template[i++]=255*t.color[0],this.vertex_template[i++]=255*t.color[1],this.vertex_template[i++]=255*t.color[2],this.vertex_template[i++]=255*t.color[3],this.selection&&(this.vertex_template[i++]=255*t.selection_color[0],this.vertex_template[i++]=255*t.selection_color[1],this.vertex_template[i++]=255*t.selection_color[2],this.vertex_template[i++]=255*t.selection_color[3]),this.vertex_template},buildLines:function(t,e,i,r,n){if(this.feature_style=this.outline_feature_style,e.outline&&null!=e.outline.color&&null!=e.outline.width.value){var o=this.styles[e.outline.style];o&&o.addFeature(r.feature,e.outline,r)}this.feature_style=this.inline_feature_style;var a=i.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,i);return function(t,e,i,r,n){var o,a=n.closed_polygon,s=n.remove_tile_edges,l=n.tile_edge_tolerance,u=n.texcoord_index,c=(n.texcoord_scale,n.texcoord_width),h=n.texcoord_ratio,f=n.texcoord_normalize,p=n.extrude_index,d=n.offset_index,y=n.join,g=n.cap,v=n.miter_limit,_=n.offset,m=n.crop_by_tile,b=g?uc[g]:uc.butt,x=y?cc[y]:cc.miter;if(x===cc.miter)var w=(v=v||hc.MITER_LIMIT)*v;u&&(f=f||hc.TEXCOORD_NORMALIZE,o=1/(c*(h=h||hc.TEXCOORD_RATIO)*fc));for(var k={closed_polygon:a,remove_tile_edges:s,tile_edge_tolerance:l,miter_len_sq:w,join_type:x,cap_type:b,vertex_data:i,vertex_template:r,half_width:e/2,extrude_index:p,offset_index:d,v_scale:o,texcoord_index:u,texcoord_width:c,texcoord_normalize:f,offset:_,geom_count:0,crop_by_tile:m},A=0;A<t.length;A++)gc(t[A],k);if(k.extra_lines)for(var T=0;T<k.extra_lines.length;T++)gc(k.extra_lines[T],k);return k.geom_count}(t,e.width,a,l,{cap:e.cap,join:e.join,miter_limit:e.miter_limit,extrude_index:s.index.a_extrude,offset_index:s.index.a_offset,texcoord_index:s.index.a_texcoord,texcoord_width:e.texcoord_width,texcoord_normalize:65535,closed_polygon:n&&n.closed_polygon,remove_tile_edges:!e.tile_edges&&n&&n.remove_tile_edges,tile_edge_tolerance:an.tile_scale*r.tile.pad_scale*2,offset:e.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(t,e,i,r){for(var n=0,o=0;o<t.length;o++)n+=this.buildLines(t[o],e,i,r,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return n}});var Pc=[[1,1],[1,-1],[-1,1],[-1,-1]];function Lc(t,e,i,r,n,o,a){var s=e.vertex_template,l=e.vertex_data;if(Ic(e,"a_position",t),Ic(e,"a_width",e.half_width),e.vertex_layout_index.a_barycentric){var u=[0,0,0];u[i%3]=1,Ic(e,"a_barycentric",u)}Ic(e,"a_tangents",a[0].concat(a[1])),Ic(e,"a_segment",r),Ic(e,"a_texcoord",Pc[i%4]),Ic(e,"a_length",n),Ic(e,"a_closed",e.closed?1:0),Ic(e,"a_angles",o),l.addVertex(s)}function Ic(t,e,i){var r=i.length,n=t.vertex_template,o=t.vertex_layout_index[e],a=0;if(r)for(;a!==r;)n[o+a]=i[a],a++;else n[o+a]=i}function Nc(t,e){for(var i=t.reduce(function(t,e){return t+e}),r=0,n=[],o=0,a=t.length;o<=a;o+=2){var s=Math.max(1e-4,t[o%a]),l=Math.max(1e-4,t[(o+1)%a]);n.push(r,r+s),r+=s+l}for(var u=new Uint8Array(4*e),c=0,h=function(t){var r=i*t/(e-1),o=function(t){for(var e=t[0],i=0,r=1,n=t.length;r<n;r++)t[r]<e&&(e=t[i=r]);return i}(n.map(function(t){return Math.abs(t-r)})),a=void 0,s=void 0,l=void 0;l=o%2==0?(a=r<=n[o]?1:0,s=n[o],n[o+1]):(a=r>n[o]?2:0,s=n[o-1],n[o]),u[c++]=n[o],u[c++]=a,u[c++]=s,u[c++]=l},f=0;f<e;f++)h(f);return u}var Cc=Object.create(xu),zc={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},jc={miter:0,round:1,bevel:2},Dc=zc.round,Fc=jc.miter,Bc=[0,0],Uc="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(Cc,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform float u_time;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec2 o1=vec2(+t1.y,-t1.x);vec2 o2=vec2(+t2.y,-t2.x);vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float halfMiterlength=width/cos(angle/2.0);if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*halfMiterlength;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;position.xy+=v*width*o1;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform float u_time;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka 1*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,1*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){xu.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},Cc.vertex_layouts=[],Cc.variants={}},calcDistance:function(t,e){return t&&Zo.evalCachedDistanceProperty(t,e)||0},calcDash:function(t,e){var i=Zo.evalProperty(t.dash,e),r=0;return i&&((i=Array.isArray(i)&&i.length?i:Bc).length%2==1&&(i=i.concat(i)),r=+(r=i.reduce(function(t,e){return t+e}))||0),{dash:i,dash_period:r}},calcWidth:function(t,e,i){var r=this.calcDistance(t.width,i);return!(r<0)&&(e.width=r*i.units_per_meter_overzoom,!0)},getCapType:function(t,e,i){var r=Zo.evalProperty(t,e);return void 0!==zc[r]?zc[r]:i},_parseFeature:function(t,e,i){if(!1!==this.calcWidth(e,this.feature_style,i)){var r=this.parseColor(e.color,i);if(r&&0!==r[3]){var n=this.getCapType(e.cap,i,Dc),o=Zo.evalProperty(e.join,i),a=+Zo.evalProperty(e.miter_limit,i),s=this.calcDash(e,i),l=s.dash,u=s.dash_period,c=Object.assign({color:r,antialias:e.antialias,linecaps:[this.getCapType(e.tail_cap,i,n),this.getCapType(e.head_cap,i,n)],join:void 0!==jc[o]?jc[o]:Fc,miter_limit:0<=a?a:3,dash_index:0===u?0:1,dash:l,dash_caps:[this.getCapType(e.tail_cap,i,n),this.getCapType(e.head_cap,i,n)],dash_phase:+Zo.evalProperty(e.dash_phase,i)||0,dash_period:u},this.feature_style);return c.z=e.z&&Zo.evalCachedDistanceProperty(e.z||0,i)||Zo.defaults.z,c.z*=an.height_scale,c.extrude=Zo.evalProperty(e.extrude,i),c.extrude&&(!0===c.extrude?(c.height=void 0!==t.properties.height?t.properties.height:Zo.defaults.height,c.min_height=void 0!==t.properties.min_height?t.properties.min_height:Zo.defaults.min_height):"number"==typeof c.extrude?(c.height=c.extrude,c.min_height=0):Array.isArray(c.extrude)&&(c.min_height=c.extrude[0],c.height=c.extrude[1]),c.height*=an.height_scale,c.min_height*=an.height_scale),this.computeVariant(c),c}}},_preprocess:function(t,e){t.color=Zo.createColorPropertyCache(t.color),t.width=Zo.createPropertyCache(t.width,Zo.parseUnits),t.width&&t.width.type!==Zo.CACHE_TYPE.STATIC&&(t.next_width=Zo.createPropertyCache(t.width,Zo.parseUnits)),t.z=Zo.createPropertyCache(t.z,Zo.parseUnits);var i=+t.antialias;return t.antialias=isNaN(i)?0:i,t},buildRasterTextures:function(t,e){var i=[];for(var r in e.meshes){var n=Cc.variants[r],o=n.uniforms,a=n.pattern;if(o.u_dash_index){var s="__dash_"+a.join("_")+"_"+t.key+"_"+t.id;i.push({name:s,data:Nc(a,1024)}),o.u_dash_atlas=s,e.meshes[r].textures=[s]}e.meshes[r].uniforms=o}return e.uniforms=e.uniforms||{},i.length?Fr.postMessage(this.main_thread_target+".loadTextures",i).then(function(){return e}):Promise.resolve(e)},loadTextures:function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i],n=this.textureManager.textures[r.name];n||(n=this.textureManager.create(this.gl,r.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:r.data})),e.push(n.loading)}return Promise.all(e).then(function(t){return t.map(function(t){return t.retain(),t.name})})},computeVariant:function(t){var e=function(t){for(var e=[],i=0,r=Uc.length;i<r;i++){var n=t[Uc[i]];Array.isArray(n)?e.push(n.join("_")):"boolean"==typeof n?e.push(n?1:0):n&&e.push(n.toString())}return e.join("/")}(t);t.variant=e,null==Cc.variants[e]&&(Cc.variants[e]={key:e,order:t.variant_order,uniforms:{u_antialias:t.antialias,u_linecaps:t.linecaps,u_linejoin:t.join,u_miter_limit:t.miter_limit,u_dash_index:t.dash_index,u_dash_caps:t.dash_caps,u_dash_phase:t.dash_phase,u_dash_period:t.dash_period},pattern:t.dash})},vertexLayoutForMeshVariant:function(t){if(null==Cc.vertex_layouts[t.key]){var e=[{name:"a_position",size:4,type:wu.SHORT,normalized:!1},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:wu.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:wu.FLOAT,normalized:!1},{name:"a_segment",size:2,type:wu.FLOAT,normalized:!1},{name:"a_angles",size:2,type:wu.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:wu.FLOAT,normalized:!0},{name:"a_length",size:1,type:wu.FLOAT,normalized:!1},{name:"a_closed",size:1,type:wu.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0}];this.defines.TANGRAM_DEBUG_TRIANGLES&&e.push({name:"a_barycentric",size:3,type:wu.SHORT,normalized:!1}),Cc.vertex_layouts[t.key]=new Su(e)}return Cc.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return Cc.variants[t.variant]},makeVertexTemplate:function(t,e){var i=0;return this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=t.z+t.height||0,this.vertex_template[i++]=this.scaleOrder(t.order),this.vertex_template[i++]=255*t.color[0],this.vertex_template[i++]=255*t.color[1],this.vertex_template[i++]=255*t.color[2],this.vertex_template[i++]=255*t.color[3],this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.selection&&(this.vertex_template[i++]=255*t.selection_color[0],this.vertex_template[i++]=255*t.selection_color[1],this.vertex_template[i++]=255*t.selection_color[2],this.vertex_template[i++]=255*t.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=0),this.vertex_template},buildLines:function(t,e,i,r,n){var o=4<arguments.length&&void 0!==n&&n,a=i.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,i);return function(t,e,i,r,n,o){for(var a={closed:o,vertex_data:i,vertex_template:r,half_width:e/2,vertex_layout_index:n,geom_count:0},s=0,l=t.length;s<l;s++)Sc(t[s],a);return a.geom_count}(t,e.width,a,l,s.index,o)},buildPolygons:function(t,e,i,r){for(var n=0,o=0,a=t.length;o<a;o++)n+=this.buildLines(t[o],e,i,r,!0);return n}});var Gc=0,Vc={id_prefix:"",nextLabelId:function(){return"".concat(Vc.id_prefix,"/").concat(Gc++)}};function Hc(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}var qc=["left","top-left","bottom-left"],Kc=["right","top-right","bottom-right"],Wc=["top","top-left","top-right"],Yc=["bottom","bottom-left","bottom-right"],Xc={computeOffset:function(t,e,i,r){var n=3<arguments.length&&void 0!==r?r:null;if(!i||"center"===i)return t;var o=[t[0],t[1]];return n=n||this.default_buffer,this.isLeftAnchor(i)?(o[0]-=e[0]/2,"left"===i&&(o[0]-=n[0])):this.isRightAnchor(i)&&(o[0]+=e[0]/2,"right"===i&&(o[0]+=n[1])),this.isTopAnchor(i)?(o[1]-=e[1]/2,"top"===i&&(o[1]-=n[2])):this.isBottomAnchor(i)&&(o[1]+=e[1]/2,"bottom"===i&&(o[1]+=n[3])),o},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return-1<qc.indexOf(t)},isRightAnchor:function(t){return-1<Kc.indexOf(t)},isTopAnchor:function(t){return-1<Wc.indexOf(t)},isBottomAnchor:function(t){return-1<Yc.indexOf(t)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function Zc(t,e,i,r,n){var o=[],a=i-t,s=r-e,l=nn.getLineLength(t,e,i,r),u=2*n,c=l/u;if(c<=1)o.push(t+a/2,e+s/2,n);else{var h=u/l,f=a*h,p=s*h;(c=l/n/2)%1&&o.push(i-f/2,r-p/2,n),c|=0;for(var d=t+f/2,y=e+p/2;c--;)o.push(d,y,n),d+=f,y+=p}return o}var Jc=function(){function t(e,i,r,n){br(this,t),this.id=Vc.nextLabelId(),this.position=[e[0],e[1]],void 0!==e[2]&&this.position.push(e[2]),this.size=i,this.layout=n,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||Xc.alignForAnchor(this.anchor),this._is_flat=r}return wr(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:Hc(this.layout)}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,i=t.top,r=t.right,n=t.bottom;return pn.pointInTile([e,i])&&pn.pointInTile([r,n])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(t){this._circles=void 0,this._aabb=void 0,this.anchor=t,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var t=[this.layout.offset[0],this.layout.offset[1]];if(this.parent){var e=this.parent;t=Xc.computeOffset(t,e.size,e.anchor,Xc.zero_buffer),t=Xc.computeOffset(t,e.size,this.anchor,Xc.zero_buffer),e.offset!==Zo.zeroPair&&(t===Zo.zeroPair?t=e.offset:(t[0]+=e.offset[0],t[1]+=e.offset[1]))}return Xc.computeOffset(t,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){if(!this.angle)return[];if(!this._circles){var t=this.layout.units_per_pixel,e=this.size[0]/2*t,i=e*Math.cos(this.angle),r=e*Math.sin(this.angle),n=-i,o=-r,a=Lr(this.position,2),s=a[0],l=a[1];i+=s,r+=l*=-1,n+=s,o+=l;var u=this.size[1]/2*t;this._circles=Zc(i,r,n,o,u)}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){var t=this.layout.units_per_pixel,e=(this.size[0]/2+this.layout.buffer[0])*t,i=(this.size[1]/2+this.layout.buffer[1])*t,r=this.position[0]+this.offset[0]*t,n=this.position[1]-this.offset[1]*t;this._aabb={left:r-e,top:n+i,right:r+e,bottom:n-i}}return this._aabb}},{key:"getSides",value:function(){var t=this.getAABB(),e=t.left,i=t.top,r=t.right,n=(i+t.bottom)/2;return[e,n,r,n]}}]),t}();Jc.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var Qc=Jc.PLACEMENT,$c=80;function th(t,e,i,r){var n=[],o=r.placement,a=Math.max(e[0],e[1])*r.placement_min_length_ratio*r.units_per_pixel;switch(o){case Qc.SPACED:var s=function(t,e,i){var r=i.units_per_pixel,n=(i.placement_spacing||$c)*r,o=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=ih(t[i],t[i+1]);return e}(t);if(o<=e)return!1;for(var a=Math.max(Math.floor(o/n),1),s=[],l=[],u=.5*(o-(a-1)*n),c=0;c<a;c++){var h=rh(t,u,e,i),f=h.position,p=h.angle;null!=f&&null!=p&&(s.push(f),l.push(p)),u+=n}return{positions:s,angles:l}}(t,a,r);if(!s)return[];for(var l=s.positions,u=s.angles,c=0;c<l.length;c++){var h=l[c],f=u[c];if(!0===r.tile_edges||!Iu(h)){var p=new Jc(h,e,i,r);p.angle=f,n.push(p)}}break;case Qc.VERTEX:for(var d,y,g,v=0;v<t.length-1;v++)d=t[v],y=t[v+1],!0!==r.tile_edges&&Iu(d)||((g=new Jc(d,e,i,r)).angle=eh(d,y,r.angle),n.push(g));(g=new Jc(y,e,i,r)).angle=eh(d,y,r.angle),n.push(g);break;case Qc.MIDPOINT:for(var _=0;_<t.length-1;_++){var m=t[_],b=t[_+1],x=[.5*(m[0]+b[0]),.5*(m[1]+b[1])];if((!0===r.tile_edges||!Iu(x))&&(!a||ih(m,b)>a)){var w=new Jc(x,e,i,r);w.angle=eh(m,b,r.angle),n.push(w)}}}return n}function eh(t,e,i){var r=2<arguments.length&&void 0!==i?i:0;return"auto"===r?Math.atan2(e[0]-t[0],e[1]-t[1]):r}function ih(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function rh(t,e,i,r){for(var n,o,a,s,l,u,c,h=0,f=0;f<t.length-1;f++){var p=t[f],d=t[f+1],y=ih(p,d);if(!(y<=i)&&e<(h+=y)){l=h-e,void 0,u=ih(a=p,s=d),n=[(c=l/u)*a[0]+(1-c)*s[0],c*a[1]+(1-c)*s[1]],o=eh(p,d,r.angle);break}}return{position:n,angle:o}}var nh={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,pn.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0},compute:function(t,e,i){var r={};e.font=e.font||this.defaults,r.can_articulate=e.can_articulate,r.fill=e.font.fill&&pn.toCSSColor(Zo.evalCachedColorProperty(e.font.fill,i))||this.defaults.fill,r.style=e.font.style||this.defaults.style,r.weight=e.font.weight||this.defaults.weight,e.font.family?(r.family=e.font.family,r.family!==this.defaults.family&&(r.family+=", "+this.defaults.family)):r.family=this.defaults.family,r.transform=e.font.transform,r.size=e.font.size||this.defaults.size,r.supersample=e.supersample_text?1.5:1,r.px_size=Zo.evalCachedProperty(e.font.px_size,i)*r.supersample,e.font.stroke&&e.font.stroke.color&&(r.stroke=pn.toCSSColor(Zo.evalCachedColorProperty(e.font.stroke.color,i)||this.defaults.stroke),r.stroke_width=Zo.evalCachedProperty(e.font.stroke.width,i)||this.defaults.stroke_width),r.font_css=this.fontCSS(r);var n=e.text_wrap;return null==n&&"line"!==an.geometryType(t.geometry.type)&&(n=!0),!0===n&&(n=this.defaults.text_wrap),r.text_wrap=n,r.max_lines=e.max_lines||this.defaults.max_lines,r},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter(function(t){return t}).join(" ")}},oh=a(function(t){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function i(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function n(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function o(t,i){function r(){var t=o;n(t)&&t.a.parentNode&&i(t.g)}var o=t;e(t.b,r),e(t.c,r),n(t)}function a(t,e){var i=e||{};this.family=t,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}function s(t,e){return[t.style,t.weight,function(){if(null===c){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}c=""!==t.style.font}return c}()?t.stretch:"","100px",e].join(" ")}var l,u,c,h;h=c=u=l=null,a.prototype.load=function(t,e){var n=this,a=t||"BESbswy",c=0,f=e||3e3,p=(new Date).getTime();return new Promise(function(t,e){var d;if(null===h&&(h=!!document.fonts),(d=h)&&(null===u&&(u=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),d=!u),d){d=new Promise(function(t,e){!function i(){(new Date).getTime()-p>=f?e():document.fonts.load(s(n,'"'+n.family+'"'),a).then(function(e){1<=e.length?t():setTimeout(i,25)},function(){e()})}()});var y=new Promise(function(t,e){c=setTimeout(e,f)});Promise.race([y,d]).then(function(){clearTimeout(c),t(n)},function(){e(n)})}else!function(t){document.body?t():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),t())})}(function(){function u(){var e;(e=-1!=g&&-1!=v||-1!=g&&-1!=_||-1!=v&&-1!=_)&&((e=g!=v&&g!=_&&v!=_)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=l&&(g==m&&v==m&&_==m||g==b&&v==b&&_==b||g==x&&v==x&&_==x)),e=!e),e&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(c),t(n))}var h=new i(a),d=new i(a),y=new i(a),g=-1,v=-1,_=-1,m=-1,b=-1,x=-1,w=document.createElement("div");w.dir="ltr",r(h,s(n,"sans-serif")),r(d,s(n,"serif")),r(y,s(n,"monospace")),w.appendChild(h.a),w.appendChild(d.a),w.appendChild(y.a),document.body.appendChild(w),m=h.a.offsetWidth,b=d.a.offsetWidth,x=y.a.offsetWidth,function t(){if((new Date).getTime()-p>=f)w.parentNode&&w.parentNode.removeChild(w),e(n);else{var i=document.hidden;!0!==i&&void 0!==i||(g=h.a.offsetWidth,v=d.a.offsetWidth,_=y.a.offsetWidth,u()),c=setTimeout(t,50)}}(),o(h,function(t){g=t,u()}),r(h,s(n,'"'+n.family+'",sans-serif')),o(d,function(t){v=t,u()}),r(d,s(n,'"'+n.family+'",serif')),o(y,function(t){_=t,u()}),r(y,s(n,'"'+n.family+'",monospace'))})})},t.exports=a}),ah={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,i=JSON.stringify(t)===this.last_loaded;return t&&!i&&function(){function i(i){Array.isArray(t[i])?t[i].forEach(function(t){return r.push(e.loadFontFace(i,t))}):r.push(e.loadFontFace(i,t[i]))}var r=[];for(var n in t)i(n);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(r.filter(function(t){return t}))}(),this.fonts_loaded},loadFontFace:function(t,e){if(null!=e&&("object"===mr(e)||"external"===e)){var i={family:t},r=Promise.resolve();"object"===mr(e)&&(Object.assign(i,e),"string"==typeof e.url&&(r=this.injectFontFace(i)));var n=new oh(t,i);return r.then(function(){return n.load()}).then(function(){Qr("debug","Font face '".concat(t,"' is available"),i)},function(){Qr("debug","Font face '".concat(t,"' is NOT available"),i)})}},injectFontFace:function(t){var e=this,i=t.family,r=t.url,n=t.weight,o=t.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var a=Promise.resolve(r);return"blob:"===r.slice(0,5)&&(a=pn.io(r,6e4,"arraybuffer").then(function(t){var i=new Uint8Array(t);if(e.supports_native_font_loading)return i;for(var r="",n=0;n<i.length;n++)r+=String.fromCharCode(i[n]);return"data:font/opentype;base64,"+btoa(r)})),a.then(function(t){if(e.supports_native_font_loading){var r;"string"==typeof t?r=new FontFace(i,"url(".concat(encodeURI(t),")"),{weight:n,style:o}):t instanceof Uint8Array&&(r=new FontFace(i,t,{weight:n,style:o})),document.fonts.add(r),Qr("trace","Adding FontFace to document.fonts:",r)}else{var a="\n                    @font-face {\n                        font-family: '".concat(i,"';\n                        font-weight: ").concat(n||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(t),");\n                    }\n                "),s=document.createElement("style");s.appendChild(document.createTextNode("")),document.head.appendChild(s),s.sheet.insertRule(a,0),Qr("trace","Injecting CSS font face:",a)}})}},sh=function(){function t(){br(this,t),this.vertical_text_buffer=1,this.horizontal_text_buffer=4,this.layout=Ml("binary-tree")}return wr(t,[{key:"createCanvas",value:function(t,e){var i=document.createElement("canvas");return t&&e&&(i.width=t,i.height=e),i.style.backgroundColor="transparent",i}},{key:"setFont",value:function(t,e){var i=e.font_css,r=e.fill,n=e.stroke,o=e.stroke_width,a=e.px_size,s=e.supersample;this.px_size=a;var l=pn.device_pixel_ratio*s;n&&0<o&&(t.strokeStyle=n,t.lineWidth=o*l),t.fillStyle=r,t.textBaseline="bottom",t.font=i,t.miterLimit=2}},{key:"textSizes",value:function(t,e,i){var r=this;return ah.loadFonts().then(function(){return sa.add({type:"textSizes",run:r.processTextSizesTask.bind(r),texts:e,tile_id:t,cursor:{ctx:i,styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(t){var e,i=t.cursor,r=t.texts,n=i.ctx;for(i.style_idx=i.style_idx||0;i.style_idx<i.styles.length;){var o=i.styles[i.style_idx];null==i.text_idx&&(i.text_idx=0,i.texts=Object.keys(r[o]));for(var a=r[o],s=!0;i.text_idx<i.texts.length;){var l=i.texts[i.text_idx],u=a[l],c=u.text_settings;if(s&&(this.setFont(n,c),s=!1),u.size=this.textSize(n,o,l,c).size,c.can_articulate){var h=!1,f=!1;if(uh(l)&&(fh(l)?h=!0:f=!0),u.isRTL=h,u.no_curving=f||(e=l,bh.test(e)),u.vertical_buffer=this.vertical_text_buffer,u.segment_sizes=[],!u.no_curving){var p=wh(l,h);u.segments=p;for(var d=0;d<p.length;d++)u.segment_sizes.push(this.textSize(n,o,p[d],c).size)}}if(i.text_idx++,!sa.shouldContinue(t))return!1}i.text_idx=null,i.style_idx++}return sa.finish(t,{texts:r}),!0}},{key:"textSize",value:function(e,i,r,n){var o=n.transform,a=n.text_wrap,s=n.max_lines,l=n.stroke_width,u=void 0===l?0:l,c=n.supersample;if(t.cache.text[i]=t.cache.text[i]||{},t.cache.text[i][r])return t.cache.stats.text_hits++,t.cache.text[i][r];t.cache.stats.text_misses++,t.cache.text_count++;var h=pn.device_pixel_ratio*c,f=this.applyTextTransform(r,o),p=this.vertical_text_buffer*h,d=h*(u+this.horizontal_text_buffer),y=2*h,g=this.px_size+y,v=kh.parse(f,a,s,g,e),_=v.height,m=v.width,b=v.lines,x=[m/h,_/h],w=[m+2*d,_+2*p],k=[w[0]/h,w[1]/h];return t.cache.text[i][r]={lines:b,size:{collision_size:x,texture_size:w,logical_size:k,line_height:g}},t.cache.text[i][r]}},{key:"drawTextMultiLine",value:function(t,e,i,r,n,o){for(var a=Lr(i,2),s=a[0],l=a[1],u=n.stroke,c=n.stroke_width,h=void 0===c?0:c,f=n.transform,p=n.align,d=n.supersample,y=r.line_height,g=l,v=0;v<e.length;v++){var _=e[v];this.drawTextLine(t,_,[s,g],r,{stroke:u,stroke_width:h,transform:f,align:p,supersample:d},o),g+=y}if(ql.draw_label_collision_boxes){t.save();var m=pn.device_pixel_ratio*d,b=m*(this.horizontal_text_buffer+h),x=m*this.vertical_text_buffer,w=r.collision_size;t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(s+b,l+x,m*w[0],m*w[1]),"curved"===o&&u&&0<h&&t.strokeRect(s+r.texture_size[0]+b,l+x,m*w[0],m*w[1]),t.restore()}if(ql.draw_label_texture_boxes){t.save();var k=r.texture_size;t.strokeStyle="green",t.lineWidth=2,t.strokeRect(s+2,l+2,k[0]-4,k[1]-4),"curved"===o&&u&&0<h&&t.strokeRect(s+2+r.texture_size[0],l+2,k[0]-4,k[1]-4),t.restore()}}},{key:"drawTextLine",value:function(t,e,i,r,n,o){var a=Lr(i,2),s=a[0],l=a[1],u=n.stroke,c=n.stroke_width,h=void 0===c?0:c,f=n.transform,p=n.align,d=n.supersample,y=pn.device_pixel_ratio*d;p=p||"center";var g,v=this.vertical_text_buffer*y,_=r.texture_size,m=r.line_height,b=y*(h+this.horizontal_text_buffer),x=this.applyTextTransform(e.text,f);"left"===p?g=s+b:"center"===p?g=s+_[0]/2-e.width/2:"right"===p&&(g=s+_[0]-e.width-b);var w=l+v+m;if(u&&0<h){var k="curved"===o?_[0]:0;t.strokeText(x,g+k,w)}t.fillText(x,g,w)}},{key:"rasterize",value:function(e,i,r,n,o,a){return sa.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:t.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:e,textures:i,texture_prefix:n,gl:o,tile_id:r,texture_manager:a,cursor:{styles:Object.keys(e),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(t){if(!sa.shouldContinue(t))return!1;for(var e,i=t.cursor,r=t.texts,n=t.textures;i.texture_idx<t.textures.length;){e=n[i.texture_idx];for(var o=this.createCanvas.apply(this,Ir(e.texture_size)),a=o.getContext("2d");i.style_idx<i.styles.length;){var s=i.styles[i.style_idx];null==i.text_idx&&(i.text_idx=0,i.texts=Object.keys(r[s]));for(var l=r[s],u=!0;i.text_idx<i.texts.length;){var c=i.texts[i.text_idx],h=l[c],f=h.text_settings;if(u&&(this.setFont(a,f),u=!1),f.can_articulate){h.texcoords=h.texcoords||{};for(var p=0;p<h.type.length;p++){var d=h.type[p];switch(d){case"straight":if(h.textures[p]!==i.texture_idx)continue;var y=h.isRTL?c.split().reverse().join():c,g=e.texcoord_cache[s][y],v=void 0;if(g.texcoord)v=g.texcoord;else{var _=g.texture_position,m=this.textSize(a,s,y,f),b=m.size,x=m.lines;this.drawTextMultiLine(a,x,_,b,f,d),v=t.texture_manager.getTexcoordsForSprite(_,b.texture_size,e.texture_size),g.texcoord=v}h.texcoords[d]={texcoord:v,texture_id:g.texture_id};break;case"curved":var w=h.segments;h.texcoords.curved=[],h.texcoords_stroke=[];for(var k=0;k<w.length;k++)if(h.textures[p][k]===i.texture_idx){var A=w[k],T=e.texcoord_cache[s][A],E=void 0,M=void 0;if(T.texcoord&&T.texcoord_stroke)E=T.texcoord,M=T.texcoord_stroke,h.texcoords_stroke.push(M);else{var R=T.texture_position,S=this.textSize(a,s,A,f),O=S.size,P=S.lines;this.drawTextMultiLine(a,P,R,O,f,d),E=t.texture_manager.getTexcoordsForSprite(R,O.texture_size,e.texture_size);var L=f.stroke&&0<f.stroke_width,I=L?[R[0]+O.texture_size[0],R[1]]:[0,0];M=t.texture_manager.getTexcoordsForSprite(I,L?O.texture_size:[0,0],e.texture_size),T.texcoord=E,T.texcoord_stroke=M,h.texcoords_stroke.push(M)}h.texcoords.curved.push({texcoord:E,texture_id:T.texture_id})}}}}else{var N=this.textSize(a,s,c,f).lines;for(var C in h.align)h.align[C].texture_id===i.texture_idx&&(this.drawTextMultiLine(a,N,h.align[C].texture_position,h.size,{stroke:f.stroke,stroke_width:f.stroke_width,transform:f.transform,supersample:f.supersample,align:C}),h.align[C].texcoords=t.texture_manager.getTexcoordsForSprite(h.align[C].texture_position,h.size.texture_size,e.texture_size))}i.text_idx++}i.text_idx=null,i.style_idx++}var z=t.texture_prefix+i.texture_idx;t.texture_manager.create(t.gl,z,{element:o,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),i.texture_names.push(z),i.texture_idx++,i.style_idx=0,o.width=0,o.height=0}return sa.finish(t,i.texture_names),!0}},{key:"setTextureTextPositions",value:function(t){var e={texture_id:0,texcoord_cache:{}},i=[];for(var r in t){var n=t[r];for(var o in n){var a=n[o],s=a.text_settings,l=s.can_articulate,u=s.stroke,c=s.stroke_width;if(l){a.textures=[],e.texcoord_cache[r]=e.texcoord_cache[r]||{};for(var h=0;h<a.type.length;h++){switch(a.type[h]){case"straight":var f=a.isRTL?o.split().reverse().join():o;if(!e.texcoord_cache[r][f]){var p=a.size.texture_size;e.texcoord_cache[r][f]={},this.placeText(p[0],p[1],{can_articulate:l,style:r,word:f})}a.textures[h]=e.texture_id;break;case"curved":a.textures[h]=[];for(var d=0;d<a.segment_sizes.length;d++){var y=a.segments[d];if(!e.texcoord_cache[r][y]){var g=a.segment_sizes[d].texture_size,v=g[0];u&&0<c&&(v*=2),e.texcoord_cache[r][y]={},this.placeText(v,g[1],{can_articulate:l,style:r,word:y})}a.textures[h].push(e.texture_id)}}}}else{var _=a.size.texture_size;this.placeText(_[0],_[1],{can_articulate:l,text_info:a})}}}var m=this.layout.export(),b=m.items,x=m.width,w=m.height;e.texcoord_cache={};for(var k=0,A=b.length;k<A;k++){var T=b[k],E=T.x,M=T.y;if(!T.meta.can_articulate){var R=T.meta.text_info;for(var S in R.align)R.align[S].texture_id=e.texture_id,R.align[S].texture_position=[E,M]}else{var O=T.meta,P=O.style,L=O.word;e.texcoord_cache[P]=e.texcoord_cache[P]||{},e.texcoord_cache[P][L]||(e.texcoord_cache[P][L]={texture_id:e.texture_id,texture_position:[E,M]})}}return 0<x&&0<w&&(i[e.texture_id]={texture_size:[x,w],texcoord_cache:e.texcoord_cache}),i}},{key:"placeText",value:function(t,e,i){this.layout.addItem({width:t,height:e,meta:i})}},{key:"applyTextTransform",value:function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1)}):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}}],[{key:"fontPixelSize",value:function(e){if(null!=e){var i=Lr((e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],3),r=i[1],n=i[2];return"em"===(n=n||"px")?r*=16:"pt"===n?r/=.75:"%"===n&&(r/=6.25),r=Zo.parsePositiveNumber(r),r*=pn.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,Qr("debug","CanvasText: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},Qr("debug","CanvasText: pruning segment cache"))}}]),t}();sh.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,sh.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},sh.EMPTY_TEXTURES_ARR=[],sh.returnNoTextures=function(){return sh.EMPTY_TEXTURES_ARR};var lh=new RegExp("[---]");function uh(t){return lh.test(t)}var ch="\0-/:-@[-`{----\u2029-",hh=new RegExp("["+ch+"]+");function fh(t){return hh.test(t)}var ph=new RegExp("^["+ch+"-]+"),dh=new RegExp("["+ch+"-----]"),yh=new RegExp("^[-----]+"),gh="[------------------------------------------]",vh=new RegExp("^.(?:"+gh+"+)?([]\\W(?:"+gh+"+)?)*"),_h={Mongolian:"-"},mh=Object.keys(_h).map(function(t){return _h[t]}).join(""),bh=new RegExp("["+mh+"]");var xh=2;function wh(t,e){var i=e?1:xh;if(t.length<i)return[t];var r=t;if(sh.cache.segment[r])return sh.cache.stats.segment_hits++,sh.cache.segment[r];var n=[];if(ph.exec(t)){n=t.split(dh);for(var o=-1,a=0;a<n.length-1;a++){if(0<a){var s=yh.exec(n[a]);s&&(n[a]=n[a].substring(s[0].length),n[a-1]+=s[0],o+=s[0].length)}o+=1+n[a].length,n[a]+=t.slice(o,o+1)}t=""}for(;t.length;){for(var l="",u=t,c=0;c<i&&u.length;c++){var h=(vh.exec(u)||u)[0];l+=h,u=u.substring(h.length)}n.push(l),t=t.substring(l.length)}return e&&n.reverse(),sh.cache.stats.segment_misses++,sh.cache.segment[r]=n}var kh=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;br(this,t),this.width=0,this.height=0,this.lines=[],this.max_lines=i,this.text_wrap=r,this.context=e}return wr(t,[{key:"createLine",value:function(t){return this.lines.length<this.max_lines&&new Ah(t,this.text_wrap)}},{key:"push",value:function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return(t.width=e)>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(t,e){return!!this.push(t)&&this.createLine(e)}},{key:"addEllipsis",value:function(){var e=this.lines[this.lines.length-1],i=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=i,e.width>this.width&&(this.width=e.width)}},{key:"finish",value:function(t){t?this.push(t):this.addEllipsis()}}],[{key:"parse",value:function(e,i,r,n,o){var a;a="number"==typeof i?e.split(" "):[e];for(var s=new t(o,r,i),l=s.createLine(n),u=0;u<a.length;u++){for(var c=a[u].split("\n"),h=0===u,f=0;f<c.length&&l;f++){var p=c[f];uh(p)&&fh(p[p.length-1])&&(p+="");var d=h?p:" "+p;if(i&&0<u&&l.exceedsTextwrap(d)){if(!(l=s.advance(l,n)))break;l.append(p),h=!0}else l.append(d);f<c.length-1&&(l=s.advance(l,n),h=!0)}u===a.length-1&&s.finish(l)}return s}}]),t}();kh.ellipsis="...";var Ah=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;br(this,t),this.chars=0,this.text="",this.height=Math.ceil(e),this.text_wrap=i}return wr(t,[{key:"append",value:function(t){this.chars+=t.length,this.text+=t}},{key:"exceedsTextwrap",value:function(t){return t.length+this.chars>this.text_wrap}}]),t}(),Th={resetText:function(){this.texts={}},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,i,r){var n=this.parseTextSource(t,e,i);if(null!=n&&""!==n){var o=nh.compute(t,e,i),a=nh.key(o);this.texts[r.id]=this.texts[r.id]||{};var s=this.texts[r.id][a]=this.texts[r.id][a]||{};if(n instanceof Object){var l=[],u=n.left+"-"+n.right;for(var c in n){var h=n[c];if(h){var f=this.computeTextLayout({},t,e,i,r,h,o,u,c);s[h]||(s[h]={text_settings:o,ref:0}),l.push({draw:e,text:h,text_settings_key:a,layout:f})}}return 0<l.length&&l}var p=this.computeTextLayout({},t,e,i,r,n,o);return s[n]||(s[n]={text_settings:o,ref:0}),{draw:e,text:n,text_settings_key:a,layout:p}}},parseTextSource:function(t,e,i){var r,n=e.text_source||"name";if(null!=n&&"object"===mr(n))for(var o in r={},n)r[o]=this.parseTextSourceValue(n[o],t,i);else r=this.parseTextSourceValue(n,t,i);return r},parseTextSourceValue:function(t,e,i){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("string"==typeof t[n]?r=e.properties[t[n]]:"function"==typeof t[n]&&(r=t[n](i)),r)return r}else"string"==typeof t?r=e.properties[t]:t instanceof Function&&(r=t(i));return r},prepareTextLabels:function(t,e,i){var r=this;return 0===Object.keys(this.texts[t.id]||{}).length?Promise.resolve([]):Fr.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id]).then(function(e){var n=e.texts;return t.canceled?(Qr("trace","Style ".concat(r.name,": stop tile build because tile was canceled: ").concat(t.key,", post-calcTextSizes()")),[]):(r.texts[t.id]=n||[],n?r.buildTextLabels(t,i):(aa.abortTile(t.id),[]))})},collideAndRenderTextLabels:function(t,e,i){var r=this;return this.prepareTextLabels(t,e,i).then(function(i){return 0===i.length?(aa.collide([],e,t.id),Promise.resolve({})):aa.collide(i,e,t.id).then(function(e){if(t.canceled)return Qr("trace","stop tile build because tile was canceled: ".concat(t.key,", post-collide()")),{};var i=r.texts[t.id];return null==i||0===e.length?{}:(r.cullTextStyles(i,e),e.forEach(function(t){var e=t.text_settings_key,r=i[e]&&i[e][t.text];r.text_settings.can_articulate?(r.type||(r.type=[]),-1===r.type.indexOf(t.label.type)&&r.type.push(t.label.type)):(r.align=r.align||{},r.align[t.label.align]={})}),{labels:e,texts:i,textures:[]})})})},cullTextStyles:function(t,e){for(var i=0;i<e.length;i++){var r=e[i];t[r.text_settings_key][r.text].ref++}for(var n in t)for(var o in t[n])t[n][o].ref<1&&delete t[n][o];for(var a in t)0===Object.keys(t[a]).length&&delete t[a]},calcTextSizes:function(t,e){return this._canvas_text||(this._canvas_text=new sh,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(t,e,this._canvas_ctx_for_sizes)},preprocessText:function(t){if(t&&t.font&&"object"===mr(t.font))return t.font.fill=Zo.createPropertyCache(t.font.fill),t.font.stroke&&(t.font.stroke.color=Zo.createPropertyCache(t.font.stroke.color)),t.font.px_size=Zo.createPropertyCache(t.font.size||nh.defaults.size,sh.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=Zo.createPropertyCache(t.font.stroke.width,Zo.parsePositiveNumber)),t.offset=Zo.createPropertyCache(t.offset,function(t){return Array.isArray(t)&&t.map(Zo.parseNumber)}),t.buffer=Zo.createPropertyCache(t.buffer,function(t){return(Array.isArray(t)?t:[t,t]).map(Zo.parsePositiveNumber)}),t.repeat_distance=Zo.createPropertyCache(t.repeat_distance||an.tile_size,Zo.parsePositiveNumber),t},computeTextLayout:function(t,e,i,r,n,o,a,s,l){var u=t||{};return(u=this.computeLayout(u,e,i,r,n)).repeat_distance&&(s&&(u.repeat_group+="/"+s),u.repeat_group+="/"+o),u.subdiv=n.overzoom2,u.align=i.align,u.italic="normal"!==a.style,"right"===l?u.orientation=1:"left"===l&&(u.orientation=-1),u}};var Eh=Math.PI/180,Mh=function(){function t(e,i){br(this,t),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=e,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),i?this.setLookAtData(i):this._updateMatrices(),au.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return wr(t,[{key:"_getZoomForBounds",value:function(t,e,i,r){for(var n=this.clone(),o=this._max_zoom;o>=this._min_zoom;){if(n.setLookAtData({zoom:o-=.1,position:e,tilt:i,heading:r}),t.every(function(t){return nn.isPointInsidePolygon(t,n.getLookAtData().bounds)}))break}return n.getLookAtData().zoom}},{key:"setZoomConstraints",value:function(t,e){this._min_zoom=t,this._max_zoom=e,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(t,e){var i,r,n=t.position,o=t.zoom;if(n===i&&t.bounds!==i&&(n=nn.getBBoxCenter(nn.getBBox(t.bounds))),o===i&&t.bounds!==i&&(o=this._getZoomForBounds(t.bounds,n,t.tilt,t.heading)),e!==i&&(r=n||this.screenToWorld(e)),o!==i){o=nn.clamp(o,this._min_zoom,this._max_zoom);var a=pn.zoomToTileLevel(o),s=this._lookAtData.tile_level;a!==s&&(this._zoom_direction=s<a?1:-1),this._lookAtData.zoom=o,this._lookAtData.tile_level=a}if(t.tilt!==i&&(this._lookAtData.tilt=t.tilt),t.heading!==i&&(this._lookAtData.heading=t.heading),e!==i){this._updateMatrices();var l=this.screenToWorld(e);this._lookAtData.position[0]-=l[0]-r[0],this._lookAtData.position[1]-=l[1]-r[1]}else n&&(this._lookAtData.position=n);this._lookAtData.position[2]=0,this._lookAtData.position[1]=nn.clamp(this._lookAtData.position[1],-an.half_circumference_meters,an.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,i=this._viewport,r=i.width,n=i.height;this._viewport_aspect_ratio=r/n;var o=this._viewport.center.x-(r/2<<0),a=this._viewport.center.y-(n/2<<0);this._center_offset[0]=o,this._center_offset[1]=a,this._center_offset_normalized[0]=o/r,this._center_offset_normalized[1]=a/-n,e||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(t,e){va.multiply(t.model_view32,this._view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),ga.normalFromMat4(t.normal32,t.model_view32),ga.invert(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)}},{key:"_updateMatrices",value:function(){var t=this._viewport.height*an.metersPerPixel(this._lookAtData.zoom),e=pn.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=t/2*e;var i=this._lookAtData.position[0],r=this._lookAtData.position[1];va.lookAt(this._view_matrix,ya.fromValues(i,r,0),ya.fromValues(i,r,-1),ya.fromValues(0,1,0)),this._heading_matrix=va.identity(this._heading_matrix);var n=180-this._lookAtData.heading;n*=Eh,this._heading_matrix[0]=Math.cos(n),this._heading_matrix[1]=-Math.sin(n),this._heading_matrix[4]=Math.sin(n),this._heading_matrix[5]=Math.cos(n),this._tilt_matrix=va.identity(this._tilt_matrix),n=0<(n=this._lookAtData.tilt?this._lookAtData.tilt*Eh:0)?-n:n,this._tilt_matrix[5]=Math.cos(n),this._tilt_matrix[6]=Math.sin(n),this._tilt_matrix[9]=-Math.sin(n),this._tilt_matrix[10]=Math.cos(n),va.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),va.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/e),a=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(a/1),va.perspective(this._projection_matrix,o,this._viewport_aspect_ratio,1,a),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],va.translate(this._projection_matrix,this._projection_matrix,ya.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=va.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var t=this._viewport,e=t.width,i=t.height,r=t.padding;if(this._horizon=Math.max(i/2-Math.cos(function(t){return t*Math.PI/180}(this._lookAtData.tilt))*i*.75,0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([e,this._horizon]),this.screenToWorld([e,i]),this.screenToWorld([0,i])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===r.left&&0===r.top&&0===r.right&&0===r.bottom)this._lookAtData.bounds=this._lookAtData.unpadded_bounds;else{var n=r.left,o=Math.max(this._horizon,r.top),a=e-r.right,s=i-r.bottom,l=[this.screenToWorld([n,o]),this.screenToWorld([a,o]),this.screenToWorld([a,s]),this.screenToWorld([n,s])];this._lookAtData.bounds=this._clipAgainstGeoBounds(l)}}},{key:"_clipAgainstGeoBounds",value:function(t){var e=Lr(nn.getBBox(t),4),i=e[0],r=e[1],n=e[2],o=e[3],a=[[i,an.half_circumference_meters],[n,an.half_circumference_meters],[n,-an.half_circumference_meters],[i,-an.half_circumference_meters]],s=nn.clipPolygon(a,t)[0],l=Lr(nn.getBBox(s),4);i=l[0],r=l[1],n=l[2],o=l[3],n-i>=an.circumference_meters&&(s=[[-an.half_circumference_meters,o],[an.half_circumference_meters,o],[an.half_circumference_meters,r],[-an.half_circumference_meters,r]]);var u=[];return s&&(u=nn.splitLegs(s,an.half_circumference_meters)),u}},{key:"applyPxOffset",value:function(t){var e=Lr(t,2),i=e[0],r=e[1],n=Math.PI-this._lookAtData.heading*Eh,o=an.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(i*Math.cos(n)+r*Math.sin(n))*o,this._lookAtData.position[1]-=(r*Math.cos(n)-i*Math.sin(n))*o,this._lookAtData.position[1]=nn.clamp(this._lookAtData.position[1],-an.half_circumference_meters,an.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(t){var e=Lr(t,2),i=e[0],r=e[1],n=this._viewport,o=n.width,a=n.height;return 0===o||0===a?[0,0]:(i-=o/2,r-=a/2,this._clipCoordsToWorldPlaneCoords([2*(i+o/2)/o-1,1-2*(r+a/2)/a,-1,1]))}},{key:"_clipToScreenCoords",value:function(t){var e=this._viewport,i=e.width,r=e.height;return[(.5*t[0]+.5)*i,r-(.5*t[1]+.5)*r]}},{key:"_isScreenPointInViewPort",value:function(t){var e=this._viewport,i=e.width,r=e.height;return 0<=t[0]&&t[0]<=i&&0<=t[1]&&t[1]<=r}},{key:"worldToScreen",value:function(t,e){var i,r=1<arguments.length&&void 0!==e&&e;if(t[2]||(t[2]=0),r){var n=this._worldToClipCoords(t);i=this._clipToScreenCoords(n)}else{var o=Math.sign(this._lookAtData.position[0]),a=Math.trunc(this._lookAtData.position[0]/an.circumference_meters+o/2);t[0]+=an.circumference_meters*a;var s=this._worldToClipCoords(t),l=i=this._clipToScreenCoords(s);this._isScreenPointInViewPort(i)||(s=this._worldToClipCoords([t[0]+an.circumference_meters,t[1],t[2]]),i=this._clipToScreenCoords(s),this._isScreenPointInViewPort(i)||(s=this._worldToClipCoords([t[0]-an.circumference_meters,t[1],t[2]]),i=this._clipToScreenCoords(s)),this._isScreenPointInViewPort(i)||(i=l))}return i}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(t){var e=[],i=this._lookAtData.distance,r=this._lookAtData.position,n=[0,0,i,0],o=0,a=i*Math.sin(Eh*this._lookAtData.tilt)*Math.cos(Eh*this._lookAtData.heading),s=i*Math.sin(Eh*this._lookAtData.tilt)*Math.sin(Eh*this._lookAtData.heading),l=new Float64Array(16),u=new Float64Array(16);return va.invert(l,this._projection_matrix),_a.transformMat4(e,t,l),e[2]=-1,e[3]=0,va.invert(u,this._view_matrix),_a.transformMat4(e,e,u),_a.normalize(e,e),_a.transformMat4(n,n,this._transformation_matrix),0!==e[2]&&(o=-n[2]/e[2]),_a.scale(e,e,o),[r[0]+(e[0]+s),r[1]+(e[1]+a)]}},{key:"_worldToClipCoords",value:function(t){var e=[t[0],t[1],t[2],1];return _a.transformMat4(e,e,this._view_matrix),_a.transformMat4(e,e,this._projection_matrix),_a.scale(e,e,1/e[3]),e}},{key:"setupProgram",value:function(t){t.uniform("Matrix4fv","u_projection",this._projection_matrix),t.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),t.uniform("2fv","u_center_offset",this._center_offset_normalized),t.uniform("1f","u_tilt",this._lookAtData.tilt*Eh),t.uniform("1f","u_heading",this._lookAtData.heading*Eh),t.uniform("1f","u_near_plane",1),t.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var e=new t(this._viewport,this._lookAtData);return e.setZoomConstraints(this._min_zoom,this._max_zoom),e}},{key:"getViewport",value:function(){return this._viewport}}]),t}();function Rh(t){return void 0===t.x?t[0]:t.x}function Sh(t){return void 0===t.y?t[1]:t.y}function Oh(t,e){return Rh(t)-Rh(e)}function Ph(t,e){return Sh(t)-Sh(e)}function Lh(t){return t.sort(Oh)}function Ih(t,e){for(var i,r=t[0],n=r,o=0;o<t.length;o+=1)e(i=t[o],r)<0?r=i:0<e(i,n)&&(n=i);return[r,n]}function Nh(t,e){return Object.values(e.reduce(function(e,i){var r=i[+t];return e[r]||(e[r]=[]),e[r].push(i),e},{}))}function Ch(t,e,i){var r=+t,n=e[r],o=i[r];if(o<n)return[];var a=[e];if(o<n)return a;for(var s=e[(1+r)%2],l=t?function(t){return a.push([s,t])}:function(t){return a.push([t,s])},u=n+1;u<o;u+=1)l(u);return a.push(i),a}function zh(t,e){return Ch(!1,t,e)}function jh(t,e){return Ch(!0,t,e)}function Dh(t){var e={},i=[];return t.forEach(function(t){var r=t.key||(Array.isArray(t)?"".concat(t[0],"/").concat(t[1]):"".concat(t.x,"/").concat(t.y));e[r]||(e[r]=!0,i.push(t))}),i}function Fh(t){return t.reduce(function(t,e){return t.concat(e)})}function Bh(t,e){if(e<=0)return t;var i=function(t){var i=Lr(Ih(t,Oh),2),r=i[0],n=i[1],o=[r[0]-e,r[1]],a=[n[0]+e,n[1]];return t.concat(zh(o,r),zh(n,a))},r=function(t){var i=Lr(Ih(t,Ph),2),r=i[0],n=i[1],o=[r[0],r[1]-e],a=[n[0],n[1]+e];return t.concat(jh(o,r),jh(n,a))};return Dh(Fh(function(t){return Nh(!0,t)}(Fh(function(t){return Nh(!1,t)}(t).map(r))).map(i)))}function Uh(t,e,i){function r(e){return Object.values(an.metersToExactTileCoords(e,t.tile_level))}return Dh(function(t,e,i){return t.map(function(t){var r=Lr(t,2),n=r[0],o=r[1];return xa.coord(an.wrapTile({x:n,y:o,z:e},{x:!i,y:!0}))})}(Bh(function(t,e,i,r){var n=Gh(e,t,i),o=Gh(i,r,e);return Dh(n.concat(o))}(r(t.tetragon[0]),r(t.tetragon[1]),r(t.tetragon[3]),r(t.tetragon[2])),e),t.tile_level,i))}function Gh(t,e,i){var r=Lr(function(t,e,i){var r=Lr(t,2),n=r[0],o=r[1],a=Lr(e,2),s=a[0],l=a[1],u=Lr(i,2),c=u[0],h=u[1],f=n+(l-o)/(h-o)*(c-n);return[[[n,o]].concat(Ir(Lh([[s,l],[f,l]]))),[].concat(Ir(Lh([[s,l],[f,l]])),[[c,h]])]}.apply(void 0,Ir(function(t){return t.sort(Ph)}([t,e,i]))),2),n=r[0],o=r[1];return Dh(function(t,e,i){var r=Lr(t,2),n=r[0],o=r[1],a=Lr(e,2),s=a[0],l=a[1],u=Lr(i,1)[0];return Hh(n,s,u,o,l)}.apply(void 0,Ir(n)).concat(function(t,e,i){var r=Lr(t,2),n=r[0],o=r[1],a=Lr(e,1)[0],s=Lr(i,2),l=s[0],u=s[1];return Hh(l,n,a,u,o)}.apply(void 0,Ir(o))))}var Vh=.125;function Hh(t,e,i,r,n){var o=Math.min(t,e),a=Math.max(t,i),s=Math.min(r,n),l=Math.max(r,n);if(Math.floor(r)===Math.floor(n))return Wh(o,a,r);if(l-s<Vh)return function(t,e){var i=Lr(t,2),r=i[0],n=i[1],o=Lr(e,2),a=o[0],s=o[1],l=Kh(r,a),u=qh(l,n),c=qh(l,s);return u.concat(c)}([o,s],[a,l]);function u(t){d=d.concat(Wh(y,g,Math.floor(t))),y+=f,g+=p}var c=function(t,e){return Vh*(e-t)/(Math.ceil(e)-Math.floor(t))}(s,l),h=(l-s)/c,f=(e-t)/h,p=(i-t)/h,d=[],y=t,g=t;if(r<n)for(var v=s;v<=l;v+=c)u(v);else for(var _=l;s<=_;_-=c)u(_);return Dh(d)}function qh(t,e){return t.map(function(t){return[t,e]})}function Kh(t,e){var i=Math.floor(t),r=Math.floor(e);if(r<i)return[];if(i===r)return[i];for(var n=[],o=i;o<=r;o+=1)n.push(o);return n}function Wh(t,e,i){return qh(Kh(t,e),i)}var Yh=function(){function t(e,i){br(this,t),ca(this),this.scene=e,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==i.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new Mh(i.viewport),this._viewport=i.viewport,this.handleViewportUpdate(!0)}return wr(t,[{key:"update",value:function(){this.pan_snap_timer=(+new Date-this.panning_stop_at)/1e3,this.user_input_active=+new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,i=this._viewport,r=i.width,n=i.height;this.size.css={width:r,height:n},this.size.device={width:Math.round(r*pn.device_pixel_ratio),height:Math.round(n*pn.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),e||this.updateBounds()}},{key:"setLookAtData",value:function(t,e){var i=t.position,r=t.zoom,n=t.tilt,o=t.heading,a=t.bounds,s={zoom:r,tilt:n,heading:o};if(i&&"number"==typeof i.lng&&"number"==typeof i.lat&&(s.position=an.latLngToMeters([i.lng,i.lat])),a){var l=[],u=a.getBoundingBox();l.push(an.latLngToMeters([u.getLeft(),u.getTop()])),l.push(an.latLngToMeters([u.getRight(),u.getTop()])),l.push(an.latLngToMeters([u.getRight(),u.getBottom()])),l.push(an.latLngToMeters([u.getLeft(),u.getBottom()])),s.bounds=l}this.lookAtManipulator.setLookAtData(s,e),this.updateBounds()}},{key:"getLookAtData",value:function(t){var e=0<arguments.length&&void 0!==t&&t,i=this.lookAtManipulator.getLookAtData(),r=i.heading,n=i.incline,o=i.tilt,a=i.zoom,s=i.position,l=i.bounds,u=i.unpadded_bounds,c=Lr(an.metersToLatLng(s),2),h=c[0],f=c[1],p=new H.geo.LineString;return(e?u:l).forEach(function(t){var e=an.metersToLatLng(t);p.pushLatLngAlt(e[1],e[0],0)}),{heading:r,incline:n,tilt:o,zoom:a,bounds:new H.geo.Polygon(p),position:{lat:f,lng:h,alt:s[2]}}}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(t){this.lookAtManipulator.applyPxOffset(t),this.updateBounds()}},{key:"setPanning",value:function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){if(this.markUserInput(),this.ready()){this.center_tile=an.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level);var t=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),e=this.lookAtManipulator.screenToWorld([this.size.css.width,0]);this.bounds={sw:{x:t[0],y:t[1]},ne:{x:e[0],y:e[1]}},this.scene.tile_manager.updateTilesForView(),this.trigger("move"),this.scene.requestRedraw()}}},{key:"getTileGridFlatForBBox",value:function(t,e,i,r,n,o){var a=4<arguments.length&&void 0!==n?n:0,s=!(5<arguments.length&&void 0!==o)||o,l=this.lookAtManipulator.getLookAtData().tile_level,u=an.tileForMeters([e,t],l),c=an.tileForMeters([r,i],l);if(u.x-=a,u.y-=a,c.x+=a,c.y+=a,!1===s){var h=(1<<l)-1;u.x=Math.min(Math.max(0,u.x),h),u.y=Math.min(Math.max(0,u.y),h),c.x=Math.min(Math.max(0,c.x),h),c.y=Math.min(Math.max(0,c.y),h)}for(var f=[],p={},d=u.x;d<=c.x;d++)for(var y=u.y;y<=c.y;y++){var g=xa.coord(an.wrapTile({x:d,y:y,z:l},{x:!s,y:!0}));p[g.key]||(p[g.key]=!0,f.push(g))}return f}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return Uh(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var t=this.lookAtManipulator.getLookAtData(),e=t.tilt,i=t.heading;return 0===e&&180===i?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"pruneTilesForView",value:function(){var t=this;if(this.ready()){var e=[Math.ceil((Math.floor(this.size.css.width/an.tile_size)+2)/2),Math.ceil((Math.floor(this.size.css.height/an.tile_size)+2)/2)];this.scene.tile_manager.removeTiles(function(i){if(i.visible||i.isProxy())return!1;if(i.loading&&i.style_zoom!==t.lookAtManipulator.getLookAtData().tile_level)return!0;if(Math.abs(i.style_zoom-t.lookAtManipulator.getLookAtData().tile_level)>t.preserve_tiles_within_zoom)return!0;var r=xa.coordinateAtZoom(i.coords,t.lookAtManipulator.getLookAtData().tile_level);return Math.abs(r.x-t.center_tile.x)-e[0]>t.buffer||Math.abs(r.y-t.center_tile.y)-e[1]>t.buffer})}}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(t,e){t.setupProgram(this.matrices,e),this.lookAtManipulator.setupMatrices(this.matrices,e)}},{key:"setupProgram",value:function(t){var e=this.lookAtManipulator.getLookAtData();t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[e.position[0],e.position[1],Math.trunc(1e5*e.zoom)/1e5]),t.uniform("1f","u_meters_per_pixel",an.metersPerPixel(e.zoom)),t.uniform("1f","u_device_pixel_ratio",pn.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),t.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(t)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(t,e){var i=this.lookAtManipulator.screenToWorld([t,e]),r=Lr(an.metersToLatLng(i),2),n=r[0];return{lat:r[1],lng:n}}},{key:"geoToPixel",value:function(t){var e=an.latLngToMeters([t.lng,t.lat]);e.push(t.alt||0);var i=this.lookAtManipulator.worldToScreen(e);return{x:Math.floor(i[0]),y:Math.floor(i[1])}}},{key:"geoToMeters",value:function(t){var e=Lr(an.latLngToMeters([t.lng,t.lat]),2);return{x:e[0],y:e[1],z:t.alt||0}}},{key:"metersToGeo",value:function(t){var e=Lr(an.metersToLatLng([t.x,t.y]),2),i=e[0];return{lat:e[1],lng:i,alt:t.z||0}}},{key:"setZoomConstraints",value:function(t,e){this.lookAtManipulator.setZoomConstraints(t,e)}}]),t}(),Xh=Jc.PLACEMENT,Zh=128/Math.PI,Jh=16384/Math.PI,Qh=Object.create(xu);Qh.variants={};Object.assign(Qh,Th),Object.assign(Qh,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform float u_time;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif((\n#ifndef TANGRAM_IS_TEXT_STYLE\ntrue||\n#endif\n!u_view_panning)&&(abs(theta)<TANGRAM_EPSILON)\n#ifdef TANGRAM_HAS_SHADER_POINTS\n&&u_point_type!=TANGRAM_POINT_TYPE_SHADER\n#endif\n){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform float u_time;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(t){var e=0<arguments.length&&void 0!==t?t:{};xu.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,ql.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),!0!==ql.suppress_label_snap_animation&&(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),!0===ql.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,i){var r=i.tile,n={};if(n.color=this.parseColor(e.color,i),n.texture=e.texture,n.label_texture=null,n.color||n.texture){var o;if(this.hasSprites(n)){if(!(o=this.parseSprite(n,e,i)))return;n.texcoords=o.texcoords}if(n.size=e.size,n.size){if(n.size=Zo.evalCachedPointSizeProperty(e.size,o,i),null==n.size)return void Qr({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(e.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof n.size&&(n.size=[n.size,n.size])}else n.size=o&&o.css_size||[16,16];if(e.outline&&(n.outline_width=Zo.evalCachedProperty(e.outline.width,i)||Zo.defaults.outline.width,n.outline_color=this.parseColor(e.outline.color,i)),n.outline_edge_pct=0,n.outline_width&&n.outline_color){var a=n.outline_width;n.size[0]+=a,n.size[1]+=a,n.outline_edge_pct=a/Math.min(n.size[0],n.size[1])*2}if(n.size[0]=Math.min(n.size[0],256),n.size[1]=Math.min(n.size[1],256),n.placement=e.placement,n.placement_min_length_ratio=Zo.evalCachedProperty(e.placement_min_length_ratio,i),n.placement===Xh.SPACED&&e.placement_spacing&&(n.placement_spacing=Zo.evalCachedProperty(e.placement_spacing,i)),n.angle=Zo.evalProperty(e.angle,i)||0,n.elevate_by_altitude=!!e.elevate_by_altitude,n.z=e.z?nn.clamp(Zo.evalCachedDistanceProperty(e.z,i),0,32767):Zo.defaults.z,n.flat=e.flat,n.tile_edges=e.tile_edges,this.computeLayout(n,t,e,i,r),e.stick&&!n.flat){var s=Zo.parseNumber(Zo.evalProperty(e.stick.height,i));n.stick={color:this.parseColor(e.stick.color,i)||Zo.defaults.color,height:s?Math.max(s,0):0}}var l=e.text&&!1!==Zo.evalProperty(e.text.visible,i)&&this.parseTextFeature(t,e.text,i,r);Array.isArray(l)&&Qr({level:"warn",once:!(l=null)},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(e.text.text_source))),l&&(l.layout.parent=n,l.layout.priority=e.text.priority?Math.max(l.layout.priority,n.priority+.5):n.priority+.5,l.layout.move_into_tile=!1,aa.addStyle(this.collision_group_text,r.id)),this.queueFeature({feature:t,draw:e,context:i,style:n,text_feature:l},r),aa.addStyle(this.collision_group_points,r.id)}},hasSprites:function(t){return t.texture&&this.textureManager.textures[t.texture]&&this.textureManager.textures[t.texture].sprites},getSpriteInfo:function(t,e){var i=this.textureManager.textures[t.texture].sprites[e]&&this.textureManager.getSpriteInfo(t.texture,e);return e&&!i?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(Qr("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(e,"' for texture '").concat(t.texture,"'")),this.texture_missing_sprites[t.texture][e]=!0)):i&&(i.sprite=e),i},parseSprite:function(t,e,i){var r=Zo.evalProperty(e.sprite,i);return this.getSpriteInfo(t,r)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){var e=this;if(t.canceled)return Qr("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(t.key)),Promise.resolve();var i=this.queues[t.id];delete this.queues[t.id];var r=[],n=[];return i.forEach(function(t){for(var i=t.style,o=t.feature,a=o.geometry,s=e.buildLabels(i.size,a,i),l=0;l<s.length;l++){var u=s[l],c={feature:o,draw:t.draw,context:t.context,style:i,label:u};if(n.push(c),t.text_feature){var h={feature:o,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:u,linked:c};r.push(h),t.draw.text.optional||(c.linked=h)}}}),Promise.all([aa.collide(n,this.collision_group_points,t.id).then(function(t){t.forEach(function(t){e.feature_style=t.style,e.feature_style.label=t.label,e.feature_style.linked=t.linked,xu.addFeature.call(e,t.feature,t.draw,t.context)})}),this.collideAndRenderTextLabels(t,this.collision_group_text,r)]).then(function(i){var r=Lr(i,2)[1],n=r.labels,o=r.texts;return n&&o&&n.forEach(function(t){var i=t.text_settings_key,r=o[i]&&o[i][t.text],n=e.feature_style;n.label=t.label,n.linked=t.linked,n.size=r.size.logical_size,n.angle=0,t.label.text_data={text_info:r,text_settings_key:i,text:t.text},n.label_texture=e.textureManager.default,xu.addFeature.call(e,t.feature,t.draw,t.context)}),e.freeText(t),xu.endData.call(e,t)})},_preprocess:function(t){t.color=Zo.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=Zo.createColorPropertyCache(t.outline.color),t.outline.width=Zo.createPropertyCache(t.outline.width,Zo.parsePositiveNumber)),t.z=Zo.createPropertyCache(t.z,Zo.parseUnits);try{t.size=Zo.createPointSizePropertyCache(t.size)}catch(e){return Qr({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(e," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=Zo.createPropertyCache(t.offset,function(t){return Array.isArray(t)&&t.map(Zo.parseNumber)}),t.buffer=Zo.createPropertyCache(t.buffer,function(t){return(Array.isArray(t)?t:[t,t]).map(Zo.parsePositiveNumber)}),t.repeat_distance=Zo.createPropertyCache(t.repeat_distance,Zo.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=Xh[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=Xh.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=Zo.createPropertyCache(t.placement_spacing,Zo.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=Zo.createPropertyCache(t.placement_min_length_ratio,Zo.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.key=t.key,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=Zo.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,i,r,n){var o=t||{};o.id=e,o.units_per_pixel=n.units_per_pixel||1,o.collide=!1!==i.collide,o.anchor=i.anchor,o.offset=Zo.evalCachedProperty(i.offset,r)||Zo.zeroPair,o.buffer=Zo.evalCachedProperty(i.buffer,r)||Zo.zeroPair,o.repeat_distance=Zo.evalCachedProperty(i.repeat_distance,r),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof i.repeat_group?o.repeat_group=i.repeat_group(r):o.repeat_group=i.repeat_group);var a=i.priority;return null!=a?"function"==typeof a&&(a=a(r)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r],o=this.texts[t.id][n.text_settings_key][n.text].size.collision_size;n.label=new Jc(n.point_label.position,o,n.point_label.isFlat(),n.layout),i.push(n)}return i},buildLabels:function(t,e,i){var r=!!i.flat,n=[];if("Point"===e.type)n.push(new Jc(e.coordinates,t,r,i));else if("MultiPoint"===e.type)for(var o=e.coordinates,a=0;a<o.length;++a){var s=o[a];n.push(new Jc(s,t,r,i))}else if("LineString"===e.type)for(var l=th(e.coordinates,t,r,i),u=0;u<l.length;++u)n.push(l[u]);else if("MultiLineString"===e.type)for(var c=e.coordinates,h=0;h<c.length;h++)for(var f=th(c[h],t,r,i),p=0;p<f.length;++p)n.push(f[p]);else if("Polygon"===e.type)if(i.placement===Xh.CENTROID){var d=an.centroid(e.coordinates);n.push(new Jc(d,t,r,i))}else for(var y=e.coordinates,g=0;g<y.length;g++)for(var v=th(y[g],t,r,i),_=0;_<v.length;++_)n.push(v[_]);else if("MultiPolygon"===e.type)if(i.placement===Xh.CENTROID){var m=an.multiCentroid(e.coordinates);n.push(new Jc(m,t,r,i))}else for(var b=e.coordinates,x=0;x<b.length;x++)for(var w=b[x],k=0;k<w.length;k++)for(var A=th(w[k],t,r,i),T=0;T<A.length;++T)n.push(A[T]);return n},makeVertexTemplate:function(t,e){var i=t.color||Zo.defaults.color,r=e.vertex_data.vertex_layout;if(this.fillVertexTemplate(r,"a_position",0,{size:2}),this.fillVertexTemplate(r,"a_position",t.z||0,{size:1,offset:2}),this.fillVertexTemplate(r,"a_position",this.scaleOrder(t.order),{size:1,offset:3}),this.fillVertexTemplate(r,"a_shape",0,{size:4}),this.fillVertexTemplate(r,"a_shape",t.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(r,"a_texcoord",0,{size:2}),this.fillVertexTemplate(r,"a_offset",0,{size:2}),this.fillVertexTemplate(r,"a_color",pu.mult(i,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&e.variant.shader_point){var n=t.outline_color||Zo.defaults.outline.color;this.fillVertexTemplate(r,"a_outline_color",pu.mult(n,255),{size:4}),this.fillVertexTemplate(r,"a_outline_edge",t.outline_edge_pct||Zo.defaults.outline.width,{size:1})}return this.selection&&this.fillVertexTemplate(r,"a_selection_color",pu.mult(t.selection_color,255),{size:4}),this.fillVertexTemplate(r,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&t.stick&&(this.fillVertexTemplate(r,"a_is_stick",0,{size:1}),this.fillVertexTemplate(r,"a_stick_height",t.stick.height,{size:1})),this.vertex_template},buildQuad:function(t,e,i,r,n,o,a,s,l,u,c,h,f,p,d,y,g,v,_){return e[0]<=0||e[1]<=0?0:function(t,e,i,r){var n=r.quad,o=r.quad_normalize,a=r.offset,s=r.offsets,l=r.offsets_alt,u=r.pre_angles,c=r.pre_angles_alt,h=r.angle,f=r.angles,p=r.angles_alt,d=r.is_flat,y=r.elevate_by_altitude,g=r.build_stick_points,v=r.color,_=r.stick_color,m=r.curve,b=r.texcoord_scale,x=r.texcoord_normalize,w=r.pre_angles_normalize,k=r.angles_normalize,A=r.offsets_normalize;o=o||1;var T,E=n[0]/2*o,M=n[1]/2*o,R=[[-E,-M],[E,-M],[E,M],[-E,M]],S=e.vertex_elements,O=e.vertex_count,P=e.vertex_layout.index,L=P.a_texcoord,I=P.a_position,N=P.a_shape,C=P.a_offset,z=P.a_offsets,j=P.a_offsets_alt,D=P.a_pre_angles,F=P.a_pre_angles_alt,B=P.a_angles,U=P.a_angles_alt,G=P.a_is_flat,V=P.a_is_stick,H=P.a_color;if(L){x=x||1;var q=Lr(b||Pu,4),K=q[0],W=q[1],Y=q[2],X=q[3];T=[[K,W],[Y,W],[Y,X],[K,X]]}for(var Z=0,J=t.length,Q=0;Q<J;Q++){var $=t[Q];if(g){for(var tt=.5*o,et=1*o,it=[[-tt,0],[+tt,0],[+tt,et],[-tt,et]],rt=0;rt<4;rt++)L&&(i[L+0]=T[rt][0]*x,i[L+1]=T[rt][1]*x),i[I+0]=$[0],i[I+1]=$[1],y&&(i[I+2]=nn.clamp($[2],0,32767)),i[N+0]=it[rt][0],i[N+1]=it[rt][1],i[N+2]=0,i[H+0]=_[0],i[H+1]=_[1],i[H+2]=_[2],i[H+3]=_[3],i[V+0]=255,e.addVertex(i);S.push(O+0),S.push(O+1),S.push(O+2),S.push(O+2),S.push(O+3),S.push(O+0),O+=4,Z+=2}for(var nt=0;nt<4;nt++)L&&(i[L+0]=T[nt][0]*x,i[L+1]=T[nt][1]*x),i[I+0]=$[0],i[I+1]=$[1],y&&(i[I+2]=nn.clamp($[2],0,32767)),i[N+0]=R[nt][0],i[N+1]=R[nt][1],i[N+2]=h,i[H+0]=v[0],i[H+1]=v[1],i[H+2]=v[2],i[H+3]=v[3],i[C+0]=a[0],i[C+1]=a[1],i[G+0]=d?255:0,g&&(i[V+0]=0),m&&(i[D+0]=w*u[0],i[D+1]=w*u[1],i[D+2]=w*u[2],i[D+3]=w*u[3],i[B+0]=k*f[0],i[B+1]=k*f[1],i[B+2]=k*f[2],i[B+3]=k*f[3],i[z+0]=A*s[0],i[z+1]=A*s[1],i[z+2]=A*s[2],i[z+3]=A*s[3],l&&(i[j+0]=A*l[0],i[j+1]=A*l[1],i[j+2]=A*l[2],i[j+3]=A*l[3],i[F+0]=w*c[0],i[F+1]=w*c[1],i[F+2]=w*c[2],i[F+3]=w*c[3],i[U+0]=k*p[0],i[U+1]=k*p[1],i[U+2]=k*p[2],i[U+3]=k*p[3])),e.addVertex(i);S.push(O+0),S.push(O+1),S.push(O+2),S.push(O+2),S.push(O+3),S.push(O+0),O+=4,Z+=2}return Z}(t,d,y,{quad:e,quad_normalize:256,offset:s,offsets:l,offsets_alt:u,pre_angles:o,pre_angles_alt:a,angle:4096*i,angles:r,angles_alt:n,is_flat:f,elevate_by_altitude:p,build_stick_points:g,stick_color:g&&pu.mult(v,255),color:pu.mult(_||Zo.defaults.color,255),curve:h,texcoord_scale:c,texcoord_normalize:65535,pre_angles_normalize:Zh,angles_normalize:Jh,offsets_normalize:64})},build:function(t,e,i){var r=t.label;return"curved"===r.type?this.buildCurvedLabel(r,t,e,i):this.buildStraightLabel(r,t,e,i)},buildStraightLabel:function(t,e,i,r){var n,o,a=this.makeVertexTemplate(e,i),s=t.angle||e.angle;o="point"!==t.type?(n=e.size[t.type],Pu):(n=e.size,e.texcoords||Pu),i.uniforms=i.uniforms||{},e.label_texture?(i.uniforms.u_texture=e.label_texture,i.uniforms.u_point_type=2,i.uniforms.u_apply_color_blocks=!1):(e.texture?(i.uniforms.u_texture=e.texture,i.uniforms.u_point_type=1):(i.uniforms.u_texture=this.textureManager.default,i.uniforms.u_point_type=3),i.uniforms.u_apply_color_blocks=!0);var l=t.offset,u=this.defines.TANGRAM_POINT_DRAW_STICK&&!e.label_texture&&e.stick&&0<e.stick.height,c=this.buildQuad([t.position],n,s,null,null,null,null,l,null,null,o,!1,t.isFlat(),e.elevate_by_altitude,i.vertex_data,a,u,u&&e.stick.color,e.color),h=e.linked&&e.linked.label.id;return this.trackLabel(t,h,i,c,r,u),c},buildCurvedLabel:function(t,e,i,r){for(var n=this.makeVertexTemplate(e,i),o=t.angle,a=0,s=0;s<2;s++)for(var l=0;l<t.num_segments;l++){var u=e.size[t.type][l],c=Pu,h=this.getTileMesh(r.tile,this.meshVariantTypeForDraw(e));h.uniforms=h.uniforms||{},h.uniforms.u_texture=e.label_texture,h.uniforms.u_point_type=2,h.uniforms.u_apply_color_blocks=!1;var f=t.offset||[0,0],p=t.position,d=t.angles[l],y=t.offsets[l],g=t.pre_angles[l],v=t.num_segments-l-1,_=t.alt_angles[v],m=t.alt_pre_angles[v],b=t.alt_offsets[v],x=this.buildQuad([p],u,o,d,_,g,m,f,y,b,c,!0,t.isFlat(),e.elevate_by_altitude,h.vertex_data,n,!1,!1,e.color);a+=x;var w=e.linked&&e.linked.label.id;this.trackLabel(t,w,i,x,r,!1)}return a},trackLabel:function(t,e,i,r,n,o){var a=5<arguments.length&&void 0!==o&&o;i.labels=i.labels||{},i.labels.collision=i.labels.collision||{},i.labels["non-collision"]=i.labels["non-collision"]||{};var s=t.layout.collide?i.labels.collision:i.labels["non-collision"];s[t.id]=s[t.id]||{container:{label:t.text_data?Object.assign(t.toJSON(),{text_data:t.text_data}):t.toJSON(),linked:e},ranges:[]};var l=2*r,u=i.vertex_data.offset-i.vertex_data.stride*l;s[t.id].ranges.push([u,l,a])},buildLines:function(t,e,i,r){return this.build(e,i,r)},buildPoints:function(t,e,i,r){return this.build(e,i,r)},buildPolygons:function(t,e,i,r){return this.build(e,i,r)},vertexLayoutForMeshVariant:function(t){if(!this.vertex_layout){var e=[{name:"a_position",size:4,type:wu.SHORT,normalized:!1},{name:"a_shape",size:4,type:wu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:wu.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:wu.SHORT,normalized:!1},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:wu.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:wu.UNSIGNED_BYTE,normalized:!0}];this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&e.push({name:"a_is_stick",size:1,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:wu.FLOAT,normalized:!1}),this.vertex_layout=new Su(e),(e=e.map(function(t){return Object.assign({},t)})).forEach(function(t){"a_outline_color"!==t.name&&"a_outline_edge"!==t.name||(t.static=null)}),this.vertex_layout_shader_point=new Su(e)}return t.shader_point?this.vertex_layout_shader_point:this.vertex_layout},meshVariantTypeForDraw:function(t){var e=t.label_texture||t.texture||this.default_mesh_variant.key;return null==Qh.variants[e]&&(Qh.variants[e]={key:e,shader_point:e===this.default_mesh_variant.key,order:t.label_texture?1:0}),Qh.variants[e]},makeMesh:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{};return r=Object.assign({},r,{fade_in_time:this.fade_in_time}),xu.makeMesh.call(this,t,e,r)}});var $h=[0,.33,.66,.99],tf=function(t,e,i,r,n){for(var o=[{type:"straight",tolerance:n.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],a=0;a<o.length;a++){var s=o[a],l=void 0;if("straight"===s.type?l=new rf(e,i,r,n,s.tolerance):"curved"===s.type&&!n.no_curving&&2<i.length&&(l=new nf(t,i,r,n)),l&&!l.throw_away)return l}return!1},ef=function(){function t(e,i){br(this,t),this.id=Vc.nextLabelId(),this.layout=i,this.position=[],this.angle=0,this.offset=i.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=e,this._circles=void 0,this.placed=null}return wr(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:Hc(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,i=t.top,r=t.right,n=t.bottom;return pn.pointInTile([e,i])&&pn.pointInTile([r,n])}},{key:"getAABBForSegment",value:function(t,e,i,r){var n=this.unit_scale,o=e/2,a=i/2,s=Lr(t,2),l=s[0],u=s[1];if(0!==this.offset[0]||0!==this.offset[1]){var c=pu.rot(this.offset,this.angle);l+=c[0]*n,u-=c[1]*n}var h=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],f=pu.multMatrix(h,[-o,-a]),p=pu.multMatrix(h,[o,-a]),d=pu.multMatrix(h,[o,a]),y=pu.multMatrix(h,[-o,a]);return{left:l+Math.min(f[0],p[0],d[0],y[0]),top:u+Math.max(f[1],p[1],d[1],y[1]),right:l+Math.max(f[0],p[0],d[0],y[0]),bottom:u+Math.min(f[1],p[1],d[1],y[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(t){for(var e=[t[0]],i=0,r=0,n=0,o=e,a=!1,s=1;s<t.length;s++){var l=t[s],u=t[s-1],c=pu.length(pu.sub(l,u));l[0]>u[0]?1===n?(e.push(l),r<(i+=c)&&(o=e,r=i,a=!1)):(e=[u,l],r<(i=c)&&(o=e,r=i,a=!1),n=1):l[0]<u[0]?-1===n?(e.unshift(l),r<(i+=c)&&(o=e,r=i,a=!0)):(e=[l,u],r<(i=c)&&(o=e,r=i,a=!0),n=-1):(-1===n?e.unshift(l):(e.push(l),n=1),r<(i+=c)&&(o=e,r=i,a=-1===n))}return[o,a]}}]),t}(),rf=function(){function t(e,i,r,n,o){var a;return br(this,t),(a=Or(this,Tr(t).call(this,r,n))).type="straight",a.size=e,a.throw_away=!a.fit(e,i,n,o),a}return Ar(t,ef),wr(t,[{key:"fit",value:function(t,e,i,r){var n,o=this.unit_scale,a=Lr(ef.splitLineByOrientation(e),2);e=a[0],n=a[1],"number"==typeof i.orientation&&(this.offset[1]+=1.2*(t[1]-i.vertical_buffer),n&&(this.offset[1]*=-1),-1===i.orientation&&(this.offset[1]*=-1));for(var s=af(e),l=t[0]*o,u=0;u<e.length-1;u++)for(var c=e[u],h=0,f=0,p=u+1,d=void 0;p<e.length;){var y=e[p-1],g=e[p],v=of(y,g);if(p!==u+1&&(h+=sf(v,d)),.1<Math.abs(h))break;if(f+=s[p-1],l/f<r){var _=pu.mult(pu.add(c,g),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof i.orientation&&(this.offset[1]*=-1)),this.position=_,this.breach=!this.inTileBounds(),!0}d=v,p++}return!1}},{key:"getBoundingCircles",value:function(){if(!this._circles){var t=this.unit_scale,e=this.size[0]/2*t,i=e*Math.cos(this.angle),r=e*Math.sin(this.angle),n=-i,o=-r,a=this.offset[0]*t,s=this.offset[1]*t,l=Lr(this.position,2),u=l[0],c=l[1];if(c*=-1,a){var h=[i,r];pu.normalize(h),h[0]*=a,h[1]*=a,u+=h[0],c+=h[1]}if(s){var f=[r,-i];pu.normalize(f),f[0]*=s,f[1]*=s,u-=f[0],c-=f[1]}i+=u,r+=c,n+=u,o+=c;var p=this.size[1]/2*t;this._circles=Zc(i,r,n,o,p)}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){var t=this.unit_scale,e=this.size,i=this.layout.buffer,r=(e[0]+2*i[0])*t,n=(e[1]+2*i[1])*t;this._aabb=this.getAABBForSegment(this.position,r,n,this.angle)}return this._aabb}}]),t}(),nf=function(){function t(e,i,r,n){var o;return br(this,t),(o=Or(this,Tr(t).call(this,r,n))).type="curved",o.positions=[],o.angles=[],o._aabbs=[],o.pre_angles=[],o.offsets=[],o.num_segments=e.length,o.sizes=e,o.alt_angles=[],o.alt_pre_angles=[],o.alt_offsets=[],o.throw_away=!o.fit(o.sizes,i,n),o}return Ar(t,ef),wr(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:Hc(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(e,i,r){var n,o=this.unit_scale,a=Math.max.apply(Math,Ir(e.map(function(t){return t[1]}))),s=a*o,l=Lr(ef.splitLineByOrientation(i),2);i=l[0],n=l[1],"number"==typeof r.orientation&&(this.offset[1]+=1.2*(a-r.vertical_buffer),n&&(this.offset[1]*=-1),-1===r.orientation&&(this.offset[1]*=-1));var u=af(i),c=e.map(function(t){return t[0]*o}),h=u.reduce(function(t,e){return t+e},0),f=c.reduce(function(t,e){return t+e},0);if(h<f)return!1;var p=i.length-1;if(p-0<2)return!1;var d=t.curvaturePlacement(i,h,u,f,0,p),y=i[d];if(-1===d||p-d<2)return!1;this.position=y;for(var g=0;g<c.length;g++){this.positions[g]=[],this.offsets[g]=[],this.angles[g]=[],this.pre_angles[g]=[];for(var v=0;v<$h.length;v++){var _=$h[v],m=Lr(t.scaleLine(_,i),2),b=m[0],x=m[1];y=b[d];var w=t.placeAtIndex(d,b,x,c),k=w.positions,A=w.offsets,T=w.angles,E=w.pre_angles,M=A.map(function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o});if(0===_){this.angle=1/T.length*T.reduce(function(t,e){return t+e});for(var R=0;R<k.length;R++){var S=k[R],O=E[R],P=c[R],L=O+T[R];this._aabbs.push(this.getAABBForSegment(S,P,s,L))}}this.positions[g].push(k[g]),this.offsets[g].push(M[g]),this.angles[g].push(T[g]),this.pre_angles[g].push(E[g])}}c=e.slice().reverse().map(function(t){return t[0]*o});for(var I=0;I<c.length;I++){this.alt_offsets[I]=[],this.alt_angles[I]=[],this.alt_pre_angles[I]=[];for(var N=0;N<$h.length;N++){var C=$h[N],z=Lr(t.scaleLine(C,i),2),j=(b=z[0],z[1]);y=b[d];var D=t.placeAtIndex(d,b,j,c),F=(A=D.offsets,T=D.angles,E=D.pre_angles,A.map(function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));0===C&&(this.alt_angle=1/T.length*T.reduce(function(t,e){return t+e})),this.alt_offsets[I].push(F[I]),this.alt_angles[I].push(T[I]),this.alt_pre_angles[I].push(E[I])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var t=[],e=this.unit_scale,i=0;i<this.positions.length;i++){var r=this.sizes[i],n=this.angles[i][0],o=this.positions[i][0],a=r[0]/2*e,s=a*Math.cos(n),l=a*Math.sin(n),u=-s,c=-l,h=Lr(o,2),f=h[0],p=h[1],d=Zc(s+=f,l+=p*=-1,u+=f,c+=p,r[1]/2*e);Array.prototype.push.apply(t,d)}this._circles=t}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var t=1/0,e=-1/0,i=-1/0,r=1/0,n=0;n<this._aabbs.length;n++){var o=this._aabbs[n];t=Math.min(t,o.left),e=Math.max(e,o.top),i=Math.max(i,o.right),r=Math.min(r,o.bottom)}this._aabb={left:t,top:e,right:i,bottom:r}}return this._aabb}}],[{key:"curvaturePlacement",value:function(t,e,i,r,n,o){n=n||0,o=o||t.length-1;for(var a=[],s=n+1;s<o;s++){var l=t[s-1],u=t[s],c=t[s+1],h=pu.perp(u,l),f=pu.perp(c,u),p=pu.angleBetween(h,f);1<p&&(p=1/0),a.push(p)}a.push(1/0);for(var d=[],y=[],g=n,v=0,_=0;_<n;_++)v+=i[_];for(;v+r<e;){for(var m=v+r,b=v,x=g,w=0;x<o&&b+i[x]<m&&(w+=a[x])!==1/0;)b+=i[x],x++;if(0===w)return g;var k=w/(x-g);d.push(w),y.push(k),v+=i[g],g++}if(0===d.length)return-1;var A=Math.min.apply(null,d),T=y[d.indexOf(A)];return A<1.3&&T<.4?d.indexOf(A):-1}},{key:"scaleLine",value:function(t,e){var i=[e[0]],r=[];return e.forEach(function(n,o){if(o!==e.length-1){var a=pu.sub(e[o+1],e[o]),s=pu.mult(a,1+t);i.push(pu.add(i[o],s)),r.push(pu.length(s))}}),[i,r]}},{key:"placeAtIndex",value:function(e,i,r,n){var o=i[e],a=Lr(t.getIndicesAndOffsets(e,r,n),2),s=a[0],l=a[1],u=t.getPositionsFromIndicesAndOffsets(i,s,l),c=Lr(t.getAnglesFromIndicesAndOffsets(o,s,i,u),3);return{positions:u,offsets:c[0],angles:c[1],pre_angles:c[2]}}},{key:"getIndicesAndOffsets",value:function(t,e,i){for(var r=i.length,n=[],o=[],a=0,s=0,l=0;a<r;){for(var u=i[a];a<r&&s+.5*u<=l+e[t];){var c=s-l+.5*u;o.push(c),n.push(t),s+=u,u=i[++a]}l+=e[t],t++}return[n,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(t,e,i){for(var r=[],n=0;n<e.length;n++){var o=e[n],a=i[n],s=of(t[o],t[o+1]),l=pu.rot([a,0],s),u=pu.add(t[o],l);r.push(u)}return r}},{key:"getAnglesFromIndicesAndOffsets",value:function(t,e,i,r){for(var n,o,a=[],s=[],l=[],u=0;u<r.length;u++){var c=r[u],h=e[u],f=pu.sub(c,t),p=-pu.angle(f),d=(n=i[h],o=i[h+1],-of(n,o))-p;if(0<u){var y=a[u-1],g=s[u-1];Math.abs(p-y)>Math.PI&&(p+=y<p?-2*Math.PI:2*Math.PI),Math.abs(g-d)>Math.PI&&(d+=g<d?-2*Math.PI:2*Math.PI)}a.push(p),s.push(d),l.push(f)}return[l,a,s]}}]),t}();function of(t,e){var i=pu.sub(e,t);return pu.angle(i)}function af(t){for(var e=[],i=0;i<t.length-1;i++){var r=t[i],n=t[i+1],o=Math.hypot(r[0]-n[0],r[1]-n[1]);e.push(o)}return e}function sf(t,e){var i,r;for(r=e<t?(i=e,t):(i=t,e);r-i>Math.PI;)i+=2*Math.PI;return Math.abs(r-i)}var lf=Object.create(Qh);Object.assign(lf,{name:"text",super:Qh,built_in:!0,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};xu.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.apply(this,arguments);var i=e.vertex_data.vertex_layout;return this.fillVertexTemplate(i,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(i,"a_offsets",0,{size:4}),this.fillVertexTemplate(i,"a_angles",0,{size:4}),this.fillVertexTemplate(i,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(i,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(i,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,i){var r=this,n=i.tile,o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(t,e,i,n);a&&(a instanceof Array?a.forEach(function(e){e.feature=t,e.context=i,e.layout.vertex=!1,r.queueFeature(e,n)}):(a.feature=t,a.context=i,a.layout.vertex=!1,this.queueFeature(a,n)),aa.addStyle(this.name,n.id))},endData:function(t){var e=this,i=this.queues[t.id];return delete this.queues[t.id],this.collideAndRenderTextLabels(t,this.name,i).then(function(i){var r=i.labels,n=i.texts;return r&&n&&(e.texts[t.id]=n,r.forEach(function(i){var r=i.text_settings_key,n=e.texts[t.id][r]&&e.texts[t.id][r][i.text],o=e.feature_style;o.label=i.label,i.label.text_data={text_info:n,text_settings_key:r,text:i.text},o.label_texture=e.textureManager.default,n.text_settings.can_articulate?(o.size={},"straight"===i.label.type?o.size.straight=n.size.logical_size:o.size.curved=n.segment_sizes.map(function(t){return t.logical_size})):o.size=n.size.logical_size,xu.addFeature.call(e,i.feature,i.draw,i.context)})),e.freeText(t),xu.endData.call(e,t).then(function(i){if(i){for(var r in i.meshes)i.meshes[r].uniforms.u_apply_color_blocks=!0;t.mesh_data[e.name]=i}return i})})},_preprocess:function(t){return this.preprocessText(t)},buildTextLabels:function(t,e){for(var i=[],r=0;r<e.length;r++){var n=e[r],o=this.texts[t.id][n.text_settings_key][n.text],a=void 0;if(n.layout.vertical_buffer=o.vertical_buffer,o.text_settings.can_articulate){var s=o.segment_sizes.map(function(t){return t.collision_size});n.layout.no_curving=o.no_curving,a=this.buildLabels(s,n.feature.geometry,n.layout,o.size.collision_size)}else a=this.buildLabels(o.size.collision_size,n.feature.geometry,n.layout);for(var l=0;l<a.length;l++){var u=Object.create(n);u.label=a[l],i.push(u)}}return i},buildLabels:function(t,e,i,r){var n="Point"!==e.type,o=[];if("LineString"===e.type)Array.prototype.push.apply(o,this.buildLineLabels(e.coordinates,t,n,i,r));else if("MultiLineString"===e.type)for(var a=e.coordinates,s=0;s<a.length;++s)Array.prototype.push.apply(o,this.buildLineLabels(a[s],t,n,i,r));else if("Point"===e.type)o.push(new Jc(e.coordinates,t,n,i));else if("MultiPoint"===e.type)for(var l=e.coordinates,u=0;u<l.length;++u)o.push(new Jc(l[u],t,n,i));else if("Polygon"===e.type){var c=an.centroid(e.coordinates);o.push(new Jc(c,t,n,i))}else if("MultiPolygon"===e.type){var h=an.multiCentroid(e.coordinates);o.push(new Jc(h,t,n,i))}return o},buildLineLabels:function(t,e,i,r,n){var o=[],a=Math.min(r.subdiv,t.length-1);if(1<a)for(var s=(t.length-1)/a,l=0;l<a;l++){var u=Math.floor(l*s),c=Math.floor((l+1)*s)+1,h=t.slice(u,c),f=tf(e,n,h,i,r);f&&o.push(f)}if(o.length<a){var p=tf(e,n,t,i,r);p&&o.push(p)}return o},vertexLayoutForMeshVariant:function(){if(!this.vertex_layout){var t=[{name:"a_position",size:4,type:wu.SHORT,normalized:!1},{name:"a_shape",size:4,type:wu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:wu.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:wu.SHORT,normalized:!1},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:wu.SHORT,normalized:!1},{name:"a_offsets",size:4,type:wu.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:wu.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:wu.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:wu.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:wu.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:wu.SHORT,normalized:!1}];this.vertex_layout=new Su(t)}return this.vertex_layout},meshVariantTypeForDraw:Qh.meshVariantTypeForDraw}),lf.texture_id=0;var uf=Object.create(sc);Object.assign(uf,{name:"raster",super:sc,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(t){return t.color=t.color||Zo.defaults.color,this.super._preprocess.apply(this,arguments)}});var cf=Object.create(Qh);Object.assign(cf,{name:"custom_icons",collision:!1,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};Qh.init.call(this,e)},loadTexture:function(t,e,i){var r,n=t.width,o=t.height,a=t.items,s=document.createElement("canvas"),l=pn.device_pixel_ratio,u=this.sources[e],c={sprites:{}};if(s.width=n*l,s.height=o*l,u){var h,f=a.length,p=s.getContext("2d");for(p.scale(l,l);h=a[--f];){var d=u.getIconBitmapByObjectId(h.meta.objectId,h.meta.id);if(d){var y=Sl(d);y?Qr("error",y):(p.drawImage(d,h.x,h.y,h.width,h.height),c.sprites[h.meta.id]=[h.x,h.y,h.width,h.height])}}}return c.element=s,(r=this.textureManager.create(this.gl,i,c)).retain(),r.loading.then(function(t){return t.name})},buildRasterTextures:function(t,e){return Fr.postMessage(this.main_thread_target+".loadTexture",t.rasters,t.source,t.texture_name).then(function(t){return e.textures.push(t),e})},addFeature:function(t,e,i){var r=i.tile.rasters,n={};r.items.forEach(function(t){n[t.meta.id]=[t.x,t.y,t.width,t.height]});var o="".concat(i.tile.source,"_dyn_").concat(i.tile.coords.key,"_").concat(this.generation,"_").concat(i.tile.id);e.texture=i.tile.texture_name=o;var a=Object.assign({},hf,{name:o,width:r.width,height:r.height,sprites:n,manager:this.textureManager});ua.prototype.calculateSprites.apply(a),this.textureManager.textures[o]=a,Qh.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var hf={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},ff=Object.create(sc);Object.assign(ff,{name:"overlays",super:sc,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},countObjectSource:function(t,e){return t+(this.sources[e]instanceof Il)},setupRasters:function(){if(this.super.setupRasters.call(this),"0"===this.defines.TANGRAM_NUM_RASTER_SOURCES){var t=Object.keys(this.sources).reduce(this.countObjectSource.bind(this),0);t&&(this.defines.TANGRAM_NUM_RASTER_SOURCES="".concat(t),this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0,this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",bu,"Raster"))}},loadTextures:function(t,e){var i,r,n,o=this.sources[e],a=t.name;if(t.overlays_config.forEach(function(e){var a=e.texcoords,s=e.id,l=o.getMapObjectById(s),u=l.getBitmap();if(u){var c=Sl(u=Ol(u,u.width,u.height));c?Qr("error",c):(i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,r=i.getContext("2d")),r.save(),r.globalAlpha=l.getOpacity(),a.forEach(function(t){return r.drawImage(u,t[0],t[1],t[2],t[3])}),r.restore(),n=!0)}}),n){t.element=i;var s={};return s[a]=t,this.super.loadTextures.call(this,s)}var l=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:l.name,width:l.width,height:l.height,loaded:l.loaded}])},buildRasterTextures:function(t,e){var i=this.sources[t.source].tileTexture(t);if(!i)return Promise.resolve(e);return{}[({}[i.name]=i).name]=0,Fr.postMessage(this.main_thread_target+".loadTextures",i,t.source).then(function(t){if(!t||t.length<1)return e;if(t.some(function(t){return!t.loaded}))return null;var i=t[0];return e.uniforms=e.uniforms||{},e.textures=e.textures||[],e.uniforms.u_rasters=[i.name],e.uniforms.u_raster_sizes=[i.width,i.height],e.uniforms.u_raster_offsets=[0,0,1],e.textures.push(i.name),e})}});var pf=Object.create(xu),df=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(pf,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_position.y*a_is_sky+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){xu.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color={top:Zo.createColorPropertyCache(t.color.zenith),bottom:Zo.createColorPropertyCache(t.color.horizon),fog:Zo.createColorPropertyCache(t.color.fog)},t},vertexLayoutForMeshVariant:function(t){if(!this.vertex_layout){var e=[{name:"a_position",size:2,type:wu.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:wu.FLOAT,normalized:!0},{name:"a_color",size:4,type:wu.UNSIGNED_BYTE,normalized:!0}];this.vertex_layout=new Su(e)}return this.vertex_layout},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template},parseFeature:function(t,e,i){var r=this.feature_style;return e.color&&e.color.top&&e.color.bottom&&(r.color_top=this.parseColor(e.color.top,i),r.color_bottom=this.parseColor(e.color.bottom,i),r.color_fog=this.parseColor(e.color.fog||"white",i),r.color_fog[3]=0),r},buildGeometry:function(t,e,i,r){for(var n=this.makeVertexTemplate(e),o=i.vertex_data,a=i.vertex_data.vertex_layout,s=o.vertex_layout.index.a_position,l={top:e.color_top,bottom:e.color_bottom},u={top:e.color_bottom,bottom:e.color_fog},c=0,h=df.length-1;c<h;c+=2){n[s+0]=df[c],n[s+1]=df[c+1];var f=c<12,p=0<df[c+1],d=f?l:u;this.fillVertexTemplate(a,"a_is_sky",f?1:0,{size:1}),this.fillVertexTemplate(a,"a_color",pu.mult(p?d.top:d.bottom,255),{size:4}),o.addVertex(n)}return 4}});var yf=function(){function t(){br(this,t),this.styles={},this.base_styles={},this.register(Object.create(sc)),this.register(Object.create(Rc)),this.register(Object.create(Cc)),this.register(Object.create(Qh)),this.register(Object.create(lf)),this.register(Object.create(uf)),this.register(Object.create(cf)),this.register(Object.create(ff)),this.register(Object.create(pf))}return wr(t,[{key:"init",value:function(){au.removeBlock("global"),au.removeBlock("setup"),au.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),au.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),au.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),au.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),au.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),au.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),au.defines.TANGRAM_EPSILON=1e-5,au.defines.TANGRAM_LAYER_DELTA=1/16384,au.defines.TANGRAM_TILE_SCALE="vec3(".concat(an.tile_scale,"., ").concat(an.tile_scale,"., u_meters_per_pixel * ").concat(an.tile_size,".)"),au.defines.TANGRAM_HEIGHT_SCALE=an.height_scale,au.defines.TANGRAM_ALPHA_TEST=.1,Rc.dash_textures={}}},{key:"destroy",value:function(t){var e=this;Object.keys(this.styles).forEach(function(i){var r=e.styles[i];r.gl===t&&(Qr("trace","StyleManager.destroy: destroying render style ".concat(r.name)),r.base&&e.remove(r.name),r.destroy())})}},{key:"register",value:function(t){this.styles[t.name]=t,this.base_styles[t.name]=t}},{key:"remove",value:function(t){delete this.styles[t]}},{key:"mix",value:function(t,e){if(t.mixed)return t;t.mixed={};var i=[];if(t.mix){var r;if(Array.isArray(t.mix))(r=i).push.apply(r,Ir(t.mix));else i.push(t.mix);(i=i.map(function(t){return e[t]}).filter(function(e){return e&&e!==t})).forEach(function(e){return t.mixed[e.name]=!0})}i.push(t),t.animated=i.some(function(t){return t&&t.animated}),t.texcoords=i.some(function(t){return t&&t.texcoords}),t.base=i.map(function(t){return t.base}).filter(function(t){return t}).pop(),t.lighting=i.map(function(t){return t.lighting}).filter(function(t){return null!=t}).pop(),t.texture=i.map(function(t){return t.texture}).filter(function(t){return t}).pop(),t.raster=i.map(function(t){return t.raster}).filter(function(t){return null!=t}).pop(),t.dash=i.map(function(t){return t.dash}).filter(function(t){return null!=t}).pop(),t.dash_background_color=i.map(function(t){return t.dash_background_color}).filter(function(t){return null!=t}).pop(),i.some(function(t){return t.hasOwnProperty("blend")&&t.blend})&&(t.blend=i.map(function(t){return t.hasOwnProperty("blend")&&t.blend}).filter(function(t){return t}).pop()),t.blend_order=i.map(function(t){return t.blend_order}).filter(function(t){return null!=t}).pop(),t.defines=Object.assign.apply(Object,[{}].concat(Ir(i.map(function(t){return t.defines}).filter(function(t){return t})))),t.material=Object.assign.apply(Object,[{}].concat(Ir(i.map(function(t){return t.material}).filter(function(t){return t}))));var n=i.map(function(t){return t.draw}).filter(function(t){return t});return 0<n.length&&(t.draw=Rl.apply(void 0,[{}].concat(Ir(n)))),this.mixShaders(t,e,i),t}},{key:"mixShaders",value:function(t,e,i){var r={},n=i.map(function(t){return t.shaders}).filter(function(t){return t});if(r.defines=Object.assign.apply(Object,[{}].concat(Ir(n.map(function(t){return t.defines}).filter(function(t){return t})))),r.uniforms={},r._uniforms=t.shaders&&t.shaders.uniforms||{},r._uniform_scopes={},i.filter(function(t){return t.shaders&&t.shaders.uniforms}).forEach(function(t){function i(i){r._uniform_scopes[i]=t.name,Object.defineProperty(r.uniforms,i,{enumerable:!0,configurable:!0,get:function(){return void 0!==r._uniforms[i]?r._uniforms[i]:e[r._uniform_scopes[i]].shaders.uniforms!==r.uniforms?e[r._uniform_scopes[i]].shaders.uniforms[i]:void 0},set:function(t){r._uniforms[i]=t}})}for(var n in t.shaders.uniforms)i(n)}),r.extensions=Object.keys(n.map(function(t){return t.extensions}).filter(function(t){return t}).reduce(function(t,e){return"string"==typeof e?t[e]=!0:e.forEach(function(e){return t[e]=!0}),t},{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var a,s=t.shaders.blocks[o];if(t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(s))(a=t.shaders.block_scopes[o]).push.apply(a,Ir(s.map(function(){return t.name})));else t.shaders.block_scopes[o].push(t.name)}var l={};return n.forEach(function(t){if(t.blocks){r.blocks=r.blocks||{},r.block_scopes=r.block_scopes||{};var e={};for(var i in t.blocks){var n=t.blocks[i],o=t.block_scopes[i];r.blocks[i]=r.blocks[i]||[],r.block_scopes[i]=r.block_scopes[i]||[],n=Array.isArray(n)?n:[n],o=Array.isArray(o)?o:[o];for(var a=0;a<n.length;a++)l[o[a]]||(e[o[a]]=!0,r.blocks[i].push(n[a]),r.block_scopes[i].push(o[a]))}Object.assign(l,e)}}),Object.assign(t.mixed,l),t.shaders=r,t}},{key:"create",value:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{},n=Rl({},e);return n.name=t,(n=this.mix(n,r)).base&&this.base_styles[n.base]?this.styles[t]=n=Object.assign(Object.create(this.base_styles[n.base]),n):n.base=null,n}},{key:"build",value:function(t){var e=this,i=Object.keys(t).sort(function(i,r){return e.inheritanceDepth(i,t)-e.inheritanceDepth(r,t)});for(var r in this.styles)this.base_styles[r]?this.styles[r].reset():delete this.styles[r];var n={};return i.forEach(function(i){n[i]=e.create(i,t[i],n)}),this.styles}},{key:"initStyles",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};for(var i in this.styles)this.styles[i].init(e)}},{key:"inheritanceDepth",value:function(t,e){for(var i=this,r=0;;){var n=e[t];if(!n)break;if(!n.mix)break;if(r++,Array.isArray(n.mix)){r+=Math.max.apply(Math,Ir(n.mix.map(function(r){if(t!==r)return i.inheritanceDepth(r,e)})));break}if(t===n.mix)break;t=n.mix}return r}}]),t}();function gf(t){return null==t}var vf={isNothing:gf,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:gf(t)?[]:[t]},repeat:function(t,e){var i,r="";for(i=0;i<e;i+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var i,r,n,o;if(e)for(i=0,r=(o=Object.keys(e)).length;i<r;i+=1)t[n=o[i]]=e[n];return t}};function _f(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((_f.prototype=Object.create(Error.prototype)).constructor=_f).prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var mf=_f;function bf(t,e,i,r,n){this.name=t,this.buffer=e,this.position=i,this.line=r,this.column=n}bf.prototype.getSnippet=function(t,e){var i,r,n,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,i="",r=this.position;0<r&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>e/2-1){i=" ... ",r+=5;break}for(n="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){n=" ... ",o-=5;break}return a=this.buffer.slice(r,o),vf.repeat(" ",t)+i+a+n+"\n"+vf.repeat(" ",t+this.position-r+i.length)+"^"},bf.prototype.toString=function(t){var e,i="";return this.name&&(i+='in "'+this.name+'" '),i+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(i+=":\n"+e),i};var xf=bf,wf=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],kf=["scalar","sequence","mapping"];var Af=function(t,e){if(e=e||{},Object.keys(e).forEach(function(e){if(-1===wf.indexOf(e))throw new mf('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach(function(i){t[i].forEach(function(t){e[String(t)]=i})}),e}(e.styleAliases||null),-1===kf.indexOf(this.kind))throw new mf('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Tf(t,e,i){var r=[];return t.include.forEach(function(t){i=Tf(t,e,i)}),t[e].forEach(function(t){i.forEach(function(e,i){e.tag===t.tag&&r.push(i)}),i.push(t)}),i.filter(function(t,e){return-1===r.indexOf(e)})}function Ef(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new mf("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=Tf(this,"implicit",[]),this.compiledExplicit=Tf(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,i={};function r(t){i[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return i}(this.compiledImplicit,this.compiledExplicit)}Ef.DEFAULT=null,Ef.create=function(t,e){var i,r;switch(arguments.length){case 1:i=Ef.DEFAULT,r=t;break;case 2:i=t,r=e;break;default:throw new mf("Wrong number of arguments for Schema.create function")}if(i=vf.toArray(i),r=vf.toArray(r),!i.every(function(t){return t instanceof Ef}))throw new mf("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(t){return t instanceof Af}))throw new mf("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Ef({include:i,explicit:r})};var Mf=Ef,Rf=new Mf({explicit:[new Af("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Af("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Af("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]});var Sf=new Af("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});var Of=new Af("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});var Pf=new Af("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,r,n,o=t.length,a=0,s=!1;if(!o)return!1;if("-"!==(e=t[a])&&"+"!==e||(e=t[++a]),"0"===e){if(a+1===o)return!0;if("b"===(e=t[++a])){for(a++;a<o;a++)if("_"!==(e=t[a])){if("0"!==e&&"1"!==e)return!1;s=!0}return s}if("x"===e){for(a++;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(r=t.charCodeAt(a))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(i=t.charCodeAt(a))&&i<=55))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(":"===e)break;if(!(48<=(n=t.charCodeAt(a))&&n<=57))return!1;s=!0}return!!s&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(a)))},construct:function(t){var e,i,r=t,n=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(e=r[0])&&"+"!==e||("-"===e&&(n=-1),e=(r=r.slice(1))[0]),"0"===r?0:"0"===e?"b"===r[1]?n*parseInt(r.slice(2),2):"x"===r[1]?n*parseInt(r,16):n*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(t){o.unshift(parseInt(t,10))}),r=0,i=1,o.forEach(function(t){r+=t*i,i*=60}),n*r):n*parseInt(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!vf.isNegativeZero(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Lf=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var If=/^[-+]?[0-9]+e/;var Nf=new Mf({include:[Rf],implicit:[Sf,Of,Pf,new Af("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!Lf.test(t)},construct:function(t){var e,i,r,n;return i="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,n=[],0<="+-".indexOf(e[0])&&(e=e.slice(1)),".inf"===e?1==i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:0<=e.indexOf(":")?(e.split(":").forEach(function(t){n.unshift(parseFloat(t,10))}),e=0,r=1,n.forEach(function(t){e+=t*r,r*=60}),i*e):i*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||vf.isNegativeZero(t))},represent:function(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vf.isNegativeZero(t))return"-0.0";return i=t.toString(10),If.test(i)?i.replace("e",".e"):i},defaultStyle:"lowercase"})]}),Cf=new Mf({include:[Nf]}),zf=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");var jf=new Af("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==zf.exec(t)},construct:function(t){var e,i,r,n,o,a,s,l,u=0,c=null;if(null===(e=zf.exec(t)))throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(i,r,n));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(c=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(c=-c)),l=new Date(Date.UTC(i,r,n,o,a,s,u)),c&&l.setTime(l.getTime()-c),l},instanceOf:Date,represent:function(t){return t.toISOString()}});var Df=new Af("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),Ff=Os.Buffer,Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Uf=new Af("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,r=0,n=t.length,o=Bf;for(i=0;i<n;i++)if(!(64<(e=o.indexOf(t.charAt(i))))){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,i,r=t.replace(/[\r\n=]/g,""),n=r.length,o=Bf,a=0,s=[];for(e=0;e<n;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0==(i=n%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18==i?(s.push(a>>10&255),s.push(a>>2&255)):12==i&&s.push(a>>4&255),Ff?new Ff(s):s},predicate:function(t){return Ff&&Ff.isBuffer(t)},represent:function(t){var e,i,r="",n=0,o=t.length,a=Bf;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[n>>18&63],r+=a[n>>12&63],r+=a[n>>6&63],r+=a[63&n]),n=(n<<8)+t[e];return 0==(i=o%3)?(r+=a[n>>18&63],r+=a[n>>12&63],r+=a[n>>6&63],r+=a[63&n]):2==i?(r+=a[n>>10&63],r+=a[n>>4&63],r+=a[n<<2&63],r+=a[64]):1==i&&(r+=a[n>>2&63],r+=a[n<<4&63],r+=a[64],r+=a[64]),r}}),Gf=Object.prototype.hasOwnProperty,Vf=Object.prototype.toString;var Hf=new Af("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,r,n,o,a=[],s=t;for(e=0,i=s.length;e<i;e+=1){if(r=s[e],o=!1,"[object Object]"!==Vf.call(r))return!1;for(n in r)if(Gf.call(r,n)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(n))return!1;a.push(n)}return!0},construct:function(t){return null!==t?t:[]}}),qf=Object.prototype.toString;var Kf=new Af("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,r,n,o,a=t;for(o=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],"[object Object]"!==qf.call(r))return!1;if(1!==(n=Object.keys(r)).length)return!1;o[e]=[n[0],r[n[0]]]}return!0},construct:function(t){if(null===t)return[];var e,i,r,n,o,a=t;for(o=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],n=Object.keys(r),o[e]=[n[0],r[n[0]]];return o}}),Wf=Object.prototype.hasOwnProperty;var Yf=new Mf({include:[Cf],implicit:[jf,Df],explicit:[Uf,Hf,Kf,new Af("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,i=t;for(e in i)if(Wf.call(i,e)&&null!==i[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]});var Xf=new Af("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}});var Zf,Jf=new Af("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,i=/\/([gim]*)$/.exec(t),r="";if("/"===e[0]){if(i&&(r=i[1]),3<r.length)return!1;if("/"!==e[e.length-r.length-1])return!1}return!0},construct:function(t){var e=t,i=/\/([gim]*)$/.exec(t),r="";return"/"===e[0]&&(i&&(r=i[1]),e=e.slice(1,e.length-r.length-1)),new RegExp(e,r)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{Zf=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}("esprima")}catch(o){"undefined"!=typeof window&&(Zf=window.esprima)}var Qf=new Af("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",i=Zf.parse(e,{range:!0});return"Program"===i.type&&1===i.body.length&&"ExpressionStatement"===i.body[0].type&&"FunctionExpression"===i.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,i="("+t+")",r=Zf.parse(i,{range:!0}),n=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(t){n.push(t.name)}),e=r.body[0].expression.body.range,new Function(n,i.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),$f=Mf.DEFAULT=new Mf({include:[Yf],explicit:[Xf,Jf,Qf]}),tp=Object.prototype.hasOwnProperty,ep=1,ip=2,rp=3,np=4,op=1,ap=2,sp=3,lp=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,up=/[\x85\u2028\u2029]/,cp=/[,\[\]\{\}]/,hp=/^(?:!|!!|![a-z\-]+!)$/i,fp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function pp(t){return 10===t||13===t}function dp(t){return 9===t||32===t}function yp(t){return 9===t||32===t||10===t||13===t}function gp(t){return 44===t||91===t||93===t||123===t||125===t}function vp(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t?"\t":9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?"":76===t?"\u2028":80===t?"\u2029":""}for(var _p=new Array(256),mp=new Array(256),bp=0;bp<256;bp++)_p[bp]=vp(bp)?1:0,mp[bp]=vp(bp);function xp(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||$f,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function wp(t,e){return new mf(e,new xf(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function kp(t,e){throw wp(t,e)}function Ap(t,e){t.onWarning&&t.onWarning.call(null,wp(t,e))}var Tp={YAML:function(t,e,i){var r,n,o;null!==t.version&&kp(t,"duplication of %YAML directive"),1!==i.length&&kp(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&kp(t,"ill-formed argument of the YAML directive"),n=parseInt(r[1],10),o=parseInt(r[2],10),1!==n&&kp(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&Ap(t,"unsupported YAML version of the document")},TAG:function(t,e,i){var r,n;2!==i.length&&kp(t,"TAG directive accepts exactly two arguments"),r=i[0],n=i[1],hp.test(r)||kp(t,"ill-formed tag handle (first argument) of the TAG directive"),tp.call(t.tagMap,r)&&kp(t,'there is a previously declared suffix for "'+r+'" tag handle'),fp.test(n)||kp(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[r]=n}};function Ep(t,e,i,r){var n,o,a,s;if(e<i){if(s=t.input.slice(e,i),r)for(n=0,o=s.length;n<o;n+=1)9===(a=s.charCodeAt(n))||32<=a&&a<=1114111||kp(t,"expected valid JSON character");else lp.test(s)&&kp(t,"the stream contains non-printable characters");t.result+=s}}function Mp(t,e,i,r){var n,o,a,s;for(vf.isObject(i)||kp(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(n=Object.keys(i)).length;a<s;a+=1)o=n[a],tp.call(e,o)||(e[o]=i[o],r[o]=!0)}function Rp(t,e,i,r,n,o){var a,s;if(n=String(n),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)Mp(t,e,o[a],i);else Mp(t,e,o,i);else t.json||tp.call(i,n)||!tp.call(e,n)||kp(t,"duplicated mapping key"),e[n]=o,delete i[n];return e}function Sp(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):kp(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Op(t,e,i){for(var r=0,n=t.input.charCodeAt(t.position);0!==n;){for(;dp(n);)n=t.input.charCodeAt(++t.position);if(e&&35===n)for(;10!==(n=t.input.charCodeAt(++t.position))&&13!==n&&0!==n;);if(!pp(n))break;for(Sp(t),n=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===n;)t.lineIndent++,n=t.input.charCodeAt(++t.position)}return-1!==i&&0!==r&&t.lineIndent<i&&Ap(t,"deficient indentation"),r}function Pp(t){var e,i=t.position;return!(45!==(e=t.input.charCodeAt(i))&&46!==e||e!==t.input.charCodeAt(i+1)||e!==t.input.charCodeAt(i+2)||(i+=3,0!==(e=t.input.charCodeAt(i))&&!yp(e)))}function Lp(t,e){1===e?t.result+=" ":1<e&&(t.result+=vf.repeat("\n",e-1))}function Ip(t,e){var i,r,n=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&45===r&&yp(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,Op(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(i=t.line,zp(t,e,rp,!1,!0),a.push(t.result),Op(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&0!==r)kp(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=n,t.anchor=o,t.kind="sequence",t.result=a,!0)}function Np(t){var e,i,r,n,o=!1,a=!1;if(33!==(n=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&kp(t,"duplication of a tag property"),60===(n=t.input.charCodeAt(++t.position))?(o=!0,n=t.input.charCodeAt(++t.position)):33===n?(a=!0,i="!!",n=t.input.charCodeAt(++t.position)):i="!",e=t.position,o){for(;0!==(n=t.input.charCodeAt(++t.position))&&62!==n;);t.position<t.length?(r=t.input.slice(e,t.position),n=t.input.charCodeAt(++t.position)):kp(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!yp(n);)33===n&&(a?kp(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),hp.test(i)||kp(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),n=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),cp.test(r)&&kp(t,"tag suffix cannot contain flow indicator characters")}return r&&!fp.test(r)&&kp(t,"tag name cannot contain such characters: "+r),o?t.tag=r:tp.call(t.tagMap,i)?t.tag=t.tagMap[i]+r:"!"===i?t.tag="!"+r:"!!"===i?t.tag="tag:yaml.org,2002:"+r:kp(t,'undeclared tag handle "'+i+'"'),!0}function Cp(t){var e,i;if(38!==(i=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&kp(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!yp(i)&&!gp(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&kp(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function zp(t,e,i,r,n){var o,a,s,l,u,c,h,f,p=1,d=!1,y=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=np===i||rp===i,r&&Op(t,!0,-1)&&(d=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),1===p)for(;Np(t)||Cp(t);)Op(t,!0,-1)?(d=!0,s=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):s=!1;if(s&&(s=d||n),1!==p&&np!==i||(h=ep===i||ip===i?e:e+1,f=t.position-t.lineStart,1===p?s&&(Ip(t,f)||function(t,e,i){var r,n,o,a,s=t.tag,l=t.anchor,u={},c={},h=null,f=null,p=null,d=!1,y=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=u),a=t.input.charCodeAt(t.position);0!==a;){if(r=t.input.charCodeAt(t.position+1),o=t.line,63!==a&&58!==a||!yp(r)){if(!zp(t,i,ip,!1,!0))break;if(t.line===o){for(a=t.input.charCodeAt(t.position);dp(a);)a=t.input.charCodeAt(++t.position);if(58===a)yp(a=t.input.charCodeAt(++t.position))||kp(t,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Rp(t,u,c,h,f,null),h=f=p=null),n=d=!(y=!0),h=t.tag,f=t.result;else{if(!y)return t.tag=s,t.anchor=l,!0;kp(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=s,t.anchor=l,!0;kp(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(d&&(Rp(t,u,c,h,f,null),h=f=p=null),n=d=y=!0):d?n=!(d=!1):kp(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,a=r;if((t.line===o||t.lineIndent>e)&&(zp(t,e,np,!0,n)&&(d?f=t.result:p=t.result),d||(Rp(t,u,c,h,f,p),h=f=p=null),Op(t,!0,-1),a=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==a)kp(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return d&&Rp(t,u,c,h,f,null),y&&(t.tag=s,t.anchor=l,t.kind="mapping",t.result=u),y}(t,f,h))||function(t,e){var i,r,n,o,a,s,l,u,c,h,f=!0,p=t.tag,d=t.anchor,y={};if(91===(h=t.input.charCodeAt(t.position)))s=!(n=93),r=[];else{if(123!==h)return!1;n=125,s=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),h=t.input.charCodeAt(++t.position);0!==h;){if(Op(t,!0,e),(h=t.input.charCodeAt(t.position))===n)return t.position++,t.tag=p,t.anchor=d,t.kind=s?"mapping":"sequence",t.result=r,!0;f||kp(t,"missed comma between flow collection entries"),c=null,o=a=!1,63===h&&yp(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,Op(t,!0,e)),i=t.line,zp(t,e,ep,!1,!0),u=t.tag,l=t.result,Op(t,!0,e),h=t.input.charCodeAt(t.position),!a&&t.line!==i||58!==h||(o=!0,h=t.input.charCodeAt(++t.position),Op(t,!0,e),zp(t,e,ep,!1,!0),c=t.result),s?Rp(t,r,y,u,l,c):o?r.push(Rp(t,null,y,u,l,c)):r.push(l),Op(t,!0,e),44===(h=t.input.charCodeAt(t.position))?(f=!0,h=t.input.charCodeAt(++t.position)):f=!1}kp(t,"unexpected end of the stream within a flow collection")}(t,h)?y=!0:(a&&function(t,e){var i,r,n,o,a,s=op,l=!1,u=e,c=0,h=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)op===s?s=43===o?sp:ap:kp(t,"repeat of a chomping mode identifier");else{if(!(0<=(n=48<=(a=o)&&a<=57?a-48:-1)))break;0==n?kp(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?kp(t,"repeat of an indentation width identifier"):(u=e+n-1,l=!0)}if(dp(o)){for(;dp(o=t.input.charCodeAt(++t.position)););if(35===o)for(;!pp(o=t.input.charCodeAt(++t.position))&&0!==o;);}for(;0!==o;){for(Sp(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!l||t.lineIndent<u)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>u&&(u=t.lineIndent),pp(o))c++;else{if(t.lineIndent<u){s===sp?t.result+=vf.repeat("\n",c):s===op&&l&&(t.result+="\n");break}for(r?dp(o)?(h=!0,t.result+=vf.repeat("\n",c+1)):h?(h=!1,t.result+=vf.repeat("\n",c+1)):0===c?l&&(t.result+=" "):t.result+=vf.repeat("\n",c):t.result+=l?vf.repeat("\n",c+1):vf.repeat("\n",c),l=!0,c=0,i=t.position;!pp(o)&&0!==o;)o=t.input.charCodeAt(++t.position);Ep(t,i,t.position,!1)}}return!0}(t,h)||function(t,e){var i,r,n;if(39!==(i=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(Ep(t,r,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return!0;r=n=t.position,t.position++}else pp(i)?(Ep(t,r,n,!0),Lp(t,Op(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Pp(t)?kp(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);kp(t,"unexpected end of the stream within a single quoted scalar")}(t,h)||function(t,e){var i,r,n,o,a,s,l,u,c,h;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return Ep(t,i,t.position,!0),t.position++,!0;if(92===s){if(Ep(t,i,t.position,!0),pp(s=t.input.charCodeAt(++t.position)))Op(t,!1,e);else if(s<256&&_p[s])t.result+=mp[s],t.position++;else if(0<(a=120===(h=s)?2:117===h?4:85===h?8:0)){for(n=a,o=0;0<n;n--)s=t.input.charCodeAt(++t.position),c=void 0,0<=(a=48<=(u=s)&&u<=57?u-48:97<=(c=32|u)&&c<=102?c-97+10:-1)?o=(o<<4)+a:kp(t,"expected hexadecimal character");t.result+=(l=o)<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023)),t.position++}else kp(t,"unknown escape sequence");i=r=t.position}else pp(s)?(Ep(t,i,r,!0),Lp(t,Op(t,!1,e)),i=r=t.position):t.position===t.lineStart&&Pp(t)?kp(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}kp(t,"unexpected end of the stream within a double quoted scalar")}(t,h)?y=!0:!function(t){var e,i,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!yp(r)&&!gp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&kp(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(i)||kp(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],Op(t,!0,-1),!0}(t)?function(t,e,i){var r,n,o,a,s,l,u,c,h=t.kind,f=t.result;if(yp(c=t.input.charCodeAt(t.position))||gp(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(yp(r=t.input.charCodeAt(t.position+1))||i&&gp(r)))return!1;for(t.kind="scalar",t.result="",n=o=t.position,a=!1;0!==c;){if(58===c){if(yp(r=t.input.charCodeAt(t.position+1))||i&&gp(r))break}else if(35===c){if(yp(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Pp(t)||i&&gp(c))break;if(pp(c)){if(s=t.line,l=t.lineStart,u=t.lineIndent,Op(t,!1,-1),t.lineIndent>=e){a=!0,c=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=u;break}}a&&(Ep(t,n,o,!1),Lp(t,t.line-s),n=o=t.position,a=!1),dp(c)||(o=t.position+1),c=t.input.charCodeAt(++t.position)}return Ep(t,n,o,!1),!!t.result||(t.kind=h,t.result=f,!1)}(t,h,ep===i)&&(y=!0,null===t.tag&&(t.tag="?")):(y=!0,null===t.tag&&null===t.anchor||kp(t,"alias node should not have any properties")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(y=s&&Ip(t,f))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(l=0,u=t.implicitTypes.length;l<u;l+=1)if((c=t.implicitTypes[l]).resolve(t.result)){t.result=c.construct(t.result),t.tag=c.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else tp.call(t.typeMap,t.tag)?(c=t.typeMap[t.tag],null!==t.result&&c.kind!==t.kind&&kp(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+c.kind+'", not "'+t.kind+'"'),c.resolve(t.result)?(t.result=c.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):kp(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):kp(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||y}function jp(t){var e,i,r,n,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(n=t.input.charCodeAt(t.position))&&(Op(t,!0,-1),n=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==n));){for(a=!0,n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!yp(n);)n=t.input.charCodeAt(++t.position);for(r=[],(i=t.input.slice(e,t.position)).length<1&&kp(t,"directive name must not be less than one character in length");0!==n;){for(;dp(n);)n=t.input.charCodeAt(++t.position);if(35===n){for(;0!==(n=t.input.charCodeAt(++t.position))&&!pp(n););break}if(pp(n))break;for(e=t.position;0!==n&&!yp(n);)n=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==n&&Sp(t),tp.call(Tp,i)?Tp[i](t,i,r):Ap(t,'unknown document directive "'+i+'"')}Op(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Op(t,!0,-1)):a&&kp(t,"directives end mark is expected"),zp(t,t.lineIndent-1,np,!1,!0),Op(t,!0,-1),t.checkLineBreaks&&up.test(t.input.slice(o,t.position))&&Ap(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Pp(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Op(t,!0,-1)):t.position<t.length-1&&kp(t,"end of the stream or a document separator is expected")}function Dp(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var i=new xp(t,e);for(i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)jp(i);return i.documents}function Fp(t,e,i){var r,n,o=Dp(t,i);for(r=0,n=o.length;r<n;r+=1)e(o[r])}function Bp(t,e){var i=Dp(t,e);if(0!==i.length){if(1===i.length)return i[0];throw new mf("expected a single document in the stream, but found more")}}var Up={loadAll:Fp,load:Bp,safeLoadAll:function(t,e,i){Fp(t,e,vf.extend({schema:Yf},i))},safeLoad:function(t,e){return Bp(t,vf.extend({schema:Yf},e))}},Gp=Object.prototype.toString,Vp=Object.prototype.hasOwnProperty,Hp=9,qp=10,Kp=13,Wp=32,Yp=33,Xp=34,Zp=35,Jp=37,Qp=38,$p=39,td=42,ed=44,id=45,rd=58,nd=62,od=63,ad=64,sd=91,ld=93,ud=96,cd=123,hd=124,fd=125,pd={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},dd=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function yd(t){this.schema=t.schema||$f,this.indent=Math.max(1,t.indent||2),this.skipInvalid=t.skipInvalid||!1,this.flowLevel=vf.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var i,r,n,o,a,s,l;if(null===e)return{};for(i={},n=0,o=(r=Object.keys(e)).length;n<o;n+=1)a=r[n],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=t.compiledTypeMap[a])&&Vp.call(l.styleAliases,s)&&(s=l.styleAliases[s]),i[a]=s;return i}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function gd(t,e){for(var i,r=vf.repeat(" ",e),n=0,o=-1,a="",s=t.length;n<s;)n=-1===(o=t.indexOf("\n",n))?(i=t.slice(n),s):(i=t.slice(n,o+1),o+1),i.length&&"\n"!==i&&(a+=r),a+=i;return a}function vd(t,e){return"\n"+vf.repeat(" ",t.indent*e)}function _d(t){this.source=t,this.result="",this.checkpoint=0}function md(t,e,i,r){var n,o,a,s,l,u,c,h,f,p,d,y,g,v,_,m,b,x,w,k;if(0!==e.length)if(-1===dd.indexOf(e)){for(n=!0,o=e.length?e.charCodeAt(0):0,a=Wp===o||Wp===e.charCodeAt(e.length-1),id!==o&&od!==o&&ad!==o&&ud!==o||(n=!1),l=s=a||-1<t.flowLevel&&t.flowLevel<=i?(a&&(n=!1),!1):!r,u=!0,c=new _d(e),h=!1,p=f=0,d=t.indent*i,-1===(y=t.lineWidth)&&(y=9007199254740991),d<40?y-=d:y=40,v=0;v<e.length;v++){if(g=e.charCodeAt(v),n){if(Hp!==(A=g)&&qp!==A&&Kp!==A&&ed!==A&&sd!==A&&ld!==A&&cd!==A&&fd!==A&&Zp!==A&&Qp!==A&&td!==A&&Yp!==A&&hd!==A&&nd!==A&&$p!==A&&Xp!==A&&Jp!==A&&rd!==A&&!pd[A]&&!xd(A))continue;n=!1}u&&g===$p&&(u=!1),_=pd[g],m=xd(g),(_||m)&&(g!==qp&&g!==Xp&&g!==$p?l=s=!1:g===qp&&(u=!(h=!0),0<v&&e.charCodeAt(v-1)===Wp&&(s=l=!1),s&&(b=v-f,f=v,p<b&&(p=b))),g!==Xp&&(u=!1),c.takeUpTo(v),c.escapeChar())}var A;if(n&&function(t,e){var i,r;for(i=0,r=t.implicitTypes.length;i<r;i+=1)if(t.implicitTypes[i].resolve(e))return!0;return!1}(t,e)&&(n=!1),x="",(s||l)&&(w=0,e.charCodeAt(e.length-1)===qp&&(w+=1,e.charCodeAt(e.length-2)===qp&&(w+=1)),0===w?x="-":2===w&&(x="+")),(l&&p<y||null!==t.tag)&&(s=!1),h||(l=!1),n)t.dump=e;else if(u)t.dump="'"+e+"'";else if(s)k=function(t,e){var i,r="",n=0,o=t.length,a=/\n+$/.exec(t);a&&(o=a.index+1);for(;n<o;)i=t.indexOf("\n",n),n=o<i||-1===i?(r&&(r+="\n\n"),r+=bd(t.slice(n,o),e),o):(r&&(r+="\n\n"),r+=bd(t.slice(n,i),e),i+1);a&&"\n"!==a[0]&&(r+=a[0]);return r}(e,y),t.dump=">"+x+"\n"+gd(k,d);else if(l)x||(e=e.replace(/\n$/,"")),t.dump="|"+x+"\n"+gd(e,d);else{if(!c)throw new Error("Failed to dump scalar value");c.finish(),t.dump='"'+c.result+'"'}}else t.dump="'"+e+"'";else t.dump="''"}function bd(t,e){if(""===t)return t;for(var i,r,n=/[^\s] [^\s]/g,o="",a=0,s=0,l=n.exec(t);l;)e<(i=l.index)-s&&(r=a!==s?a:i,o&&(o+="\n"),o+=t.slice(s,r),s=r+1),a=i+1,l=n.exec(t);return o&&(o+="\n"),s!==a&&t.length-s>e?o+=t.slice(s,a)+"\n"+t.slice(a+1):o+=t.slice(s),o}function xd(t){return!(32<=t&&t<=126||133===t||160<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111)}function wd(t,e,i){var r,n,o,a,s,l;for(o=0,a=(n=i?t.explicitTypes:t.implicitTypes).length;o<a;o+=1)if(((s=n[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof e&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(t.tag=i?s.tag:"?",s.represent){if(l=t.styleMap[s.tag]||s.defaultStyle,"[object Function]"===Gp.call(s.represent))r=s.represent(e,l);else{if(!Vp.call(s.represent,l))throw new mf("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](e,l)}t.dump=r}return!0}return!1}function kd(t,e,i,r,n,o){t.tag=null,t.dump=i,wd(t,i,!1)||wd(t,i,!0);var a=Gp.call(t.dump);r&&(r=t.flowLevel<0||t.flowLevel>e);var s,l,u="[object Object]"===a||"[object Array]"===a;if(u&&(l=-1!==(s=t.duplicates.indexOf(i))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&0<e)&&(n=!1),l&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(u&&l&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===a)r&&0!==Object.keys(t.dump).length?(function(t,e,i,r){var n,o,a,s,l,u,c="",h=t.tag,f=Object.keys(i);if(!0===t.sortKeys)f.sort();else if("function"==typeof t.sortKeys)f.sort(t.sortKeys);else if(t.sortKeys)throw new mf("sortKeys must be a boolean or a function");for(n=0,o=f.length;n<o;n+=1)u="",r&&0===n||(u+=vd(t,e)),s=i[a=f[n]],kd(t,e+1,a,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&1024<t.dump.length)&&(t.dump&&qp===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,l&&(u+=vd(t,e)),kd(t,e+1,s,!0,l)&&(t.dump&&qp===t.dump.charCodeAt(0)?u+=":":u+=": ",c+=u+=t.dump));t.tag=h,t.dump=c||"{}"}(t,e,t.dump,n),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,i){var r,n,o,a,s,l="",u=t.tag,c=Object.keys(i);for(r=0,n=c.length;r<n;r+=1)s="",0!==r&&(s+=", "),a=i[o=c[r]],kd(t,e,o,!1,!1)&&(1024<t.dump.length&&(s+="? "),s+=t.dump+": ",kd(t,e,a,!1,!1)&&(l+=s+=t.dump));t.tag=u,t.dump="{"+l+"}"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===a)r&&0!==t.dump.length?(function(t,e,i,r){var n,o,a="",s=t.tag;for(n=0,o=i.length;n<o;n+=1)kd(t,e+1,i[n],!0,!0)&&(r&&0===n||(a+=vd(t,e)),a+="- "+t.dump);t.tag=s,t.dump=a||"[]"}(t,e,t.dump,n),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,i){var r,n,o="",a=t.tag;for(r=0,n=i.length;r<n;r+=1)kd(t,e,i[r],!1,!1)&&(0!==r&&(o+=", "),o+=t.dump);t.tag=a,t.dump="["+o+"]"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else{if("[object String]"!==a){if(t.skipInvalid)return!1;throw new mf("unacceptable kind of an object to dump "+a)}"?"!==t.tag&&md(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}function Ad(t,e){var i,r,n=[],o=[];for(function t(e,i,r){var n,o,a;if(null!==e&&"object"==typeof e)if(-1!==(o=i.indexOf(e)))-1===r.indexOf(o)&&r.push(o);else if(i.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)t(e[o],i,r);else for(n=Object.keys(e),o=0,a=n.length;o<a;o+=1)t(e[n[o]],i,r)}(t,n,o),i=0,r=o.length;i<r;i+=1)e.duplicates.push(n[o[i]]);e.usedDuplicates=new Array(r)}function Td(t,e){var i=new yd(e=e||{});return i.noRefs||Ad(t,i),kd(i,0,t,!0,!0)?i.dump+"\n":""}_d.prototype.takeUpTo=function(t){var e;if(t<this.checkpoint)throw(e=new Error("position should be > checkpoint")).position=t,e.checkpoint=this.checkpoint,e;return this.result+=this.source.slice(this.checkpoint,t),this.checkpoint=t,this},_d.prototype.escapeChar=function(){var t,e;return t=this.source.charCodeAt(this.checkpoint),e=pd[t]||function(t){var e,i,r;if(e=t.toString(16).toUpperCase(),t<=255)i="x",r=2;else if(t<=65535)i="u",r=4;else{if(!(t<=4294967295))throw new mf("code point within a string may not be greater than 0xFFFFFFFF");i="U",r=8}return"\\"+i+vf.repeat("0",r-e.length)+e}(t),this.result+=e,this.checkpoint+=1,this},_d.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var Ed={dump:Td,safeDump:function(t,e){return Td(t,vf.extend({schema:Yf},e))}};function Md(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var Rd={Type:Af,Schema:Mf,FAILSAFE_SCHEMA:Rf,JSON_SCHEMA:Nf,CORE_SCHEMA:Cf,DEFAULT_SAFE_SCHEMA:Yf,DEFAULT_FULL_SCHEMA:$f,load:Up.load,loadAll:Up.loadAll,safeLoad:Up.safeLoad,safeLoadAll:Up.safeLoadAll,dump:Ed.dump,safeDump:Ed.safeDump,YAMLException:mf,MINIMAL_SCHEMA:Rf,SAFE_SCHEMA:Yf,DEFAULT_SCHEMA:$f,scan:Md("scan"),parse:Md("parse"),compose:Md("compose"),addConstructor:Md("addConstructor")},Sd=function(){function t(e,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;br(this,t),this.url=e,!i||mn(i)&&!mn(this.url)?this.path=_n(this.url):this.path=i,this.path_for_parent=i||this.path,this.parent=r,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return wr(t,[{key:"load",value:function(){return function(t){return new Promise(function(e,i){"string"==typeof t?pn.io(t).then(function(t){try{var r=function(t){var e;try{e=Rd.safeLoad(t,{json:!0})}catch(t){throw t}return e}(t);e(r)}catch(t){i(t)}},i):(t=Object.assign({},t),e(t))})}(this.url)}},{key:"resourceFor",value:function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}}},{key:"urlFor",value:function(t){return Od(t)?t:mn(t)&&this.container?this.parent.urlFor(this.path_for_parent+t):function(t,e){if(!t||!mn(t))return t;var i,r="/"!==t[0];if(e?(i=document.createElement("a")).href=e:i=window.location,r){t=_n(i.href)+t}else{var n=i.origin;n||(n=i.protocol+"//"+i.host),t=n+t}return t}(t,this.path)}},{key:"pathFor",value:function(t){return _n(t)}},{key:"typeFor",value:function(t){return function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(-1<e)return t.substring(e+1)}(t)}},{key:"isContainer",value:function(){return!1}}]),t}();function Od(t){return!(!t||"global."!==t.slice(0,7))}function Pd(t){return null!=t}function Ld(t){return"("+t+")"}function Id(t){return"$"===t[0]?"context['"+t.substring(1)+"']":"context.feature.properties['"+t+"']"}function Nd(t,e){return Ld(function(t){return"string"==typeof t?'"'+t+'"':t}(e)+" === "+Id(t))}function Cd(t,e){return Ld(e.map(function(e){return Nd(t,e)}).join(" || "))}function zd(t,e){return Ld(t.filter(Pd).map(function(t){return Ld(t.join(" && "))}).join(" "+e+" "))}function jd(t,e,i){return e&&0<e.length?zd(e.map(function(t){return Bd(t,i)}),"||"):"true"}function Dd(t,e,i){return e&&0<e.length?zd(e.map(function(t){return Bd(t,i)}),"&&"):"true"}function Fd(t,e,i){var r=[],n=i&&"function"==typeof i.rangeTransform&&i.rangeTransform;if(e.max){var o=n?n(e.max):e.max;r.push(Id(t)+" < "+o)}if(e.min){var a=n?a=n(e.min):e.min;r.push(Id(t)+" >= "+a)}return Ld(r.join(" && "))}function Bd(t,e){var i=[];if("function"==typeof t)return[Ld(t.toString()+"(context)")];if(Array.isArray(t))return[jd(0,t,e)];if(null==t)return["true"];for(var r,n=Object.keys(t),o=0;o<n.length;o++){var a=n[o],s=t[a],l=mr(s);if("string"===l||"number"===l)i.push(Nd(a,s));else if("boolean"===l)i.push((r=s,Ld(Id(a)+(r?" != ":" == ")+"null")));else if("not"===a)i.push("!"+Ld(Bd(s,e).join(" && ")));else if("any"===a)i.push(jd(0,s,e));else if("all"===a)i.push(Dd(0,s,e));else if("none"===a)i.push("!"+Ld(jd(0,s,e)));else if(Array.isArray(s))i.push(Cd(a,s));else if("object"===l&&null!=s)(s.max||s.min)&&i.push(Fd(a,s,e));else{if(null!=s)throw new Error("Unknown Query syntax: "+s);i.push(" true ")}}return 0===n.length?["true"]:i}function Ud(t,e){return null==t?function(){return!0}:new Function("context","return "+function(t){return Ld(t.join(" && "))}(Bd(t,e))+";")}var Gd=["filter","draw","visible","enabled","data"],Vd={};function Hd(t,e){for(var i,r=0,n=0;n<t.length;n++)t[n].length>r&&(r=t[n].length);if(0===r)return null;for(var o={visible:!0},a=function(r){if(i=[],t.forEach(function(t){t[r]&&t[r][e]&&-1===i.indexOf(t[r][e])&&i.push(t[r][e])}),0===i.length)return"continue";i.sort(function(t,e){return(t&&t.layer_name)>(e&&e.layer_name)?1:-1}),Rl.apply(void 0,[o].concat(Ir(i))),delete o.layer_name},s=0;s<r;s++)a(s);return!1===o.visible?null:o}var qd=["any","all","not","none"],Kd=function(){function t(e){var i=e.layer,r=e.name,n=e.parent,o=e.draw,a=e.visible,s=e.enabled,l=e.filter,u=e.styles;if(br(this,t),this.id=t.id++,this.config_data=i.data,this.parent=n,this.name=r,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=o,this.filter=l,this.styles=u,this.is_built=!1,s=void 0===s?a:s,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==s,this.draw)for(var c in this.draw)if(this.draw[c]=null==this.draw[c]?{}:this.draw[c],"object"!==mr(this.draw[c])){var h="Draw group '".concat(c,"' for layer ").concat(this.full_name," is invalid, must be an object, ");Qr("warn",h+="but was set to `".concat(c,": ").concat(this.draw[c],"` instead")),delete this.draw[c]}else this.draw[c].layer_name=this.full_name}return wr(t,[{key:"build",value:function(){Qr("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=pn.stringsToFunctions(this.draw,Zo.wrapFunction),this.calculatedDraw=function(t){var e=[];if(t.parent){var i=t.parent.calculatedDraw||[];e.push.apply(e,Ir(i))}return e.push(t.draw),e}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=pn.stringsToFunctions(this.filter,Zo.wrapFunction);var t=mr(this.filter);if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=Ud(this.filter,Zd):this.filter=null}catch(t){var e="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");Qr("warn",e+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack))}else{var i="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");Qr("warn",i+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var t=this.filter&&this.filter.$zoom,e=mr(t);if(null!=t&&"function"!==e){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var i=0;i<t.length;i++)this.zooms[t[i]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var r=t.min||0,n=t.max||25,o=r;o<n;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach(function(e){if(-1===qd.indexOf(e)){var i=t.filter[e],r=mr(i),n=Array.isArray(i);if(!n&&"string"!==r&&"number"!==r)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),n?i:[i]])):(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,n?i:[i]])),delete t.filter[e]}})}},{key:"doPropMatches",value:function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var i=this.feature_prop_matches[e],r=t.feature.properties[i[0]];if(null==r||-1===i[1].indexOf(r))return!1}if(this.context_prop_matches)for(var n=0;n<this.context_prop_matches.length;n++){var o=this.context_prop_matches[n],a=t[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0}},{key:"doesMatch",value:function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var i="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");Qr("error",i+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack),t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,i){for(var r in e){var n=e[r];if("object"!==mr(n)||Array.isArray(n)){var o="Layer value must be an object: cannot create layer '".concat(r,": ").concat(JSON.stringify(n),"'");o+=", under parent layer '".concat(t.full_name,"'."),i[t.name]&&(o+=" The parent name '".concat(t.name,"' is also the name of a style, did you mean to create a 'draw' group"),t.parent&&(o+=" under '".concat(t.parent.name,"'")),o+=" instead?"),Qr("warn",o)}else Qd(r,n,t,i)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),t}();Kd.id=0;var Wd,Yd=function(){function t(e){var i;return br(this,t),(i=Or(this,Tr(t).call(this,e))).is_leaf=!0,i}return Ar(t,Kd),t}(),Xd=function(){function t(e){var i;return br(this,t),(i=Or(this,Tr(t).call(this,e))).is_tree=!0,i.layers=e.layers||[],i}return Ar(t,Kd),wr(t,[{key:"addLayer",value:function(t){this.layers.push(t)}},{key:"buildDrawGroups",value:function(t){var e=[],i=[];if(function t(e,i,r,n){var o=!1;if(0===i.length)return;for(var a=0;a<i.length;a++){var s=i[a];s.is_leaf?s.doesMatch(e)&&(o=!0,r.push(s),n.push(s.id)):s.is_tree&&s.doesMatch(e)&&(o=!0,t(e,s.layers,r,n)||(r.push(s),n.push(s.id)))}return o}(t,[this],e,i),0<e.length){var r=function(t){if(1<t.length){for(var e=t[0],i=1;i<t.length;i++)e+="/"+t[i];return e}return t[0]}(i);if(void 0===Vd[r]){for(var n=e.map(function(t){return t&&!1!==t.visible&&t.calculatedDraw}),o={},a=0;a<n.length;a++){var s=n[a];if(s)for(var l=0;l<s.length;l++){var u=s[l];for(var c in u)o[c]=!0}}for(var h in o)Vd[r]=Vd[r]||{},Vd[r][h]=Hd(n,h),Vd[r][h]?(Vd[r][h].key=r+"/"+h,Vd[r][h].layers=e.map(function(t){return t&&t.full_name}),Vd[r][h].group=h):delete Vd[r][h];Vd[r]&&0===Object.keys(Vd[r]).length&&(Vd[r]=null)}return Vd[r]}}}]),t}(),Zd={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?"".concat(parseFloat(t)," * context.meters_per_pixel_sq"):t}};function Jd(t){return-1<Gd.indexOf(t)}function Qd(t,e,i,r){var n={name:t,layer:e=null==e?{}:e,parent:i,styles:r},o=Lr(function(t){var e={},i={};for(var r in t)Jd(r)?e[r]=t[r]:i[r]=t[r];return[e,i]}(e),2),a=o[0],s=o[1],l=function(t){return 0===Object.keys(t).length}(s),u=new(l&&null!=i?Yd:Xd)(Object.assign(n,a));return u.enabled&&(i&&i.addLayer(u),u.children_to_parse=l?null:s),u}var $d=/^global\.(.+)$/,ty=Wd={loadScene:function(t,e){var i=this,r=1<arguments.length&&void 0!==e?e:{},n=r.path,o=r.type,a=[];return this.loadSceneRecursive({url:t,path:n,type:o},null,a).then(function(t){return i.finalize(t)}).then(function(t){var e=t.config,r=t.bundle;return e?(0<a.length&&a.forEach(function(t){var e="Failed to import scene: ".concat(t.url);Qr("error",e,t),i.trigger("error",{type:"scene_import",message:e,error:t,url:t.url})}),{config:e,bundle:r}):Promise.reject(a[0])})},loadSceneRecursive:function(t,e,i){var r=this,n=t.url,o=t.path,a=(t.type,2<arguments.length&&void 0!==i?i:[]);if(!n)return Promise.resolve({});var s=function(t,e,i){return new Sd(t,e,i)}(n,o,e);return s.load().then(function(t){if(null==t.import)return r.normalize(t,s),{config:t,bundle:s};Array.isArray(t.import)||(t.import=[t.import]);var e=[];return t.import.forEach(function(t){"object"===mr(t)&&(t=bn(new Blob([JSON.stringify(t)]))),e.push(s.resourceFor(t))}),delete t.import,Promise.all(e.map(function(t){return r.loadSceneRecursive(t,s,a)})).then(function(e){e.forEach(function(t){return r.normalize(t.config,t.bundle)});var i=e.map(function(t){return t.config});return t=Rl.apply(void 0,Ir(i).concat([t])),r.normalize(t,s),{config:t,bundle:s}})}).catch(function(t){return t.url=n,a.push(t),{}})},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var i in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[i],e);return t},normalizeDataSource:function(t,e){if(t.url&&(t.url=e.urlFor(t.url)),t.scripts)for(var i in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce(function(t,e){return t[e]=e,t},{})),t.scripts)t.scripts[i]=e.urlFor(t.scripts[i]);return t},normalizeFonts:function(t,e){for(var i in t.fonts=t.fonts||{},t.fonts)if(Array.isArray(t.fonts[i]))t.fonts[i].forEach(function(t){t.url=t.url&&e.urlFor(t.url)});else{var r=t.fonts[i];r.url=r.url&&e.urlFor(r.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var i in t.textures){var r=t.textures[i];r.url&&(r.url=e.urlFor(r.url))}},hoistTextures:function(t,e){var i=this;if(t.styles){var r=function(r){var n=t.styles[r],o=n.texture;"string"!=typeof o||t.textures[o]||(n.texture=i.hoistTexture(o,t,e)),n.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(r){var o=null!=n.material[r]&&n.material[r].texture;"string"!=typeof o||t.textures[o]||(n.material[r].texture=i.hoistTexture(o,t,e))})};for(var n in t.styles)r(n)}if(this.hoistStyleShaderUniformTextures(t,e,{include_globals:!1}),t.layers)for(var o=[t.layers];0<o.length;){var a=o.pop();if("object"===mr(a)&&!Array.isArray(a))for(var s in a)if("draw"===s){var l=a[s];for(var u in l){if(l[u].texture){var c=l[u].texture;"string"!=typeof c||t.textures[c]||(l[u].texture=this.hoistTexture(c,t,e))}if(l[u].outline&&l[u].outline.texture){var h=l[u].outline.texture;"string"!=typeof h||t.textures[h]||(l[u].outline.texture=this.hoistTexture(h,t,e))}}}else{if(Jd(s))continue;o.push(a[s])}}},hoistStyleShaderUniformTextures:function(t,e,i){var r=this,n=i.include_globals;if(t.styles)for(var o in t.styles){var a=t.styles[o];a.shaders&&a.shaders.uniforms&&Ql.parseUniforms(a.shaders.uniforms).forEach(function(i){var o=i.type,a=i.value,s=i.key,l=i.uniforms;"sampler2D"!==o||"string"!=typeof a||t.textures[a]||!n&&Od(a)||(l[s]=r.hoistTexture(a,t,e))})}},hoistTexture:function(t,e,i){var r=Od(t),n=r?t:i.urlFor(t),o=r?"texture-".concat(n):n;return e.textures[o]={url:n},o},applyGlobalProperties:function(t){if(!t.global||0===Object.keys(t.global).length)return t;var e=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".";var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};r=r?r+i:"";for(var o in e){var a=r+o,s=e[o];"object"!==mr(n[a]=s)||Array.isArray(s)||t(s,i,a,n)}return n}(t.global);return function t(i){if("string"==typeof i){var r=function t(e,i,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<n.indexOf(e))Qr({level:"warn",once:!0},"Global properties: cyclical reference detected",n);else{n.push(e);var o=$d.exec(e);if(o){var a=o[1];if(a){var s=i[a];if(void 0!==s)return"string"==typeof s&&$d.exec(s)?t(s,i,n):s;Qr({level:"warn",once:!0},"Global property not found: "+e)}else Qr({level:"warn",once:!0},"Invalid global property reference: "+e)}}}(i,e);void 0!==r&&(i=r)}else if(Array.isArray(i))for(var n=0;n<i.length;n++)i[n]=t(i[n],i,n);else if("object"===mr(i))for(var o in i)i[o]=t(i[o],i,o);return i}(t)},finalize:function(t){var e=t.config,i=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),0!==Object.keys(e.lights).length&&!Object.keys(e.lights).every(function(t){return!1===e.lights[t].visible})||(e.lights.default_light={type:"directional"}),{config:e,bundle:i}):{}}};ca(Wd);var ey=function(){function t(){br(this,t),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return wr(t,[{key:"sourceTiles",value:function(t,e){return this.coords[t.key]&&this.coords[t.key].sources&&this.coords[t.key].sources[e.name]}},{key:"addTile",value:function(t){var e=t.coords.key,i=this.coords[e];i||(i=this.coords[e]={descendants:0}),i.sources||(i.sources={}),i.sources[t.source.name]||(i.sources[t.source.name]={});for(var r=(i.sources[t.source.name][t.style_zoom]=t).coords.z-1;0<=r;r--){var n=xa.coordinateAtZoom(t.coords,r);this.coords[n.key]||(this.coords[n.key]={descendants:0}),this.coords[n.key].descendants++}}},{key:"removeTile",value:function(t){var e=this.sourceTiles(t.coords,t.source),i=t.coords.key;e&&(delete e[t.style_zoom],0===Object.keys(e).length&&(delete this.coords[i].sources[t.source.name],0===Object.keys(this.coords[i].sources).length&&(delete this.coords[i].sources,0===this.coords[i].descendants&&delete this.coords[i])));for(var r=t.coords.z-1;0<=r;r--){var n=xa.coordinateAtZoom(t.coords,r);this.coords[n.key]&&0<this.coords[n.key].descendants&&(this.coords[n.key].descendants--,0!==this.coords[n.key].descendants||this.coords[n.key].sources||delete this.coords[n.key])}}},{key:"getAncestor",value:function(t,e){var i=t.coords,r=t.style_zoom,n=t.source,o=1<arguments.length&&void 0!==e?e:1;if(!(o>this.max_proxy_ancestor_depth)){if(r>n.max_coord_zoom){var a=this.sourceTiles(i,n);if(a)for(var s=r-1;s>=n.max_coord_zoom;s--)if(a[s]&&a[s].loaded)return a[s];r=n.max_coord_zoom}r--;var l=xa.coordinateAtZoom(i,i.z-1),u=this.sourceTiles(l,n);return u&&u[r]&&u[r].loaded?u[r]:0<l.z?this.getAncestor({coords:l,style_zoom:r,source:n},o+1):void 0}}},{key:"getDescendants",value:function(t,e){var i=t.coords,r=t.style_zoom,n=t.source,o=1<arguments.length&&void 0!==e?e:1,a=[];if(r>=n.max_coord_zoom){var s=this.sourceTiles(i,n);if(s)for(var l=Math.max(an.default_view_max_zoom,r+this.max_proxy_descendant_depth),u=r+1;u<=l;u++)if(s[u]&&s[u].loaded)return a.push(s[u]),a;return a}if(this.coords[i.key]&&0<this.coords[i.key].descendants){r++;for(var c=xa.childrenForCoordinate(i),h=0;h<c.length;h++){var f=c[h],p=this.sourceTiles(f,n);p&&p[r]&&p[r].loaded?a.push(p[r]):o<=this.max_proxy_descendant_depth&&f.z<=n.max_coord_zoom&&a.push.apply(a,Ir(this.getDescendants({coords:f,source:n,style_zoom:r},o+1)))}}return a}}]),t}(),iy=function(){function t(e,i,r,n){br(this,t),Object.assign(this,e),this.placed=null,this._tile=n;var o=an.unitsPerMeter(n.coords.z)*Math.pow(2,r-n.style_zoom);this.layout=Object.assign({},e.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=an.tileSpaceToMeters(this.position,n.coords.z,n.min),this._worldToScreen=i,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return wr(t,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){if(!this._screenSpaceBoundingBox){var t=this._worldToScreen(this.position,!0);t[0]+=this.offset[0],t[1]+=this.offset[1];var e=this.size[0]/2+this.layout.buffer[0],i=this.size[1]/2+this.layout.buffer[1],r=t[0]-e,n=t[0]+e,o=t[1]-i,a=t[1]+i;this._screenSpaceBoundingBox={left:r,bottom:a,right:n,top:o}}return this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var t=this._tile.coords.z,e=this._tile.min,i=an.tileSpaceToMeters([this.sides[0],this.sides[1]],t,e),r=an.tileSpaceToMeters([this.sides[2],this.sides[3]],t,e),n=Lr(this._worldToScreen(i,!0),2),o=n[0],a=n[1],s=Lr(this._worldToScreen(r,!0),2);return Zc(o,a,s[0],s[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var t=[],e=this.circles,i=this._tile.coords.z,r=this._tile.min,n=0;n<e.length-2;n+=3){var o=an.tileSpaceToMeters([e[n],-e[n+1]],i,r),a=e[n+2]/an.unitsPerMeter(i),s=[o[0]+a,o[1]],l=this._worldToScreen(o,!0),u=this._worldToScreen(s,!0),c=nn.getLineLength(l[0],l[1],u[0],u[1]);t.push(l[0],l[1],c)}return t}}]),t}(),ry={mainThreadLabelCollisionPass:function(t,e,i,r,n,o){oy=ny,ny={};var a={},s={},l=[],u=i.worldToScreen.bind(i),c=new ly(o);for(var h in t.forEach(function(t){for(var i in t.meshes)t.meshes[i].forEach(function(i){if(i.labels){for(var r in c.trackMesh(i),i.labels["non-collision"]){var n=sy(i.labels["non-collision"][r],i,u,e,t);n.label.text_data&&c.insertLabel(n,t)}for(var o in i.labels.collision)if(!a[o]){var l=sy(i.labels.collision[o],i,u,e,t);a[o]=l.label,s[o]=l}}})}),s){var f=s[h];f.linked&&(f.linked=s[f.linked]),l.push(f)}var p=i.getViewport(),d=p.width,y=p.height;return aa.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new ra(d,y,30)}),aa.addStyle("main","main"),aa.collide(l,"main","main").then(function(t){return t.forEach(function(t){var e=t.mesh,i=t.label.getTile();if(e.valid){var n=0;!0!==t.show||r&&t.label.breach&&!oy[t.label.id]||(n=1),n&&(ny[t.label.id]=!0),t.label.text_data&&c.insertLabel(t,i);var o=e.vertex_layout.offset.a_shape,a=e.vertex_layout.stride,s=e.vertex_layout.attribs.find(function(t){return"a_shape"===t.name}),l=s.byte_size/s.size;o+=3*l;var u=!0;t.ranges.forEach(function(t){if(u){for(var i=0;i<t[1];i++){if(e.vertex_data[t[0]+i*a+o]===n)return void(u=!1);e.vertex_data[t[0]+i*a+o]=n}c.trackMesh(e)}})}}),c.createTextures(n).then(function(){return c.updateMeshes()})}).then(function(e){e.forEach(function(t){return t.valid&&t.upload()}),t.forEach(function(t){t.labeled=!0}),l=[],s={},a={}})}},ny={},oy={},ay=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function sy(t,e,i,r,n){var o=t.container,a=o.label,s=o.linked,l=t.ranges;return{label:new iy(a,i,r,n),linked:s,ranges:l,mesh:e}}var ly=function(){function t(e){br(this,t),this.textureManager=pa(e),this.tiles={},this.meshes=[],this.containers=[]}return wr(t,[{key:"insertLabel",value:function(t,e){var i=t.label.text_data,r=i.text_settings_key,n=i.text,o=i.text_info;this.containers.push(t),this._ensureTextSection(e,r)[n]=o}},{key:"trackMesh",value:function(t){-1===this.meshes.indexOf(t)&&this.meshes.push(t)}},{key:"updateMeshes",value:function(){var t=this;return this.containers.forEach(function(e){if(e.label.text_data){var i=e.label.getTile(),r=e.mesh;if(r.valid){var n=e.label.type,o=e.label.text_data.text_info;if(t.tiles[i.id]&&t.tiles[i.id].textures){var a=t.tiles[i.id].textures[0];if(r.uniforms.u_texture=a,-1===r.textures.indexOf(a)&&r.textures.push(a),"point"===n||"straight"===n){var s="point"===n?o.align[e.label.align].texcoords:o.texcoords[n].texcoord;t.setTexCoords(r,e,s)}else if("curved"===n){var l=o.segments.length,u=o.texcoords_stroke,c=o.texcoords.curved;t.setTexCoords(r,e,function(t){return t<l?u[t]:c[t-l].texcoord})}}}else if(t.tiles[i.id]&&t.tiles[i.id].textures){var h=t.tiles[i.id].textures[0];t.textureManager.release(h)}}}),this.meshes}},{key:"setTexCoords",value:function(t,e,i){var r,n=i instanceof Function;if(!n){var o=Lr(i,4),a=o[0],s=o[1],l=o[2],u=o[3];r=[[a,s],[l,s],[l,u],[a,u]]}var c=t.vertex_layout.stride,h=new DataView(t.vertex_data.buffer),f=t.vertex_layout.offset.a_texcoord;e.ranges.forEach(function(t,e){var o=Lr(t,3),a=o[0],s=o[1],l=o[2];if(n){var u=Lr(i(e),4),p=u[0],d=u[1],y=u[2],g=u[3];r=[[p,d],[y,d],[y,g],[p,g]]}for(var v=l?s/2:0;v<s;v++){var _=r[v%4],m=a+v*c;h.setUint16(m+f,65535*_[0],ay),h.setUint16(m+f+2,65535*_[1],ay)}})}},{key:"createTextures",value:function(t){var e=this;return Promise.all(Object.values(this.tiles).map(function(i){var r=i.id,n=i.key,o=i.texts;return e._createTexturesForTile(t,o,"labels-".concat(n,"-").concat(r),r,e.textureManager).then(function(t){t.length&&(t.forEach(function(t){e.textureManager.retain(t),1<e.textureManager.getRetainCount(t)&&e.textureManager.release(t)}),e.tiles[r].textures=t)})}))}},{key:"_createTexturesForTile",value:function(t,e,i,r,n){var o=new sh,a=o.setTextureTextPositions(e);return o.rasterize(e,a,r,i,t,n)}},{key:"_ensureTile",value:function(t){var e=t.id,i=t.key;return this.tiles[e]||(this.tiles[e]={id:e,key:i,texts:{}}),this.tiles[e]}},{key:"_ensureTextSection",value:function(t,e){var i=this._ensureTile(t).texts;return i[e]||(i[e]={}),i[e]}}]),t}(),uy=function(){function t(e){var i=e.scene,r=e.view;br(this,t),this._scene=i,this._view=r,this._tiles={},this._old_tiles={},this._pyramid=new ey,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._main_thread_target=["TileManager",this._scene.id].join("_"),Fr.addTarget(this._main_thread_target,this),this._updateVisibility=this._updateVisibility.bind(this),this._keepCoordinate=this._keepCoordinate.bind(this),this._is_labeled=!1}return wr(t,[{key:"destroy",value:function(){this.forEachTile(function(t){return t.destroy()}),this._tiles={},this.forEachOldTile(function(t){return t.destroy()}),this._old_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(t){this._tiles[t.key]=t,this._pyramid.addTile(t)}},{key:"hasTile",value:function(t){return void 0!==this._tiles[t]}},{key:"_forgetTile",value:function(t){if(this.hasTile(t)){var e=this._tiles[t];this._pyramid.removeTile(e),e.workerMessage("self.removeTile",e.id),e.visible&&e.loaded?this._old_tiles[t]=e:e.destroy(),delete this._tiles[t],this._tileBuildStop(e)}}},{key:"removeTile",value:function(t){this._forgetTile(t),this._scene.requestRedraw()}},{key:"forEachOldTile",value:function(t){for(var e in this._old_tiles)t(this._old_tiles[e])}},{key:"forEachTile",value:function(t){for(var e in this._tiles)t(this._tiles[e])}},{key:"removeTiles",value:function(t){var e=[];for(var i in this._tiles){t(this._tiles[i])&&e.push(i)}for(var r=0;r<e.length;r++){var n=e[r];this.removeTile(n)}}},{key:"updateTilesForView",value:function(){this._visible_coords={};for(var t=this._view.findVisibleTileCoordinates(),e=0;e<t.length;e++){var i=t[e];this._visible_coords[i.key]=i}this.updateTileStates()}},{key:"updateTileStates",value:function(){this._keepCoordinates(),this.forEachTile(this._updateVisibility),this.forEachOldTile(this._updateVisibility),this._updateProxyTiles(),this._view.pruneTilesForView(),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_updateLabels",value:function(){var t=this._renderable_tiles.sort(cy);return ry.mainThreadLabelCollisionPass(t,function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,r=Math.pow(10,i);return Math.round(Math.floor(t*e)/e*r)/r}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id)}},{key:"_updateProxyTiles",value:function(){var t=this,e=this._view.lookAtManipulator.getZoomDirection();if(0!==e){var i=!1;this.forEachTile(function(r){if(r.setProxyFor(null),1===e){if(r.visible&&!r.built){var n=t._pyramid.getAncestor(r);n&&(n.setProxyFor(r),i=!0)}}else if(-1===e&&r.visible&&!r.built)for(var o=t._pyramid.getDescendants(r),a=0;a<o.length;a++)o[a].setProxyFor(r),i=!0}),i||this._view.lookAtManipulator.resetZoomDirection()}}},{key:"_updateVisibility",value:function(t){if(t.visible=!1,t.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level)if(this._visible_coords[t.coords.key])t.visible=!0;else for(var e in this._visible_coords)if(xa.isDescendant(t.coords,this._visible_coords[e])){t.visible=!0;break}}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var t in this._renderable_tiles=[],this._tiles){var e=this._tiles[t];e.visible&&e.loaded&&(this._renderable_tiles.push(e),(e=this._old_tiles[t])&&(e.destroy(),delete this._old_tiles[t]))}for(var i in this._old_tiles){var r=this._old_tiles[i];r.visible&&r.generation===this._scene.generation?this._renderable_tiles.push(r):(r.destroy(),delete this._old_tiles[i])}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(t,e){return e.has_volatile_data?this._scene.getWorkers(Yl)[0]:e.tiled?this._scene.getWorkers(Wl)[Math.abs(t.x+t.y+t.z)%this._scene.num_workers]:this._scene.getWorkers(Wl)[e.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var t=this._renderable_tiles,e={},i=0;i<t.length;i++){var r=t[i];Object.keys(r.meshes).forEach(function(t){return e[t]=!0})}return this._active_styles=Object.keys(e),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var t=this;return Object.keys(this._tiles).some(function(e){return t._tiles[e].visible&&!t._tiles[e].built})}},{key:"updateTilesVisibilityCounters",value:function(){var t=this;Object.keys(this._visible_coords).forEach(function(e){e in t._tile_visibility_counters||(t._tile_visibility_counters[e]=0)});var e=Object.keys(this._tile_visibility_counters),i=[];e.forEach(function(e){e in t._visible_coords?(t._tile_visibility_counters[e]++,30<=t._tile_visibility_counters[e]&&i.push(t._visible_coords[e])):(t._tile_visibility_counters[e]--,t._tile_visibility_counters[e]<=0&&delete t._tile_visibility_counters[e])}),i.length&&this.loadCoordinates(i)}},{key:"loadCoordinates",value:function(t){var e=this;t.sort(function(t,i){var r=e._view.lookAtManipulator.getLookAtData().position,n=an.metersPerTile(t.z)/2,o=an.metersForTile(t);o.x+=n,o.y-=n;var a=an.metersForTile(i);a.x+=n,a.y-=n;var s=Math.abs(r[0]-o.x)+Math.abs(r[1]-o.y),l=Math.abs(r[0]-a.x)+Math.abs(r[1]-a.y);return(t.center_dist=s)<(i.center_dist=l)?-1:l===s?0:1}),t.forEach(function(t){return e.loadCoordinate(t)})}},{key:"_keepCoordinates",value:function(){Object.keys(this._visible_coords).forEach(this._keepCoordinate)}},{key:"_keepCoordinate",value:function(t){var e=this._visible_coords[t];if(e.z===this._view.center_tile.z)for(var i in this._scene.sources){var r=this._scene.sources[i];if(r.builds_geometry_tiles&&r.includesTile(e,this._view.lookAtManipulator.getLookAtData().tile_level)){var n=xa.normalizedKey(e,r,this._view.lookAtManipulator.getLookAtData().tile_level);if(n&&!this.hasTile(n)){var o=new xa({source:r,coords:e,worker:this.getWorkerForTile(e,r),style_zoom:pn.zoomToTileLevel(e.z),view:this._view,sceneId:this._scene.id});this.keepTile(o)}}}}},{key:"loadCoordinate",value:function(t){if(t.z===this._view.center_tile.z)for(var e in this._scene.sources){var i=this._scene.sources[e];if(i.builds_geometry_tiles&&i.includesTile(t,this._view.lookAtManipulator.getLookAtData().tile_level)){var r=xa.normalizedKey(t,i,this._view.lookAtManipulator.getLookAtData().tile_level);this.hasTile(r)&&this.buildTile(this._tiles[r])}}}},{key:"buildTile",value:function(t,e){this._building_tiles&&this._building_tiles[t.key]||t.built&&t.generation===this._scene.generation||(this._tileBuildStart(t.key),this._updateVisibility(t),t.build(this._scene.generation,e))}},{key:"buildTileStylesCompleted",value:function(t){var e=t.tile,i=t.progress;if(null==this._tiles[e.key])xa.abortBuild(e,this._scene.id);else if(e.generation!==this._scene.generation)xa.abortBuild(e,this._scene.id);else{if(e.id<this._tiles[e.key].id)return void xa.abortBuild(e,this._scene.id);e=this._tiles[e.key].merge(e),i.done&&(e.built=!0),e.buildMeshes(this._scene.styles,i),this.updateTileStates(),this._scene.requestRedraw()}i.done&&this._tileBuildStop(e)}},{key:"buildTileError",value:function(t){this._forgetTile(t.key),xa.abortBuild(t,this._scene.id)}},{key:"_tileBuildStart",value:function(t){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[t]=!0}},{key:"_tileBuildStop",value:function(t){this._building_tiles&&(t.source&&t.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[t.key],this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){var t=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?(sh.pruneTextCache(),this._updateLabels().then(function(){t._is_labeled=!sa.hasPendingTasks(),t._scene.immediateRedraw(),t._update_labels_on_queue_check=!1})):(this._is_labeled=!sa.hasPendingTasks(),this._scene.immediateRedraw()))}}]),t}();function cy(t,e){var i=t.coords,r=e.coords;return i.z-r.z||i.x-r.x||i.y-r.y}function hy(t){br(this,hy),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new fy({cull:this.defaults.culling,face:this.defaults.culling_face},function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)}),this.blending=new fy({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)}),this.depth_write=new fy({depth_write:this.defaults.depth_write},function(e){t.depthMask(e.depth_write)}),this.depth_test=new fy({depth_test:this.defaults.depth_test},function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)})}var fy=function(){function t(e,i){br(this,t),i(e),this.value=e,this.setup=i}return wr(t,[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)}}]),t}(),py=function(){function t(){br(this,t),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return wr(t,[{key:"setCanvas",value:function(t,e){this.canvas=t,this.gl=e}},{key:"screenshot",value:function(t){var e=this,i=(0<arguments.length&&void 0!==t?t:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:i},this.queue_screenshot.promise=new Promise(function(t,i){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=i})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var t=this.canvas.width,e=this.canvas.height,i=new Uint8Array(t*e*4);this.gl.readPixels(0,0,t,e,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i);var r=this.queue_screenshot.background;r=r&&"transparent"!==r?Zo.parseColor(r).slice(0,3).map(function(t){return 255*t}):null;for(var n=new Uint8ClampedArray(t*e*4),o=0;o<e;o++)for(var a=0;a<t;a++){var s=4*((e-o-1)*t+a),l=4*(o*t+a),u=i[3+s];n[0+l]=255*i[0+s]/u,n[1+l]=255*i[1+s]/u,n[2+l]=255*i[2+s]/u,n[3+l]=u,r&&(u/=255,n[0+l]=n[0+l]*u+r[0]*(1-u),n[1+l]=n[1+l]*u+r[1]*(1-u),n[2+l]=n[2+l]*u+r[2]*(1-u),n[3+l]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var c=this.screenshot_canvas;c.width=t,c.height=e,this.screenshot_context=this.screenshot_context||c.getContext("2d");var h=this.screenshot_context,f=new ImageData(n,t,e);h.putImageData(f,0,0);for(var p=c.toDataURL("image/png"),d=atob(p.slice(22)),y=new Uint8Array(d.length),g=0;g<d.length;++g)y[g]=d.charCodeAt(g);var v=new Blob([y],{type:"image/png"});this.queue_screenshot.resolve({url:p,blob:v,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var t=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return Qr("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return Qr("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var e=this.video_capture={};e.chunks=[],e.stream=this.canvas.captureStream(),e.options={mimeType:"video/webm"},e.media_recorder=new MediaRecorder(e.stream,e.options),e.media_recorder.ondataavailable=function(i){if(0<i.data.size&&e.chunks.push(i.data),e.resolve){var r=new Blob(e.chunks,{type:e.options.mimeType}),n=bn(r);if(e.stream)(e.stream.getTracks()||[]).forEach(function(t){t.stop(),e.stream.removeTrack(t)});e.stream=null,e.media_recorder=null,t.video_capture=null,e.resolve({url:n,blob:r,type:"webm"})}},e.media_recorder.start()}catch(t){return this.video_capture=null,Qr("error","Scene video capture failed",t),!1}return!0}},{key:"stopVideoCapture",value:function(){var t=this;return this.video_capture?(this.video_capture.promise=new Promise(function(e,i){t.video_capture.resolve=e,t.video_capture.reject=i}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(Qr("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),t}(),dy=function(){function t(){br(this,t),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return wr(t,[{key:"init",value:function(t,e,i,r,n,o){return this.scene_id=t,this.textureManager=pa(t),this._worker_id=e,Qr.setLevel(i),pn.device_pixel_ratio=r,Eu.setElementIndexUint(n),lu.setPrefix(this._worker_id),this._style_manager=new yf,this._importExternalScripts(o),Vc.id_prefix=e,this._isConfigured=!1,e}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(t){if(0!==t.length){Qr("debug","loading custom data source scripts in worker:",t);var e=Object.getOwnPropertyNames(window);importScripts.apply(void 0,Ir(t)),Object.getOwnPropertyNames(window).forEach(function(t){-1===e.indexOf(t)&&(self[t]=window[t])})}}},{key:"updateConfig",value:function(t,e){var i=t.config,r=t.generation,n=t.introspection;for(var o in i=JSON.parse(i),function(t){Object.assign(Gl,t)}(e),this._generation=r,this._isConfigured=!1,i.layers)i.layers[o]&&(i.layers[o].data=pn.stringsToFunctions(i.layers[o].data));this.global=pn.stringsToFunctions(i.global),this._createDataSources(i),i.styles=pn.stringsToFunctions(i.styles,Zo.wrapFunction),this.styles=this._style_manager.build(i.styles),self.is_fake_worker=Dr.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:n,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(t,e){Vd={};var i={};for(var r in t){var n=t[r];n&&(i[r]=Qd(r,n,null,e))}return i}(i.layers,this._style_manager.styles),this._configuring=this._syncTextures(i.textures)}},{key:"_createDataSources",value:function(t){var e=this;this._last_config_sources=this._config_sources||{},this._config_sources=t.sources;var i=this.sources,r=[];for(var n in t.sources=pn.stringsToFunctions(t.sources),this.sources={},self.is_fake_worker=Dr.is_main,t.sources)if(JSON.stringify(this._last_config_sources[n])!==JSON.stringify(t.sources[n])){var o=void 0;try{o=wn.create(Object.assign({},t.sources[n],{name:n}),this.sources)}catch(i){Qr("error","Error creating source.",i.message,t.sources[n]);continue}o&&(this.sources[n]=o,r.push(n))}else this.sources[n]=i[n];delete self.is_fake_worker,r.forEach(function(t){for(var i in e.tiles)e.tiles[i].source===t&&delete e.tiles[i]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(t){var e=this;if((this._isConfigured=!0)!==t.loaded)t.loading=!0,t.loaded=!1,t.error=null,this._loadTileSourceData(t).then(function(){if(e.getTile(t.id)){t.loading=!1,t.loaded=!0;try{xa.buildGeometry(t,e)}catch(i){t.error=i.toString(),Fr.postMessage("TileManager_".concat(e.scene_id,".buildTileError"),xa.slice(t))}}else Qr("trace","stop tile build after data source load because tile was removed. Key: ".concat(t.key,", id: ").concat(t.id))},function(i){t.loading=!1,t.loaded=!1,t.error=i.stack,Qr("error","tile load error for tile with key ".concat(t.key," and id ").concat(t.id,": ").concat(t.error)),Fr.postMessage("TileManager_".concat(e.scene_id,".buildTileError"),xa.slice(t))});else{Qr("trace","used worker cache for tile with key ".concat(t.key," and id ").concat(t.id));try{xa.buildGeometry(t,this)}catch(e){t.error=e.toString(),Fr.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),xa.slice(t))}}}},{key:"buildTile",value:function(t){var e=t.tile,i=this.getTile(e.id);if(!i||!i.loading)if(e=this.tiles[e.id]=Object.assign(i||{},e),this._isConfigured)this._onConfig(e);else{var r=this;this.awaitConfiguration().then(function(){return r._onConfig(e)})}}},{key:"_loadTileSourceData",value:function(t){return this.sources[t.source]?this.sources[t.source].load(t):(t.source_data={},Promise.resolve(t))}},{key:"getTile",value:function(t){return this.tiles[t]}},{key:"removeTile",value:function(t){var e=this.tiles[t];null!=e&&(!0===e.loading&&(Qr("trace","cancel tile load for tile id ".concat(t)),e.loading=!1,xa.cancel(e)),delete this.tiles[t],Qr("trace","remove tile from cache, tile id: ".concat(t)))}},{key:"queryFeatures",value:function(t){var e=this,i=t.filter,r=t.visible,n=t.geometry,o=t.tile_ids,a=[],s=o.map(function(t){return e.tiles[t]}).filter(function(t){return t});return null!=i&&(i=-1<["{","["].indexOf(i[0])?JSON.parse(i):i,i=pn.stringsToFunctions(i,Zo.wrapFunction)),i=Ud(i,Zd),s.forEach(function(t){function o(o){t.source_data.layers[o].features.forEach(function(s){if(!(!0===r&&s.generation!==e._generation||!1===r&&s.generation===e._generation)){var l=Zo.getFeatureParseContext(s,t,e.global);if(l.source=t.source,l.layer=o,i(l)){var u={type:s.type,properties:s.properties};!0===n&&(u.geometry=an.copyGeometry(s.geometry),an.tileSpaceToLatlng(u.geometry,t.coords.z,t.min)),a.push(u)}}})}for(var s in t.source_data.layers)o(s)}),a}},{key:"resetFeatureSelection",value:function(){lu.reset()}},{key:"_syncTextures",value:function(t){var e=[];return t&&e.push.apply(e,Ir(Object.keys(t))),Qr("trace","sync textures to worker:",e),0<e.length?this.textureManager.syncTexturesToWorker(e):Promise.resolve()}},{key:"profile",value:function(t){console.profile("worker ".concat(this._worker_id,": ").concat(t))}},{key:"profileEnd",value:function(t){console.profileEnd("worker ".concat(this._worker_id,": ").concat(t))}},{key:"terminate",value:function(){this.dispose()}}]),t}();(Dr.is_worker||self.H&&self.H.DEBUG)&&Fr.addTarget("self",new dy);var yy=function(){function t(e,i){br(this,t),i=i||{},ca(this),this.id=t.id++,this.textureManager=pa(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new Yh(this,i),this.tile_manager=new uy({scene:this,view:this.view}),this.num_workers=i.numWorkers||2,!0===i.disableVertexArrayObjects&&(su.disabled=!0),pn.device_pixel_ratio=i.devicePixelRatio,this.config=null,this.config_source=e,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new yf,this.building=null,this.dirty=!0,i.preUpdate&&this.subscribe({pre_update:i.preUpdate}),i.postUpdate&&this.subscribe({post_update:i.postUpdate}),this.render_loop=!i.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new py,this.selection=null,this.introspection=!0===i.introspection,this.resetTime(),this.viewport=i.viewport,this.container=i.container,this.canvas=null,this.contextOptions=i.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=t.generation,this.last_complete_generation=t.generation,this.log_level=i.logLevel||"warn",Qr.setLevel(this.log_level),Qr.reset()}return wr(t,[{key:"load",value:function(t,e){var i=this,r=0<arguments.length&&void 0!==t?t:null,n=1<arguments.length&&void 0!==e?e:{};return this.initializing||(Qr.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(n="string"==typeof n?{base_path:n}:n).blocking=void 0===n.blocking||n.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(r,n).then(function(){return i.createWorkers()}).then(function(){i.resetFeatureSelection();var t="object"===mr(i.config_source)||i.hasSubscribersFor("load"),e=i.updateConfig({serialize_funcs:t,normalize:!1,load_event:!0,fade_in:!0});if(!0===n.blocking)return e}).then(function(){i.updating--,i.initializing=null,i.initialized=!0,i.last_valid_config_source=i.config_source,i.last_valid_options={base_path:n.base_path,file_type:n.file_type},i.requestRedraw()}).catch(function(t){var e,r;if(i.initializing=null,i.updating=0,r="YAMLException"===t.name?(e="yaml","Error parsing scene YAML"):"Error initializing scene",i.trigger("error",{type:e,message:r,error:t,url:i.config_source}),r="Scene.load() failed to load ".concat(i.config_source,": ").concat(t.message),i.last_valid_config_source)return Qr("warn",r,t),Qr("info","Scene.load() reverting to last valid configuration"),i.load(i.last_valid_config_source,i.last_valid_base_path);throw Qr("error",r,t),t})),this.initializing}},{key:"destroy",value:function(){if(this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl){this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},au.reset();var t=this.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this.gl=null}this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),Qr.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Zl.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:pn.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(t){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),su.init(this.gl),this.render_states=new hy(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var t;if(void 0!==e){var n="("+e+")()";if(r&&""!==i)n+="\n//# sourceMappingURL="+r.slice(0,r.lastIndexOf("/")+1)+i;t=bn(new Blob([n],{type:"application/javascript"}))}if(!t)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return t}},{key:"updateExternalScripts",value:function(){var t=Ir(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var i in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[i])&&e.push(this.config.scene.scripts[i]);for(var r in this.config.sources){var n=this.config.sources[r];if(n.scripts)for(var o in n.scripts)-1===e.indexOf(n.scripts[o])&&e.push(n.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every(function(e,i){return e===t[i]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(t){var e=this,i=!!this.gl.getExtension("OES_element_index_uint"),r=[];this._workers=[];for(var n=0,o=function(){var o=new Worker(t);e._workers[n]=o,Fr.addWorker(o),Qr("debug","Scene.makeWorkers: initializing worker ".concat(n));var a=n;r.push(Fr.postMessage(o,"self.init",e.id,n,e.log_level,pn.device_pixel_ratio,i,e.external_scripts).then(function(t){return Qr("debug","Scene.makeWorkers: initialized worker ".concat(t)),t},function(t){return Qr("error","Scene.makeWorkers: failed to initialize worker ".concat(a,":"),t),Promise.reject(t)}))};n<this.num_workers;n++)o();var a=new dy;return this._workers.push(a),r.push(a.init(this.id,n,this.log_level,pn.device_pixel_ratio,i,[])),this.next_worker=0,Promise.all(r).then(function(){Qr.setWorkers(e._workers.slice(0,e.num_workers)),function(t){void 0===yn&&"function"!=typeof(yn=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(yn=null,Qr("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),yn&&yn(t)}(t)})}},{key:"getWorkers",value:function(t){return this._workers.filter(function(e){switch(t){case Wl:return e instanceof Worker;case Yl:return e instanceof dy;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(Qr.setWorkers(null),this._workers.forEach(function(t){t.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var t=this.viewport,e=t.width,i=t.height;0<e&&0<i&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Zl.resize(this.gl,e,i,pn.device_pixel_ratio))}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),sa.setState({user_moving_view:this.view.user_input_active}),sa.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var t=this;this.render_loop_active||setTimeout(function(){t.renderLoop()},0)}},{key:"update",value:function(){var t=this.dirty,e=!!this.selection&&this.selection.hasPendingRequests(),i=!(!1===t&&!1===e||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",i),this.view.update(),i&&(this.dirty=!1,this.render({main:t,selection:e}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",i),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,Qr("trace","Scene.render()"),!0)}},{key:"render",value:function(t){var e=this,i=t.main,r=t.selection,n=this.gl;if(Object.keys(this.lights).forEach(function(t){return e.lights[t].update()}),i&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),r){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),n.bindFramebuffer(n.FRAMEBUFFER,null),n.viewport(0,0,this.canvas.width,this.canvas.height),n.clearColor.apply(n,Ir(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:r})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(t,e){var i=this,r=0<arguments.length&&void 0!==t?t:"program",n=(1<arguments.length&&void 0!==e?e:{}).allow_blend,o=this.gl;n=null==n||n,this.clearFrame();for(var a,s,l=xu.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(t){return i.styles[t]}).filter(function(t){return t})),u=0,c=0,h=0;h<l.length;h++){var f=l[h],p=c-(s=parseInt(f.name));if((f.clean_depth||p)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),p&&(c=s)),f.blend!==a){var d=Object.assign({},xu.render_states[f.blend],{blend:n&&f.blend});this.setRenderState(d)}var y="translucent"===f.blend&&"program"===r;y&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(f.name,r),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),u+=this.renderStyle(f.name,r),y&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),a=f.blend}return u}},{key:"renderStyle",value:function(t,e){for(var i,r=this,n=this.styles[t],o=!0,a=0,s=this.tile_manager.getRenderableTiles(),l=Math.max.apply(Math,Ir(s.map(function(e){return e.meshes[t]?Math.max.apply(Math,Ir(e.meshes[t].map(function(t){return t.variant.order}))):-1}))),u=function(l){for(var u=0;u<s.length;u++){var c=s[u];if(null!=c.meshes[t]&&c.shouldProxyForStyle(t))for(var h=c.meshes[t].filter(function(t){return t.variant.order===l}),f=0,p=h.length;f<p;f+=1){var d=h[f];if(!0===o&&(o=!1,!(i=r.setupStyle(n,e))))return{v:0};r.view.setupTile(c,i),r.selection.setupDiscards(i),n.render(d)&&r.requestRedraw(),a+=d.geometry_count}}},c=0;c<l+1;c++){var h=u(c);if("object"===mr(h))return h.v}return a}},{key:"setupStyle",value:function(t,e){var i;try{if(!(i=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(t.name),style:t,shader_errors:t.program&&t.program.shader_errors})}for(var r in i.use(),t.setup(),i.uniform("1f","u_time",this.animated?(+new Date-this.start_time)/1e3:0),this.view.setupProgram(i),this.lights)this.lights[r].setupProgram(i);return i}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},i=e.depth_test,r=e.depth_write,n=e.cull_face,o=e.blend;if(this.initialized){var a=this.render_states;i=!1!==i&&a.defaults.depth_test,r=!1!==r&&a.defaults.depth_write,n=!1!==n&&a.defaults.culling,o=null!=o?o:a.defaults.blending;var s=this.gl;a.depth_test.set({depth_test:i}),a.depth_write.set({depth_write:r}),a.culling.set({cull:n,face:a.defaults.culling_face}),o?"opaque"===o?a.blending.set({blend:!1}):"overlay"===o||"inlay"===o||"translucent"===o?a.blending.set({blend:!0,src:s.SRC_ALPHA,dst:s.ONE_MINUS_SRC_ALPHA,src_alpha:s.ONE,dst_alpha:s.ONE_MINUS_SRC_ALPHA}):"add"===o?a.blending.set({blend:!0,src:s.ONE,dst:s.ONE}):"multiply"===o&&a.blending.set({blend:!0,src:s.ZERO,dst:s.SRC_COLOR}):a.blending.set({blend:!1})}}},{key:"getFeatureAt",value:function(t,e,i){var r=e.radius,n=e.top_most_only;if(this.initialized){var o={x:t.x/this.view.size.css.width,y:t.y/this.view.size.css.height};r=0<r?{x:r/this.view.size.css.width,y:r/this.view.size.css.height}:null,this.selection.getFeatureAt(o,{radius:r,top_most_only:n},i)}else Qr("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},i=e.filter,r=e.unique,n=void 0===r||r,o=e.group_by,a=void 0===o?null:o,s=e.visible,l=void 0===s?null:s,u=e.geometry,c=void 0!==u&&u;i=pn.serializeWithFunctions(i);var h=this.tile_manager.getRenderableTiles().map(function(t){return t.id});return Fr.postMessage(this._workers,"self.queryFeatures",{filter:i,visible:l,geometry:c,tile_ids:h}).then(function(t){var e=[],i={},r={},o=(n="string"==typeof n?[n]:n)&&function(t){return JSON.stringify(Array.isArray(n)?Xl(t,n):t)},s=(a=("string"==typeof a||Array.isArray(a))&&a)&&function(t){return Array.isArray(a)?JSON.stringify(Xl(t,a)):t[a]};return t.forEach(function(t){return t.forEach(function(t){if(o){var n=o(t);if(i[n])return;i[n]=!0}if(s){var a=s(t.properties);r[a]=r[a]||[],r[a].push(t)}else e.push(t)})}),s?r:e})}},{key:"loadScene",value:function(t,e){var i=this,r=0<arguments.length&&void 0!==t?t:null,n=1<arguments.length&&void 0!==e?e:{},o=n.base_path,a=n.file_type;return this.config_source=r||this.config_source,"string"==typeof this.config_source?this.base_path=_n(o||this.config_source):this.base_path=_n(o),this.config_path=this.base_path,ty.loadScene(this.config_source,{path:this.base_path,type:a}).then(function(t){var e=t.config,r=t.bundle;return i.config=e,i.config_bundle=r,i.config})}},{key:"createDataSources",value:function(){var t=this,e=[],i=Object.keys(this.sources),r=0;for(var n in this.config.sources){var o=this.config.sources[n],a=this.sources[n];try{var s=Object.assign({},o,{name:n,id:r++});if(this.sources[n]=wn.create(s,this.sources),!this.sources[n])throw{}}catch(i){delete this.sources[n];var l="Could not create data source: ".concat(i.message);Qr("warn","Scene: ".concat(l),o),this.trigger("warning",{type:"sources",source:o,message:l})}wn.changed(this.sources[n],a)&&e.push(n)}for(var u in i.forEach(function(i){t.config.sources[i]||(delete t.sources[i],e.push(i))}),0<e.length&&this.tile_manager.removeTiles(function(t){return-1<e.indexOf(t.source.name)}),this.config.layers){var c=this.config.layers[u];!1!==c.enabled&&c.data&&this.sources[c.data.source]&&(this.sources[c.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var t=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return t.textureManager.createDefault(t.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var t in this.lights={},this.config.lights)if(this.config.lights[t]&&"object"===mr(this.config.lights[t])){var e=this.config.lights[t];e.name=t.replace("-","_"),e.visible=!1!==e.visible,e.visible&&(this.lights[e.name]=du.create(this.view,e))}du.inject(this.lights)}},{key:"setBackground",value:function(){var t,e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=Zo.parseColor(e.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map(function(t){return Math.floor(255*t)}).join(", "),")"):this.canvas.style.backgroundColor="transparent",(t=this.gl).clearColor.apply(t,Ir(this.background.color))}},{key:"setIntrospection",value:function(t){var e=this;return t!==this.introspection?(this.introspection=t||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return e.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(e){var i=0<arguments.length&&void 0!==e?e:{},r=i.load_event,n=void 0!==r&&r,o=i.serialize_funcs,a=i.normalize,s=void 0===a||a;i.fade_in;this.generation=++t.generation,this.updating++,this.config=ty.applyGlobalProperties(this.config),s?ty.normalize(this.config,this.config_bundle):(ty.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),ty.normalizeTextures(this.config,this.config_bundle)),this.trigger(n?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),ah.loadFonts(this.config.fonts),this.updateStyles();var l=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),l}},{key:"syncConfigToWorker",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).serialize_funcs,i=void 0===e||e?pn.serializeWithFunctions(this.config):JSON.stringify(this.config);return Fr.postMessage(this._workers,"self.updateConfig",{config:i,generation:this.generation,introspection:this.introspection},ql)}},{key:"createListeners",value:function(){var t=this;this.listeners={},this.listeners.view={move:function(){return t.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return t.dirty=!0},warning:function(e){return t.trigger("warning",Object.assign({type:"textures"},e))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(e){return t.trigger("error",Object.assign({type:"scene"},e))}},ty.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),ty.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&Fr.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new lu(this.gl,this.id)}},{key:"resetTime",value:function(){this.start_time=+new Date}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).background,i=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:i})}},{key:"pixelRatio",value:function(){return pn.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(t){console.profile("main thread: ".concat(t)),Fr.postMessage(this._workers,"self.profile",t)}},{key:"_profileEnd",value:function(t){console.profileEnd("main thread: ".concat(t)),Fr.postMessage(this._workers,"self.profileEnd",t)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var t=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(e){return t.styles[e]&&t.styles[e].animated})}}],[{key:"create",value:function(e,i){return new t(e,1<arguments.length&&void 0!==i?i:{})}}]),t}();yy.id=0,yy.generation=0;var gy=function(){function t(e,i,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};br(this,t);var o,a=Math.pow(2,n.coords.z),s=Math.abs(Math.floor(n.coords.x/a));o=Math.abs(a*s-Math.abs(n.coords.x));var l=n.coords;return n.coords={x:o,y:l.y,z:l.z},Or(this,Tr(t).call(this,e,i,r,n))}return Ar(t,ua),wr(t,[{key:"load",value:function(e){var i=this;if(!e||!e.uid)return Pr(Tr(t.prototype),"load",this).call(this,e);var r=e.coords,n=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function(t,o){var a=H.map.DataModel.invoke(e.uid,"requestTileAsPromise",[r.x,r.y,r.z])||null;a?a.then(function(t){var r=t.data;i.loaded=!0,!r||r instanceof ArrayBuffer?i.setData(1,1,n,{filtering:"nearest"}):"IMG"===r.tagName.toUpperCase()||"CANVAS"===r.tagName.toUpperCase()?i.setElement(r,e):i.setData(1,1,n,{filtering:"nearest"})},function(){i.loaded=!1}).then(t,function(t){return o(t)}):o(new Error("Unable to invoke on target "+e.uid))}),this.loading}}]),t}();ha.register(gy,function(t){return t&&t.uid});var vy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",_y=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],my=1,by="undefined"!=typeof BigInt?BigInt:Number;function xy(t){var e=t;return e&by(1)&&(e=~e),+(e>>=by(1)).toString()}function wy(t){for(var e="",i=by(t);31<i;){var r=i&by(31)|by(32);e+=vy[r],i>>=by(5)}return e+vy[i]}function ky(t){var e=by(t),i=e<0;return e<<=by(1),i&&(e=~e),wy(e)}var Ay={encode:function(t){var e=t.precision,i=void 0===e?5:e,r=t.thirdDim,n=void 0===r?0:r,o=t.thirdDimPrecision,a=void 0===o?0:o,s=t.polyline,l=Math.pow(10,i),u=Math.pow(10,a),c=function(t,e,i){if(t<0||15<t)throw new Error("precision out of range. Should be between 0 and 15");if(i<0||15<i)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(e<0||7<e||4===e||5===e)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");var r=i<<7|e<<4|t;return wy(my)+wy(r)}(i,n,a),h=[],f=by(0),p=by(0),d=by(0);return s.forEach(function(t){var e=by(Math.round(t[0]*l));h.push(ky(e-f)),f=e;var i=by(Math.round(t[1]*l));if(h.push(ky(i-p)),p=i,n){var r=by(Math.round(t[2]*u));h.push(ky(r-d)),d=r}}),[].concat(Ir(c),h).join("")},decode:function(t){for(var e=function(t){var e=by(0),i=by(0),r=[];if(t.split("").forEach(function(t){var n=by(function(t){var e=t.charCodeAt(0);return _y[e-45]}(t));e|=(n&by(31))<<i,(n&by(32))===by(0)?(r.push(e),e=by(0),i=by(0)):i+=by(5)}),0<i)throw new Error("Invalid encoding");return r}(t),i=function(t,e){if(+t.toString()!==my)throw new Error("Invalid format version");var i=+e.toString();return{precision:15&i,thirdDim:i>>4&7,thirdDimPrecision:i>>7&15}}(e[0],e[1]),r=Math.pow(10,i.precision),n=Math.pow(10,i.thirdDimPrecision),o=i.thirdDim,a=0,s=0,l=0,u=[],c=2;c<e.length;){if(a+=xy(e[c])/r,s+=xy(e[c+1])/r,o)l+=xy(e[c+2])/n,u.push([a,s,l]),c+=3;else u.push([a,s]),c+=2}if(c!==e.length)throw new Error("Invalid encoding. Premature ending reached");return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(e){kr(t,e,i[e])})}return t}({},i,{polyline:u})},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3};self.H=self.H||{},self.H.gl={DataSource:wn,Geo:an,MathUtils:nn,Scene:yy,Task:sa,Tile:xa,WorkerBroker:Fr,log:Qr,SceneLoader:ty,yaml:Rd,flexpolyline:Ay}}()};t()}();
},
	"com/coil/podway/MDM_Data/libs/mapsjs-mapevents.js":function(){/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.16.0/HERE_NOTICE
 */
H.util.eval('function Eo(a){var b=a.ownerDocument;b=b.documentElement||b.body.parentNode||b.body;try{var c=a.getBoundingClientRect()}catch(d){c={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:c.left+("number"===typeof window.pageXOffset?window.pageXOffset:b.scrollLeft),y:c.top+("number"===typeof window.pageYOffset?window.pageYOffset:b.scrollTop)}}var Fo=Function("return this")();function Go(a,b,c,d,e,f,g){Go.l.constructor.call(this,a);this.pointers=b;this.changedPointers=c;this.targetPointers=d;this.currentPointer=e;this.originalEvent=g;this.target=f}u(Go,qd);t("H.mapevents.Event",Go);function Ho(a,b,c,d,e,f){if(isNaN(a))throw Error("x needs to be a number");if(isNaN(b))throw Error("y needs to be a number");if(isNaN(c))throw Error("pointer must have an id");this.viewportX=a;this.viewportY=b;this.target=null;this.id=c;this.type=d;this.dragTarget=null;this.a=this.button=sc(e)?e:-1;this.buttons=sc(f)?f:0}t("H.mapevents.Pointer",Ho);\nfunction Io(a,b,c){if(isNaN(b))throw Error("x needs to be a number");if(isNaN(c))throw Error("y needs to be a number");a.viewportX=b;a.viewportY=c}Ho.prototype.um=function(){return this.a};Ho.prototype.getLastChangedButton=Ho.prototype.um;function Jo(a,b){a.a=b;a.buttons|=Ho.prototype.b[+b]||0}function Ko(a,b){a.a=b;a.buttons&=~(Ho.prototype.b[+b]||0)}Ho.prototype.b=[1,4,2];var Lo={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};Ho.Button=Lo;function Mo(a){this.a=a instanceof Array?a.slice(0):[]}n=Mo.prototype;n.clear=function(){this.a.splice(0,this.a.length)};n.length=function(){return this.a.length};n.indexOf=function(a){for(var b=this.a.length;b--;)if(this.a[b].id===a)return b;return-1};function No(a,b){b=a.indexOf(b);return-1!==b?a.a[b]:null}n.remove=function(a){a=this.indexOf(a);return-1!==a?this.a.splice(a,1)[0]:null};function Oo(a,b){for(var c=a.a.length,d=[];c--;)a.a[c].type!==b&&d.push(a.a[c]);a.a=d}\nfunction Po(a,b){for(var c=a.a.length;c--;)if(a.a[c].dragTarget===b)return!0;return!1}n.push=function(a){if(a instanceof Ho)return this.a.push(a);throw Error("list needs a pointer");};n.Ka=function(){return this.a};n.clone=function(){return new Mo(this.a)};function Qo(a,b,c){c=c||{};if(!(a instanceof T))throw Error("events: map instance required");if(!(b instanceof Array))throw Error("events: map array required");md.call(this);this.Qg=c.Qg||300;this.ij=c.ij||50;this.al=c.al||50;this.bl=c.bl||500;this.Eh=c.Eh||900;this.Dh=c.Dh||8;this.map=a;this.o=this.map.za;this.j=this.o.element;this.C=b;this.a=new Mo;this.b=new Mo;this.i={};this.c=null;this.ia=!0;this.v={};this.f={};this.m=null;this.oe=A(this.oe,this);this.G={pointerdown:this.Il,pointermove:this.Jl,\npointerup:this.Kl,pointercancel:this.Hl};Ro(this)}u(Qo,md);function Ro(a,b){var c,d=a.C.length;for(c=0;c<d;c++){var e=a.C[c];var f=e.listener;"function"===typeof f&&(b?(e.target||a.j).removeEventListener(e.Sa,f):(e.target||a.j).addEventListener(e.Sa,f))}}function So(a,b,c){var d;if("function"===typeof a.G[b]){"pointermove"!==b&&(a.ia=!0);var e=0;for(d=a.b.length();e<d;e++){var f=a.b.a[e];a.j.contains(c.target)?To(a,f,a.oj.bind(a,c,b,f)):a.oj(c,b,f,null)}}a.b.clear()}n=Qo.prototype;\nn.oj=function(a,b,c,d){Uo(c.id,this.v);this.G[b].call(this,c,d,a)};function To(a,b,c){if(a.c===b)c(b.target);else{var d=a.o;var e=b.viewportX;b=b.viewportY;if(0>e||0>b||e>=d.width||b>=d.height)c(y);else{var f=a.map;f.Nd(e,b,function(g){c(g||f)})}}}\nn.Kl=function(a,b,c){var d=a.id;a.target=b;Vo(this,a,c);Wo(this,b,"pointerup",c,a);"mouse"!==a.type&&Wo(this,b,"pointerleave",c,a);b=this.i[a.id];var e={x:a.viewportX,y:a.viewportY},f=c.timeStamp,g=a.target,h=this.m;b&&b.target===g&&b.ke.Ya(e)<this.al&&f-b.Hi<this.bl?(Wo(this,g,"tap",c,a),h&&h.target===g&&f-h.Hi<this.Qg?h.ke.Ya({x:a.viewportX,y:a.viewportY})<this.ij&&(Wo(this,g,"dbltap",c,a),this.m=null):this.m={target:g,ke:new I(a.viewportX,a.viewportY),Hi:c.timeStamp}):this.m=null;this.i={};Uo(d,\nthis.f)};function Vo(a,b,c){b===a.c&&(Wo(a,b.dragTarget,"dragend",c,b),a.c=null,Uo(b.id,a.v));b.dragTarget=null}n.oe=function(a,b){var c=this;Wo(this,a.dragTarget,"drag",b,a);Uo(a.id,this.v);this.v[a.id]=setTimeout(function(){c.oe(a,b)},150)};function Uo(a,b){b[a]&&(b[a].timeout?clearTimeout(b[a].timeout):clearTimeout(b[a]),delete b[a])}\nfunction Xo(a,b,c){var d=b.target,e=new I(b.viewportX,b.viewportY),f=b.id;Uo(f,a.f);var g=setTimeout(function(){d&&d===b.target&&e.Ya({x:b.viewportX,y:b.viewportY})<a.Dh&&(Wo(a,d,"longpress",c,b),delete a.i[b.id])},a.Eh);a.f[f]={timeout:g,ke:e}}\nn.Jl=function(a,b,c){var d=a.dragTarget,e=a.id;var f=a.target;a.target=b;f!==b&&(Wo(this,f,"pointerleave",c,a),Wo(this,b,"pointerenter",c,a));d?this.c?(this.oe(a,c),this.f[e]&&this.f[e].ke.Ya({x:a.viewportX,y:a.viewportY})>this.Dh&&Uo(e,this.f)):this.ia?this.ia=!1:(this.c=a,Wo(this,d,"dragstart",c,a),this.oe(a,c),delete this.i[e],this.ia=!0):(!this.c||this.c&&this.c.dragTarget!==b&&this.c.dragTarget!==this.map)&&Wo(this,b,"pointermove",c,a)};\nn.Il=function(a,b,c){var d=!(/^(?:mouse|pen)$/.test(a.type)&&0!==c.button);if(b){a.target=b;this.i[a.id]={ke:new I(a.viewportX,a.viewportY),target:a.target,Hi:c.timeStamp};"mouse"!==a.type&&Wo(this,b,"pointerenter",c,a);var e=Wo(this,b,"pointerdown",c,a);!this.c&&d&&(b.draggable&&!Po(this.a,b)?a.dragTarget=b:!this.map.draggable||e.defaultPrevented||Po(this.a,this.map)||(a.dragTarget=this.map));Xo(this,a,c)}};\nn.Hl=function(a,b,c){var d=a.id;a.target=null;b?(Wo(this,b,"pointerleave",c,a),Wo(this,b,"pointercancel",c,a)):Wo(this,this.map,"pointercancel",c,a);Vo(this,a,c);this.i={};Uo(d,this.f)};function Wo(a,b,c,d,e){if(b&&"function"===typeof b.dispatchEvent){var f=Go;var g=a.a.Ka(),h=a.b.Ka();a=a.a;var k,l=a.a.length,m=[];for(k=0;k<l;k++)a.a[k].target===b&&m.push(a.a[k]);f=new f(c,g,h,m,e,b,d);e.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(c)?e.a:Lo.NONE;b.dispatchEvent(f)}return f}\nn.u=function(){Ro(this,!0);this.a.clear();this.b.clear();var a=this.v,b;for(b in a)Uo(b,a);a=this.f;for(var c in a)Uo(c,a);this.c=this.i=this.m=this.map=this.b=this.a=this.C=this.N=null;md.prototype.u.call(this)};function Yo(a){this.g=A(this.g,this);Qo.call(this,a,[{Sa:"touchstart",listener:this.g},{Sa:"touchmove",listener:this.g},{Sa:"touchend",listener:this.g},{Sa:"touchcancel",listener:this.g}]);this.D={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"};this.s=(a=(a=a.m)?a.J():null)?Array.prototype.slice.call(a.querySelectorAll("a"),0):[]}u(Yo,Qo);\nYo.prototype.g=function(a){var b=a.touches,c=this.a.length(),d;if("touchstart"===a.type&&c>=b.length){c=this.a.clone();for(d=b.length;d--;)c.remove(b[d].identifier);for(d=c.length();d--;)this.a.remove(c.a[d].id);this.b=c;So(this,"pointercancel",a);this.b.clear()}if(this.D[a.type]){b=Eo(this.o.element);c=a.type;d=a.changedTouches;var e=d.length,f;this.b.clear();for(f=0;f<e;f++){var g=d[f];var h=No(this.a,g.identifier);var k=g.pageX-b.x;var l=g.pageY-b.y;if(h)if("touchmove"===c){g=Math.abs(h.viewportX-\nk);var m=Math.abs(h.viewportY-l);if(1<g||1<m||1===g&&1===m)Io(h,k,l),this.b.push(h)}else"touchend"===c&&(this.a.remove(h.id),this.b.push(h),Ko(h,Lo.LEFT));else h=new Ho(k,l,g.identifier,"touch",Lo.LEFT,1),this.a.push(h),this.b.push(h)}So(this,this.D[a.type],a);-1===this.s.indexOf(a.target)&&a.preventDefault()}};Yo.prototype.u=function(){this.s=null;Qo.prototype.u.call(this)};function Zo(a){var b=$o(this);(window.PointerEvent||window.MSPointerEvent)&&b.push({Sa:"MSHoldVisual",listener:"prevent"});Qo.call(this,a,b)}u(Zo,Qo);function $o(a){var b=!!window.PointerEvent,c,d,e=[];a.g=A(a.g,a);"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(f){c=f.toLowerCase().replace(/ms/g,"");d=b?c:f;e.push({Sa:d,listener:a.g,target:"MSPointerUp"===f||"MSPointerMove"===f?window:null})});return e}var ap={2:"touch",3:"pen",4:"mouse"};\nZo.prototype.g=function(a){var b=window.PointerEvent?a.type:a.type.toLowerCase().replace(/ms/g,""),c=Eo(this.j),d=No(this.a,a.pointerId),e=a.pageX-c.x;c=a.pageY-c.y;var f=ap[a.pointerType]||a.pointerType;$c&&"rtl"===x.getComputedStyle(this.o.element).direction&&(e-=(x.devicePixelRatio-1)*this.o.width);if(!(d||b in{pointerup:1,pointerout:1,pointercancel:1}||"touch"===f&&"pointerdown"!==b)){d={x:e,y:c};var g=a.pointerType;"number"===typeof g&&(g=ap[g]);d=new Ho(d.x,d.y,a.pointerId,g,a.button,a.buttons);\nthis.a.push(d)}d&&(b in{pointerup:1,pointercancel:1}?("touch"===f&&this.a.remove(d.id),Ko(d,a.button)):"pointerdown"===b&&("touch"===a.pointerType&&(Oo(this.a,"mouse"),Oo(this.a,"pen")),Jo(d,a.button)),this.b.push(d),"pointermove"!==b?(Io(d,e,c),So(this,"pointerout"===b||"pointerover"===b?"pointermove":b,a)):d.viewportX===e&&d.viewportY===c||a.target===document.documentElement||(Io(d,e,c),So(this,b,a)));this.b.clear()};function bp(a,b,c,d){bp.l.constructor.call(this,"contextmenu");this.items=[];this.viewportX=a;this.viewportY=b;this.target=c;this.originalEvent=d}u(bp,qd);t("H.mapevents.ContextMenuEvent",bp);function cp(a){this.qh=A(this.qh,this);this.sh=A(this.sh,this);this.rh=A(this.rh,this);this.s=!1;this.g=-1;this.D=0;cp.l.constructor.call(this,a,[{Sa:"contextmenu",listener:this.qh},{target:a,Sa:"longpress",listener:this.sh},{target:a,Sa:"dbltap",listener:this.rh}])}u(cp,Qo);n=cp.prototype;n.sh=function(a){var b=a.currentPointer;"touch"===b.type&&1===a.pointers.length&&dp(this,b.viewportX,b.viewportY,a.originalEvent,a.target)};n.rh=function(a){"touch"===a.currentPointer.type&&(this.D=Date.now())};\nn.qh=function(a){var b=this;-1===this.g?this.g=setTimeout(function(){var c=Eo(b.j),d=a.pageX-c.x;c=a.pageY-c.y;b.g=-1;dp(b,d,c,a)},this.Qg):(clearInterval(this.g),this.g=-1);a.preventDefault()};function dp(a,b,c,d,e){var f=a.map,g=Date.now()-a.D;e?!a.s&&g>a.Eh&&(a.s=!0,e.dispatchEvent(new bp(b,c,e,d)),Be(f.J(),a.Pi,a.nj,!1,a)):f.Nd(b,c,a.wn.bind(a,b,c,d))}n.wn=function(a,b,c,d){d=d&&Ba(d.dispatchEvent)?d:this.map;dp(this,a,b,c,d)};n.Pi=["mousedown","touchstart","pointerdown","wheel"];\nn.nj=function(){this.s&&(this.s=!1,this.map.dispatchEvent(new qd("contextmenuclose",this.map)))};n.u=function(){var a=this.map.J();clearInterval(this.g);a&&Ie(a,this.Pi,this.nj,!1,this);Qo.prototype.u.call(this)};function ep(a,b,c,d,e){ep.l.constructor.call(this,"wheel");this.delta=a;this.viewportX=b;this.viewportY=c;this.target=d;this.originalEvent=e}u(ep,qd);t("H.mapevents.WheelEvent",ep);function fp(a){var b="onwheel"in document;this.K=b;this.D=(b?"d":"wheelD")+"elta";this.g=A(this.g,this);fp.l.constructor.call(this,a,[{Sa:(b?"":"mouse")+"wheel",listener:this.g}]);this.s=this.map.za}u(fp,Qo);\nfp.prototype.g=function(a){if(!a.kl){var b=Eo(this.j);var c=a.pageX-b.x;b=a.pageY-b.y;var d=this.D,e=a[d+(d+"Y"in a?"Y":"")],f;$c&&"rtl"===x.getComputedStyle(this.s.element).direction&&(c-=(x.devicePixelRatio-1)*this.s.width);if(e){var g=Math.abs;var h=g(e);e=(!(f=a[d+"X"])||3<=h/g(f))&&(!(f=a[d+"Z"])||3<=h/g(f))?((0<e)-(0>e))*(this.K?1:-1):0}c=new ep(e,c,b,null,a);c.delta&&(a.stopImmediatePropagation(),a.preventDefault(),this.map.Nd(c.viewportX,c.viewportY,this.I.bind(this,c)))}};\nfp.prototype.I=function(a,b){var c=a.target=b||this.map,d,e;setTimeout(function(){c.dispatchEvent(a);a.f||(d=a.originalEvent,e=new x.WheelEvent("wheel",d),e.kl=1,d.target.dispatchEvent(e))},0)};function gp(a){var b=window;this.g=A(this.g,this);Qo.call(this,a,[{Sa:"mousedown",listener:this.g},{Sa:"mousemove",listener:this.g,target:b},{Sa:"mouseup",listener:this.g,target:b},{Sa:"mouseover",listener:this.g},{Sa:"mouseout",listener:this.g},{Sa:"dragstart",listener:this.s}])}u(gp,Qo);\ngp.prototype.g=function(a){var b=a.type,c=Eo(this.j);c={x:a.pageX-c.x,y:a.pageY-c.y};var d;(d=this.a.a[0])||(d=new Ho(c.x,c.y,1,"mouse"),this.a.push(d));this.b.push(d);Io(d,c.x,c.y);/^mouse(?:move|over|out)$/.test(b)?So(this,"pointermove",a):(/^mouse(down|up)$/.test(b)&&(c=a.which-1,"up"===Fo.RegExp.$1?Ko(d,c):Jo(d,c)),So(this,b.replace("mouse","pointer"),a));this.b.clear()};gp.prototype.s=function(a){a.preventDefault()};function hp(a){var b=a.za.element.style;if(-1!==ip.indexOf(a))throw Error("InvalidArgument: map is already in use");this.a=a;ip.push(a);b.msTouchAction=b.touchAction="none";ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Yo(this.a),this.b=new gp(this.a)):this.c=new Zo(this.a);this.g=new fp(this.a);this.f=new cp(this.a);this.a.tb(this.B,this);md.call(this)}u(hp,md);t("H.mapevents.MapEvents",hp);hp.prototype.c=null;hp.prototype.b=null;hp.prototype.g=null;hp.prototype.f=null;\nvar ip=[];Ec(ip);hp.prototype.B=function(){this.a=null;this.c.B();this.g.B();this.f.B();this.b&&this.b.B();ip.splice(ip.indexOf(this.a),1);md.prototype.B.call(this)};hp.prototype.dispose=hp.prototype.B;hp.prototype.Vl=function(){return this.a};hp.prototype.getAttachedMap=hp.prototype.Vl;function jp(a,b){b=void 0===b?{}:b;var c;jp.l.constructor.call(this);if(-1!==kp.indexOf(a))throw new D(jp,0,"events are already used");this.a=c=a.a;this.j=a;kp.push(a);c.draggable=!0;this.i=b.kinetics||{duration:600,Fd:rm};this.m=b.modifierKey||"Alt";this.enable(b.enabled);this.c=c.za;this.f=this.c.element;this.g=0;c.addEventListener("dragstart",this.Oh,!1,this);c.addEventListener("drag",this.bk,!1,this);c.addEventListener("dragend",this.Nh,!0,this);c.addEventListener("wheel",this.rk,!1,this);c.addEventListener("dbltap",\nthis.lk,!1,this);c.addEventListener("pointermove",this.ck,!1,this);Ae(this.f,"contextmenu",this.ak,!1,this);a.tb(this.B,this)}u(jp,md);t("H.mapevents.Behavior",jp);var kp=[];Ec(kp);jp.prototype.b=0;var lp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};jp.Feature=lp;var mp=lp.PANNING,np=lp.PINCH_ZOOM,op=lp.WHEEL_ZOOM,pp=lp.DBL_TAP_ZOOM,qp=lp.FRACTIONAL_ZOOM,rp=lp.TILT,sp=lp.HEADING,tp=mp|np|op|pp|qp|rp|sp;jp.DRAGGING=mp;jp.WHEELZOOM=op;\njp.DBLTAPZOOM=pp;jp.FRACTIONALZOOM=qp;function up(a,b){if(a!==+a||a%1||0>a||2147483647<a)throw new D(b,0,"integer in range [0...0x7FFFFFFF] required");}jp.prototype.disable=function(a){var b=this.b;a!==B?(up(a,this.disable),b^=b&a):b=0;this.c.endInteraction(!0);this.b=b;this.a.draggable=0<(b&(mp|rp|sp|np))};jp.prototype.disable=jp.prototype.disable;jp.prototype.enable=function(a){var b=this.b;a!==B?(up(a,this.enable),b|=a&tp):b=tp;this.b=b;this.a.draggable=0<(b&(mp|rp|sp|np))};\njp.prototype.enable=jp.prototype.enable;jp.prototype.isEnabled=function(a){up(a,this.isEnabled);return a===(this.b&a)};jp.prototype.isEnabled=jp.prototype.isEnabled;\nfunction vp(a,b,c){var d="touch"===b.currentPointer.type,e=0,f;if(f=!d){f=a.m;var g,h=b.originalEvent;h.getModifierState?g=h.getModifierState(f):g=!!h[f.replace(/^Control$/,"ctrl").toLowerCase()+"Key"];f=g}f?e|=rp|sp:(e|=mp,d&&(b=b.pointers,2===b.length&&(e|=np|sp,c?55>zd(b[0].viewportY-b[1].viewportY)&&(e|=rp):a.wh&xl.TILT&&(e|=rp))));e&=a.b;return(e&rp?xl.TILT:0)|(e&sp?xl.HEADING:0)|(e&np?xl.ZOOM:0)|(e&mp?xl.COORD:0)}\nfunction wp(a){var b=a.pointers;a=b[0];b=b[1];a=[a.viewportX,a.viewportY];b&&a.push(b.viewportX,b.viewportY);return a}n=jp.prototype;n.wh=0;n.Oh=function(a){var b=vp(this,a,!0);if(this.wh=b){var c=this.c;a=wp(a);c.startInteraction(b,this.i);c.interaction.apply(c,a);if(this.b&op&&!(this.b&qp)&&(b=a[0],c=a[1],this.g)){a=this.a.ob();var d=(0>this.g?yd:xd)(a);a!==d&&(this.g=0,xp(this,a,d,b,c))}}};\nn.bk=function(a){var b=vp(this,a,!1);if(b!==this.wh)"pointerout"!==a.originalEvent.type&&"pointerover"!==a.originalEvent.type&&(this.Nh(a),this.Oh(a));else if(b){b=this.c;var c=wp(a);b.interaction.apply(b,c);a.originalEvent.preventDefault()}};n.Nh=function(a){vp(this,a,!1)&&this.c.endInteraction(!this.i)};\nfunction xp(a,b,c,d,e){var f=+c-+b;a=a.a.b;if(isNaN(+b))throw Error("start zoom needs to be a number");if(isNaN(+c))throw Error("to zoom needs to be a number");0!==f&&(a.startControl(null,d,e),a.control(0,0,6,0,0,0),a.endControl(!0,function(g){g.zoom=c}))}n.rk=function(a){if(!a.defaultPrevented&&this.b&op){var b=a.delta;var c=this.a.ob();var d=this.a;var e=d.dc().type;d=this.b&qp?c-b:(0>-b?yd:xd)(c)-b;if(e===tn.P2D||e===tn.WEBGL)xp(this,c,d,a.viewportX,a.viewportY),this.g=b;a.preventDefault()}};\nn.ck=function(){};n.lk=function(a){var b=a.currentPointer,c=this.a.ob(),d=a.currentPointer.type,e=this.a.dc().type;(e===tn.P2D||e===tn.WEBGL)&&this.b&pp&&(a="mouse"===d?0===a.originalEvent.button?-1:1:0<a.pointers.length?1:-1,a=this.b&qp?c-a:(0>-a?yd:xd)(c)-a,xp(this,c,a,b.viewportX,b.viewportY))};n.ak=function(a){return this.b&pp?(a.preventDefault(),!1):!0};\nn.B=function(){var a=this.a;a&&(a.draggable=!1,a.removeEventListener("dragstart",this.Oh,!1,this),a.removeEventListener("drag",this.bk,!1,this),a.removeEventListener("dragend",this.Nh,!0,this),a.removeEventListener("wheel",this.rk,!1,this),a.removeEventListener("dbltap",this.lk,!1,this),a.removeEventListener("pointermove",this.ck,!1,this),this.a=null);this.f&&(this.f.style.msTouchAction="",Ie(this.f,"contextmenu",this.ak,!1,this),this.f=null);this.i=this.c=null;kp.splice(kp.indexOf(this.j),1);md.prototype.B.call(this)};\njp.prototype.dispose=jp.prototype.B;t("H.mapevents.buildInfo",function(){return Df("H-mapevents","1.16.0","5fd61b9")});\n');
},
	"com/coil/podway/MDM_Data/libs/mapsjs-service.js":function(){/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.16.0/HERE_NOTICE
 */
H.util.eval('Q.prototype.G=ca(2,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Hk,Q.prototype.G,0);var d=a}else d=ll;d!==b&&b.qa(function(e,f,g){return c.bd(e)?(d.add(e,f,g),!0):!1});this.sa=d});function yp(a,b){a.g=b;a.A!==Jj.INIT&&a.A!==Jj.LOADING&&Tj(a)}function zp(a,b){Va.apply(null,arguments);return a}\nfunction Ap(a,b){b=void 0===b?{}:b;if(!a.Rj)throw new Xc(a);Ap.l.constructor.call(this);var c=Bp(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,\'either "baseUrl" or "platformBaseUrl" must be specified\');this.g=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.subDomain&&this.g.Ra(a.subDomain);a.path&&this.g.cf(a.path);Cp(this.g);this.Cb=c.headers||{}}u(Ap,F);t("H.service.Service",Ap);function Bp(a,b){a=a.a();return b?zp({},a,b):a}Ap.prototype.a=function(){return{}};\nAp.prototype.S=function(){return this.g};Ap.prototype.c=function(a){return Error(a.message)};Ap.prototype.O=function(a,b,c,d){var e=this;d=new qf(void 0===d?"application/json":d,a.toString(),ee,{headers:this.Cb});d.then(b,function(f){return f.json().then(function(g){return c(e.c(g))},function(){return c(Error((f.statusText?"["+f.statusText+"] ":"")+a+" request failed"))})});return d};var Dp={normal:[{minLevel:10,maxLevel:20,label:"IGN Guatemala",alt:"Aprobado por el INSTITUTO GEOGRAFICO NACIONAL Resolucion del IGN No 186-2011",boxes:[[16.5943,-91.4256,17.8168,-89.0225],[14.9642,-89.0225,16.1868,-88.2215],[14.1492,-90.6245,16.5943,-89.0225],[13.7417,-91.8261,14.1492,-89.8235],[14.1492,-92.2266,16.1868,-90.6245],[16.473,-90.6686,16.5943,-90.6245],[14.0259,-89.8235,14.1492,-89.6796]]},{minLevel:9,maxLevel:20,label:"INEGI",alt:"Fuente: INEGI (Instituto Nacional de Estadistica y Geografia)",\nboxes:[[32,-117.1817,32.7325,-113.1649],[28,-101,29.4004,-99.9666],[26,-99,26.4261,-97.5566],[15.5643,-97.9326,16,-95.2581],[14.4031,-94.2111,16,-91],[16,-91,16.9491,-90.3434],[17.406,-91,18,-88.7349],[28,-119,32,-103],[26,-117,28,-99],[28,-103,30,-101],[24,-113,26,-97],[22,-111,24,-97],[18,-107,22,-95],[20,-90.6669,22,-86.6669],[18,-95,20,-87],[16,-103,18,-91],[18,-115,20,-109]]},{minLevel:9,maxLevel:20,label:"Swisstopo",alt:"Topografische Grundlage: copyright Bundesamt fur Landestopographie",boxes:[[46.4166,\n7.3171,47.6087,9.5821],[45.8206,6.8641,47.41,7.3171],[46.218,5.9581,46.6153,6.4111],[46.4166,6.4111,47.0127,6.8641],[46.0193,7.3171,46.4166,8.2231],[46.218,8.2231,46.4166,9.1291],[46.6153,9.5821,47.0127,10.4882],[46.0193,8.6761,46.218,9.1291],[46.4166,9.5821,46.6153,10.0351],[47.6087,8.2231,47.8074,8.6761],[47.41,6.928,47.5272,7.3171],[47.0127,6.6305,47.1914,6.8641],[46.6153,6.1662,46.7577,6.4111],[46.1195,5.9453,46.218,6.3156],[46.1024,6.762,46.4166,6.8641],[45.8846,7.3171,46.0193,8.0455],[47.6087,\n8.6761,47.8074,9.4309],[47.2863,9.5821,47.5004,9.6893],[47.0127,9.5821,47.0721,9.9106],[46.0972,8.5106,46.218,8.6761],[45.7831,8.754,46.0193,9.1167],[46.118,9.1291,46.4166,9.3037],[46.5237,10.237,46.6153,10.4882],[46.2703,9.4435,46.4166,9.8658],[46.3513,9.8639,46.4166,10.0351],[46.414,10.0351,46.6153,10.174],[46.3367,10.0312,46.4166,10.1725],[46.2654,9.9778,46.3547,10.0368],[46.2473,10.0312,46.3547,10.182],[46.2131,10.0449,46.2643,10.182]]},{minLevel:11,maxLevel:20,label:"IGN",alt:"copyright IGN 2009 - BD TOPO",\nboxes:[[-21.474,55.1479,-20.7728,55.9393]]},{minLevel:9,maxLevel:20,label:"2014 THTC",alt:"copyright 2014 Iran Maps provided by THTC",boxes:[[26.1964,46.2203,38.4489,57.1922],[25.7783,47.3792,32.0891,56.2187],[25.7433,53.8979,37.602,61.7923],[24.9003,57.143,26.1964,61.8081],[37.3605,54.2859,38.2982,59.0624],[32.9552,45.2424,35.8416,47.3873],[38.1617,46.5449,39.195,48.012],[39.0244,46.9254,39.791,48.3969],[38.8972,47.5269,39.2823,48.3741],[35.3974,46.0286,38.8972,48.8454],[38.8953,48.012,39.0229,48.3415],\n[32.9515,46.0457,33.1362,46.2203],[35.8416,44.4164,38.8818,47.5346],[38.2632,44.2983,39.0496,46.5449],[38.4003,44.0023,39.8596,45.453],[35.7409,44.1806,38.2632,46.0286],[25.7433,60.8544,29.9265,61.9791],[26.4634,61.8391,28.6155,62.9147],[26.2013,61.8221,26.5448,62.3152],[25.7411,61.7923,26.2083,61.8881],[25.7411,61.8081,25.9431,61.9006],[26.5239,62.3114,26.5998,62.6364],[26.8134,62.8691,27.2641,63.296],[27.0181,63.1942,27.2641,63.3436],[26.6245,62.9016,26.8405,63.2208],[29.8177,60.4678,31.5665,60.9671],\n[29.9265,60.8423,31.5665,61.9599],[33.8976,59.0624,37.602,61.1473],[31.4968,59.9152,34.0374,60.8423],[31.5665,60.4947,34.0374,60.966],[34.1048,60.5115,36.6543,61.5751]]},{minLevel:6,maxLevel:20,label:"Navteq",alt:"Navteq",boxes:[[30.7754,78.5576,36.7754,79.5576],[40.7754,120.5576,42.7754,128.5576],[41.7754,128.5576,42.7754,131.5576],[39.7754,120.5576,40.7754,126.5576],[38.7754,120.5576,39.7754,124.5576],[36.7754,121.5576,37.7754,123.5576],[35.7754,120.5576,38.7754,121.5576],[21.7754,98.5576,22.7754,\n104.5576],[20.7754,99.5576,21.7754,102.5576],[23.7754,97.5576,28.7754,98.5576],[35.7754,75.5576,36.7754,78.5576],[40.7754,76.5576,41.7754,79.5576],[29.7754,120.5576,32.7754,122.5576],[29.7754,122.5576,31.7754,123.5576],[29.7754,79.5576,42.7754,120.5576],[22.7754,98.5576,29.7754,117.5576],[42.7754,79.5576,45.7754,94.5576],[42.7754,115.5576,49.7754,131.5576],[49.7754,119.5576,52.7754,127.5576],[42.7754,111.5576,45.7754,115.5576],[45.7754,82.5576,47.7754,91.5576],[42.7754,94.5576,44.7754,96.5576],[36.7754,\n73.5576,40.7754,79.5576],[28.7754,82.5576,29.7754,98.5576],[20.7754,106.5576,22.7754,113.5576],[18.7754,108.5576,20.7754,111.5576],[17.7754,108.5576,18.7754,110.5576],[26.7754,117.5576,27.7754,121.5576],[25.7754,117.5576,26.7754,120.5576],[24.7754,117.5576,25.7754,119.5576],[23.7754,117.5576,24.7754,118.5576],[21.7754,113.5576,22.7754,116.5576],[27.7754,117.5576,29.7754,122.5576],[27.7754,84.5576,28.7754,93.5576],[49.7754,127.5576,50.7754,128.5576],[27.6769,91.7865,27.7754,92.1101],[28.6334,93.5576,\n28.7754,94.0161],[28.2004,96.2409,28.7754,97.5576],[27.2614,88.7706,27.7754,89.2653],[32.2241,78.3965,32.6363,78.5576],[35.4169,77.1449,35.7754,78.5576],[41.7754,79.2585,41.8535,79.5576],[45.7754,82.363,46.2212,82.5576],[47.7754,85.4858,48.7754,90.1507],[48.7754,86.6922,49.2494,88.1056],[52.7754,119.9835,53.5719,126.1939],[24.5027,118.5576,24.7754,118.8161],[25.1912,119.5576,25.7754,119.912],[32.7754,120.5576,33.5701,120.8986],[42.7754,110.3934,44.782,111.5576],[47.9285,115.4373,48.223,115.5576],\n[49.7754,118.4027,50.9802,119.5576],[44.8404,131.5576,48.4334,134.8631]]},{minLevel:6,maxLevel:20,label:"Navteq",alt:"Navteq",boxes:[[29.0724,45.6538,34.0557,47.9928],[29.9029,47.193,31.4399,48.5938],[34.0557,40.2408,35.7256,46.4809],[35.7168,42.7138,37.3779,46.4809],[35.7168,41.2402,37.3779,42.7138],[29.0724,40.2408,34.0557,45.6538],[29.8076,38.7937,34.0739,43.8802]]},{minLevel:11,maxLevel:20,label:"IGN",alt:"copyright IGN 2009 - BD TOPO",boxes:[[15.6985,-61.9309,16.5953,-61.0013]]},{minLevel:10,\nmaxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[45.452,13.7142,46.8284,16.3044],[45.5557,14.5931,46.1463,15.7955],[45.3439,14.6924,45.7418,15.4262],[46.3859,15.9891,46.8915,16.6217],[45.4543,14.0533,45.7004,14.6924],[45.5366,13.3628,46.523,13.9372],[45.4125,13.657,45.6003,13.9833],[45.5239,14.6795,45.5557,14.7057],[45.4418,13.5675,45.5366,13.6734],[45.5318,13.5988,45.5394,13.638],[46.8276,15.9827,46.8786,16.2706]]},{minLevel:11,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",\nboxes:[[46.853,26.511,48.6163,29.3448],[46.4187,28.0753,47.9267,29.31],[45.4102,28.0701,46.4249,28.5878],[45.4154,28.0081,46.1325,28.4224],[45.7302,28.2568,47.4471,29.2353],[45.7302,28.5878,46.2901,29.0637],[46.3002,29.2029,46.5592,30.2333],[46.7892,29.2282,47.4471,29.9684],[46.5465,29.2256,46.8365,30.0376]]},{minLevel:9,maxLevel:20,label:"Nepal",alt:"Copyright Survey Department, Government of Nepal",boxes:[[26.2669,85.571,28.4465,88.2408],[26.4858,83.0964,29.4459,85.7994],[27.3853,81.0976,30.1502,\n83.8816],[28.2854,79.7937,30.6642,82.254],[30.1502,81.3961,30.4719,82.254],[27.4329,81.6782,27.9426,82.8798]]},{minLevel:9,maxLevel:20,label:"IGN",alt:"copyright IGN 2009 - BD TOPO",boxes:[[14.3135,-61.2546,14.968,-60.7258]]},{minLevel:9,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[54.9394,20.8924,56.5027,23.423],[53.8579,22.579,56.5027,24.9113],[53.8757,22.4807,55.1024,24.5276],[54.263,22.6378,54.6908,23.1253],[53.8579,24.5937,56.4848,26.8994],[54.0863,25.2612,54.5213,\n25.9464]]},{minLevel:10,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[42.1231,14.4853,44.8976,18.6541],[42.5705,15.6655,43.3251,17.0432],[44.1837,13.3057,45.5704,15.8226],[44.8976,13.8789,46.5835,18.1295],[44.9955,16.185,45.149,16.4761],[44.8126,16.5981,45.7845,19.5169],[45.4199,18.1216,45.9726,19.1392]]},{minLevel:9,maxLevel:20,label:"IgeoE",alt:"IgeoE - Portugal",boxes:[[30.1318,-15.883,30.1622,-15.8445],[32.2747,-17.3686,33.1907,-15.9142],[36.5482,-32.0392,40.4124,\n-23.6635],[36.9392,-9.0081,38.4418,-7.2449],[37.9667,-7.2522,38.3853,-6.8808],[38.4418,-8.926,39.5144,-6.7321],[38.1864,-9.5593,39.5271,-8.895],[39.4801,-9.1848,42.1722,-7.8729],[39.4153,-8.4431,41.9675,-7.2126],[41.7211,-7.2357,42.0048,-6.505],[41.2304,-7.31,41.7633,-6.5183],[40.9842,-7.3532,41.2705,-6.5519],[40.1168,-7.4841,40.9984,-6.7565],[39.654,-7.552,40.2572,-6.7565],[39.3941,-7.5899,39.6663,-6.985],[41.2304,-6.5519,41.7009,-6.1811]]},{minLevel:9,maxLevel:20,label:"OGL",alt:"Open Government Licence v.1.0.",\nboxes:[[53.8371,-8.1821,59.6771,-1.2194],[50.3331,-1.2194,55.0051,1.7646],[50.3331,-5.1981,53.8371,-1.2194],[49.1651,-7.9476,50.3331,-1.9796],[59.6771,-2.2141,60.8451,-.2247],[51.5011,-5.3731,52.6691,-5.1981]]},{minLevel:10,maxLevel:20,label:"IGN",alt:"copyright IGN 2009 - BD TOPO",boxes:[[3.993,-54.5201,5.2588,-54.299],[2.6665,-52.5112,3.5742,-52.0258],[2.1062,-54.6066,3.5684,-54.001],[3.5684,-54.299,5.7509,-51.6174],[2.1134,-54.001,3.5684,-52.5112]]},{minLevel:10,maxLevel:20,label:"EuroGeographics",\nalt:"copyright EuroGeographics",boxes:[[34.3756,32.2293,35.5938,33.7589],[34.8444,33.6276,35.276,34.1041],[35.1525,33.5454,35.734,34.6339]]},{minLevel:6,maxLevel:20,label:"PSMA",alt:"Copyright. Based on data provided under license from PSMA Australia Limited. Product incorporates data which is 2014 Telstra Corporation Limited, GM Holden Limited, Intelematics Australia Pty Ltd, HERE International LLC, Sentinel Content Pty Limited and Continental Pty Ltd",boxes:[[-13.1672,95.8626,-11.1672,97.8626],\n[-11.5539,104.6728,-9.5539,106.6728],[-32.5901,158.0863,-30.5901,160.0863],[-30.0761,167.0381,-28.0761,169.0381],[-32,113,-20,151],[-38,135,-32,151],[-20,123,-14,147],[-20,121,-16,123],[-14,129,-10,137],[-14,141,-8,145],[-36,115,-32,127],[-44,141,-38,149],[-34,127,-32,135],[-34,151,-24,155]]},{minLevel:9,maxLevel:20,label:"Lantmateriet",alt:"Based upon electronic data National Land Survey Sweden.",boxes:[[56.8124,17.7151,58.4792,19.8137],[62.5323,15.7813,69.3138,25.2754],[60.9048,13.083,68.0183,18.3797],\n[58.0209,11.5126,64.3169,17.4803],[58.0209,17.3803,62.5323,19.7075],[55.2659,10.7702,62.8658,17.3803],[55.2659,13.7838,58.0209,17.466],[55.1529,12.368,56.6521,13.7838]]},{minLevel:9,maxLevel:20,label:"BEV",alt:"copyright Bundesamt fur Eich- und Vermessungswesen",boxes:[[46.639,10.6752,46.9033,11.0567],[47.6962,13.3457,48.7534,17.1607],[46.9033,9.5307,47.6962,16.7792],[46.639,12.2012,46.9033,16.0162],[46.3748,13.3457,46.639,14.8717],[48.7534,14.8717,49.0177,16.0162],[47.6962,12.9642,48.2248,13.3457],\n[48.2248,12.9642,48.3571,13.3457],[47.8668,12.7411,48.2248,12.9642],[47.6962,12.8955,47.8109,12.9642],[48.7534,16.3752,48.8317,16.725],[46.8266,16.0162,46.9033,16.1893],[46.5375,12.6822,46.639,13.3457],[46.8219,9.9561,46.9033,10.2682],[46.8181,10.4415,46.9033,10.6752],[46.7953,11.0567,46.9033,11.1249]]},{minLevel:9,maxLevel:20,label:"Sri Lanka",alt:"This product incorporates original source digital data obtained from the Survey Department of Sri Lanka. 2009 Survey Department of Sri Lanka The data has been used with the permission of the Survey Department of Sri Lanka",\nboxes:[[5.8461,79.5067,9.9652,82.0121]]},{minLevel:9,maxLevel:20,label:"CNIG",alt:"Informacion geografica propiedad del CNIG",boxes:[[27.4138,-18.299,29.4228,-13.2707],[35.2569,-2.9815,35.3232,-2.9161],[39.3438,-7.6437,39.7836,-7.2643],[27.4138,-18.299,29.4228,-13.2707],[41.6479,-9.7829,43.8119,-6.3517],[38.415,-6.734,43.7683,3.4915],[37.312,-6.8623,39.398,.229],[35.6142,-7.022,37.9317,-1.2109],[36.8976,-7.5399,41.6961,-6.5372],[38.2202,3.0662,40.2854,5.1739],[35.8628,-5.387,35.9199,-5.2772]]},{minLevel:10,\nmaxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[57.9301,23.439,59.7909,27.465],[57.8968,21.7448,59.3645,23.458],[57.44,25.5161,58.0205,27.8981],[57.754,23.1887,57.8411,23.2957],[57.8526,24.295,57.9554,24.7904],[58.0107,27.4528,58.7552,27.6501],[58.7436,27.4413,59.4859,28.2525]]},{minLevel:10,maxLevel:20,label:"Navteq",alt:"Navteq",boxes:[[10.6629,-85.8099,12.9543,-83.3936],[11.0412,-87.1376,14.6525,-83.1509],[14.2095,-82.9224,14.5307,-82.6012],[12.3118,-87.842,14.2011,\n-84.9162],[13.6161,-85.8103,15.1814,-83.0464],[14.1788,-85.457,14.8768,-83.8745]]},{minLevel:10,maxLevel:20,label:"SOI",alt:"Survey of Israel data source",boxes:[[29.3724,34.2346,31.5477,35.4573],[30.9701,34.4766,33.1256,35.6655],[32.6825,35.0912,33.113,35.7566],[32.7247,35.3798,33.1257,35.9089],[32.9351,35.5239,33.3538,35.9089]]},{minLevel:9,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[49.0148,14.0753,55.0681,20.2333],[51.6271,18.2346,55.0681,24.1071],[49.1699,19.3708,\n52.6479,23.8452],[48.9384,21.8835,49.9277,22.9603],[49.5714,22.2773,51.4811,23.7502],[51.0366,23.1726,52.2145,23.736],[50.8016,23.3995,51.5813,24.1714],[50.3495,23.3995,51.0366,24.1571],[50.3804,23.794,50.6141,24.1242],[52.7337,14.0896,53.0647,14.3477]]},{minLevel:10,maxLevel:20,label:"Jordan",alt:"Royal Jordanian Geographic Centre",boxes:[[31.3679,36.8242,33.3996,39.3159],[29.2293,35.2899,31.3679,38.0203],[29.2293,34.9258,30.889,35.9751],[30.889,35.2899,32.3179,37.3047],[31.8515,35.4964,32.7823,\n36.8242]]},{minLevel:9,maxLevel:20,label:"Statkart",alt:"Copyright 2000; Norwegian Mapping Authority",boxes:[[56.444,2.9492,63.9455,12.064],[61.0315,6.1059,70.9952,18.0586],[59.2422,9.9664,63.2018,13.0634],[67.8075,16.8944,71.3965,25.1741],[68.4773,24.6595,71.3952,26.3932],[69.6571,25.9972,71.4071,28.8856],[68.8789,27.8446,71.4071,32.1402],[63.9575,13.0203,65.6822,14.7214],[66.1997,15.2505,67.3135,16.3893]]},{minLevel:6,maxLevel:20,label:"Canada",alt:"This data includes information taken with permission from Canadian authorities, including Her Majesty, Queens Printer for Ontario, Canada Post, GeoBase, Department of Natural Resources Canada. All rights reserved",\nboxes:[[70,-125.9042,78,-77],[78,-101,82,-69],[82,-91,84,-61],[80,-69,82,-61],[46.3831,-57.0167,49.9905,-50.981],[52,-135,56,-129],[78,-115,80,-101],[46,-87.5736,48.0357,-57],[44,-85.0026,46.0536,-59],[70,-77,74,-67],[56,-63,68,-61],[41.9986,-83,44.0238,-77.4271],[62,-141,70,-63],[56,-135,58,-87],[58,-141,62,-91],[56,-81,62,-63],[48,-129,56,-57],[50,-57,54,-55]]},{minLevel:11,maxLevel:20,label:"IGN",alt:"copyright IGN France 2009 BD TOPO",boxes:[[41.3454,8.4823,43.1241,9.6779],[46.512,-5.2986,48.9033,\n-2.1006],[42.5367,-2.1077,46.512,2.1618],[45.8812,-2.1077,48.9033,6.7118],[42.2486,.3773,46.1891,6.8232],[42.8343,4.3116,45.2796,7.678],[48.7889,-2.0366,51.1937,2.7484],[48.6676,2.4444,51.1937,8.2326],[47.2548,6.3526,48.6954,7.5496],[46.5513,6.1405,47.3535,7.0066],[45.8114,5.9584,46.5615,6.9032],[45.7944,6.8518,46.1046,7.1168],[43.9532,7.4449,44.1819,7.7612],[44.856,6.2593,45.8136,7.2498],[47.3484,7.1095,48.6757,7.891],[44.5968,6.6907,45.0132,7.1016]]},{minLevel:9,maxLevel:20,label:"Deutschland",\nalt:"Die Grundlagendaten wurden mit Genehmigung der zustandigen Behorden entnommen",boxes:[[54.2771,13.2064,55.0556,14.1232],[47.2702,7.705,55.0556,13.2064],[50.3844,13.2064,54.2771,15.0401],[48.8273,5.8712,51.9414,7.705],[51.9414,6.7881,53.8624,7.705],[48.0487,13.2064,49.6058,13.9895]]},{minLevel:9,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[55.3689,24.1704,58.1269,28.4487],[56.1948,23.095,57.2653,24.2779],[56.3085,21.6724,57.8204,23.3336],[55.9347,20.7407,57.7144,\n21.825]]},{minLevel:9,maxLevel:20,label:"IGM",alt:"INSTITUTO GEOGRAFICO MILITAR DEL ECUADOR AUTORIZACION No IGM-2011-01- PCO-01 DEL 25 DE ENERO DE 2011",boxes:[[-4.6863,-80.539,1.1441,-78.4796],[-2.095,-78.4796,.4963,-75.5964],[-2.7428,-81.3628,-.7994,-80.9509],[-2.7428,-80.9509,1.1441,-80.539],[-1.4472,-75.5964,.1724,-75.1846],[-5.0102,-79.7153,-4.6863,-78.8915],[1.1441,-79.3034,1.468,-78.4796],[.4963,-78.4796,.8202,-77.244],[.8202,-78.4796,1.1441,-78.0677],[-3.7146,-78.4796,-2.095,-78.0677],[-2.7428,\n-78.0677,-2.095,-76.4202],[-3.0667,-78.0677,-2.7428,-77.244],[-2.4189,-76.4202,-2.095,-76.0083]]},{minLevel:9,maxLevel:20,label:"ITA",alt:"La Banca Dati Italiana e stata prodotta usando quale riferimento anche cartografia numerica ed al tratto prodotta e fornita dalla Regione Toscana",boxes:[[38.1821,6.8824,47.2069,14.1446],[35.3758,11.8034,40.0397,19.4309],[39.2141,13.5406,43.0524,16.4857],[39.6269,16.0831,42.3234,18.8269],[36.6566,11.8869,36.8801,12.1816],[44.1083,6.613,45.2558,7.2468],[45.6248,\n6.8008,45.8575,6.9794],[46.7941,10.3931,47.0561,11.6257],[45.5627,12.8285,46.6783,13.986],[42.6396,13.3581,43.6743,14.0461]]},{minLevel:10,maxLevel:20,label:"Navteq",alt:"Navteq",boxes:[[-26.8359,30.8723,-25.6938,32.1739],[-27.0738,30.7201,-26.2624,31.5422],[-27.3832,30.9615,-26.5576,32.0286],[-27.3403,31.4364,-26.7719,32.0286],[-26.8455,32.0275,-26.7719,32.1475]]},{minLevel:10,maxLevel:20,label:"Geomatics",alt:"Copyright Geomatics Ltd.",boxes:[[34.8037,20.3974,41.0512,26.5331],[38.9687,19.3748,40.3571,\n20.3974],[36.1209,29.5552,36.1723,29.6034],[38.9765,26.5331,39.1817,26.6201],[41.0512,21.9014,41.174,22.4426],[38.1449,20.332,38.3325,20.3984],[35.1058,26.5331,37.9255,28.2956],[41.0512,22.4426,41.3788,22.8625],[41.0512,22.8393,41.637,24.4931],[41.0512,24.4883,41.8654,26.5489],[41.2829,26.538,41.6486,26.6501]]},{minLevel:9,maxLevel:20,label:"Cenacarta",alt:"Certain Data for Mozambique provided by Cenacarta 2014 by Cenacarta",boxes:[[-15.9653,33.6194,-10.3973,41.2432],[-16.3417,30.7148,-14.095,34.9419],\n[-18.8084,34.9389,-15.0611,41.2432],[-17.1457,38.6588,-15.8415,40.2757],[-22.989,31.1878,-18.8084,36.5975],[-26.8763,31.1878,-22.4084,35.7659],[-24.9908,34.2964,-23.3847,35.6707],[-18.8203,31.8425,-15.6508,36.5975],[-16.0985,30.1219,-13.9704,33.7148]]},{minLevel:9,maxLevel:20,label:"EuroGeographics",alt:"copyright EuroGeographics",boxes:[[47.7796,23.7808,52.3053,30.3909],[50.5207,23.4548,51.7557,24.437],[47.7796,23.6071,50.6001,25.5225],[47.9128,22.4364,50.5207,23.983],[47.706,24.7422,47.8394,25.2039],\n[48.3302,22.1323,49.0508,22.5012],[47.9209,22.1347,48.5886,23.2256],[47.9979,23.04,48.0552,23.1187],[47.9624,23.1767,48.133,23.5211],[44.9794,29.0356,47.908,30.3873],[44.9794,28.141,46.824,29.5592],[44.0324,29.5592,46.3547,37.3686],[45.855,30.3873,51.8685,37.3686],[51.7797,30.5067,52.4699,34.3366],[51.6941,34.3051,51.9267,34.4588],[46.3547,34.8806,50.8793,38.6386],[47.4754,38.4346,50.1112,40.3587],[50.7773,34.666,51.2858,35.5437]]}]};function W(a,b,c,d,e,f){if(a&&b)this.Vk(a),this.pi(b),this.cf(c),this.Tk(e),this.Jk(f),this.Uk(d);else throw Error(\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",W);\nfunction Ep(a,b){var c=x.document,d,e=c&&c.createElement("a"),f="";if(c){if(b){var g=(d=c.getElementsByTagName("base")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement("base"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split("@")[1]);g=k;h=h&&0<h.length?h.substr(1):\n"";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new W(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}W.parse=Ep;var Fp=0;W.prototype.clone=function(){Fp++;var a={},b;for(b in this.a)a[b]=this.a[b];return new W(this.s,this.f,this.c,a,this.g,this.b)};W.prototype.clone=W.prototype.clone;\nW.prototype.Vk=function(a){if(!a||"string"!==typeof a)throw Error(\'The "scheme" parameter must be a non-empty string.\');this.s=a;return this};W.prototype.setScheme=W.prototype.Vk;W.prototype.Tm=function(){return this.s};W.prototype.getScheme=W.prototype.Tm;W.prototype.pi=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw Error(\'The "host" parameter is not a valid host name.\');this.f=a;return this};W.prototype.setHost=W.prototype.pi;\nW.prototype.qm=function(){return this.f};W.prototype.getHost=W.prototype.qm;W.prototype.cf=function(a){this.c=a||void 0;return this};W.prototype.setPath=W.prototype.cf;W.prototype.Im=function(){return this.c};W.prototype.getPath=W.prototype.Im;W.prototype.Uk=function(a){if(a)if("object"==typeof a)this.a=a;else throw Error(\'Parameter "params" must be an object.\');else this.a={};return this};W.prototype.setQuery=W.prototype.Uk;W.prototype.Kj=function(){return!Gp(this)};W.prototype.hasQuery=W.prototype.Kj;\nW.prototype.getQuery=function(){return this.a};W.prototype.getQuery=W.prototype.getQuery;W.prototype.Tk=function(a){if(a&&isNaN(parseInt(a,10)))throw Error(\'Parameter "port" must be a number or undefined\');this.g=+a||void 0;return this};W.prototype.setPort=W.prototype.Tk;W.prototype.Mm=function(){return this.g};W.prototype.getPort=W.prototype.Mm;W.prototype.Jk=function(a){this.b=a||void 0;return this};W.prototype.setAnchor=W.prototype.Jk;W.prototype.fd=function(){return this.b};\nW.prototype.getAnchor=W.prototype.fd;W.prototype.P=function(a){if("object"!==typeof a)throw Error(\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};W.prototype.mergeQuery=W.prototype.P;W.prototype.Ra=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.pi(a+"."+this.f)};\nW.prototype.addSubDomain=W.prototype.Ra;W.prototype.T=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subPath" must be a non-empty string\');return this.cf((this.c?this.c+"/":"")+a)};W.prototype.addSubPath=W.prototype.T;W.prototype.toString=function(){return[this.s+"://",this.f,this.g?":"+this.g:"",this.c||!Gp(this)||this.b?"/":"",this.c?encodeURI(this.c):"",Hp(this),this.b?"#"+encodeURIComponent(this.b):""].join("")};W.prototype.toString=W.prototype.toString;\nfunction Hp(a){var b=[],c,d=a.a;for(c in d)if(d.hasOwnProperty(c)&&"function"!==typeof d[c]){var e=a.a[c];b.push(encodeURIComponent(c)+(void 0===e?"":"="+encodeURIComponent(e)))}return 0<b.length?"?"+b.join("&"):""}function Cp(a){var b=Df("H-service","1.16.0","4cf1f7f");a.a.xnlp="CL_JSMv3."+b.version;return a}function Gp(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c};function X(a){a=zp({},this.c,a);var b=a.apikey,c=a.baseUrl;if(c=b?c?0:"baseUrl":"apikey")throw new D(X,0,\'"\'+c+\'" must be specified\');this.Mk(a.baseUrl);this.a=b;this.b.P({apikey:b});this.f=a.headers||{};this.g=Ta(a.servicesConfig||{})}t("H.service.Platform",X);X.prototype.c={apikey:null,baseUrl:new W("https","hereapi.com")};X.prototype.Mk=function(a){this.b=Cp(a.clone());this.a=a=this.a;this.b.P({apikey:a})};X.prototype.setBaseUrl=X.prototype.Mk;X.prototype.gd=function(){return this.b};\nX.prototype.getBaseUrl=X.prototype.gd;X.prototype.hb=function(a,b){try{return a.Rj=!0,new a(zp({platformBaseUrl:this.gd(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{delete a.Rj}};X.prototype.createService=X.prototype.hb;var Ip=Function("return this")();qc("monospace serif");function Jp(){}Jp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||Ip.document.createElement("canvas")};Jp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Kp=new Jp;t("H.service.util.eval",function(a){return eval(a)});function Lp(){var a=decodeURIComponent(x.H.getScriptPath())||"https://js.api.here.com/v3/3.1.16.0";return Ep(a).T("styles")};function Mp(a,b,c){c=c||{};var d=+c.min,e=+c.max;c.tileSize=c.tileSize||512;c.min=d?Xd(d,1,17):1;c.min+=Fk(c.tileSize,1);c.max=e?Xd(e,1,17):17;Mp.l.constructor.call(this,c);C(a,Op,Mp,0);C(b,Ij,Mp,1);this.o=a;yp(b,"OMV");this.vd(b,!0);this.s=A(this.reload,this,!1);a.addEventListener("versionupdate",this.s)}u(Mp,Q);t("H.service.omv.Provider",Mp);Mp.prototype.Rd=function(a,b,c){return Pp(this.o,a,b,c).toString()};Mp.prototype.getTileKey=Mp.prototype.Rd;Mp.prototype.Mb=function(){return this.D};\nMp.prototype.getCache=Mp.prototype.Mb;Mp.prototype.MAX_STORE_TIME=2592E6;Mp.prototype.Kg=function(){return ld()};Mp.prototype.Lf=function(){return kd()};Mp.prototype.O=function(a,b,c,d,e){return this.o.gb(a,b,c,d,e)};Mp.prototype.requestInternal=Mp.prototype.O;Mp.prototype.Zc=function(a){yp(a,"OMV");this.vd(a)};Mp.prototype.setStyle=Mp.prototype.Zc;Mp.prototype.wa=function(){return Mp.l.zb.apply(this)};Mp.prototype.getStyle=Mp.prototype.wa;\nMp.prototype.zb=function(){var a=Mp.l.zb.apply(this),b;this.C&&(a.getState()===Jj.READY?(b=a.we())&&b.global&&(this.b&&(b.global.ux_language=this.b),this.a&&(b.global.ux_language_fallback=this.a),a=new Ij(b,a.gd())):a.load());return a};function Qp(a,b,c){var d=a.zb().getState()===Jj.READY,e=yc(b),f=yc(c);e&&(a.b=b);f&&(a.a=c);if(e||f)a.C=!0,d&&a.f()}Mp.prototype.u=function(){Mp.l.u.call(this);this.o.removeEventListener("versionupdate",this.s)};Mp.prototype.D=new Hk(256);\nMp.prototype.ra=function(a,b){return Rp(this.o.ra(),"normal",b,a)};Mp.prototype.getCopyrights=Mp.prototype.ra;function Op(a){Op.l.constructor.call(this,Op,a);a=Bp(this,a).mapVersion;this.He=sc(a)?a:Sp[this.S().toString()];sc(this.He)||Tp(this)}u(Op,Ap);t("H.service.omv.Service",Op);Op.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}};Op.CONFIG_KEY="omv";var Sp={};Ec(Sp);Op.prototype.Am=function(){return this.He};Op.prototype.getMapVersion=Op.prototype.Am;\nfunction Tp(a){a.O(a.S().clone().T("../../info"),function(b){b=b.mapVersion;var c=a.S().toString();a.He=b;b!==Sp[c]&&(Sp[c]=b,a.dispatchEvent("versionupdate"))},function(){})}Op.prototype.cd=function(a,b){return new gl(new Mp(this,a,b),{max:22})};Op.prototype.createLayer=Op.prototype.cd;Op.prototype.gb=function(a,b,c,d,e){return this.O(Pp(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,"arraybuffer")};\nfunction Pp(a,b,c,d){b=a.S().clone().T(d+"/"+b+"/"+c+"/omv");sc(a.He)&&b.P({mv:a.He});return b}Op.prototype.Mf=function(a){return Lp().T("omv/"+a+".yaml")};X.prototype.Bj=function(a){return this.hb(Op,a)};X.prototype.getOMVService=X.prototype.Bj;Op.prototype.se=function(){this.Pc=new Up;this.Ii(Dp)};Op.prototype.Ii=function(a){Vp(this.Pc,a);this.dispatchEvent("copyrightupdate")};Op.prototype.ra=function(){this.Pc||this.se();return this.Pc};Op.prototype.getCopyrights=Op.prototype.ra;function Up(){this.a={}}function Vp(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new Wp(e[d]))}}function Rp(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].ld(c,d)&&f.push(a[b]);return f}\nfunction Wp(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.ic(e,!1,this.a)}}Wp.prototype.ld=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.ld(b))for(;a--;)if(this.b[a].ld(b))return!0}else return!0;return!1};function Xp(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.S().clone().T(b+"/"+a.vc()+"/"+c).P(f),l=a.nh();this.K=a;this.U=k;xk.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,q,p){var r=h.U.clone();l&&r.Ra(l[(p+q+m)%l.length]);r.T(p+"/"+m+"/"+q+"/"+d+"/"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,"")+d});this.Fb=b;this.s=c;this.a=f;this.Qa=c.split(".")[0];this.Uf=A(this.Uf,this);this.getCopyrights=this.ra;a.addEventListener("versionupdate",\nthis.Uf)}u(Xp,xk);Xp.prototype.MAX_STORE_TIME=2592E6;n=Xp.prototype;n.u=function(){xk.prototype.u.call(this);this.K.removeEventListener("versionupdate",this.Uf)};n.ra=function(a,b){return Rp(this.K.ra(),this.Qa,b,a)};n.Uf=function(){var a=this.K;this.U=a.S().clone().T(this.Fb+"/"+a.vc()+"/"+this.s).P(this.a);this.reload(!1)};n.Kg=function(){return ld()};n.Lf=function(){return kd()};function Yp(a){Yp.l.constructor.call(this,Yp,a);a=Bp(this,a);this.Yb=a.shards;(this.Na=a.ignoreTypes?null:a.type)&&this.S().Ra(this.Na);this.Zb=a.version;this.Pc=new Up;this.fi={};this.zf=0;"newest"===this.Zb&&this.Xg()}u(Yp,Ap);t("H.service.MapTileService",Yp);Yp.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}};Yp.CONFIG_KEY="maptile";\nfunction Zp(a,b){for(var c={},d=a[b+"s"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+"s"]=c}Yp.prototype.nh=function(){return this.Yb};Yp.prototype.Fj=function(){return this.Na};Yp.prototype.getType=Yp.prototype.Fj;Yp.prototype.vc=function(){return this.Zb};Yp.prototype.getVersion=Yp.prototype.vc;Yp.prototype.Bi=function(a){this.Zb=a};Yp.prototype.ra=function(){this.zf||(this.Zb&&"newest"!==this.Zb||"traffic"===this.Na)&&this.se();return this.Pc};Yp.prototype.getCopyrights=Yp.prototype.ra;n=Yp.prototype;\nn.Ji=function(a){a=a.response;var b;Zp(a,"map");Zp(a,"scheme");Zp(a,"tiletype");Zp(a,"format");Zp(a,"resolution");Zp(a,"language");if("newest"===this.Zb&&"traffic"!==this.Na)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.Bi(a.maps[b].hash),this.dispatchEvent("versionupdate"));this.uh=a;this.dispatchEvent("infoupdate")};n.Ii=function(a){Vp(this.Pc,a);this.dispatchEvent("copyrightupdate")};\nn.Xg=function(){var a=this;var b=this.S().clone().T("info").P({output:"json"});this.Yb&&b.Ra(this.Yb[0]);this.O(b,function(c){a.Ji(c)},function(c){throw c;})};n.se=function(){var a=this;var b=this.S().clone().T("copyright").T(a.vc()).P({output:"json"});this.Yb&&b.Ra(this.Yb[0]);this.zf=1;this.O(b,function(c){a.zf=2;a.Ii(c)},function(c){a.zf=-1;throw c;})};n.gh=function(){return this.uh};Yp.prototype.getInfo=Yp.prototype.gh;\nYp.prototype.pe=function(a,b,c,d,e,f){var g=this.S().clone().T(a+"/"+this.vc()+"/"+b+"/"+c+"/"+d).P(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.fi[g];h||(h=new Xp(this,a,b,c,d,e,zp({headers:this.Cb},f||{})),this.fi[g]=h);return h};Yp.prototype.createTileProvider=Yp.prototype.pe;Yp.prototype.pc=function(a,b,c,d,e,f,g,h){a=this.pe(a,b,c,d,e,h);return new gl(a,{opacity:f,dark:!!g})};Yp.prototype.createTileLayer=Yp.prototype.pc;\nX.prototype.jh=function(a){return this.hb(Yp,a)};X.prototype.getMapTileService=X.prototype.jh;X.prototype.Og=function(a,b,c,d,e,f){var g=this.jh(),h=this.jh({type:"aerial"}),k=this.Ej(),l=this.Bj(),m={},q={crossOrigin:"anonymous"};Ca(a)&&(f=a,"crossOrigin"in f&&(q.crossOrigin=f.crossOrigin),a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);var p=a||512;if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.Og,1,b);}else m.ppi=+b;c&&(m.lg=c);d&&(m.lg2=d);e&&(m.style=e);f&&(m.pois=f);a=function(r,v,w,z,J){return r.pc(v,w,p,z,m,1,J,q)};b=l.cd(new Ij(l.Mf("miami/normal.day").toString()));\nQp(b.na(),m.lg,m.lg2);c=l.cd(new Ij(l.Mf("miami/truck.day").toString()));Qp(c.na(),m.lg,m.lg2);l=k.gj(m.lg?{lg:m.lg,i18n:!0}:void 0);return{vector:{normal:{map:b,truck:c,traffic:k.fj(),trafficincidents:l}},raster:{normal:{xbase:a(g,"xbasetile","normal.day","png8",!1),xbasenight:a(g,"xbasetile","normal.night","png8",!0),base:a(g,"basetile","normal.day","png8",!1),basenight:a(g,"basetile","normal.night","png8",!0),map:a(g,"maptile","normal.day","png8",!1),mapnight:a(g,"maptile","normal.night","png8",\n!0),trafficincidents:l,transit:a(g,"maptile","normal.day.transit","png8",!1),labels:a(g,"labeltile","normal.day","png",!1)},satellite:{xbase:a(h,"xbasetile","hybrid.day","jpg",!0),base:a(h,"basetile","hybrid.day","jpg",!0),map:a(h,"maptile","hybrid.day","jpg",!0),labels:a(h,"labeltile","hybrid.day","png",!0)},terrain:{xbase:a(h,"xbasetile","terrain.day","jpg",!1),base:a(h,"basetile","terrain.day","jpg",!1),map:a(h,"maptile","terrain.day","jpg",!1),labels:a(h,"labeltile","terrain.day","png",!1)}}}};\nX.prototype.createDefaultLayers=X.prototype.Og;function $p(){this.a={}}$p.prototype.wb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=aq.MARKER.replace("{{icon}}",bq[a]||bq.OTHER);a=a.replace("{{color}}",cq[b]||cq.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new $h(ai.POLYGON,dq.MARKER)};return this.a[c]=d=new uj(a,b)};\nvar aq={MARKER:\'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>\'},bq=\n{CONGESTION:\'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>\',\nROADWORKS:\'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>\',\nACCIDENT:\'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>\',\nOTHER:\'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>\'},\ncq={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},dq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function eq(a,b,c){c=c?c:{};c.criticality||(c.criticality="major,critical");C(a,fq,eq,0);zn.call(this,{max:20,min:8,requestData:A(this.U,this)});this.s=new $p;this.D=a;this.a=c;this.reload=A(this.reload,this);this.C=setInterval(this.reload,b||18E4)}u(eq,zn);t("H.service.traffic.incidents.Provider",eq);eq.prototype.b={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};\neq.prototype.U=function(a,b,c,d,e){var f=this,g=this.b,h=this.s;return this.D.requestIncidentsByTile(a,b,c,function(k){var l=[];k=k.TRAFFIC_ITEMS;var m;if(k)for(k=k.TRAFFIC_ITEM,m=k.length;m--;){var q=k[m];var p=q.TRAFFIC_ITEM_TYPE_DESC;switch(p){case "ACCIDENT":case "CONGESTION":var r=p;break;case "CONSTRUCTION":r="ROADWORKS";break;default:r="OTHER"}r=h.wb(r,g[q.CRITICALITY.DESCRIPTION]);p=q.LOCATION.GEOLOC.ORIGIN;p=new xn({lat:p.LATITUDE,lng:p.LONGITUDE},{provider:f,icon:r});p.setData(q);l.push(p)}d(l)},\ne,this.a)};eq.prototype.B=function(){zn.prototype.B.call(this);clearInterval(this.C)};var gq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function hq(a,b){var c={};this.a=a;Va(c,b||c);fk.call(this,c);this.fg={};a=this.Nb(Og.SPATIAL);a.update(a.a+1,Lg.ADD)}u(hq,fk);t("H.service.remote.ObjectProvider",hq);hq.prototype.B=function(){fk.prototype.B.call(this)};hq.prototype.Dc=function(){return ef};hq.prototype.requestMarkers=hq.prototype.Dc;hq.prototype.Cc=function(){return ef};hq.prototype.requestDomMarkers=hq.prototype.Cc;hq.prototype.rd=function(){return ef};hq.prototype.requestOverlays=hq.prototype.rd;hq.prototype.Tb=cf;\nhq.prototype.providesMarkers=hq.prototype.Tb;hq.prototype.Sb=cf;hq.prototype.providesDomMarkers=hq.prototype.Sb;hq.prototype.Bc=cf;hq.prototype.providesSpatials=hq.prototype.Bc;hq.prototype.hg=function(){return ef};hq.prototype.requestSpatials=hq.prototype.hg;function iq(a){return a.wc(!0)}hq.prototype.ig=function(a,b){a=jq(this,a,kq);b&&(a=a.filter(iq));return a};hq.prototype.requestSpatialsByTile=hq.prototype.ig;\nfunction jq(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.a.parse(a,b,e))&&(d=a[c]));return d||ef}hq.prototype.ca=function(a){var b=a.cb();if(this.fg[b])throw new Xc(this.ca,"Remote object "+b+" already added");return this.fg[b]=a};hq.prototype.Ga=function(a){delete this.fg[a.cb()]};var kq="spatials";function lq(a,b,c){lq.l.constructor.call(this,{min:mq,max:nq});C(a,fq,lq,0);this.s=a;this.a=c||oq;this.a.responseattributes="sh,fc";this.b=setInterval(A(this.reload,this),b||18E4);this.vd(new Ij(a.Mf().toString()),!0)}u(lq,Q);t("H.service.traffic.flow.Provider",lq);lq.prototype.wa=function(){return this.zb()};lq.prototype.getStyle=lq.prototype.wa;lq.prototype.Zc=function(a){yp(a,"GeoJSONTileSource");this.vd(a)};lq.prototype.setStyle=lq.prototype.Zc;var oq={locationreferences:"tmc,shp"};\nlq.prototype.u=function(){lq.l.u.call(this);clearInterval(this.b)};lq.prototype.O=function(a,b,c,d,e){return this.s.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf("Error")?e(f.Details):d(f)},e,this.a)};lq.prototype.requestInternal=lq.prototype.O;\nlq.prototype.dd=function(a,b,c,d,e){var f,g,h,k,l={type:"FeatureCollection",features:[]},m;var q=d.RWS.length;for(f=0;f<q;f++){var p=d.RWS[f];var r=p.RW;var v=r.length;var w=-1!==gq.indexOf(p.EXTENDED_COUNTRY_CODE+p.EBU_COUNTRY_CODE);for(p=0;p<v;p++){var z=r[p].FIS;var J=z.length;for(z=0;z<J;z++){var G=r[p].FIS[z].FI;var V=G.length;for(g=0;g<V;g++){var S=G[g];var ra=[];var da=S.CF[0];var Zb=!!da.SSS;var qb={type:"Feature",properties:da,geometry:{type:"MultiLineString",coordinates:ra}};qb.properties.LHT=\nw;S.SHP.length&&(qb.properties.FC=S.SHP[0].FC);Zb&&(m=[]);for(da=0;da<S.SHP.length;da++){var Yc=S.SHP[da].value;var qi=Yc.length;for(h=0;h<qi;h++){var Je=Zb?m:void 0,Mb=new Zn(Yc[h].trim()),Of=[],Qc={};for(Mb.ce();-1!==(k=Mb.Qb());)k===pq?(Qc.lat=+String.fromCharCode.apply(lq,Mb.Gd()),Mb.next(),Mb.ce()):k===qq?(Qc.lng=+String.fromCharCode.apply(lq,Mb.Gd()),Of.push([Qc.lng,Qc.lat]),Je&&Je.push(Yf(Qc)),Qc=[],Mb.next(),Mb.ce()):Mb.next();Qc.lng=+String.fromCharCode.apply(lq,Mb.Gd());Of.push([Qc.lng,\nQc.lat]);Je&&Je.push(Yf(Qc));k=Of;ra.push(k)}}l.features.push(qb)}}}}return lq.l.dd.call(this,a,b,c,l,e)};lq.prototype.createTileInternal=lq.prototype.dd;var nq=21,mq=10,qq=32,pq=44;function rq(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete rq.a[f];m&&a.rj&&a.rj.call(k,m)}if(!a.url||!a.Jg)throw Error(\'Parameter "options" must specify at least a URL and a callback.\');if("function"!==typeof a.Jg)throw Error("Parameters options.callback must be a function");var c=a.Do||document;var d=c.getElementsByTagName("head")[0];var e=c.createElement("script");c=a.url instanceof W?a.url:Ep(a.url,a.Co);var f=rq.b++;var g=a.Bl||"callback";var h=a.Jg;var k={};var l=\nnull;k.id=f;k.cancel=function(){b("cancelled")};0!==a.timeout&&(l=x.setTimeout(function(){b("timeout")},a.timeout||3E4));rq.a[f]=function(m){b();h.call(k,m)};e.type="text/javascript";e.src=c.toString()+(c.Kj()?"&":"?")+g+"="+(a.Eo?"H.service.jsonp.handleResponse("+f+")":encodeURI("H.service.jsonp.handleResponse("+f+")"));d.appendChild(e);return k}t("H.service.jsonp",rq);rq.en=function(a){return(a=rq.a[a])?a:function(){}};rq.handleResponse=rq.en;rq.b=0;rq.a={};function fq(a){fq.l.constructor.call(this,fq,a);this.Cl=Bp(this,a).callbackKey}u(fq,Ap);t("H.service.traffic.Service",fq);fq.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}};fq.CONFIG_KEY="traffic";fq.prototype.fj=function(a){return new gl(new lq(this,void 0,a),{max:22})};fq.prototype.createFlowLayer=fq.prototype.fj;fq.prototype.gj=function(a){return new An(new eq(this,void 0,a))};fq.prototype.createIncidentsLayer=fq.prototype.gj;\nfunction sq(a,b,c,d){return rq({url:b,Jg:c,rj:function(e){d(Error("["+e+"] "+b+" request failed"))},Bl:a.Cl})}fq.prototype.Zn=function(a,b,c){a=this.S().clone().T("incidents.json").P(a);return sq(this,a,b,c)};fq.prototype.requestIncidents=fq.prototype.Zn;fq.prototype.Yn=function(a,b,c,d,e,f){a=this.S().clone().T(["flow/json",c,a,b].join("/")).P(f||{});return sq(this,a,d,e)};fq.prototype.requestFlowByTile=fq.prototype.Yn;\nfq.prototype.$n=function(a,b,c,d,e,f){a=this.S().clone().T(["incidents/json",c,a,b].join("/")).P(f||{});return sq(this,a,d,e)};fq.prototype.requestIncidentsByTile=fq.prototype.$n;fq.prototype.Mf=function(){return Lp().T("traffic/flow.yaml")};X.prototype.Ej=function(a){return this.hb(fq,a)};X.prototype.getTrafficService=X.prototype.Ej;function tq(a){tq.l.constructor.call(this,tq,a);this.Hk=Bp(this,a).reverseSubDomain}u(tq,Ap);t("H.service.GeocodingService",tq);tq.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}};tq.CONFIG_KEY="geocoding";tq.prototype.c=function(a){return Error(a.Details||a.message||a.error)};tq.prototype.$g=function(a,b,c){a=this.S().clone().T("geocode.json").P(a);return this.O(a,b,c)};tq.prototype.geocode=tq.prototype.$g;\ntq.prototype.ki=function(a,b,c){a=this.S().clone().T("reversegeocode.json").P(a);this.Hk&&a.Ra(this.Hk);return this.O(a,b,c)};tq.prototype.reverseGeocode=tq.prototype.ki;tq.prototype.search=function(a,b,c){a=this.S().clone().T("search.json").P(a);return this.O(a,b,c)};tq.prototype.search=tq.prototype.search;X.prototype.mm=function(a){return this.hb(tq,a)};X.prototype.getGeocodingService=X.prototype.mm;function uq(a){uq.l.constructor.call(this,uq,a)}u(uq,Ap);t("H.service.PlacesService",uq);uq.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}};uq.CONFIG_KEY="places";uq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"};uq.prototype.request=function(a,b,c,d){return this.ua(a,b,c,d)};\nuq.prototype.ua=function(a,b,c,d){a=this.S().clone().T(a).P(b||{});return this.O(a,c,d)};uq.prototype.search=function(a,b,c){return this.ua("discover/search",a,b,c)};uq.prototype.search=uq.prototype.search;uq.prototype.lo=function(a,b,c){return this.ua("suggest",a,b,c)};uq.prototype.suggest=uq.prototype.lo;uq.prototype.Ml=function(a,b,c){return this.ua("discover/explore",a,b,c)};uq.prototype.explore=uq.prototype.Ml;uq.prototype.wl=function(a,b,c){return this.ua("discover/around",a,b,c)};\nuq.prototype.around=uq.prototype.wl;uq.prototype.gn=function(a,b,c){return this.ua("discover/here",a,b,c)};uq.prototype.here=uq.prototype.gn;uq.prototype.Dl=function(a,b,c){return this.ua("categories/places",a,b,c)};uq.prototype.categories=uq.prototype.Dl;uq.prototype.Ol=function(a,b,c,d){a=Ep(a).P(this.S().getQuery()).P(d||{});return this.O(a,b,c)};uq.prototype.follow=uq.prototype.Ol;X.prototype.Jm=function(a){return this.hb(uq,a)};X.prototype.getPlacesService=X.prototype.Jm;function vq(a){vq.l.constructor.call(this,vq,a)}u(vq,Ap);t("H.service.RoutingService",vq);vq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}};vq.prototype.c=function(a){return Error(a.details)};vq.CONFIG_KEY="routing";vq.prototype.Ad=function(a,b,c){a=this.S().clone().T("calculateroute.json").P(a);return this.O(a,b,c)};vq.prototype.calculateRoute=vq.prototype.Ad;\nvq.prototype.Al=function(a,b,c){a=this.S().clone().Ra("isoline").T("calculateisoline.json").P(a);return this.O(a,b,c)};vq.prototype.calculateIsoline=vq.prototype.Al;function wq(a){wq.l.constructor.call(this,wq,a)}u(wq,Ap);t("H.service.RoutingService8",wq);wq.CONFIG_KEY="routing_v8";wq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}};wq.prototype.c=function(a){return Error(a.error)};wq.prototype.Ad=function(a,b,c){a=this.S().clone().P(a);return this.O(a,b,c)};wq.prototype.calculateRoute=wq.prototype.Ad;X.prototype.Cj=function(a,b){b=+b||7;if(7===b)b=vq;else if(8===b)b=wq;else throw new D(this.Cj,1,"allowed values are 7 and 8");return this.hb(b,a)};X.prototype.getRoutingService=X.prototype.Cj;function xq(){}t("H.service.extension.dataView.ITable",xq);xq.prototype.Md=function(){};xq.prototype.getMeta=xq.prototype.Md;xq.prototype.Od=function(){};xq.prototype.getRowCount=xq.prototype.Od;xq.prototype.uc=function(){};xq.prototype.getRow=xq.prototype.uc;xq.prototype.Ta=function(){};xq.prototype.getColumnNames=xq.prototype.Ta;xq.prototype.ve=function(){};xq.prototype.getColumn=xq.prototype.ve;xq.prototype.va=function(){};xq.prototype.getCell=xq.prototype.va;xq.prototype.concat=function(){};\nxq.prototype.concat=xq.prototype.concat;function yq(){}t("H.service.extension.dataView.IRow",yq);yq.prototype.Ta=function(){};yq.prototype.getColumnNames=yq.prototype.Ta;yq.prototype.va=function(){};yq.prototype.getCell=yq.prototype.va;yq.prototype.jd=function(){};yq.prototype.getTable=yq.prototype.jd;function zq(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",zq);zq.prototype.Ta=function(){return this.a.Ta()};zq.prototype.getColumnNames=zq.prototype.Ta;zq.prototype.va=function(a){return this.a.va(this.b,a)};zq.prototype.getCell=zq.prototype.va;zq.prototype.jd=function(){return this.a};zq.prototype.getTable=zq.prototype.jd;function Aq(){}t("H.service.extension.dataView.IColumn",Aq);Aq.prototype.va=function(){};Aq.prototype.getCell=Aq.prototype.va;function Bq(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",Bq);Bq.prototype.va=function(a){return this.b.va(a,this.a)};Bq.prototype.getCell=Bq.prototype.va;function Cq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Db=a;if(b)for(this.Bd=b,this.Lg=a=lc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.Th=c)}t("H.service.extension.dataView.ObjTable",Cq);n=Cq.prototype;n.Th=B;n.Db=B;n.Bd=B;n.Lg=B;n.Md=function(){return this.Th};Cq.prototype.getMeta=Cq.prototype.Md;Cq.prototype.Od=function(){return this.Db?this.Db.length:0};Cq.prototype.getRowCount=Cq.prototype.Od;Cq.prototype.uc=function(a){var b=this.Db;return b&&b[a]?new zq(this,a):B};\nCq.prototype.getRow=Cq.prototype.uc;Cq.prototype.Ta=function(){return this.Bd||ef};Cq.prototype.getColumnNames=Cq.prototype.Ta;Cq.prototype.ve=function(a){return this.Lg[a]?new Bq(this,a):B};Cq.prototype.getColumn=Cq.prototype.ve;Cq.prototype.va=function(a,b){var c=this.Db;return(a=c&&this.Lg[b]&&c[a])&&a[b]};Cq.prototype.getCell=Cq.prototype.va;\nCq.prototype.concat=function(){var a=arguments.length,b,c=this.Bd,d=""+this.Bd,e=(this.Db||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Cq))throw new D(this.concat,b);if(f.Db){if(c&&""+f.Bd!==d)throw new D(this.concat,b,"Incompatible columns!");e=e.concat(f.Db)}}return new Cq(e,this.Bd,this.Th)};Cq.prototype.concat=Cq.prototype.concat;function Dq(a,b){a.Db?a.Db.push(b):a.Db=[b];return a.Db.length-1};function Eq(a){var b=Fq;if(!a||!yc(Ye(a.layerId,a.layer))||!Bc(a.level)||sc(a.rowFilter)&&!Ba(a.rowFilter)||sc(a.rowFilterContext)&&!Ca(a.rowFilterContext))throw new D(b,1,sc("invalid layer config")?"invalid layer config":a);};function Gq(a,b,c,d){d=d||Hq;this.Ve={};d.provider=a;this.invalidate=df;Gq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.ta(Lg.ADD)}u(Gq,bh);t("H.service.remote.Spatial",Gq);var Hq={};Gq.prototype.cb=function(){return this.b||bh.prototype.cb.call(this)};Gq.prototype.getId=Gq.prototype.cb;Gq.prototype.kg=Function();Gq.prototype.retain=Gq.prototype.kg;Gq.prototype.release=Function();Gq.prototype.release=Gq.prototype.release;function Iq(a,b){this.a=a;b&&(this.b=b)}\nvar Jq=new Iq([]);Gq.prototype.Kd=function(a){return(this.Ve[a.key]||Jq).a};Gq.prototype.getGeometriesForTile=Gq.prototype.Kd;Gq.prototype.ih=function(a){return(this.Ve[a.key]||Jq).b};Gq.prototype.getLabels=Gq.prototype.ih;function Kq(a,b,c){a.Ve[b.key]=new Iq(c,void 0)};function Lq(a,b,c,d,e,f){Mq(Lq,1,b,c);Mq(Lq,2,d,e);(this.f=a.length)?(this.ia=a,this.v=b,this.i=c,this.b=0,this.c=A(this.c,this),this.o=d,this.j=e,this.a=lc(),Va(this.a,Nq,f||{}),this.g={},x.setTimeout(this.c,0)):b(ef,!0)}var Nq={duration:100,Sl:"geometry",Rl:"WKT",ao:"searchAttributes",jj:B};\nLq.prototype.c=function(){var a=[];var b=!1;for(var c=Bk(),d;this.b<this.f;){var e=this.ia[this.b];b=e.attributes;d=e.layerId||this.a.jj;e.distance&&(b[this.a.ao]={nearest:new Wf(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.Sl]){try{var f=En(new Zn(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.Rl]=f}(e=this.g[d])||(e=this.g[d]=this.o({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Bk()-c>=this.a.duration){this.v(a,\nb);break}}b?this.g=y:this.m=x.setTimeout(this.c,0)};Lq.prototype.cancel=function(){x.clearTimeout(this.m);this.b<this.f&&this.i(new x.Error("parsing canceled"))};Lq.prototype.cancel=Lq.prototype.cancel;function Mq(a,b,c,d){if(!Ba(c))throw new D(a,b,"has invalid type");if(!Ba(d))throw new D(a,b+1,"has invalid type");};function Oq(a,b,c){var d=8===a;this.b=b;this.c=c||hd;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?"$HProjGeometry":"geometry"}\nOq.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var q=m.Rows;if(m=q.length){var p=Object.keys(q[0]).filter(function(v){return"geometry"!==v&&"$HProjGeometry"!==v});p=new Cq(q,p);for(k=0;k<m;k++){var r=q[k];if(e=r[this.f]){if(delete r[this.f],r=p.uc(k))try{this.a?d=Pq(this,a,b,r,e):d=Qq(this,a,r,e.path),d.ga(a),g.push(d)}catch(v){this.c(v.message)}}else this.c("Layer must contain geometries")}}}f[this.a?"spatials":this.g?"markers":"domMarkers"]=\ng;return f};function Pq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Gq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(Rq(g[k++]));Kq(a,c,[new rh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Qq(a,b,c,d){d=new Wf(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new xn(d,a)):(a={icon:e,data:c,provider:b},a=new ei(d,a));return a}function Rq(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new I(a[b++],a[b++]));return d};function Sq(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;sc(a.min)||(a.min=12);Sq.l.constructor.call(this,a);if(-1===Tq.indexOf(c))throw new D(Sq,2,"invalid resultType");this.a=c;if(d&&!Ba(d))throw new D(Sq,2,"invalid style callback");this.Qa=d;this.Pa=a.pixelRatio||Re();this.b=A(this.b,this);this.G(new Hk(b,A(this.ac,this)));this.createTileInternal=4===c||8===c?A(this.U,this):A(this.I,this)}u(Sq,Q);t("H.service.extension.TileProvider",Sq);Sq.prototype.s=!1;\nSq.prototype.m=function(){return Sq.l.m.call(this)|192};Sq.prototype.gb=function(a,b,c,d){return this.s?Sq.l.gb.call(this,a,b,c,d):B};Sq.prototype.requestTile=Sq.prototype.gb;Sq.prototype.b=function(a){this.dispatchEvent(new sd("error",yc(a)?a:a+"",this))};Sq.prototype.Tb=function(){return 1===this.a};Sq.prototype.providesMarkers=Sq.prototype.Tb;Sq.prototype.Sb=function(){return 2===this.a};Sq.prototype.providesDomMarkers=Sq.prototype.Sb;Sq.prototype.Bc=function(){return 4===this.a||8===this.a};\nSq.prototype.providesSpatials=Sq.prototype.Bc;function Uq(a){var b=a.Fb;b||(a.D||(a.D=a.C(a.a,a.Qa,a.b)),b=a.Fb=new hq(a.D),b.ga(a),b.addEventListener(a.g.Ca,A(a.$b,a)),b.Qa=!0);return b}Sq.prototype.I=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Mb().get(e);var f=2==this.a,g=[],h=Uq(this);e?e.valid=!0:(a=e=new Ok(a,b,c,y),delete a.j,a.m=d);d=f?jq(h,e,"domMarkers"):jq(h,e,"markers");for(b=d.length;b--;)a=d[b],a.Ki=e,(f||1===a.wb().getState())&&g.push(a);e.data=g;return e};\nSq.prototype.$b=function(a){if(a=a.target.Ki)a.valid=!1};Sq.prototype.fo=function(a){this.K=!!a};Sq.prototype.setTileCanvasRendering=Sq.prototype.fo;Sq.prototype.K=!0;Sq.prototype.U=function(a,b,c,d){var e=Uq(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Mb().get(f);h||(a=h=new Sk(f,a,b,c,g,this.Pa,c,e),delete a.j,a.m=d);this.K?(d=Kp.pop(g),h.Y(d)||Kp.push(d,g)):Yk(h);return h};\nSq.prototype.ac=function(a,b){var c;if(4===this.a||8===this.a){a=b.Ua();for(c=a.length;c--;)delete a[c].Ve[b.key];b.data&&(Kp.push(b.dg(),this.tileSize),b.eg())}else for(a=b.data,c=a.length;c--;)delete a[c].Ki};Sq.prototype.u=function(){Sq.l.u.call(this);Uq(this).B()};var Vq={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};Sq.ResultType=Vq;var Tq=[1,2,4,8];function Fq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Fq.l.constructor.call(this,c);C(a,Wq,Fq,0);Eq(b);e?(c=Ta(b),c.rowFilter=e.toString()):c=Ta(b);delete c.layer;c.layerId=Ye(b.layerId,b.layer);(new Lf).a("pde","H.service.extension.worker.processor");a=a.S().clone().T(Xq+"."+Yq).P({meta:1});(new Pf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.s=!0;Yj(d)},this.b)}\nu(Fq,Sq);t("H.service.extension.platformData.TileProvider",Fq);Fq.prototype.C=function(a,b,c){a=new Oq(a,b,c);a.i=Zq;return a};var Zq=new Ug({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});\nFq.prototype.O=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Mb().get(g);var k={cancel:hd},l=!0,m=this.a;g&&(4===m||8===m?g.Td()||(d(Kp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var q=Ip.setTimeout(function(){h=new Pf("pde",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Ip.clearTimeout(q)}}return k};Fq.prototype.requestInternal=Fq.prototype.O;Fq.prototype.u=function(){Fq.l.u.call(this);new Pf("pde",{message:[this.uid,3]})};\nFq.ResultType=Vq;function $q(a){this.a=a}$q.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};function Wq(a){Wq.l.constructor.call(this,Wq,a)}u(Wq,Ap);t("H.service.extension.platformData.Service",Wq);Wq.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}};Wq.CONFIG_KEY="platformData";Wq.prototype.request=function(a,b,c,d,e){return this.ua(a,b,c,d,e)};\nWq.prototype.ua=function(a,b,c,d,e){var f="text/plain";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.S().clone().T(a+"."+b).P(c);b===ar.JSON&&(f="application/json");return this.O(a,d,e,f)};var Xq="tiles";\nWq.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:Xq,FILE:"file",INDEX:"index"};var Yq="json",ar={TXT:"txt",JSON:Yq,HTML:"html",BIN:"bin"};Wq.EntryPointType=ar;\nWq.prototype.pc=function(a,b){var c=b&&b.resultType;a=new Fq(this,a,b);var d;1==c||2===c?d=new An(a):d=new gl(a);return d};Wq.prototype.createTileLayer=Wq.prototype.pc;Wq.prototype.td=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,Yq,b,function(h){f=new Lq(h.geometries,c,d,function(k){return new Cq([],k.columnNames,k)},function(k,l){return k.uc(Dq(k,l))},{jj:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new $q(e)};\nfunction br(a,b,c){if(!xc(a))throw new D(c,0,"has invalid type");if(!xc(b))throw new D(c,1,"has invalid type");if(a.length!==b.length||!a.length)throw new D(c,1,"specify one key attribute for each given layer id in the same order");}\nWq.prototype.Ec=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];br(a,b,this.Ec);Mq(this.Ec,3,d,e);C(c,K,this.Ec,2);c={bbox:c.ha+","+c.aa+";"+c.ka+","+c.da};f&&Va(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.td("search/bbox",c,g,e));return new $q(k)};Wq.prototype.searchByBoundingBox=Wq.prototype.Ec;\nWq.prototype.Vb=function(a,b,c,d,e,f,g){br(a,b,this.Vb);C(c,Wf,this.Vb,2,"has invalid type");if(!Bc(d))throw new D(this.Vb,3,"has invalid type");Mq(this.Vb,4,e,f);a={layer_ids:a.join(","),key_attributes:b.join(","),proximity:c.lat+","+c.lng+","+d};g&&Va(a,g);return this.td("search/proximity",a,e,f)};Wq.prototype.searchByProximity=Wq.prototype.Vb;\nWq.prototype.Ub=function(a,b,c,d,e,f,g){var h="";br(a,b,this.Ub);if(!yc(c)&&!C(c,L))throw new D(this.Ub,1,"has invalid type");if(!Bc(d))throw new D(this.Ub,2,"has invalid type");Mq(this.Ub,4,e,f);a={layer_ids:a.join(","),key_attributes:b.join(","),radius:d};if(yc(c))a.route_id=c;else{d=c.W;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+","+d[c+1],c<b-3&&(h+=";");a.corridor=h}g&&Va(a,g);return this.td("search/corridor",a,e,f)};Wq.prototype.searchByCorridor=Wq.prototype.Ub;\nX.prototype.Km=function(a){return this.hb(Wq,a)};X.prototype.getPlatformDataService=X.prototype.Km;function cr(a){cr.l.constructor.call(this,cr,a)}u(cr,Ap);t("H.service.extension.geofencing.Service",cr);cr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}};cr.CONFIG_KEY="geofencing";cr.prototype.request=function(a,b,c,d){return this.ua(a,b,c,d)};cr.prototype.c=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(". "):a.message||a.response_code)};\ncr.prototype.ua=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Ba(c))throw new TypeError("onResult must be a function");if(!Ba(d))throw new TypeError("onError must be a function");a=this.S().clone().T(a+".json").P(b);return this.O(a,c,d)};cr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"};X.prototype.nm=function(a){return this.hb(cr,a)};X.prototype.getGeofencingService=X.prototype.nm;t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"});t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"});function dr(a){var b=er;if(!a||!yc(a.layerId)||sc(a.rowFilter)&&!Ba(a.rowFilter)||sc(a.rowFilterContext)&&!Ca(a.rowFilterContext))throw new D(b,1,sc("invalid layer config")?"invalid layer config":a);}function fr(a){return yc(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function gr(a){for(var b=a&&a.length,c=2<=b&&"WKT"===a[--b]&&"GEOMETRY_ID"===a[--b];c&&b--;)c=fr(a[b]);return c}\nfunction hr(a,b){var c="",d,e,f=[];if(!b){var g={};f=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],g[b.layerId]||(g[b.layerId]=[]),g[b.layerId].push(b);for(d in g)f.push({layerId:d,geometries:g[d]});for(d=0;d<f.length;d++)c+=hr(f[d],f[d].layerId)}else if(a.geometries&&a.geometries.length)for(e=Object.keys(a.geometries[0].attributes),c=c+("Meta:\\t"+b+"\\n")+e.join("\\t"),c+="\\tWKT\\n",d=0;d<a.geometries.length;d++){var h=a.geometries[d].attributes;g=a.geometries[d].geometry;for(b=\n0;b<e.length;b++)f.push(h[e[b]]);c+=f.join("\\t");c+="\\t"+g+"\\n";f=[]}return c};function er(a,b,c){var d=this,e=b&&b.rowFilter,f;er.l.constructor.call(this,c);C(a,Y,er,0);var g=c.resultType;dr(b);if(e){var h=Ta(b);h.rowFilter=e.toString()}else h=b;(new Lf).a("cle","H.service.extension.worker.processor");var k=b.layerId;a.request(ir,jr,{detail_level:"all",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.S().clone().T(kr+"."+jr).P({meta:1});(new Pf("cle",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.s=!0;Yj(d)},d.b)},function(l){d.b(l.message)})}u(er,Sq);t("H.service.extension.customLocation.TileProvider",er);er.prototype.C=function(a,b,c){return new Oq(a,b,c)};\ner.prototype.O=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Mb().get(g);var k={cancel:hd},l=!0,m=this.a;g&&(4===m||8===m?g.Td()||(d(Kp.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var q=Ip.setTimeout(function(){h=new Pf("cle",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():Ip.clearTimeout(q)}}return k};er.prototype.requestInternal=er.prototype.O;er.prototype.u=function(){er.l.u.call(this);new Pf("cle",{message:[this.uid,3]})};function lr(){if(mr)throw new Xc(lr);}t("H.service.extension.customLocation.Table",lr);var mr=!0;function nr(a,b){var c;mr=!1;var d=new lr;mr=!0;d.c=oc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=lc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(nr,1,"Invalid number of cells");}else b=[];d.a=b;return d}lr.prototype.Md=function(){return this.c};lr.prototype.getMeta=lr.prototype.Md;lr.prototype.Od=function(){return this.a.length/this.b};\nlr.prototype.getRowCount=lr.prototype.Od;lr.prototype.uc=function(a){return a<this.a.length/this.b?new or(this,a):B};lr.prototype.getRow=lr.prototype.uc;lr.prototype.Sm=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new or(this,b);return c};lr.prototype.getRows=lr.prototype.Sm;lr.prototype.Cg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.Cg,0,"Invalid number of cells");this.a=c.concat(a);return d};lr.prototype.addCells=lr.prototype.Cg;\nlr.prototype.tl=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.uc(c)};lr.prototype.addRow=lr.prototype.tl;lr.prototype.Ta=function(){return this.c.columnNames};lr.prototype.getColumnNames=lr.prototype.Ta;lr.prototype.ve=function(a){return this.f[a]===B?B:new pr(this,a)};lr.prototype.getColumn=lr.prototype.ve;lr.prototype.va=function(a,b){return this.a[a*this.b+this.f[b]]};lr.prototype.getCell=lr.prototype.va;\nlr.prototype.Fc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.Fc,0,"Row index out of bounds");if(b===B)throw new D(this.Fc,0,"Column unknown");this.a[a*this.b+b]=c};lr.prototype.setCell=lr.prototype.Fc;\nlr.prototype.concat=function(a){var b=arguments.length,c,d=""+this.Ta(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof lr))throw new D(this.concat,c);if(""+f.Ta()!==d)throw new D(this.concat,c,"Incompatible columns!");f.a&&(e=e.concat(f.a))}return nr(this.c,e)};lr.prototype.concat=lr.prototype.concat;var qr=/(\\n|\\t|\\r|")/;\nlr.prototype.Gi=function(a,b){var c,d=this.b,e=this.Ta(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))"WKT"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.Gi,1,"No columns filtered");rr(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push("\\n"),e=b[c],rr(this,g,h,e,d,f,a,k)}else for(l=this.Od(),e=0;e<l;e++)g.push("\\n"),rr(this,g,h,e,d,f,a,k);return g.join("")};\nfunction rr(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push("\\t");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(qr.test(l))throw new D(a.Gi,0,\'Invalid character (\\\\n, \\\\r, \\\\t, or ") in row \'+d+" column "+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function pr(a,b){this.b=a;this.a=b}lr.Column=pr;pr.prototype.va=function(a){return this.b.va(a,this.a)};pr.prototype.getCell=pr.prototype.va;pr.prototype.Fc=function(a,b){this.b.Fc(a,this.a,b)};pr.prototype.setCell=pr.prototype.Fc;\nfunction or(a,b){this.a=a;this.Qh=b}lr.Row=or;or.prototype.Ta=function(){return this.a.Ta()};or.prototype.getColumnNames=or.prototype.Ta;or.prototype.va=function(a){return this.a.va(this.Qh,a)};or.prototype.getCell=or.prototype.va;or.prototype.Fc=function(a,b){this.a.Fc(this.Qh,a,b)};or.prototype.setCell=or.prototype.Fc;or.prototype.jd=function(){return this.a};or.prototype.getTable=or.prototype.jd;function sr(a){if(a===B)a="\\t";else if(!/^[^"\\r\\n]$/.test(a))throw new D(sr,0);this.b=String(a).charCodeAt(0);this.Rh=A(this.Rh,this);this.A=tr}var tr=0;n=sr.prototype;n.getState=function(){return this.A};function ur(a,b,c){var d=a.A;if(d!==b)throw 1===d&&(a.A=tr),new Xc(c,"Requires state: "+["READY","PARSE","PAUSE"][b]+" but found "+["READY","PARSE","PAUSE"][d]);}n.abort=function(){ur(this,2,sr.prototype.abort);this.A=tr};\nn.Rh=function(a){this.A=tr;throw new D(sr.prototype.parse,0,"Malformed DSV at row "+this.a.j+" column "+this.a.b+": "+a);};function vr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.A=tr;return c}n.parse=function(a,b,c){ur(this,tr,sr.prototype.parse);a=a.trim();this.a=new wr(a,this.b,this.Rh);this.c=b;this.kk=c||df;this.A=2;this.resume()};n.kk=df;\nn.resume=function(){var a=this.a,b=[];ur(this,2,sr.prototype.resume);this.A=1;do{if(!a.g){this.A=tr;break}if(e>a.b){if(void 0!==c&&c!==e){this.a.a("The number of columns must be the same for all rows");return}var c=e}var d=a.j;var e=a.b;var f=a.vf;var g=this.kk(d,e,a);if(a.vf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}xr(a);this.c(d,e,g)&&(this.A=a.g?2:tr)}while(1===this.A);2!=this.A&&void 0!==c&&0<e&&c!==e&&this.a.a("The number of columns must be the same for all rows")};\nfunction wr(a,b,c){this.c=new Zn(a);this.m=b;this.g=!0;this.vf=this.j=this.b=0;xr(this);this.a=c;this.f=[];this.i=!1}n=wr.prototype;n.vf=0;function xr(a){var b=a.c.Qb();a.o=!1;(a.v=34===b)&&a.c.next()}function yr(a,b){var c=a.c;a.o=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Qb()&&a.a("CR without LF");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a("End of field expected")}c.next();return-1}\nn.Qb=function(){if(this.o)var a=-1;else{var b=this.c;a=b.Qb();if(this.v)switch(a){case 34:b.next();a=b.Qb();34!==a&&(a=yr(this,a));break;case -1:this.a("Closing quotation mark expected")}else switch(a){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case -1:a=yr(this,a)}}return a};n.ce=function(){this.i=!0;this.f=[]};n.Gd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};n.next=function(){var a=this.Qb();-1!==a&&this.c.next();this.i&&this.f.push(a);this.vf++;return a};function zr(a,b,c,d){d=d||{};if(!b)throw new D(zr,1,"has to be a function");if(!c)throw new D(zr,2,"has to be a function");this.c=b;this.g=c;this.a=[];this.i=d.duration||Ar;this.b=A(this.b,this);this.f={};a=a.split("Meta:\\t").slice(1);for(b=0;b<a.length;b++){d=a[b].split("\\n");c=d[0].split("\\t")[0];d=d.slice(1).join("\\n");this.Ed[c]=new sr;this.Ph[c]=vr(this.Ed[c],d);var e={layerId:c,columnNames:this.Ph[c]};this.Ch.push(c);this.f[c]=nr(e);this.Jc[c]=Bk();Br(this,d,c);this.b(c)}}var Ar=100;n=zr.prototype;\nn.Ph={};n.Ch=[];n.Ed={};n.Jc={};n.Fi={};function Br(a,b,c){var d=[],e=a.Ph[c].length-1,f=a.f[c];try{a.Ed[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.uc(f.Cg(d))),Bk()-a.Jc[c]>a.i&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return En(k)})}catch(g){a.g(g)}}n.cancel=function(){for(var a in this.Fi)x.clearTimeout(this.Fi[a])};zr.prototype.cancel=zr.prototype.cancel;\nzr.prototype.b=function(a){var b=this,c,d;this.Fi[a]=x.setTimeout(function(){if(2===b.Ed[a].getState())b.Jc[a]=Bk(),b.c(b.a,!1),b.a=[],b.Ed[a].resume(),b.b(a);else{c=!0;for(d=0;d<b.Ch.length;d++)if(b.Ed[b.Ch[d]].getState()!==tr){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function Y(a){Y.l.constructor.call(this,Y,a)}u(Y,Ap);t("H.service.extension.customLocation.Service",Y);Y.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}};Y.CONFIG_KEY="customLocation";Y.prototype.pc=function(a,b){var c=b&&b.resultType;a=new er(this,a,b);var d;1===c||2===c?d=new An(a):d=new gl(a);return d};Y.prototype.createTileLayer=Y.prototype.pc;\nfunction Cr(a,b,c,d){var e;a=a===Dr?"changes":"file";var f=b[a],g=yc(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,"Invalid "+a+" parameter");if(Er)h?e=f:e=mf(f,"text/plain"),d=new x.FormData,d.append(a,e,e.name||a+".wkt"),c.method="POST",c.data=d,delete b[a];else if(h)throw new D(d,0,"Sending Blob data is not supported by the browser");}var Er=x.FormData&&!!x.FormData.prototype.append;Y.prototype.request=function(a,b,c,d,e){return this.ua(a,b,c,d,e)};\nY.prototype.ua=function(a,b,c,d,e){var f="text/plain",g=a===Fr.LAYERS_UPLOAD||a===Fr.LAYERS_MODIFY||a===Fr.LAYERS_IMPORT,h=c,k={data:B,method:"GET",headers:this.Cb};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);Mq(this.request,3,d,e);g&&(C(c,Object,this.request,2,"Invalid request parameters"),h=Ta(c),Cr(a,h,k,this.request));var l=this.S().clone().T(a+"."+b).P(h);b===Gr.JSON&&(f="application/json");a=new qf(f,l.toString(),ee,k);a.then(function(m){var q=m.issues;q&&m.error_id&&\nm.response_code?e(Error(q[0].message)):d(m)},function(m){"error"===m.type||404===m.status?e(Error(m.statusText||"Unable to load data")):m.json().then(function(q){e(Error("["+q.issues[0].message+"] "+l+" request failed"))},function(){e(Error("["+m.statusText+"] "+l+" request failed"))})});return a};\nvar ir="layers/list",Dr="layers/modify",kr="tiled/tile",Fr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:ir,LAYERS_MODIFY:Dr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:kr};Y.EntryPoint=Fr;var jr="json",Gr={TXT:"txt",JSON:jr};Y.EntryPointType=Gr;\nY.prototype.xb=function(a,b,c){var d=this;return this.request("search/all","txt",{filter:\'WKT==""\',layer_id:a},function(e){var f=e.replace(/[\\r\\n]+$/g,"").split("\\t");d.request(ir,jr,{layer_id:a,detail_level:"all"},function(g){g=g.layers[0];g.columnNames=f;b(nr(g))},c)},c)};Y.prototype.getLayer=Y.prototype.xb;\nY.prototype.Ij=function(a,b,c,d){function e(){return++g<f?h.request("layers/access/grant",jr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(",")},e,d):h.xb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};Y.prototype.grantAccess=Y.prototype.Ij;Y.prototype.kj=function(a,b,c){return this.request("layers/delete",jr,{layer_ids:a},b,c)};Y.prototype.deleteLayer=Y.prototype.kj;\nY.prototype.cd=function(a,b,c){function d(){setTimeout(function(){k.xb(g,function(p){setTimeout(e.bind(null,p),m)},function(){64E3>l?(l+=m,d()):c(x.Error("Timeout"))})},m);m*=2}function e(p){var r=JSON.stringify(p.Ta()),v=a.grants;if(r!==JSON.stringify(h)){var w="Results into different column names on the backend: "+r;setTimeout(function(){k.kj(g,function(){c(x.Error(w))},function(z){c(x.Error(w+". "+z.message))})},m)}else v&&v.length?k.Ij(g,v,b,c):b(p)}var f,g,h,k=this,l=0,m=1E3;var q=!a||!fr(g=\na.layerId)&&(f="layerId")||!gr(h=a.columnNames)&&(f="columnNames")?0:Ba(b)?Ba(c)?-1:2:1;if(0<=q)throw new D(k.cd,q,f||arguments[q]);return k.xb(g,function(){c(x.Error("Layer exists already"))},function(){var p={layer_id:g,file:h.join("\\t")},r=a.level,v=a.storage;r!==B&&(p.level=r);v!==B&&(p.storage=v);k.request("layers/upload",jr,p,d,c)})};Y.prototype.createLayer=Y.prototype.cd;\nY.prototype.td=function(a,b,c,d){var e=[],f;a=this.request(a,jr,b,function(g){g.geometries.length?(g=hr(g,b.layer_id),f=new zr(g,c,d),e.push(f)):c(ef,!0)},d);e.push(a);return new $q(e)};Y.prototype.Vb=function(a,b,c,d,e,f){if(!xc(a))throw new D(this.Vb,0,"has invalid type");C(b,Wf,this.Vb,1,"has invalid type");if(!Bc(c))throw new D(this.Vb,2,"has invalid type");Mq(this.Vb,3,d,e);a={layer_ids:a.join(","),proximity:b.lat+","+b.lng+","+c};f&&Va(a,f);return this.td("search/proximity",a,d,e)};\nY.prototype.searchByProximity=Y.prototype.Vb;Y.prototype.Ub=function(a,b,c,d,e,f){var g="";if(!xc(a))throw new D(this.Ub,0,"has invalid type");if(!yc(b)&&!C(b,L))throw new D(this.Ub,1,"has invalid type");if(!Bc(c))throw new D(this.Ub,2,"has invalid type");Mq(this.Ub,3,d,e);a={layer_ids:a.join(","),radius:c};if(yc(b))a.route_id=b;else{var h=b.W;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+","+h[b+1],b<c-3&&(g+=",");a.corridor=g}f&&Va(a,f);return this.td("search/corridor",a,d,e)};\nY.prototype.searchByCorridor=Y.prototype.Ub;Y.prototype.Ec=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!xc(a))throw new D(this.Ec,0,"has invalid type");C(b,K,this.Ec,1,"has invalid type");Mq(this.Ec,2,c,d);b={bbox:b.ha+","+b.aa+";"+b.ka+","+b.da};e&&Va(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.td("search/bbox",b,f,d));return new $q(g)};Y.prototype.searchByBoundingBox=Y.prototype.Ec;\nY.prototype.li=function(a,b,c,d){var e,f=[];if(!yc(a))throw new D(this.li,0,"has invalid type");Mq(this.li,1,b,c);var g={layer_id:a};d&&Va(g,d);d=this.request("search/all",jr,g,function(h){h.geometries.length?(h=hr(h,a),e=new zr(h,b,c),f.push(e)):b(ef,!0)},c);f.push(d);return new $q(f)};Y.prototype.searchAll=Y.prototype.li;var Hr={"delete":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Ir(a,b,c,d,e,f){function g(){v++;d(this,v===p)}function h(V){v++;e(V,this,v===p)}var k="append"!==b,l,m={},q=lc(),p=0,r=[],v=0;if(!xc(c))throw new D(f,0,c);Mq(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,or)){var z=w.jd().Md().layerId;var J=w.va("GEOMETRY_ID");if(k){if(J===y||""===String(J))var G=\'GEOMETRY_ID must not be null or ""\';m[J=z+"_"+J]&&(G="same GEOMETRY_ID for multiple rows");m[J]=w}else J!==y&&""!==String(J)&&(G=\'GEOMETRY_ID must be null or ""\')}else G="Invalid type";if(G)throw new D(f,\n0,"- Invalid row at index "+l+", "+G);J=q[z];J||(J=q[z]=[],p++);J.push(w)}for(z in q){J=q[z];c=[];for(l=J.length;l--;)c.push(J[l].Qh);r.push(a.request(Dr,jr,{layer_id:z,action:b,changes:J[0].jd().Gi(Hr[b]||null,c)},A(g,J),A(h,J)))}return new $q(r)}Y.prototype.cj=function(a,b,c){return Ir(this,"append",a,b,c,this.cj)};Y.prototype.appendRows=Y.prototype.cj;Y.prototype.il=function(a,b,c){return Ir(this,"update",a,b,c,this.il)};Y.prototype.updateRows=Y.prototype.il;\nY.prototype.lj=function(a,b,c){return Ir(this,"delete",a,b,c,this.lj)};Y.prototype.deleteRows=Y.prototype.lj;X.prototype.em=function(a){return this.hb(Y,a)};X.prototype.getCustomLocationService=X.prototype.em;function Jr(a){uq.l.constructor.call(this,Jr,a)}u(Jr,Ap);t("H.service.extension.customRoute.Service",Jr);Jr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}};Jr.CONFIG_KEY="customRoute";Jr.prototype.c=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(". "):a)};Jr.prototype.Ad=function(a,b,c){Mq(this.Ad,1,b,c);a=this.S().clone().T("calculateroute.json").P(a);return this.O(a,b,c)};Jr.prototype.calculateRoute=Jr.prototype.Ad;\nX.prototype.fm=function(a){return this.hb(Jr,a)};X.prototype.getCustomRoutingService=X.prototype.fm;function Kr(a){Kr.l.constructor.call(this,Kr,a)}u(Kr,Ap);t("H.service.SearchService",Kr);Kr.CONFIG_KEY="search";Kr.prototype.a=function(){return{subDomain:"search",path:"v1"}};Kr.prototype.c=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(". "))};Kr.prototype.$g=function(a,b,c){a=this.S().clone().Ra("geocode").T("geocode").P(a);return this.O(a,b,c)};Kr.prototype.geocode=Kr.prototype.$g;\nKr.prototype.ki=function(a,b,c){a=this.S().clone().Ra("revgeocode").T("revgeocode").P(a);return this.O(a,b,c)};Kr.prototype.reverseGeocode=Kr.prototype.ki;Kr.prototype.xl=function(a,b,c){a=this.S().clone().Ra("autosuggest").T("autosuggest").P(a);return this.O(a,b,c)};Kr.prototype.autosuggest=Kr.prototype.xl;Kr.prototype.Gl=function(a,b,c){a=this.S().clone().Ra("discover").T("discover").P(a);return this.O(a,b,c)};Kr.prototype.discover=Kr.prototype.Gl;\nKr.prototype.tn=function(a,b,c){a=this.S().clone().Ra("lookup").T("lookup").P(a);return this.O(a,b,c)};Kr.prototype.lookup=Kr.prototype.tn;Kr.prototype.zl=function(a,b,c){a=this.S().clone().Ra("browse").T("browse").P(a);return this.O(a,b,c)};Kr.prototype.browse=Kr.prototype.zl;X.prototype.Um=function(a){return this.hb(Kr,a)};X.prototype.getSearchService=X.prototype.Um;function Lr(a){if(!a.token)throw new D(Lr,0,\'"token" must be specified\');Lr.l.constructor.call(this,Lr,a);this.b=a.token;this.i={};this.f={}}u(Lr,Ap);t("H.service.xyz.Service",Lr);Lr.prototype.lh=function(a,b,c){vc(a,"String",this.lh,0,\'"projectId" must be a string\');Mr(this.lh,1,b,c);a=new qf("application/json",Nr("project-api/projects/"+a),ee,{headers:this.Cb});a.then(b,Or.bind(this,c));return a};Lr.prototype.getProject=Lr.prototype.lh;\nLr.prototype.Dj=function(a,b,c){Mr(this.Dj,0,a,b);c=new qf("application/json",Nr("hub/spaces",{access_token:this.b},c),ee,{headers:this.Cb});c.then(a,Or.bind(this,b));return c};Lr.prototype.getSpaces=Lr.prototype.Dj;Lr.prototype.Kf=function(a,b,c){vc(a,"String",this.Kf,0,\'"spaceId" must be a string\');Mr(this.Kf,1,b,c);a=new qf("application/json",Nr("hub/spaces/"+a,{access_token:this.b}),ee,{headers:this.Cb});a.then(b,Or.bind(this,c));return a};Lr.prototype.getSpace=Lr.prototype.Kf;\nLr.prototype.oh=function(a,b,c){vc(a,"String",this.oh,0,\'"spaceId" must be a string\');Mr(this.oh,1,b,c);a=new qf("application/json",Nr("hub/spaces/"+a+"/statistics",{access_token:this.b}),ee,{headers:this.Cb});a.then(b,Or.bind(this,c));return a};Lr.prototype.getStatistics=Lr.prototype.oh;\nfunction Pr(a,b,c,d,e,f,g,h){b=new qf("arraybuffer",Nr("hub/spaces/"+e+"/tile/web/"+d+"_"+b+"_"+c+".mvtf",{access_token:a.b,clip:!0},h),ee,{headers:a.Cb});b.then(function(k){return k.arrayBuffer()}).then(f,Or.bind(a,g));return b}Lr.prototype.search=function(a,b,c,d){vc(a,"String",this.search,0,\'"spaceId" must be a string\');Mr(this.search,1,b,c);a=new qf("application/json",Nr("hub/spaces/"+a+"/search",{access_token:this.b},d),ee,{headers:this.Cb});a.then(b,Or.bind(this,c));return a};\nLr.prototype.search=Lr.prototype.search;Lr.prototype.Ae=function(a,b,c,d){vc(a,"String",this.Ae,0,\'"spaceId" must be a string\');if(!Ca(b))throw new D(this.Ae,1,\'"params" must be an object\');Mr(this.Ae,2,c,d);a=new qf("application/json",Nr("hub/spaces/"+a+"/features",{access_token:this.b},b),ee,{headers:this.Cb});a.then(c,Or.bind(this,d));return a};Lr.prototype.getFeaturesById=Lr.prototype.Ae;\nLr.prototype.fh=function(a,b,c,d){vc(a,"String",this.fh,0,\'"spaceId" must be a string\');if(!Ca(b))throw new D(this.Ae,1,\'"params" must be an object\');Mr(this.fh,2,c,d);a=new qf("application/json",Nr("hub/spaces/"+a+"/bbox",{access_token:this.b},b),ee,{headers:this.Cb});a.then(c,Or.bind(this,d));return a};Lr.prototype.getFeaturesByBoundingBox=Lr.prototype.fh;Lr.prototype.ra=function(a){var b=this.i[a];if(b)return b;this.f[a]||this.se(a);return null};\nLr.prototype.Re=function(a,b,c,d,e){vc(a,"String",this.Re,0,\'"spaceId" must be a string\');Mr(this.Re,2,c,d);if(!Ca(b))throw new D(this.Re,1,\'"geojsonObject" must be an object\');if(e&&!Ca(e))throw new D(this.Re,4,\'"opt_params" must be an object\');return Qr(this,a,c,d,"PUT",b,e)};Lr.prototype.putFeatures=Lr.prototype.Re;\nLr.prototype.Oe=function(a,b,c,d,e){vc(a,"String",this.Oe,0,\'"spaceId" must be a string\');Mr(this.Oe,2,c,d);if(!Ca(b))throw new D(this.Oe,1,\'"featureCollection" must be an object\');if(e&&!Ca(e))throw new D(this.Oe,4,\'"opt_params" must be an object\');return Qr(this,a,c,d,"POST",b,e)};Lr.prototype.postFeatures=Lr.prototype.Oe;\nLr.prototype.Af=function(a,b,c,d){vc(a,"String",this.Af,0,\'"spaceId" must be a string\');Mr(this.Af,2,c,d);if(!Ca(b))throw new D(this.Af,1,\'"params" must be an object\');return Qr(this,a,c,d,"DELETE",B,b)};Lr.prototype.deleteFeatures=Lr.prototype.Af;\nfunction Qr(a,b,c,d,e,f,g){e={method:e,headers:zp({authorization:"Bearer "+a.b,"Content-Type":"application/geo+json"},a.Cb)};f&&(e.data=JSON.stringify(f));b=new qf("application/json",Nr("hub/spaces/"+b+"/features",B,g),ee,e);b.then(c,Or.bind(a,d));return b}Lr.prototype.se=function(a){var b=this;this.f[a]=Rr;this.Kf(a,function(c){b.f[a]=Sr;b.i[a]=c.copyright;b.dispatchEvent("copyrightupdate")}.bind(this),function(c){b.f[a]=Tr;throw c;}.bind(this))};\nfunction Nr(a,b,c){a=Cp((new W("https","xyz.api.here.com",B)).cf(a));c&&a.P(c);b&&a.P(b);return a.toString()}Lr.CONFIG_KEY="xyz";var Rr=1,Sr=2,Tr=-1;function Mr(a,b,c,d){if(!Ba(c))throw new D(a,b,\'"onResult" must be a function\');if(!Ba(d))throw new D(a,b+1,\'"onError" must be a function\');}function Or(a,b){b.text().then(function(c){a(Error(c))})}X.prototype.cn=function(a){return this.hb(Lr,a)};X.prototype.getXYZService=X.prototype.cn;function Ur(a,b,c){var d;Ur.l.constructor.call(this,c?{min:c.min,max:c.max}:void 0);C(a,Lr,Ur,0);if(!yc(b))throw new D(Ur,1,\'"spaceId" must be a string\');this.s=a;this.b=b;this.a={};if(c&&(["limit","simplificationLevel","tags"].forEach(function(e){e in c&&(this.a[e]=c[e])},this),a=c.parameters))for(d in a)this.a[d]=a[d];this.vd(new Ij({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.b},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,\n"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}))}u(Ur,Q);t("H.service.xyz.Provider",Ur);Ur.prototype.O=function(a,b,c,d,e){return Pr(this.s,a,b,c,this.b,d,e,this.a)};Ur.prototype.requestInternal=Ur.prototype.O;Ur.prototype.ra=function(){return this.s.ra(this.b)};\nUr.prototype.getCopyrights=Ur.prototype.ra;Ur.prototype.wa=function(){return this.zb()};Ur.prototype.getStyle=Ur.prototype.wa;Ur.prototype.Zc=function(a){yp(a,"MVT");this.vd(a)};Ur.prototype.setStyle=Ur.prototype.Zc;t("H.service.buildInfo",function(){return Df("H-service","1.16.0","4cf1f7f")});\n');
},
	"com/coil/podway/MDM_Data/libs/mapsjs-ui.js":function(){/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.16.0/HERE_NOTICE
 */
H.util.eval('function Vt(a,b){a:{for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"===typeof a?a.charAt(b):a[b]}var Wt={};function Xt(a){var b=a.ownerDocument,c=b.documentElement;b=b.defaultView;var d=a.getBoundingClientRect();a=d.left;d=d.top;isNaN(b.pageXOffset)?(a+=c.scrollLeft,d+=c.scrollTop):(a+=b.pageXOffset,d+=b.pageYOffset);return new I(a,d)}\nfunction Yt(a,b,c){b=Bc(b)?b+"px":b;c=Bc(c)?c+"px":c;a.style[wf("transform")]="translate("+b+","+c+")"}var Zt={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};t("H.ui.LayoutAlignment",Zt);function $t(a,b){var c={},d={};c["top-left"]=au(b,"div",[bu,cu].join(" "));c["top-center"]=au(b,"div",[bu,du,eu,cu].join(" "));c["top-right"]=au(b,"div",[bu,cu].join(" "));c["left-top"]=au(b,"div",[bu,fu].join(" "));c["left-middle"]=au(b,"div",[bu,gu,hu,fu].join(" "));c["left-bottom"]=au(b,"div",[bu,fu].join(" "));c["right-top"]=au(b,"div",[bu,fu].join(" "));c["right-middle"]=au(b,"div",[bu,iu,hu,fu].join(" "));c["right-bottom"]=au(b,"div",[bu,fu].join(" "));c["bottom-left"]=au(b,"div",[bu,cu].join(" "));\nc["bottom-center"]=au(b,"div",[bu,ju,eu,cu].join(" "));c["bottom-right"]=au(b,"div",[bu,cu].join(" "));d["top-left"]=au(b,"div",[du,gu].join(" "));d["top-right"]=au(b,"div",[du,iu].join(" "));d["bottom-left"]=au(b,"div",[ju,gu].join(" "));d["bottom-right"]=au(b,"div",[ju,iu].join(" "));ku(d["top-left"],c["top-left"],c["left-top"]);ku(d["top-right"],c["top-right"],c["right-top"]);ku(d["bottom-left"],c["left-bottom"],c["bottom-left"]);ku(d["bottom-right"],c["right-bottom"],c["bottom-right"]);ku(a,d["top-left"],\nd["top-right"],d["bottom-left"],d["bottom-right"],c["top-center"],c["left-middle"],c["right-middle"],c["bottom-center"]);this.a=c}var du="H_l_top",ju="H_l_bottom",gu="H_l_left",iu="H_l_right",eu="H_l_center",hu="H_l_middle",cu="H_l_horizontal",fu="H_l_vertical",bu="H_l_anchor";$t.prototype.update=function(){var a=this.a;lu(a["top-center"],!0);lu(a["bottom-center"],!0);lu(a["left-middle"],!1);lu(a["right-middle"],!1)};\nfunction lu(a,b){b?(b=a.offsetWidth,a.style.marginLeft=-Math.round(.5*b)+"px"):(b=a.offsetHeight,a.style.marginTop=-Math.round(.5*b)+"px")}$t.prototype.put=function(a,b){a=a?a.J():null;var c=b?this.a[b]:null;a&&c&&(a.parentElement&&a.parentElement.removeChild(a),c.insertBefore(a,/(bottom|right)$/.test(b)||/(center|middle)/.test(b)&&c.childNodes.length%2?c.firstChild:null));this.update()};var mu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",mu);function nu(){this.a=this.mj()}nu.prototype.mj=function(){var a=Function("return this;")(),b=a.navigator,c=[];b&&(b.msPointerEnabled?c.push(ou):b.pointerEnabled&&c.push(pu));1>c.length&&("TouchEvent"in a&&c.push(qu),c.push(ru));return c};nu.prototype.detectEventSets=nu.prototype.mj;nu.prototype.addEventListener=function(a,b,c,d){for(var e=this.a,f,g=e.length,h=!1;g--;)if(f=e[g][b])h=!0,a.addEventListener(f,c,d||!1);h||a.addEventListener(b,c,d||!1)};\nnu.prototype.removeEventListener=function(a,b,c,d){for(var e=this.a,f,g=e.length,h=!1;g--;)if(f=e[g][b])h=!0,a.removeEventListener(f,c,d||!1);h||a.removeEventListener(b,c,d||!1)};\nvar pu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},ou={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},qu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},ru={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function au(a,b,c,d){a=a.createElement(b);c&&(a.className=c);d&&(a.innerHTML=d);return a}function ku(a,b){for(var c=1,d=arguments.length;c<d;c++)a.appendChild(arguments[c])}var su=new nu;function tu(a,b,c){su.addEventListener(a,b,c,void 0)}function uu(a,b,c){su.removeEventListener(a,b,c,void 0)};var vu=[];t("H.ui.i18n.defaultLocales",vu);var wu={},xu=[];function yu(a,b){wu[a]=b;-1===vu.indexOf(a)&&vu.push(a);xu.length?zu(a,b):xu=Object.keys(b)}function zu(a,b){for(var c=xu,d=c.length,e;d--;)if(e=c[d],!b[e])throw Error("\'"+e+"\' key missing in translation map for "+a);};yu("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer",\n"traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"});yu("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\\u00e9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\\u00fablicos","layer.traffic":"Condi\\u00e7\\u00f5es de tr\\u00e2nsito","layer.incidents":"Mostrar incidentes de tr\\u00e2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar",\n"zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\\u00fablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\\u00edcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\\u00e7\\u00e3o","traffic.DISABLED_VEHICLE":"Ve\\u00edculo avariado","traffic.from":"Hora de in\\u00edcio:","traffic.until":"Hora de fim prevista:",\n"distance.measurement":"Measure distance"});yu("ru-RU",{"layers.normal":"\\u0420\\u0435\\u0436\\u0438\\u043c \\u043a\\u0430\\u0440\\u0442\\u044b","layers.satellite":"\\u0421\\u043f\\u0443\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432\\u0430\\u044f","layers.terrain":"\\u041c\\u0435\\u0441\\u0442\\u043d\\u043e\\u0441\\u0442\\u044c","layer.transit":"\\u041e\\u0431\\u0449\\u0435\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0442\\u0440\\u0430\\u043d\\u0441\\u043f\\u043e\\u0440\\u0442","layer.traffic":"\\u0414\\u043e\\u0440\\u043e\\u0436\\u043d\\u044b\\u0435 \\u0443\\u0441\\u043b\\u043e\\u0432\\u0438\\u044f",\n"layer.incidents":"\\u041f\\u043e\\u043a\\u0430\\u0437\\u0430\\u0442\\u044c \\u0434\\u043e\\u0440\\u043e\\u0436\\u043d\\u044b\\u0435 \\u0441\\u043e\\u0431\\u044b\\u0442\\u0438\\u044f","layers.choose":"\\u0412\\u044b\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0438\\u0434",minimap:"Minimap","scale.switchToImperial":"\\u0418\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u043c\\u0438\\u043b\\u0438","scale.switchToMetric":"\\u0418\\u0441\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u044c \\u043a\\u0438\\u043b\\u043e\\u043c\\u0435\\u0442\\u0440\\u044b",\n"scale.km":"\\u043a\\u043c","scale.m":"\\u043c","scale.mi":"\\u043c\\u0438\\u043b\\u044c","scale.ft":"\\u0444\\u0443\\u0442","zoom.out":"\\u041e\\u0442\\u0434\\u0430\\u043b\\u0438\\u0442\\u044c","zoom.in":"\\u041f\\u0440\\u0438\\u0431\\u043b\\u0438\\u0437\\u0438\\u0442\\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\\u041e\\u0431\\u0449\\u0435\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u044b\\u0439 \\u0442\\u0440\\u0430\\u043d\\u0441\\u043f\\u043e\\u0440\\u0442","traffic.MISCELLANEOUS":"\\u041f\\u0440\\u043e\\u0447\\u0435\\u0435 \\u0414\\u0422\\u041f",\n"traffic.ACCIDENT":"\\u0414\\u0422\\u041f","traffic.OTHER_NEWS":"\\u0414\\u0440\\u0443\\u0433\\u0438\\u0435 \\u043d\\u043e\\u0432\\u043e\\u0441\\u0442\\u0438","traffic.PLANNED_EVENT":"\\u041f\\u043b\\u0430\\u043d\\u043e\\u0432\\u043e\\u0435 \\u043c\\u0435\\u0440\\u043e\\u043f\\u0440\\u0438\\u044f\\u0442\\u0438\\u0435","traffic.ROAD_HAZARD":"\\u0414\\u043e\\u0440\\u043e\\u0436\\u043d\\u0430\\u044f \\u043e\\u043f\\u0430\\u0441\\u043d\\u043e\\u0441\\u0442\\u044c","traffic.WEATHER":"\\u041f\\u043e\\u0433\\u043e\\u0434\\u0430","traffic.CONGESTION":"\\u041f\\u0440\\u043e\\u0431\\u043a\\u0430",\n"traffic.CONSTRUCTION":"\\u0420\\u0435\\u043c\\u043e\\u043d\\u0442","traffic.DISABLED_VEHICLE":"\\u041d\\u0435\\u0438\\u0441\\u043f\\u0440\\u0430\\u0432\\u043d\\u044b\\u0439 \\u0430\\u0432\\u0442\\u043e\\u043c\\u043e\\u0431\\u0438\\u043b\\u044c","traffic.from":"\\u0412\\u0440\\u0435\\u043c\\u044f \\u043d\\u0430\\u0447\\u0430\\u043b\\u0430:","traffic.until":"\\u041e\\u0436\\u0438\\u0434\\u0430\\u0435\\u043c\\u043e\\u0435 \\u0432\\u0440\\u0435\\u043c\\u044f \\u043e\\u043a\\u043e\\u043d\\u0447\\u0430\\u043d\\u0438\\u044f:","distance.measurement":"\\u0418\\u0437\\u043c\\u0435\\u0440\\u0438\\u0442\\u044c \\u0440\\u0430\\u0441\\u0441\\u0442\\u043e\\u044f\\u043d\\u0438\\u0435"});yu("fi-FI",{"layers.normal":"Karttan\\u00e4kym\\u00e4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\\u00e4yt\\u00e4 liikennetapahtumat","layers.choose":"Valitse n\\u00e4kym\\u00e4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\\u00e4henn\\u00e4",\n"zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\\u00e4t\\u00f6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\\u00e4","traffic.WEATHER":"S\\u00e4\\u00e4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\\u00f6","traffic.DISABLED_VEHICLE":"Pys\\u00e4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\\u00e4\\u00e4ttymisaika:",\n"distance.measurement":"Measure distance"});yu("pt-BR",{"layers.normal":"Exibi\\u00e7\\u00e3o do mapa","layers.satellite":"Sat\\u00e9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\\u00fablico","layer.traffic":"Condi\\u00e7\\u00f5es do tr\\u00e2nsito","layer.incidents":"Mostrar incidentes no tr\\u00e2nsito","layers.choose":"Escolher exibi\\u00e7\\u00e3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\\u00e9s","zoom.out":"Menos zoom",\n"zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\\u00fablico","traffic.MISCELLANEOUS":"Miscel\\u00e2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\\u00edcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\\u00e7\\u00e3o","traffic.DISABLED_VEHICLE":"Ve\\u00edculo incapacitado","traffic.from":"Hora de in\\u00edcio:",\n"traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"});yu("zh-CN",{"layers.normal":"\\u5730\\u56fe\\u89c6\\u56fe","layers.satellite":"\\u536b\\u661f","layers.terrain":"\\u5730\\u5f62","layer.transit":"\\u516c\\u5171\\u4ea4\\u901a","layer.traffic":"\\u4ea4\\u901a\\u60c5\\u51b5","layer.incidents":"\\u663e\\u793a\\u4ea4\\u901a\\u4e8b\\u4ef6","layers.choose":"\\u9009\\u62e9\\u89c6\\u56fe",minimap:"Minimap","scale.switchToImperial":"\\u5207\\u6362\\u4e3a\\u300c\\u82f1\\u91cc\\u300d","scale.switchToMetric":"\\u5207\\u6362\\u4e3a\\u300c\\u516c\\u91cc\\u300d","scale.km":"\\u516c\\u91cc","scale.m":"\\u7c73",\n"scale.mi":"\\u82f1\\u91cc","scale.ft":"\\u82f1\\u5c3a","zoom.out":"\\u7f29\\u5c0f","zoom.in":"\\u653e\\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\\u516c\\u5171\\u4ea4\\u901a","traffic.MISCELLANEOUS":"\\u7efc\\u5408\\u4e8b\\u4ef6","traffic.ACCIDENT":"\\u4ea4\\u901a\\u610f\\u5916","traffic.OTHER_NEWS":"\\u5176\\u4ed6\\u65b0\\u95fb","traffic.PLANNED_EVENT":"\\u9884\\u5b9a\\u4e8b\\u4ef6","traffic.ROAD_HAZARD":"\\u9053\\u8def\\u5371\\u9669","traffic.WEATHER":"\\u5929\\u6c14","traffic.CONGESTION":"\\u5835\\u585e",\n"traffic.CONSTRUCTION":"\\u65bd\\u5de5","traffic.DISABLED_VEHICLE":"\\u8f66\\u8f86\\u629b\\u951a","traffic.from":"\\u5f00\\u59cb\\u65f6\\u95f4\\uff1a","traffic.until":"\\u9884\\u8ba1\\u7ed3\\u675f\\u65f6\\u95f4\\uff1a","distance.measurement":"Measure distance"});yu("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\\u00e9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\\u00fablico","layer.traffic":"Estado del tr\\u00e1fico","layer.incidents":"Mostrar incidentes de tr\\u00e1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle",\n"traffic.MASS_TRANSIT":"Transporte p\\u00fablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\\u00e1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\\u00f3n","traffic.DISABLED_VEHICLE":"Veh\\u00edculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\\u00f3n estimada:","distance.measurement":"Measure distance"});yu("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\\u00e8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle",\n"traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\\u00c9v\\u00e9nement pr\\u00e9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.WEATHER":"M\\u00e9t\\u00e9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\\u00e9hicule en panne","traffic.from":"Date ou heure de d\\u00e9but:","traffic.until":"Date et heure de fin estim\\u00e9es:","distance.measurement":"Measure distance"});yu("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\\u0144 na mile","scale.switchToMetric":"Zmie\\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny",\n"traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\\u0144stwo na drodze","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\\u0119cia:","traffic.until":"Przybli\\u017cona data zako\\u0144czenia:","distance.measurement":"Measure distance"});yu("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\\u00e4nde","layer.transit":"\\u00d6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\\u00f6rungen anzeigen","layers.choose":"Ansicht ausw\\u00e4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\\u00f6\\u00dfern",\n"zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\\u00d6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:",\n"distance.measurement":"Measure distance"});yu("tr-TR",{"layers.normal":"Harita g\\u00f6r\\u00fcn\\u00fcm\\u00fc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\\u015f\\u0131m","layer.traffic":"Trafik durumlar\\u0131","layer.incidents":"Trafik olaylar\\u0131n\\u0131 g\\u00f6ster","layers.choose":"G\\u00f6r\\u00fcn\\u00fcm se\\u00e7",minimap:"Minimap","scale.switchToImperial":"Mile d\\u00f6n\\u00fc\\u015ft\\u00fcr","scale.switchToMetric":"Kilometreye d\\u00f6n\\u00fc\\u015ft\\u00fcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft",\n"zoom.out":"Uzakla\\u015ft\\u0131r","zoom.in":"Yak\\u0131nla\\u015ft\\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\\u015f\\u0131m","traffic.MISCELLANEOUS":"\\u00c7e\\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\\u011fer haberler","traffic.PLANNED_EVENT":"Planl\\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\\u011funluk","traffic.CONSTRUCTION":"Yol \\u00e7al\\u0131\\u015fmas\\u0131","traffic.DISABLED_VEHICLE":"Ara\\u00e7 ar\\u0131zas\\u0131",\n"traffic.from":"Ba\\u015flang\\u0131\\u00e7 zaman\\u0131:","traffic.until":"Tahmini biti\\u015f zaman\\u0131:","distance.measurement":"Measure distance"});yu("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici",\n"traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"});yu("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport",\n"traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"});function Au(a,b){if(!yc(a))throw new TypeError("string locale code required");if(Ca(b))zu(a,b);else{if(-1===vu.indexOf(a))throw Error("Default locale \'"+a+"\' does nto exist.");b=wu[a]}this.a=b||{};this.b=a}t("H.ui.i18n.Localization",Au);Au.prototype.zm=function(){return this.b};Au.prototype.getLocale=Au.prototype.zm;Au.prototype.tm=function(){return Object.keys(this.a)};Au.prototype.getKeys=Au.prototype.tm;Au.prototype.th=function(a){return!(!this.a||!this.a[a])};Au.prototype.hasKey=Au.prototype.th;\nAu.prototype.translate=function(a){var b=this.a[a];if(!yc(b))throw Error("Translation missing for key \'"+a+"\'.");return b};Au.prototype.translate=Au.prototype.translate;function Z(a,b){F.call(this);this.Na=a||"div";this.i=b?b.split(" "):[];this.D=!1;this.i.push("H_el")}u(Z,F);t("H.ui.base.Element",Z);Z.prototype.Y=function(a){if(!a)throw Error("Wrong document object");this.N=au(a,this.Na,this.i.join(" "));this.renderInternal(this.N,a);this.Aa(this.hc(),!0);Bu(this,this.ea);this.sb(this.c);return this.N};Z.prototype.sa=function(){};Z.prototype.K=function(){};Z.prototype.X=function(){};Z.prototype.renderInternal=Z.prototype.X;Z.prototype.hc=function(){return this.D};\nZ.prototype.isDisabled=Z.prototype.hc;Z.prototype.Aa=function(a,b){a=!!a;if(a!==this.D||b)(this.D=a)?this.Ja("H_disabled"):this.kb("H_disabled");return this};Z.prototype.setDisabled=Z.prototype.Aa;Z.prototype.C=null;Z.prototype.getData=function(){return this.C};Z.prototype.getData=Z.prototype.getData;Z.prototype.setData=function(a){this.C=a};Z.prototype.setData=Z.prototype.setData;function Bu(a,b){var c=a.J();a.ea=b;c&&(b?c.setAttribute("title",b):c.removeAttribute("title"))}\nZ.prototype.N=null;Z.prototype.J=function(){return this.N};Z.prototype.getElement=Z.prototype.J;Z.prototype.c=!0;Z.prototype.sb=function(a){var b=this.J();this.c=a;b&&(b.style.display=a?"":"none")};Z.prototype.setVisibility=Z.prototype.sb;Z.prototype.wc=function(){return this.c};Z.prototype.getVisibility=Z.prototype.wc;Z.prototype.Ja=function(a){var b=this.J();0>this.i.indexOf(a)&&this.i.push(a);b&&(b.className=this.i.join(" "));return this};Z.prototype.addClass=Z.prototype.Ja;\nZ.prototype.kb=function(a){a=this.i.indexOf(a);var b=this.J();-1<a&&this.i.splice(a,1);b&&(b.className=this.i.join(" "));return this};Z.prototype.removeClass=Z.prototype.kb;function Cu(a){(a=a.J())&&a.parentNode&&a.parentNode.removeChild(a)}Z.prototype.u=function(){Z.l.u.call(this);Cu(this);this.ea=this.C=this.N=null};function Du(a,b,c){Z.call(this,a,b);this.b=c?c.concat():[]}u(Du,Z);t("H.ui.base.Container",Du);Du.prototype.Aa=function(a,b){var c=this.b?this.b.length:0;for(Z.prototype.Aa.call(this,a,b);c--;)this.b[c].Aa(a,b);return this};Du.prototype.setDisabled=Du.prototype.Aa;Du.prototype.Ia=function(a){var b=this.J();this.b.push(a);b&&(a.Y(b.ownerDocument),b.appendChild(a.J()));return this};Du.prototype.addChild=Du.prototype.Ia;Du.prototype.dh=function(){return this.b.concat()};\nDu.prototype.getChildren=Du.prototype.dh;Du.prototype.removeChild=function(a){var b=this.b.indexOf(a),c=this.J();0<=b&&(this.b.splice(b,1),c&&c.removeChild(a.J()))};Du.prototype.removeChild=Du.prototype.removeChild;Du.prototype.qa=function(){var a=this.J();a&&this.b.forEach(function(b){a.removeChild(b.J())});this.b=[]};Du.prototype.X=function(a,b){for(var c=0,d=this.b.length;c<d;c++)a.appendChild(this.b[c].Y(b))};Du.prototype.renderInternal=Du.prototype.X;\nDu.prototype.u=function(){this.qa();this.b.forEach(this.U,this);Z.prototype.u.call(this)};Du.prototype.U=function(a){a.B()};function Eu(a){C(a,Oe,Eu,1);Z.call(this,"div","H_context_menu_item");this.b=a;this.f=A(this.f,this);this.a=A(this.a,this);this.b.addEventListener("update",this.a)}u(Eu,Z);t("H.ui.context.Item",Eu);Eu.prototype.f=function(a){var b=this.b,c=b.callback;c&&!b.isDisabled()&&(this.dispatchEvent("click"),c(a))};Eu.prototype.X=function(){var a=this,b=this.J();Ae(b,"click",this.f);b.addEventListener("keyup",function(c){13==c.keyCode&&a.f(c)});this.a()};Eu.prototype.renderInternal=Eu.prototype.X;\nEu.prototype.a=function(){var a=this.J(),b=this.b;b.callback?(this.Ja("clickable"),a.setAttribute("tabindex","0")):(this.kb("clickable"),a.removeAttribute("tabindex"));b.isDisabled()?this.Ja("disabled"):this.kb("disabled");b=b.getLabel();Fu.textContent=b;a.innerHTML=Fu.innerHTML.split("\\n").join("<br/>")};Eu.prototype.u=function(){Z.prototype.u.call(this);this.b.removeEventListener("update",this.a)};function Gu(a){C(a,Array,Gu,1);Du.call(this,"div","H_context_menu");this.f=a;this.a=null}u(Gu,Du);t("H.ui.context.Menu",Gu);Gu.prototype.X=function(){Du.prototype.X.apply(this,arguments);this.f.forEach(function(a){a===Pe?a=new Z("div","H_context_menu_item_separator"):(a=new Eu(a),a.addEventListener("click",this.g.bind(this)));this.Ia(a)},this);Ae(this.J(),["mousedown","touchstart","pointerdown","wheel"],function(a){a.stopPropagation()})};Gu.prototype.renderInternal=Gu.prototype.X;\nGu.prototype.setPosition=function(a,b){if(this.a){var c=this.J();var d=c.offsetWidth;var e=c.offsetHeight;var f=this.a;var g=f.za.width;f=f.za.height;a+d>g&&a>g/2&&(a-=d);b+e>f&&b>f/2&&(b-=e);Yt(c,a,b)}};Gu.prototype.setPosition=Gu.prototype.setPosition;Gu.prototype.g=function(){this.a&&this.a.dispatchEvent(new qd("contextmenuclose",this.a))};Gu.prototype.Ha=function(a){this.a=a};Gu.prototype.setMap=Gu.prototype.Ha;function Hu(a,b){b=b||{};var c=this;Z.call(this,"div","H_ib H_ib_top");this.s=A(function(d){c.hc()||(c.close(),d.preventDefault())},this);this.update=A(this.update,this);this.g=A(this.g,this);this.setPosition(a);this.bf(b.content);b.onStateChange&&this.addEventListener("statechange",b.onStateChange);this.R(Iu.OPEN)}u(Hu,Z);t("H.ui.InfoBubble",Hu);Hu.prototype.a=null;Hu.prototype.ya=function(){return this.b};Hu.prototype.setPosition=function(a){this.b=Yf(a);this.update()};\nHu.prototype.setPosition=Hu.prototype.setPosition;Hu.prototype.Ha=function(a){this.a=a};\nHu.prototype.X=function(a,b){this.o=au(b,"div","H_ib_body");this.tailEl_=au(b,"div","H_ib_tail");this.j=au(b,"div","H_ib_close H_btn",Ju);this.f=au(b,"div","H_ib_content","&nbsp;");this.o.appendChild(this.j);this.o.appendChild(this.f);tu(this.j,"start",this.s);this.a.b.addEventListener("sync",this.update);this.a.za.addEventListener("sync",this.update);this.a.addEventListener("enginechange",this.g);a.appendChild(this.o);a.appendChild(this.tailEl_);this.bf(this.m)};\nHu.prototype.renderInternal=Hu.prototype.X;Hu.prototype.g=function(){this.v||(this.v=setTimeout(this.update,0))};Hu.prototype.update=function(){var a=this.J(),b=this.a,c,d="none";this.v=0;if(b&&a&&this.getState()===Iu.OPEN){if(c=b.Da(this.b)){var e=c.x;c=c.y;b=b.za.width;if(e>=-b||e<=2*b||c>=-b||c<=2*b)d="",Ku?(a.style.left=e-b+"px",a.style.top=c+"px"):Yt(a,e,c)}a.style.display=d;""===d&&(a.style.visibility="visible")}};var Iu={OPEN:"open",CLOSED:"closed"};Hu.State=Iu;Hu.prototype.A=Iu.OPEN;\nHu.prototype.getState=function(){return this.A};Hu.prototype.getState=Hu.prototype.getState;Hu.prototype.R=function(a){a!==this.A&&(this.A=a,this.dispatchEvent("statechange"));if(a=this.J())this.A===Iu.OPEN?(a.style.display="block",a.style.visibility="hidden",this.g()):a.style.display="none"};Hu.prototype.setState=Hu.prototype.R;Hu.prototype.close=function(){this.R(Iu.CLOSED)};Hu.prototype.close=Hu.prototype.close;Hu.prototype.open=function(){this.R(Iu.OPEN)};Hu.prototype.open=Hu.prototype.open;\nHu.prototype.am=function(){return this.f||null};Hu.prototype.getContentElement=Hu.prototype.am;\nHu.prototype.bf=function(a){if(a)if("string"===typeof a||"number"===typeof a.nodeType&&"string"===typeof a.nodeName)this.m=a;else throw Error("InfoBubble content must be a string or HTML node.");else this.m=void 0;this.J()&&(this.m?(this.f.innerHTML="","string"===typeof this.m?this.f.innerHTML=a:"number"===typeof a.nodeType&&"string"===typeof a.nodeName&&this.f.appendChild(a)):this.f.innerHTML="&nbsp;",this.g())};Hu.prototype.setContent=Hu.prototype.bf;\nHu.prototype.u=function(){this.close();this.bf(null);this.j&&uu(this.j,"end",this.s);this.a&&(this.a.b.removeEventListener("sync",this.update),this.a.za.removeEventListener("sync",this.update));Z.prototype.u.call(this)};var Ju=\'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>\';function Lu(a){this.c=a;this.a=this.b=null;this.i=0;this.g=22;this.f=A(this.f,this);a=this.c.sc();a.addEventListener("mapviewchange",this.o,!1,this);a=a.a;a.addEventListener("add",this.j,!1,this);a.addEventListener("remove",this.m,!1,this)}function Mu(a,b){a.b&&b&&a.b===b.na()||(a.b&&a.b.removeEventListener("tap",a.f),b?(a.b=b.na(),a.b.addEventListener("tap",a.f),a.i=a.b.min,a.g=a.b.max):(a.b=null,a.i=0,a.g=22))}\nLu.prototype.o=function(a){var b=a.newValue.zoom;this.a&&a.modifiers&a.ZOOM&&(b<this.i||b>this.g)&&this.a.close()};Lu.prototype.j=function(a){a=a.added;Nu(a)&&Mu(this,a)};Lu.prototype.m=function(a){Nu(a.removed)&&(this.a&&this.a.close(),Mu(this,null))};function Nu(a){return window.H.service&&a.na()instanceof window.H.service.traffic.incidents.Provider}\nLu.prototype.f=function(a){var b;if(a.target&&(b=a.target.getData())&&0===a.currentPointer.button){this.a||(this.a=new Hu(a.target.$()),this.a.Ja("H_tib"),this.c.aj(this.a));this.a.setPosition(a.target.$());var c=b.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_");this.c.xa().th("traffic."+c)&&(c=this.c.xa().translate("traffic."+c));this.a.bf(\'<div class="H_tib_content"><div class="H_rdo_title">{{title}}</div><div class="H_tib_desc"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>\'.replace("{{title}}",\nc).replace("{{desc}}",b.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.xa().translate("traffic.from")).replace("{{traffic.until}}",this.c.xa().translate("traffic.until")).replace("{{from}}",b.START_TIME).replace("{{until}}",b.END_TIME));this.a.open()}a.stopPropagation()};function Ou(a,b){var c=a.J(),d=this;F.call(this);this.a=a;this.i=c.ownerDocument;this.f={};this.c=[];new Lu(this);this.N=au(this.i,"div","H_ui");this.G=A(function(e){this.o.put(e.target,e.target.Nc)},this);this.addEventListener("alignmentchange",this.G);this.D=A(function(){this.hl()},this);this.addEventListener("toggleunitsystem",this.D);this.N.addEventListener("contextmenu",this.s,!1);this.N.addEventListener("MSHoldVisual",this.s,!1);this.a.addEventListener("contextmenu",this.C,!1,this);this.a.addEventListener("contextmenuclose",\nthis.v,!1,this);this.a.tb(this.B.bind(this));this.b=null;this.m=-1;this.o=new $t(this.N,this.i);this.g=mu.METRIC;Pu(this,"en-US");b&&Qu(this,b);c.appendChild(this.N);x.setTimeout(function(){d.o.update()},1)}u(Ou,F);t("H.ui.UI",Ou);Ou.prototype.s=function(a){for(var b=a.target;b&&!/\\bH_ib_content\\b/.test(b.className);)b=b.parentNode;b||a.preventDefault()};Ou.prototype.J=function(){return this.N};Ou.prototype.getElement=Ou.prototype.J;Ou.prototype.sc=function(){return this.a};\nOu.prototype.getMap=Ou.prototype.sc;Ou.prototype.Zm=function(){return this.g};Ou.prototype.getUnitSystem=Ou.prototype.Zm;Ou.prototype.pg=function(a){var b=this.f,c;if(a!==this.g)for(c in this.g=a,b)if(b[c]instanceof Ru)b[c].onUnitSystemChange(this.g)};Ou.prototype.setUnitSystem=Ou.prototype.pg;\nfunction Pu(a,b){if(yc(b))var c=b;else if(b instanceof Au){c=b.b;var d=b}else throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");if(c)if(d)a.j=d;else if(0<=vu.indexOf(c))a.j=new Au(c);else throw Error("Locale ["+c+"] is not supported.");else throw Error("No locale was defined.");}Ou.prototype.xa=function(){return this.j};Ou.prototype.hl=function(){this.g===mu.METRIC?this.pg(mu.IMPERIAL):this.pg(mu.METRIC)};Ou.prototype.toggleUnitSystem=Ou.prototype.hl;\nOu.prototype.aj=function(a){var b=this.c.length,c=this.N;if(0>this.c.indexOf(a)){a.ga(this);a.Ha(this.a);var d=a.Y(this.i);b=0<b?this.c[b-1].J().nextSibling:this.N.firstChild;c.insertBefore(d,b);this.c.push(a)}};Ou.prototype.addBubble=Ou.prototype.aj;\nOu.prototype.C=function(a){var b=a.items;this.b&&this.v();clearTimeout(this.m);this.m=x.setTimeout(function(){b.length&&(this.b=new Gu(b),this.N.insertBefore(this.b.Y(this.i),this.N.firstChild),this.b.ga(this),this.b.Ha(this.a),this.b.setPosition(a.viewportX,a.viewportY))}.bind(this),0)};Ou.prototype.v=function(){this.b&&(this.b.B(),this.b=null)};Ou.prototype.Tn=function(a){var b=this.c.indexOf(a);-1<b&&(a.ga(null),a.Ha(null),this.c.splice(b,1),this.N.removeChild(a.J()))};\nOu.prototype.removeBubble=Ou.prototype.Tn;Ou.prototype.Yl=function(){return this.c};Ou.prototype.getBubbles=Ou.prototype.Yl;Ou.prototype.xd=function(a,b){if(this.xe(a))throw Error("A control with name ["+a+"] is already registered.");b.ga(this);b.Ha(this.a);b.Xa=this.j;b.Y(this.i);b.onUnitSystemChange(this.g);this.f[a]=b};Ou.prototype.addControl=Ou.prototype.xd;\nOu.prototype.Vn=function(a){var b=this.xe(a);if(b)b.K(),b.ga(null),b.Ha(null),Cu(b),delete this.f[a];else throw Error("Control ["+a+"] not found in this UI\'s controls.");return b};Ou.prototype.removeControl=Ou.prototype.Vn;Ou.prototype.xe=function(a){return this.f[a]};Ou.prototype.getControl=Ou.prototype.xe;\nOu.prototype.u=function(){for(var a in this.f)Wt.hasOwnProperty.call(this.f,a)&&this.f[a].B();this.c.forEach(function(b){b.B()});(a=this.N.parentNode)&&a.removeChild(this.N);F.prototype.u.call(this);this.N=null};\nfunction Qu(a,b){var c,d;b.unitSystem&&a.pg(b.unitSystem);(d=b.locale)&&Pu(a,d);(c=b.zoom)&&a.xd("zoom",new Su(Ca(c)?c:null));(c=b.zoomrectangle)&&a.xd("zoomrectangle",new Tu(Ca(c)?c:null));(c=b.mapsettings)&&a.xd("mapsettings",new Uu(Ca(c)?c:null));(c=b.scalebar)&&a.xd("scalebar",new Vu(Ca(c)?c:null));(c=b.distancemeasurement)&&a.xd("distancemeasurement",new Wu(Ca(c)?c:null))}\nOu.prototype.capture=function(a,b,c,d){var e=this.xe("scalebar"),f=a.getContext("2d"),g=a.width,h=a.height,k=this.a.m,l=5+(k?k.J().childNodes[1].offsetHeight:0);e&&e.wc()?e.capture(b,function(m){f.drawImage(m,g-m.width-5*b,h-m.height-l*b);c(a)},d):c(a)};Ou.prototype.capture=Ou.prototype.capture;\nOu.createDefault=function(a,b,c){var d=a.dc().type;c=new Ou(a,{unitSystem:mu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Xu(d,b,a.c),scalebar:{alignment:"bottom-right"},locale:c||"en-US"});if(d===El.P2D){var e=c.xe("mapsettings");var f=function(){if(e.sc()){var g=Xu(d,b,a.c);Yu(e,g.baseLayers,g.layers)}};a.addEventListener(a.o.mf,f);c.tb(function(){a.removeEventListener(a.o.mf,f)});e.tb(function(){a.removeEventListener(a.o.mf,f)})}return c};\nfunction Xu(a,b,c){var d=b.raster;b=b.vector.normal;var e;if(a===El.P2D){a=[{label:"layers.normal",layer:d.normal.map},{label:"layers.satellite",layer:d.satellite.map},{label:"layers.terrain",layer:d.terrain.map}];if(c)for(e in d)if(d[e].map===c){var f=e;break}c=[{label:"layer.incidents",layer:d.normal.trafficincidents},{label:"layer.transit",layer:f&&d[f].transit}]}else a=[{label:"layers.normal",layer:b.map},{label:"layers.satellite",layer:d.satellite.map}],c=[{label:"layer.traffic",layer:b.traffic},\n{label:"layer.incidents",layer:b.trafficincidents}];return{alignment:"bottom-right",baseLayers:a,layers:c}};function Zu(a){a=a||{};Z.call(this,"div","H_btn");this.Ic(a.label||" ");Bu(this,a.tooltip||"");this.setData(a.data);this.Aa(!!a.disabled);this.R($u.UP,!0);a.onStateChange&&this.addEventListener("statechange",a.onStateChange);this.f=A(this.f,this);this.b=A(this.b,this)}u(Zu,Z);t("H.ui.base.Button",Zu);Zu.prototype.Aa=function(a,b){a&&this.kb("H_active");return Zu.l.Aa.call(this,a,b)};\nZu.prototype.X=function(a){tu(a,"start",this.f);tu(a,"end",this.b);tu(a,"out",this.b);this.Ic(this.Be(),!0)};Zu.prototype.renderInternal=Zu.prototype.X;Zu.prototype.getState=function(){return this.A};Zu.prototype.getState=Zu.prototype.getState;Zu.prototype.R=function(a,b){a!==this.A&&(this.A=a,a===$u.DOWN?this.Ja("H_active"):this.kb("H_active"),b||this.dispatchEvent("statechange"));return this};Zu.prototype.setState=Zu.prototype.R;Zu.prototype.Be=function(){return this.a};\nZu.prototype.getLabel=Zu.prototype.Be;Zu.prototype.Ic=function(a,b){if(b||a!==this.a)if(this.a=a,b=this.J())b.innerHTML=a;return this};Zu.prototype.setLabel=Zu.prototype.Ic;Zu.prototype.f=function(a){this.hc()||this.R($u.DOWN);a.preventDefault()};Zu.prototype.b=function(a){this.hc()||this.R($u.UP);a.preventDefault()};Zu.prototype.u=function(){var a=this.J();a&&(uu(a,"start",this.f),uu(a,"end",this.b),uu(a,"out",this.b));Z.prototype.u.call(this)};var $u={UP:"up",DOWN:"down"};Zu.State=$u;function av(a){a=a||{};var b;this.f=!!a.vertical;this.U=a.length||"16em";this.a=Bc(b=a.min)?b:0;this.m=vd(this.a,Bc(b=a.max)?b:100);this.ja=E(b=a.step)?1:b;this.o=bv(this,Bc(b=a.value)?b:(this.a+this.m)/2);this.Zf=A(this.Zf,this);this.Vf=A(this.Vf,this);this.ag=A(this.ag,this);this.$f=A(this.$f,this);this.b=a.pointerArea;Z.call(this,"div","H_slider"+(this.f?"":" H_l_horizontal"))}u(av,Z);t("H.ui.base.Slider",av);\nav.prototype.qg=function(a,b){var c=this.f,d=c?"top":"left";if(!this.g||b)a=Xd(a,this.a,this.m),this.j&&(b=100*(a-this.a)/(this.m-this.a),c=(c?-1:1)*b,this.j.style[d]=c+"%",this.Xa.style[d]=100+c+"%"),this.o=bv(this,a);return this.o};av.prototype.setValue=av.prototype.qg;av.prototype.$m=function(){return this.o};av.prototype.getValue=av.prototype.$m;function cv(a){a.v||(tu(a.J(),"start",a.Zf),tu(a.b,"move",a.Vf),tu(a.b,"end",a.ag),tu(a.b,"out",a.$f),a.v=!0)}\nfunction dv(a){a.v&&(uu(a.J(),"start",a.Zf),uu(a.b,"move",a.Vf),uu(a.b,"end",a.ag),uu(a.b,"out",a.$f),a.v=!1)}function bv(a,b){var c=a.ja;b=Xd(b,a.a,a.m);return c?a.a+wd((b-a.a)/c)*c:b}function ev(a,b){var c=a.G,d=a.f;a.s||(a.s=c["offset"+(d?"Height":"Width")]);b-=Xt(c)[d?"y":"x"];0>b&&(b=0);b=(a.m-a.a)*b/a.s;b=bv(a,d?a.m-b:a.a+b);a.o!==b&&(a.qg(b,!0),a.dispatchEvent(new Mg(a.hk.ad,b,a.o)))}function fv(a,b){return(b.touches?b.targetTouches[0]:b)["page"+(a.f?"Y":"X")]}\nfunction gv(a){var b=!1,c=a.type;-1!==c.indexOf("pointer")||-1!==c.indexOf("touch")?b=!0:C(a,MouseEvent)&&(b=1===a.which||1===a.buttons);return b}function hv(a){var b=a.touches;return b&&1===b.length||C(a,MouseEvent)}n=av.prototype;\nn.Zf=function(a){var b=this.f;if(gv(a)&&hv(a)){var c=fv(this,a);var d=a.target;d===this.j||d.parentElement===this.j?(this.I=c-Xt(this.j)[b?"y":"x"]-this.j.offsetWidth/2,this.J().className="H_slider H_slider_active"+(this.f?"":" H_l_horizontal"),this.g=!0):ev(this,c);a.preventDefault()}};n.ag=function(){this.g&&(this.J().className="H_slider "+(this.f?"":" H_l_horizontal"),this.g=!1)};n.$f=function(a){this.g&&a.target===this.b&&(this.g=!1)};\nn.Vf=function(a){this.g&&hv(a)&&(gv(a)?(ev(this,fv(this,a)-this.I),a.preventDefault()):this.g=!1)};n.hk={ad:"change"};\nn.X=function(a,b){var c=au(b,"div","H_slider_cont"),d=au(b,"div","H_slider_knob_cont"),e=au(b,"div","H_slider_knob"),f=au(b,"div","H_slider_knob_halo"),g=au(b,"div","H_slider_track");b=au(b,"div","H_slider_track H_slider_track_active");a.appendChild(c);c.appendChild(g);g.appendChild(b);c.appendChild(d);d.appendChild(e);d.appendChild(f);this.G=g;this.Xa=b;this.j=d;this.b||(this.b=a.ownerDocument.body);c.style[this.f?"height":"width"]=this.U;this.qg(this.o);cv(this)};\nav.prototype.renderInternal=av.prototype.X;av.prototype.u=function(){dv(this)};av.prototype.Aa=function(a,b){a?dv(this):this.G&&cv(this);return Z.prototype.Aa.call(this,a,b)};av.prototype.setDisabled=av.prototype.Aa;var iv={"in":\'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>\',out:\'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>\'};function Ru(){Du.call(this,"div","H_ctl");this.map=null;this.Nc="top-left"}u(Ru,Du);t("H.ui.Control",Ru);Ru.prototype.Ha=function(a){this.map=a};Ru.prototype.Y=function(a){return Du.prototype.Y.call(this,a)};Ru.prototype.X=function(a,b){Du.prototype.renderInternal.call(this,a,b);this.Wb(this.Nc)};Ru.prototype.renderInternal=Ru.prototype.X;Ru.prototype.Me=function(){};Ru.prototype.onUnitSystemChange=Ru.prototype.Me;Ru.prototype.sc=function(){return this.map};Ru.prototype.getMap=Ru.prototype.sc;\nRu.prototype.xa=function(){return this.Xa};Ru.prototype.getLocalization=Ru.prototype.xa;Ru.prototype.Tl=function(){return this.Nc};Ru.prototype.getAlignment=Ru.prototype.Tl;Ru.prototype.Wb=function(a){"string"===typeof a&&Zt[a.replace("-","_").toUpperCase()]===a&&(this.Nc=a,this.dispatchEvent("alignmentchange"));return this};Ru.prototype.setAlignment=Ru.prototype.Wb;function Su(a){a=a||{};var b=a.slider;Ru.call(this);this.o=A(this.o,this);this.g=A(this.g,this);this.a=A(this.a,this);b&&(this.s=A(this.s,this),this.G=b,this.Pa=a.sliderSnaps,this.Ja("H_zoom_slider"));this.j=new Zu({label:iv["in"],onStateChange:this.o});this.v=new Zu({label:iv.out,onStateChange:this.o});this.Ja("H_zoom");this.Ja("H_grp");this.ja=!1!==a.fractionalZoom;this.setZoomSpeed(a.zoomSpeed||4);this.Wb(a.alignment||"right-middle")}u(Su,Ru);t("H.ui.ZoomControl",Su);\nSu.prototype.dn=function(){return this.I};Su.prototype.getZoomSpeed=Su.prototype.dn;Su.prototype.io=function(a){this.I=a};Su.prototype.setZoomSpeed=Su.prototype.io;Su.prototype.Ha=function(a){this.map!==a&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),jv(this));Ru.prototype.Ha.apply(this,arguments);this.map&&(this.a(),a.addEventListener("mapviewchange",this.g),a.addEventListener("baselayerchange",this.a))};Su.prototype.setMap=Su.prototype.Ha;\nSu.prototype.u=function(){Ru.prototype.u.apply(this,arguments);this.map.removeEventListener("baselayerchange",this.a);jv(this)};Su.prototype.X=function(a,b){Ru.prototype.renderInternal.call(this,a,b);Bu(this.j,this.xa().translate("zoom.in"));Bu(this.v,this.xa().translate("zoom.out"))};Su.prototype.renderInternal=Su.prototype.X;Su.prototype.Wb=function(a){var b=this.Nc;Ru.prototype.Wb.call(this,a);b!==a&&this.a();return this};Su.prototype.setAlignment=Su.prototype.Wb;\nSu.prototype.g=function(){var a=this.map,b=a.ob(),c=a.Za()-1;a=a.c||a.dc().getCapabilities().lookAt.zoom;this.G&&this.f.qg(b);this.hc()||(this.j.Aa(b+c>=a.max),this.v.Aa(b<=a.min))};Su.prototype.Aa=function(a,b){Su.l.Aa.call(this,a,b);this.g();return this};Su.prototype.setDisabled=Su.prototype.Aa;function jv(a){a.removeChild(a.f);a.f=null;a.m&&(a.m.removeEventListener("minchange",a.a),a.m.removeEventListener("maxchange",a.a),a.m=null)}\nSu.prototype.o=function(a){a=a.target;var b=a===this.j?1:-1,c=0<b?Math.ceil:Math.floor,d=this.map,e,f=this;d&&("down"===a.getState()?(d.b.startControl(),d.b.control(0,0,b*this.I,0,0,0)):d.b.endControl(!0,function(g){e=f.ja?g.zoom:c(g.zoom);g.zoom=e}))};Su.prototype.s=function(a){this.map&&this.map.ff(a.newValue)};\nSu.prototype.a=function(){var a=this.Nc,b=this.sc();if(/^top/g.test(a)||/^bottom/g.test(a)){var c=this.v;a=this.j;var d=!1}else c=this.j,a=this.v,d=!0;this.removeChild(c);this.removeChild(a);this.Ia(c);if(this.G&&b){jv(this);b=d;var e=(d=(c=this.map)&&c.c)||c.dc().getCapabilities().lookAt.zoom;if(this.m=d)d.addEventListener("minchange",this.a),d.addEventListener("maxchange",this.a);this.f=new av({step:this.Pa?1:0,vertical:b,min:e.min,max:e.max,value:c.ob(),pointerArea:c.J()});this.f.addEventListener(this.f.hk.ad,\nthis.s);this.Ia(this.f)}this.Ia(a)};var kv={btn:\'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>\',\npoint:\'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>\'};function lv(a){Zu.call(this,a);this.j=function(b){b.preventDefault()};this.g=A(function(b){this.hc()||this.toggleState();b.preventDefault()},this)}u(lv,Zu);t("H.ui.base.PushButton",lv);lv.prototype.X=function(a){tu(a,"start",this.g);tu(a,"end",this.j);this.Ic(this.Be(),!0)};lv.prototype.renderInternal=lv.prototype.X;lv.prototype.qo=function(){var a=$u.DOWN;this.R(this.getState()===a?$u.UP:a);return this};lv.prototype.toggleState=lv.prototype.qo;\nlv.prototype.u=function(){var a=this.J();a&&uu(a,"start",this.g);Zu.prototype.u.call(this)};var Ku,mv=navigator.userAgent,nv=-1<mv.indexOf("Android")&&-1<mv.indexOf("Mozilla/5.0")&&-1<mv.indexOf("AppleWebKit"),ov=/AppleWebKit\\/([\\d.]+)/,pv=null===ov.exec(mv)?null:parseFloat(ov.exec(mv)[1]);Ku=nv&&null!==pv&&537>pv;var qv=Function("return this")(),Fu=document.createElement("T");function rv(a,b,c){ei.call(this,a,{icon:sv,visibility:c});tv(this,b)}u(rv,ei);function tv(a,b){a.sn=b;a.N&&(a.N.textContent=b)}var sv=new Wh(au(qv.document,"span","H_dm_label"),{onAttach:function(a,b,c){c.N=a;tv(c,c.sn)},onDetach:function(a,b,c){delete c.N}});function uv(a,b){F.call(this);this.f=a;this.a=new rv(this.K,"");b.push(this.a);this.b=new P({objects:b,data:this});this.j=this.j.bind(this)}u(uv,F);uv.prototype.g=!1;uv.prototype.K={lat:0,lng:0};uv.prototype.Ic=function(a,b){tv(this.a,a);this.a.ba(b)};uv.prototype.j=function(){this.a.sb(this.c)};function vv(a,b){b&&(a.nextSibling=b,b.previousSibling=a)};function wv(a,b,c,d){var e=new L,f=[];vv(a,this);vv(this,b);e.pd(a.ya());e.pd(b.ya());this.i=new nh(e,{style:c.Vd});this.v=new nh(e,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.i.wa().lineWidth+2*(d||5))}});c.c&&(this.o=new nh(e,{style:c.c}),f.push(this.o));f.push(this.i,this.v);uv.call(this,c,f);this.C=this.s=-1;a=this.b;a.addEventListener("pointermove",this.D,!0,this);a.addEventListener("pointerleave",this.G,!0,this)}u(wv,uv);wv.prototype.ze=function(){var a=this.i.$();return a.qe(0).Ya(a.qe(1))};\nfunction xv(a,b,c){var d=a.i.$();d.hf(3*c,3,[b.lat,b.lng,0]);a.o&&a.o.ba(d);a.v.ba(d);a.i.ba(d)}wv.prototype.D=function(a){var b=a.currentPointer;a=this.previousSibling.ya();var c=this.nextSibling.ya(),d=this.f.f,e=b.viewportX;b=b.viewportY;if(this.s!==e||this.C!==b)this.s=e,this.C=b,d.ba(this.f.g(a,c,{x:e,y:b})),d.sb(!0)};wv.prototype.G=function(){this.f.f.sb()};wv.prototype.mi=function(){this.Ic(this.f.a(this.ze()),this.i.F().jb())};function yv(a,b,c){c=b.b(c||0);this.i=new xn(a,{icon:c,zIndex:0});this.i.draggable=!0;uv.call(this,b,[this.i]);a=this.b;a.addEventListener("dragstart",this.Cn,!0,this);a.addEventListener("drag",this.Dn,!0,this);a.addEventListener("dragend",this.Bn,!0,this)}u(yv,uv);n=yv.prototype;n.qj=0;n.Sh={ad:"change"};n.ze=function(){return this.qj};n.ya=function(){return this.i.$()};\nfunction zv(a){var b=0;a.nextSibling&&a.previousSibling&&(a.nextSibling.g||a.previousSibling.g?a.nextSibling.g&&!a.previousSibling.g&&(b=2):b=1);b=a.f.b(b);a.i.Hc(b)}n.Dn=function(a){var b=a.currentPointer;a=b.viewportX;b=b.viewportY;if(this.v!==a||this.s!==b)this.v=a,this.s=b,this.i.ba(this.f.map.Wa(a-this.o.x,b-this.o.y)),this.dispatchEvent(new qd(this.Sh.ad,this))};\nn.Cn=function(a){var b=a.currentPointer,c=b.viewportX;b=b.viewportY;var d=this.f.map.Da(this.ya());this.i.ef(1);this.o={x:c-d.x,y:b-d.y};a.stopPropagation()};n.Bn=function(){this.i.ef(0)};n.mi=function(a){this.qj=a;this.Ic(this.f.a(a),this.ya())};function Av(a,b){this.c=b;this.b=a;this.a={previousSibling:null,nextSibling:null,g:!0};Bv(this,this.a);this.Yf=A(this.Yf,this)}t("H.ui.distanceMeasurement.Model",Av);n=Av.prototype;n.Rf=function(){return this.a.nextSibling===this.a};function Cv(a,b){a=a.a;for(var c=a.nextSibling;c!==a;){var d=c,e=c.previousSibling===a?!1:b;(d.c=e)?d.j():(d.m&&x.clearTimeout(d.m),d.m=x.setTimeout(d.j,100));c=c.nextSibling}}\nfunction Dv(a,b){var c=b||a.a.nextSibling,d=0,e=0;if(b&&!Ev(a,b))throw new D(a.Ue,0,b);c instanceof yv?d=c.ze():c instanceof wv&&(d=c.previousSibling.ze());for(b=c;b&&b!==a.a;b=b.nextSibling,e++)b.mi(d),1===e%2&&(d+=b.ze())}n.je=function(a){var b=this.a.previousSibling,c=this.Rf();a=new yv(a,this.c,c?0:2);this.b.ca(a.b);vv(a,this.a);a.addEventListener(a.Sh.ad,this.Yf);c?Bv(this,a):(Fv(this,b,a),zv(b),Dv(this,b));return a};\nn.insertBefore=function(a,b){var c;var d=1;if(b){if(!Ev(this,b))throw new D(this.insertBefore,1,b);if(c=b.previousSibling.g)d=0;a=new yv(a,this.c,d);a.addEventListener(a.Sh.ad,this.Yf);this.b.ca(a.b);c?(c=this.a.nextSibling,Fv(this,a,c),Bv(this,a),b=a,zv(c)):(c=b.previousSibling,b=c.previousSibling,d=c.nextSibling,this.b.Ga(c.b),Fv(this,b,a),Fv(this,a,d));Dv(this,b)}else a=this.je(a);return a};n.qa=function(){Bv(this,this.a);this.b.qa()};\nn.Ue=function(a){var b=this.a,c=a.previousSibling,d=a.nextSibling;if(!Ev(this,a))throw new D(this.Ue,0,a);this.b.Ga(a.b);if(c===b){var e=d;e!==b?(a=e.nextSibling,Bv(this,a),a.mi(0),zv(a),Dv(this,a)):Bv(this,this.a)}else d===b?(e=c,a=e.previousSibling,vv(a,b),zv(a)):c&&d&&(Fv(this,c.previousSibling,d.nextSibling),this.b.qd([d.b,c.b]),Dv(this,c.previousSibling));e&&e!==b&&this.b.Ga(e.b)};function Ev(a,b){for(var c=a.a.nextSibling,d=!1;c!==a.a;){if(c===b){d=!0;break}c=c.nextSibling}return d}\nfunction Fv(a,b,c){b=new wv(b,c,a.c);a.b.ca(b.b)}function Bv(a,b){a.a.nextSibling=b;b.previousSibling=a.a}n.Yf=function(a){a=a.target;var b=a.previousSibling,c=a.nextSibling,d=a.ya();if(!c.g){xv(c,d,!1);var e=a}b.g||(xv(b,d,!0),e=b.previousSibling);Dv(this,e)};function Wu(a){a=a||{};var b,c=a.lineStyle;Ru.call(this);this.v=new lv({label:kv.btn,onStateChange:A(this.zn,this)});this.Ia(this.v);if(b=a.distanceFormatter)this.pj=b;c&&(this.Vj=c,this.sk=B);this.Wb(a.alignment||"right-bottom");this.m={};this.m[0]=a.startIcon;this.m[2]=a.endIcon;this.m[1]=a.stopoverIcon;this.m[3]=a.splitIcon}u(Wu,Ru);t("H.ui.DistanceMeasurement",Wu);n=Wu.prototype;n.Vj={strokeColor:"rgb(39,44,54)",lineWidth:5};n.sk={strokeColor:"white",lineWidth:7};\nfunction Gv(a){var b=a.map,c,d={};a.g||(a.j=new N,a.f=new pl(a.j,{pixelRatio:a.map.Za()}),a.s=c=a.j.fc(),a.s.Xk(!0),c.addEventListener("dragstart",a.xn,!0,a),c.addEventListener("dragend",a.gf,!0,a),c.addEventListener("pointerenter",a.gf,!0,a),c.addEventListener("pointerleave",a.yn,!0,a),c.addEventListener("tap",a.Nn,!0,a),a.o=Hv(a),d.a=A(a.pj,a),d.b=A(a.dk,a),d.g=A(a.Aj,a),d.map=a.map,d.f=a.o,d.Vd=a.Vj,d.c=a.sk,a.a=new Av(a.s,d),a.g=!0);a.o&&a.s.ca(a.o);b.addEventListener("tap",a.pk,!0,a);b.a.add(a.f)}\nfunction Iv(a){var b=a.map;a.g&&(b.removeEventListener("tap",a.pk,!0,a),b.Te(a.f),a.a.qa())}function Hv(a){function b(){var h=c.yb();h={anchor:c.fd().clone().scale(f).floor(),size:new Zh(xd(h.w*f),xd(h.h*f)),hitArea:d};return new uj(c.Sc(),h)}var c=a.dk(3),d=new $h(ai.NONE,[]),e,f=c===a.G?.5:1;if(1===c.getState())var g=b();else g=new uj("<svg/>",{hitArea:d}),c.addEventListener("statechange",function(){1===c.getState()&&e.Hc(b())});return e=new xn(a.map.jb(),{visibility:!1,icon:g})}\nn.pj=function(a){var b="m",c=0;"metric"===this.I?1E3<=a&&(a/=1E3,b="km",c=1):(a/=.3048,b="ft",5280<=a&&(a/=5280,b="mi",c=1));return a.toFixed(c)+" "+this.xa().translate("scale."+b)};n.Aj=function(a,b,c){a=this.map.Da(a);b=this.map.Da(b);c=(new I(c.x,c.y)).zj(a,b);return this.map.Wa(c.x,c.y)};\nn.X=function(a,b){var c=22*(this.map.dc().type===tn.WEBGL?1:this.map.Za()),d=c/2;Ru.prototype.renderInternal.call(this,a,b);this.I=mu.METRIC;this.G=new uj(kv.point,{anchor:{x:d,y:d},size:{w:c,h:c},hitArea:new $h(ai.CIRCLE,[d,d,d])});Bu(this.v,this.xa().translate("distance.measurement"))};Wu.prototype.renderInternal=Wu.prototype.X;n=Wu.prototype;n.dk=function(a){return this.m[a]||this.G};n.gf=function(){Cv(this.a,!0)};n.xn=function(){Cv(this.a)};n.yn=function(a){"touch"!==a.currentPointer.type&&Cv(this.a)};\nn.Nn=function(a){var b=a.currentPointer;var c=a.target.Va;var d;c&&(c=c.getData())instanceof uv&&(d=c);c=d;a=a.originalEvent;a=a.metaKey||a.altKey;c&&(a&&c instanceof yv?this.a.Ue(c):c instanceof wv&&(a=c.previousSibling.ya(),d=c.nextSibling.ya(),b={x:b.viewportX,y:b.viewportY},this.a.insertBefore(this.Aj(a,d,b),c.nextSibling),this.o.sb()),this.gf())};\nn.pk=function(a){var b=a.currentPointer;a=a.target;a!==this.map&&a.getProvider&&a.getProvider()===this.j||(this.a.je(this.map.Wa(b.viewportX,b.viewportY)),this.o.sb(),this.gf())};n.zn=function(a){"down"===a.target.getState()?Gv(this):Iv(this)};n.Me=function(a){this.I=a;this.g&&(Dv(this.a),this.gf())};Wu.prototype.onUnitSystemChange=Wu.prototype.Me;Wu.prototype.u=function(){Iv(this);this.g&&(this.j.B(),this.f.B());Wu.l.u.call(this)};\nWu.prototype.Ha=function(a){a?this.v.getState()===$u.DOWN&&(this.map=a,Gv(this)):(Iv(this),this.g=!1);Ru.prototype.Ha.apply(this,arguments)};Wu.prototype.setMap=Wu.prototype.Ha;function Jv(){this.A=Kv.CLOSED;Du.call(this,"div","H_overlay")}u(Jv,Du);t("H.ui.base.OverlayPanel",Jv);Jv.prototype.R=function(a,b){if(a!==this.A||b)this.A=a,a===Kv.OPEN?this.Ja("H_open"):this.kb("H_open");return this};Jv.prototype.setState=Jv.prototype.R;Jv.prototype.getState=function(){return this.A};Jv.prototype.getState=Jv.prototype.getState;\nJv.prototype.wk=function(a){var b=a.Nc;a=a.J();var c=this.J(),d=c.style;this.kb("H_top");this.kb("H_middle");this.kb("H_bottom");this.kb("H_left");this.kb("H_center");this.kb("H_right");d.bottom=d.top=d.left=d.right=d.margin="";if(/top/g.test(b)){this.Ja("H_top");d.top="0";d.margin="0 12px";var e=-1}else/bottom/g.test(b)?(this.Ja("H_bottom"),d.bottom="0",d.margin="0 12px",e=1):(this.Ja("H_middle"),d.top="50%",d.margin="0 12px",d.marginTop=-Math.round(.5*\nc.offsetHeight)+"px",e=0);/left/g.test(b)?(this.Ja("H_left"),d.left=a.offsetWidth+"px",d.marginLeft="12px"):/right/g.test(b)?(this.Ja("H_right"),d.right=a.offsetWidth+"px",d.marginRight="12px"):(this.Ja("H_center"),d.left="50%",0>e?(d.top=a.offsetHeight+"px",d.marginTop="12px"):0<e&&(d.bottom=a.offsetHeight+"px",d.marginBottom="12px"),d.marginLeft=-Math.round(.5*c.offsetWidth)+"px",a.appendChild(c))};Jv.prototype.pointToControl=Jv.prototype.wk;var Kv={OPEN:"open",CLOSED:"closed"};\nJv.State=Kv;function Lv(a){a=a||{};Du.call(this,"div","H_rdo");this.g=new Z("div","H_rdo_title");this.a=new Du("div","H_rdo_buttons");this.Ia(this.g);this.Ia(this.a);this.j=A(function(b){b.target.getState()===$u.DOWN?(this.Ik(b.target,!0),this.dispatchEvent(Mv)):b.target.R($u.DOWN,!0)},this);this.addEventListener("statechange",this.j);this.Ai(a.title||"");a.onActiveButtonChange&&this.addEventListener(Mv,a.onActiveButtonChange);a.buttonsOptions&&a.buttonsOptions.forEach(function(b){this.Bg(new lv(b))},\nthis)}u(Lv,Du);t("H.ui.base.RadioGroup",Lv);var Mv="activebuttonchange";Lv.prototype.X=function(a,b){Du.prototype.renderInternal.call(this,a,b);this.Ai(this.f,!0)};Lv.prototype.renderInternal=Lv.prototype.X;Lv.prototype.qa=function(){this.a.qa()};Lv.prototype.Ai=function(a,b){if(a!==this.f||b)this.f=a,this.g.J()&&(this.g.J().innerHTML=this.f);return this};Lv.prototype.setTitle=Lv.prototype.Ai;Lv.prototype.Wm=function(){return this.f};Lv.prototype.getTitle=Lv.prototype.Wm;\nLv.prototype.Bg=function(a){if(!(a instanceof lv))throw Error("PushButton expected");a.ga(this);this.a.Ia(a);return this};Lv.prototype.addButton=Lv.prototype.Bg;Lv.prototype.Un=function(a){this.a.removeChild(a);a.ga(null);return this};Lv.prototype.removeButton=Lv.prototype.Un;Lv.prototype.Ef=function(){return this.a.dh()};Lv.prototype.getButtons=Lv.prototype.Ef;Lv.prototype.Ik=function(a,b){for(var c=this.Ef(),d=c.length;d--;)c[d].R(c[d]===a?$u.DOWN:$u.UP,b)};Lv.prototype.setActiveButton=Lv.prototype.Ik;\nLv.prototype.u=function(){this.removeEventListener("statechange",this.j);this.qa();Du.prototype.u.call(this)};function Uu(a){a=a||{};Ru.call(this);this.f=new Jv;new Lv;this.a=this.a.bind(this);this.o=this.o.bind(this);this.v=this.v.bind(this);this.Wb(a.alignment||"bottom-right");Yu(this,a.baseLayers,a.layers)}u(Uu,Ru);t("H.ui.MapSettingsControl",Uu);function Yu(a,b,c){var d=a.sc();a.g&&a.g.forEach(function(e){var f=e.layer;e=f&&Vt(c,function(g){return g.layer===f});f&&!e&&d.Te(f)});a.m=xc(b)?b:[];a.g=xc(c)?c:[];a.j&&(a.j.qa(),a.s.qa(),Nv(a))}\nUu.prototype.sa=function(){var a=this.sc();a&&(a.addEventListener("tap",this.o),a=a.a,a.addEventListener("add",this.a),a.addEventListener("remove",this.a),a.addEventListener("set",this.a))};Uu.prototype.K=function(){var a=this.sc();a&&(a.removeEventListener("tap",this.o),a=a.a,a.removeEventListener("add",this.a),a.removeEventListener("remove",this.a),a.removeEventListener("set",this.a))};\nUu.prototype.X=function(a,b){var c=this.xa().translate("layers.choose");Ru.prototype.renderInternal.call(this,a,b);this.sa();this.G=new lv({tooltip:c,label:\'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>\',onStateChange:A(function(d){d.target.getState()===$u.DOWN?(this.f.R(Kv.OPEN),this.f.wk(this)):\nthis.f.R(Kv.CLOSED)},this)});this.j=new Lv({title:c,onActiveButtonChange:function(){a:{var d=this.j.Ef();for(var e=d.length;e--;)if(d[e].getState()===$u.DOWN){d=d[e];break a}d=null}d=d.getData();this.map.ud(this.m[d].layer);this.v()}.bind(this)});this.s=new Du("div","H_grp");this.I=new Z("div","H_separator");this.Ia(this.G);this.Ia(this.f);this.f.Ia(this.j);this.f.Ia(this.I);this.f.Ia(this.s);Nv(this)};Uu.prototype.renderInternal=Uu.prototype.X;\nfunction Nv(a){var b=a.xa();a.m.forEach(function(c,d){this.j.Bg(new lv({label:Ov(b,c.label),data:d,disabled:!c.layer}))},a);a.g.forEach(function(c,d){this.s.Ia(new lv({label:Ov(b,c.label),onStateChange:this.ja.bind(this,c.layer),data:d,disabled:!c.layer}))},a);a.I.sb(!(!a.g.length||!a.m.length));x.setTimeout(function(){this.map&&(this.a(),this.G.Aa(!(this.m&&this.m.length||this.g&&this.g.length)))}.bind(a))}\nUu.prototype.a=function(){var a=this.map.c,b=this.map.a;this.m.forEach(function(c,d){this.j.Ef()[d].R($u[c.layer===a?"DOWN":"UP"],!0)},this);this.g.forEach(function(c,d){d=this.s.dh()[d];c.layer?d.R($u[-1!==b.indexOf(c.layer)?"DOWN":"UP"],!0):d.Aa(!0)},this)};Uu.prototype.ja=function(a,b){b.target.getState()===$u.DOWN?this.map.Dg(a):this.map.Te(a);this.v()};\nUu.prototype.v=function(){var a;if(a=Pv(this)){var b=a.wg;b.na().wa().Ke(a.na().wa().we());this.map.Te(a);a.B();delete a.wg}Qv(this)&&Rv(this,this.map.c)};\nfunction Rv(a,b){var c,d,e={},f=b.na(),g=window.H.service&&window.H.service.omv.Provider;if(g&&b.na()instanceof g){var h=f.wa();var k=function(){var l=Sv.ground.filter(function(q){return!!h.mh("layers."+q)}),m=Sv.water.filter(function(q){return!!h.mh("layers."+q)});l.concat(m).length&&(ti(e,h.Df(l)),ti(e,h.Df(m,!1,!0)),delete e.global,c=new Ij(e,h.gd()),d=f.o.cd(c),d.wg=b,this.map.Dg(d));h.removeEventListener(Xj.CHANGE,k)}.bind(a);h.getState()!==Jj.READY?h.addEventListener(Xj.CHANGE,k):\nk()}}function Pv(a){return Vt(a.map.a.Ka(),function(b){return!!b.wg})}function Qv(a){a=a.map.a.Ka();var b=window.H.service&&window.H.service.traffic.flow.Provider;return!!b&&a.some(function(c){return c.na()instanceof b})}var Sv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function Ov(a,b){return/^layers?/.test(b)&&a.th(b)?a.translate(b):b}Uu.prototype.o=function(){this.G.R($u.UP)};\nUu.prototype.u=function(){Uu.l.u.call(this);this.K()};function Tu(a){a=a||{};Ru.call(this);this.f=new lv({label:\'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>\',\nonStateChange:A(this.An,this)});this.Ia(this.f);this.Wb(a.alignment||"right-bottom")}u(Tu,Ru);t("H.ui.ZoomRectangle",Tu);n=Tu.prototype;\nn.An=function(a){var b=this.map,c=b.za.element;a.target.getState()===$u.DOWN?(b.addEventListener("dragstart",this.fk,!0,this),b.addEventListener("drag",this.gk,!0,this),b.addEventListener("dragend",this.ek,!0,this),a=c.ownerDocument.createElement("div"),a.className="H_zoom_lasso",c.appendChild(a),this.a=a):(b.removeEventListener("dragstart",this.fk,!0,this),b.removeEventListener("drag",this.gk,!0,this),b.removeEventListener("dragend",this.ek,!0,this),c.removeChild(this.a))};\nn.fk=function(a){var b=this.a.style,c=a.currentPointer,d=c.viewportX;c=c.viewportY;a.target===this.map&&(a.stopPropagation(),b.width="0px",b.height="0px",b.top=c+"px",b.left=d+"px",b.display="block",this.j=c,this.g=d)};n.gk=function(a){var b=a.currentPointer,c=b.viewportX,d=b.viewportY;b=this.g;var e=this.j,f=this.a.style;a.target===this.map&&(a.stopPropagation(),a=c-b,c=d-e,f.left=b+(0>a?a:0)+"px",f.top=e+(0>c?c:0)+"px",f.width=Math.abs(a)+"px",f.height=Math.abs(c)+"px")};\nn.ek=function(a){var b=this.map,c=a.currentPointer;a.target===this.map&&(a.stopPropagation(),this.a.style.display="none",b.b.Xb({bounds:dg([b.Wa(this.g,this.j),b.Wa(c.viewportX,c.viewportY)])},!0))};n.X=function(a,b){Ru.prototype.renderInternal.call(this,a,b);Bu(this.f,this.xa().translate("zoom.rectangle"))};Tu.prototype.renderInternal=Tu.prototype.X;function Tv(a,b){b=b||{};if(!(a&&a instanceof gl))throw Error("Base layer is mandatory for overview UI element");Ru.call(this);this.f=new lv({label:\'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>\',onStateChange:A(this.g,this)});this.Ia(this.f);this.a=\nnew Uv(a,b.zoomDelta,b.scaleX,b.scaleY);this.Wb(b.alignment||"right-bottom");this.Ia(this.a)}u(Tv,Ru);t("H.ui.Overview",Tv);Tv.prototype.ud=function(a){this.a.ud(a);return this};Tv.prototype.setBaseLayer=Tv.prototype.ud;Tv.prototype.g=function(a){a.target.getState()===$u.DOWN?(a=this.a,Vv(a,!0),a.Ei(),a.Ja("H_overview_active"),a.a.addEventListener("mapviewchange",a.Ei,!1,a)):Wv(this.a)};\nTv.prototype.X=function(a,b){Ru.prototype.renderInternal.call(this,a,b);this.f.J().style["float"]=this.Nc.match("right")?"right":"left";this.a.Ha(this.map);Bu(this.f,this.xa().translate("minimap"))};Tv.prototype.renderInternal=Tv.prototype.X;Tv.prototype.u=function(){this.a.B();Z.prototype.u.call(this)};function Uv(a,b,c,d){this.m=a;"number"===typeof b&&(this.jl=b);"number"===typeof c&&(this.tk=c);"number"===typeof d&&(this.uk=d);Du.call(this,"div","H_overview")}u(Uv,Ru);Uv.prototype.ud=function(a){this.f.ud(a)};\nUv.prototype.X=function(a,b){b=au(b,"div","H_overview_map");ku(a,b);this.g=b};Uv.prototype.renderInternal=Uv.prototype.X;n=Uv.prototype;n.jl=3;n.tk=5;n.uk=5;n.Ha=function(a){this.a=a;this.f=new T(this.g,this.m,{pixelRatio:this.a.Za(),engineType:this.a.dc().type});this.f.m.J().style.display="none";this.o=this.f.b;this.j=this.a.b};function Wv(a){!a.wd&&Vv(a);a.kb("H_overview_active");a.a.removeEventListener("mapviewchange",a.Ei,!1,a)}\nn.Ei=function(a){a&&a.modifiers&a.SIZE&&Vv(this,!0);a=this.j.nb();a.zoom=a.zoom-this.jl;this.o.Xb(a)};function Vv(a,b){var c=a.a.za.element,d=a.J().style,e=c.offsetWidth/a.tk/10;c=c.offsetHeight/a.uk/10;var f=a.g.style;b?(d.width=e+"em",d.height=c+"em",f.width=e+"em",f.height=c+"em"):d.width=d.height="0em";a.f.za.resize()}n.u=function(){Uv.l.u.call(this);Wv(this);this.f.B();this.f=this.o=this.j=this.a=this.m=this.g=null};function Vu(a){a=a||{};Ru.call(this);this.Ja("H_scalebar");this.Wb(a.alignment||"right-bottom");this.s=150;this.update=A(this.update,this);this.m=this.f=this.a=this.j=null}u(Vu,Ru);t("H.ui.ScaleBar",Vu);\nVu.prototype.X=function(a,b){Ru.prototype.renderInternal.call(this,a,b);a.innerHTML=\'<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>\';a.style.direction="ltr";this.j=a.firstChild;b=this.j.childNodes;this.a=b[0];this.f=b[1];this.m=a.lastChild;this.o=mu.METRIC;this.v=\nA(function(c){this.hc()||(this.dispatchEvent("toggleunitsystem"),c.preventDefault())},this);this.g=A(function(c){c.preventDefault()},this);tu(a,"start",this.g);tu(a,"end",this.v);Bu(this,this.xa().translate("scale.switchToImperial"));this.update()};Vu.prototype.renderInternal=Vu.prototype.X;Vu.prototype.Ha=function(a){this.map&&this.map.removeEventListener("mapviewchange",this.update);a&&a.addEventListener("mapviewchange",this.update);Ru.prototype.Ha.apply(this,arguments)};Vu.prototype.setMap=Vu.prototype.Ha;\nVu.prototype.capture=function(a,b,c){var d=this.J();var e=d.ownerDocument,f=e.createElement("canvas"),g=f.getContext("2d"),h=e.createElementNS("http://www.w3.org/2000/svg","svg"),k=e.createElementNS("http://www.w3.org/2000/svg","foreignObject"),l=hf(d,e,!1);e=parseFloat(d.offsetWidth)+1;var m=parseFloat(d.offsetHeight),q=e*a;a*=m;f.width=q;f.height=a;h.setAttribute("xmlns","http://www.w3.org/2000/svg");h.setAttribute("width",q);h.setAttribute("height",a);h.setAttribute("viewBox","0 0 "+e+" "+m);k.setAttribute("width",\n"100%");k.setAttribute("height","100%");h.appendChild(k);l.setAttribute("width","100%");l.setAttribute("height","100%");l.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var p=window.getComputedStyle(d);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(r){l.style.setProperty(r,p.getPropertyValue(r))});k.appendChild(l);d=Ze(h.outerHTML);(new qf("image",d)).then(function(r){g.drawImage(r,0,0);b(f)},c)};Vu.prototype.capture=Vu.prototype.capture;\nVu.prototype.Me=function(a){this.o=a;Bu(this,"imperial"===a?this.xa().translate("scale.switchToMetric"):this.xa().translate("scale.switchToImperial"));this.update()};Vu.prototype.onUnitSystemChange=Vu.prototype.Me;\nVu.prototype.update=function(){if(this.J()){var a=this.s;var b=0;var c=this.map;var d;if(c){var e=Math.round(.5*c.za.width);var f=Math.round(.5*c.za.height);if(d=c.Wa(e,f))b=Yf(d),c=Yf(c.Wa(e+1,f)),b=100*b.Ya(c)}if(c=b)this.o===mu.IMPERIAL?c<Xv?(f=c/Yv,e=this.xa().translate("scale.ft")):(f=c/Xv,e=this.xa().translate("scale.mi")):1E3>c?(f=c,e=this.xa().translate("scale.m")):(f=c/1E3,e=this.xa().translate("scale.km")),c=Math.pow(10,Math.floor(Math.log(f)/Math.LN10)),f=c/f*100,f<a/5?(c*=5,f*=5):f<a/\n2?(c*=2,f*=2):f>a&&(c/=2,f/=2),f=Math.round(f),this.j.setAttribute("width",f),this.m.textContent=c+" "+e,this.a.points.getItem(2).x=this.f.points.getItem(2).x=this.a.points.getItem(3).x=this.f.points.getItem(3).x=f-2}};var Xv=1609.344,Yv=.3048006;t("H.ui.buildInfo",function(){return Df("H-ui","1.16.0","cbb755b")});\n');
},
	"com/coil/podway/MDM_Data/localService/metadata.xml":'<edmx:Edmx xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx" Version="1.0"><edmx:DataServices xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" m:DataServiceVersion="1.0"><Schema xmlns="http://schemas.microsoft.com/ado/2008/09/edm" Namespace="com.sap.ExpoPodium.entity"><EntityType Name="EventInfoModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.String" Nullable="true"/><Property Name="Name" Type="Edm.String" Nullable="true"/><Property Name="Title" Type="Edm.String" Nullable="true"/><Property Name="Description" Type="Edm.String" Nullable="true"/><Property Name="HighlightsTitle" Type="Edm.String" Nullable="true"/><Property Name="Url" Type="Edm.String" Nullable="true"/><Property Name="Location" Type="Edm.String" Nullable="true"/><Property Name="Latitude" Type="Edm.String" Nullable="true"/><Property Name="Longitude" Type="Edm.String" Nullable="true"/><Property Name="City" Type="Edm.String" Nullable="true"/><Property Name="CountryId" Type="Edm.Int32" Nullable="true"/><Property Name="TimezoneId" Type="Edm.Int32" Nullable="true"/><Property Name="StartDate" Type="Edm.String" Nullable="true"/><Property Name="StartTime" Type="Edm.String" Nullable="true"/><Property Name="EndDate" Type="Edm.String" Nullable="true"/><Property Name="EndTime" Type="Edm.String" Nullable="true"/><Property Name="DaysLeftForEvent" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Highlights" Relationship="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Highlights" FromRole="r_EventInfo"\n\t\t\t\t\tToRole="r_Highlights"/><NavigationProperty Name="Images" Relationship="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Images" FromRole="r_EventInfo" ToRole="r_Images"/><NavigationProperty Name="Country" Relationship="com.sap.ExpoPodium.entity.EventInfoModel_2_r_Country" FromRole="EventInfoModel"\n\t\t\t\t\tToRole="r_Country"/><NavigationProperty Name="Timezone" Relationship="com.sap.ExpoPodium.entity.EventInfoModel_2_r_Timezone" FromRole="EventInfoModel"\n\t\t\t\t\tToRole="r_Timezone"/></EntityType><EntityType Name="ODataEntityModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Status" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="MasterApplicationConfigModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="PodTopInitiative" Type="Edm.Int32" Nullable="true"/><Property Name="PodMinAge" Type="Edm.Int32" Nullable="true"/><Property Name="PodMaxAge" Type="Edm.Int32" Nullable="true"/><Property Name="PageSizeIos" Type="Edm.Int32" Nullable="true"/><Property Name="PageSizeAndroid" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="FacilityImageModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Image" Type="Edm.Binary" Nullable="true"/><Property Name="FileName" Type="Edm.String" Nullable="true"/><Property Name="FileType" Type="Edm.String" Nullable="true"/><Property Name="FacilityId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Facility" Relationship="com.sap.ExpoPodium.entity.r_Facility_2_r_Images" FromRole="r_Images" ToRole="r_Facility"/></EntityType><EntityType Name="MasterCountryModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Country" Type="Edm.String" Nullable="true"/><Property Name="IsoCode" Type="Edm.String" Nullable="true"/><Property Name="DialCode" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Timezones" Relationship="com.sap.ExpoPodium.entity.r_Country_2_r_Timezones" FromRole="r_Country"\n\t\t\t\t\tToRole="r_Timezones"/></EntityType><EntityType Name="EventImageModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Image" Type="Edm.Binary" Nullable="true"/><Property Name="FileName" Type="Edm.String" Nullable="true"/><Property Name="FileType" Type="Edm.String" Nullable="true"/><Property Name="EventId" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventInfo" Relationship="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Images" FromRole="r_Images"\n\t\t\t\t\tToRole="r_EventInfo"/></EntityType><EntityType Name="AssignmentModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="ServiceTypeId" Type="Edm.Int32" Nullable="true"/><Property Name="PODVisitorId" Type="Edm.Int32" Nullable="true"/><Property Name="AssigneeId" Type="Edm.Int32" Nullable="true"/><Property Name="AssignmentStatusId" Type="Edm.Int32" Nullable="true"/><Property Name="Comments" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="ServiceType" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_ServiceType" FromRole="AssignmentModel"\n\t\t\t\t\tToRole="r_ServiceType"/><NavigationProperty Name="PODVisitor" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodVisitor" FromRole="AssignmentModel"\n\t\t\t\t\tToRole="r_PodVisitor"/><NavigationProperty Name="Assignee" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodVisitor" FromRole="AssignmentModel"\n\t\t\t\t\tToRole="r_PodVisitor"/><NavigationProperty Name="AssignmentStatus" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_AssignmentStatus"\n\t\t\t\t\tFromRole="AssignmentModel" ToRole="r_AssignmentStatus"/><NavigationProperty Name="PODConditions" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodConditions"\n\t\t\t\t\tFromRole="AssignmentModel" ToRole="r_PodConditions"/><NavigationProperty Name="PODDevices" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodConditions" FromRole="AssignmentModel"\n\t\t\t\t\tToRole="r_PodConditions"/><NavigationProperty Name="PODPlaces" Relationship="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodConditions" FromRole="AssignmentModel"\n\t\t\t\t\tToRole="r_PodConditions"/></EntityType><EntityType Name="MasterNPSTypeModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="NPSType" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="MasterServiceTypeModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="ServiceType" Type="Edm.String" Nullable="true"/><Property Name="ServiceMessage" Type="Edm.String" Nullable="true"/><Property Name="ContactNumber" Type="Edm.String" Nullable="true"/><Property Name="Icon" Type="Edm.Binary" Nullable="true"/><Property Name="IsCancelable" Type="Edm.Boolean" Nullable="true"/><Property Name="IncidentTypeId" Type="Edm.Int32" Nullable="true"/><Property Name="NavigationId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="IncidentType" Relationship="com.sap.ExpoPodium.entity.MasterServiceTypeModel_2_r_IncidentType"\n\t\t\t\t\tFromRole="MasterServiceTypeModel" ToRole="r_IncidentType"/><NavigationProperty Name="Navigation" Relationship="com.sap.ExpoPodium.entity.MasterServiceTypeModel_2_r_Navigation"\n\t\t\t\t\tFromRole="MasterServiceTypeModel" ToRole="r_Navigation"/></EntityType><EntityType Name="MasterFaqCategoryModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="FaqCategory" Type="Edm.String" Nullable="true"/><Property Name="Icon" Type="Edm.Binary" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="UserPreferenceModel"><Key><PropertyRef Name="UserId"/></Key><Property Name="UserId" Type="Edm.Int32" Nullable="true"/><Property Name="SOSEnabled" Type="Edm.Boolean" Nullable="true"/><Property Name="AllowNotification" Type="Edm.Boolean" Nullable="true"/><Property Name="LanguageId" Type="Edm.Int32" Nullable="true"/><Property Name="IsOnboarded" Type="Edm.Boolean" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Language" Relationship="com.sap.ExpoPodium.entity.UserPreferenceModel_2_r_Language" FromRole="UserPreferenceModel"\n\t\t\t\t\tToRole="r_Language"/><NavigationProperty Name="UserAccessibilityList" Relationship="com.sap.ExpoPodium.entity.UserPreferenceModel_2_r_UserAccessibilityList"\n\t\t\t\t\tFromRole="UserPreferenceModel" ToRole="r_UserAccessibilityList"/></EntityType><EntityType Name="EventHighlightModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Highlight" Type="Edm.String" Nullable="true"/><Property Name="EventId" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventInfo" Relationship="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Highlights" FromRole="r_Highlights"\n\t\t\t\t\tToRole="r_EventInfo"/></EntityType><EntityType Name="MasterLanguageModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Lang" Type="Edm.String" Nullable="true"/><Property Name="LangCode" Type="Edm.String" Nullable="true"/><Property Name="Language" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="AccessibilityItemModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Title" Type="Edm.String" Nullable="true"/><Property Name="TextAllowed" Type="Edm.Boolean" Nullable="true"/><Property Name="Icon" Type="Edm.Binary" Nullable="true"/><Property Name="AccessibilityId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Accessibility" Relationship="com.sap.ExpoPodium.entity.r_Accessibility_2_r_Items" FromRole="r_Items"\n\t\t\t\t\tToRole="r_Accessibility"/></EntityType><EntityType Name="EventAttractionAccessibilityModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="EventAttractionId" Type="Edm.Int32" Nullable="true"/><Property Name="AccessibilityDeviceId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventAttraction" Relationship="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel_2_r_EventAttraction"\n\t\t\t\t\tFromRole="EventAttractionAccessibilityModel" ToRole="r_EventAttraction"/><NavigationProperty Name="AccessibilityDevice"\n\t\t\t\t\tRelationship="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel_2_r_AccessibilityDevice"\n\t\t\t\t\tFromRole="EventAttractionAccessibilityModel" ToRole="r_AccessibilityDevice"/></EntityType><EntityType Name="UserVerificationModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="FirstName" Type="Edm.String" Nullable="true"/><Property Name="LastName" Type="Edm.String" Nullable="true"/><Property Name="Email" Type="Edm.String" Nullable="true"/><Property Name="IsEmailVerified" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="FaqModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Question" Type="Edm.String" Nullable="true"/><Property Name="Answer" Type="Edm.String" Nullable="true"/><Property Name="FaqCategoryId" Type="Edm.Int32" Nullable="true"/><Property Name="NavigationId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Navigation" Relationship="com.sap.ExpoPodium.entity.FaqModel_2_r_Navigation" FromRole="FaqModel"\n\t\t\t\t\tToRole="r_Navigation"/><NavigationProperty Name="FaqCategory" Relationship="com.sap.ExpoPodium.entity.FaqModel_2_r_FaqCategory" FromRole="FaqModel"\n\t\t\t\t\tToRole="r_FaqCategory"/></EntityType><EntityType Name="MasterNavigationTypeModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="NavigationGroupId" Type="Edm.Int32" Nullable="true"/><Property Name="NavigationTypeId" Type="Edm.Int32" Nullable="true"/><Property Name="NavigationTypeName" Type="Edm.String" Nullable="true"/><Property Name="Icon" Type="Edm.Binary" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="MasterRoleModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Role" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="FilterCriteriaModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><NavigationProperty Name="BuildingList" Relationship="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_BuildingList"\n\t\t\t\t\tFromRole="FilterCriteriaModel" ToRole="r_BuildingList"/><NavigationProperty Name="ThemeList" Relationship="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_ThemeList"\n\t\t\t\t\tFromRole="FilterCriteriaModel" ToRole="r_ThemeList"/><NavigationProperty Name="CategoryList" Relationship="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_CategoryList"\n\t\t\t\t\tFromRole="FilterCriteriaModel" ToRole="r_CategoryList"/></EntityType><EntityType Name="UserAccessibilityModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="UserId" Type="Edm.Int32" Nullable="true"/><Property Name="AccessibilityItemId" Type="Edm.Int32" Nullable="true"/><Property Name="Type" Type="Edm.String" Nullable="true"/><Property Name="Text" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="AccessiblityItem" Relationship="com.sap.ExpoPodium.entity.UserAccessibilityModel_2_r_AccessiblityItem"\n\t\t\t\t\tFromRole="UserAccessibilityModel" ToRole="r_AccessiblityItem"/><NavigationProperty Name="User" Relationship="com.sap.ExpoPodium.entity.UserAccessibilityModel_2_r_User" FromRole="UserAccessibilityModel"\n\t\t\t\t\tToRole="r_User"/></EntityType><EntityType Name="PODAccessibilityModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Type" Type="Edm.String" Nullable="true"/><Property Name="Title" Type="Edm.String" Nullable="true"/><Property Name="Text" Type="Edm.String" Nullable="true"/></EntityType><EntityType Name="MasterFacilityTypeModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="FacilityType" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="EventAttractionModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Title" Type="Edm.String" Nullable="true"/><Property Name="Index" Type="Edm.Int32" Nullable="true"/><Property Name="Description" Type="Edm.String" Nullable="true"/><Property Name="HighlightsTitle" Type="Edm.String" Nullable="true"/><Property Name="EventAttractionTypeId" Type="Edm.Int32" Nullable="true"/><Property Name="Latitude" Type="Edm.String" Nullable="true"/><Property Name="Longitude" Type="Edm.String" Nullable="true"/><Property Name="BuildingId" Type="Edm.Int32" Nullable="true"/><Property Name="ThemeId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Highlights" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Highlights" FromRole="r_EventAttraction"\n\t\t\t\t\tToRole="r_Highlights"/><NavigationProperty Name="EventAttractionType" Relationship="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_EventAttractionType"\n\t\t\t\t\tFromRole="EventAttractionModel" ToRole="r_EventAttractionType"/><NavigationProperty Name="Building" Relationship="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Building"\n\t\t\t\t\tFromRole="EventAttractionModel" ToRole="r_Building"/><NavigationProperty Name="Theme" Relationship="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Theme" FromRole="EventAttractionModel"\n\t\t\t\t\tToRole="r_Theme"/><NavigationProperty Name="Images" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Images" FromRole="r_EventAttraction"\n\t\t\t\t\tToRole="r_Images"/><NavigationProperty Name="Plans" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Plans" FromRole="r_EventAttraction"\n\t\t\t\t\tToRole="r_Plans"/><NavigationProperty Name="Categories" Relationship="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Categories"\n\t\t\t\t\tFromRole="EventAttractionModel" ToRole="r_Categories"/><NavigationProperty Name="AccessibilityDevices" Relationship="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_AccessibilityDevices"\n\t\t\t\t\tFromRole="EventAttractionModel" ToRole="r_AccessibilityDevices"/></EntityType><EntityType Name="FacilityModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Description" Type="Edm.String" Nullable="true"/><Property Name="FacilityTypeId" Type="Edm.Int32" Nullable="true"/><Property Name="Latitude" Type="Edm.String" Nullable="true"/><Property Name="Longitude" Type="Edm.String" Nullable="true"/><Property Name="BuildingId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="FacilityType" Relationship="com.sap.ExpoPodium.entity.FacilityModel_2_r_FacilityType" FromRole="FacilityModel"\n\t\t\t\t\tToRole="r_FacilityType"/><NavigationProperty Name="Building" Relationship="com.sap.ExpoPodium.entity.FacilityModel_2_r_Building" FromRole="FacilityModel"\n\t\t\t\t\tToRole="r_Building"/><NavigationProperty Name="Images" Relationship="com.sap.ExpoPodium.entity.r_Facility_2_r_Images" FromRole="r_Facility" ToRole="r_Images"/></EntityType><EntityType Name="MasterAccessibilityTypeModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="AccessibilityType" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="AccessibilityModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Heading" Type="Edm.String" Nullable="true"/><Property Name="Question" Type="Edm.String" Nullable="true"/><Property Name="Type" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Items" Relationship="com.sap.ExpoPodium.entity.r_Accessibility_2_r_Items" FromRole="r_Accessibility"\n\t\t\t\t\tToRole="r_Items"/></EntityType><EntityType Name="BuildingModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="BuildingName" Type="Edm.String" Nullable="true"/><Property Name="Latitude" Type="Edm.String" Nullable="true"/><Property Name="Longitude" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="MasterIncidentTypeModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="IncidentType" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="MasterEventAttractionTypeModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="EventAttractionType" Type="Edm.String" Nullable="true"/><Property Name="Description" Type="Edm.String" Nullable="true"/><Property Name="Image" Type="Edm.Binary" Nullable="true"/><Property Name="Building" Type="Edm.Boolean" Nullable="true"/><Property Name="Category" Type="Edm.Boolean" Nullable="true"/><Property Name="Theme" Type="Edm.Boolean" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="EventAttractionHighlightModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Highlight" Type="Edm.String" Nullable="true"/><Property Name="EventAttractionId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventAttraction" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Highlights" FromRole="r_Highlights"\n\t\t\t\t\tToRole="r_EventAttraction"/></EntityType><EntityType Name="MasterRelationshipModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Relationship" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="CategoryModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Category" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="ThemeModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Theme" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="EventAttractionPlanModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Plan" Type="Edm.Binary" Nullable="true"/><Property Name="FileName" Type="Edm.String" Nullable="true"/><Property Name="FileType" Type="Edm.String" Nullable="true"/><Property Name="EventAttractionId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventAttraction" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Plans" FromRole="r_Plans"\n\t\t\t\t\tToRole="r_EventAttraction"/></EntityType><EntityType Name="MasterTimezoneModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="CountryCode" Type="Edm.String" Nullable="true"/><Property Name="ZoneName" Type="Edm.String" Nullable="true"/><Property Name="Offset" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Country" Relationship="com.sap.ExpoPodium.entity.r_Country_2_r_Timezones" FromRole="r_Timezones"\n\t\t\t\t\tToRole="r_Country"/></EntityType><EntityType Name="MasterAssignmentStatusModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="AssignmentStatus" Type="Edm.String" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/></EntityType><EntityType Name="EventAttractionImageModel" m:HasStream="true"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="Image" Type="Edm.Binary" Nullable="true"/><Property Name="IsCoverImage" Type="Edm.Boolean" Nullable="true"/><Property Name="FileName" Type="Edm.String" Nullable="true"/><Property Name="FileType" Type="Edm.String" Nullable="true"/><Property Name="EventAttractionId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="EventAttraction" Relationship="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Images" FromRole="r_Images"\n\t\t\t\t\tToRole="r_EventAttraction"/></EntityType><EntityType Name="UserModel"><Key><PropertyRef Name="Id"/></Key><Property Name="Id" Type="Edm.Int32" Nullable="true"/><Property Name="FirstName" Type="Edm.String" Nullable="true"/><Property Name="LastName" Type="Edm.String" Nullable="true"/><Property Name="Email" Type="Edm.String" Nullable="true"/><Property Name="Username" Type="Edm.String" Nullable="true"/><Property Name="PhotoURL" Type="Edm.String" Nullable="true"/><Property Name="Address" Type="Edm.String" Nullable="true"/><Property Name="City" Type="Edm.String" Nullable="true"/><Property Name="State" Type="Edm.String" Nullable="true"/><Property Name="Zip" Type="Edm.String" Nullable="true"/><Property Name="Country" Type="Edm.String" Nullable="true"/><Property Name="DialCode" Type="Edm.String" Nullable="true"/><Property Name="Mobile" Type="Edm.String" Nullable="true"/><Property Name="EmergencyDialCode" Type="Edm.String" Nullable="true"/><Property Name="EmergencyMobile" Type="Edm.String" Nullable="true"/><Property Name="RoleId" Type="Edm.Int32" Nullable="true"/><Property Name="Latitude" Type="Edm.String" Nullable="true"/><Property Name="Longitude" Type="Edm.String" Nullable="true"/><Property Name="Comments" Type="Edm.String" Nullable="true"/><Property Name="EmergencyPersonName" Type="Edm.String" Nullable="true"/><Property Name="EmergencyRelationshipId" Type="Edm.Int32" Nullable="true"/><Property Name="IsArchived" Type="Edm.Boolean" Nullable="true"/><Property Name="CreatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="CreatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="UpdatedAt" Type="Edm.DateTime" Nullable="true"/><Property Name="UpdatedBy" Type="Edm.Int32" Nullable="true"/><Property Name="IsSelected" Type="Edm.Boolean" Nullable="true"/><NavigationProperty Name="Role" Relationship="com.sap.ExpoPodium.entity.UserModel_2_r_Role" FromRole="UserModel" ToRole="r_Role"/><NavigationProperty Name="EmergencyRelationship" Relationship="com.sap.ExpoPodium.entity.UserModel_2_r_EmergencyRelationship"\n\t\t\t\t\tFromRole="UserModel" ToRole="r_EmergencyRelationship"/><NavigationProperty Name="UserPreference" Relationship="com.sap.ExpoPodium.entity.UserModel_2_r_UserPreference" FromRole="UserModel"\n\t\t\t\t\tToRole="r_UserPreference"/></EntityType><Association Name="FilterCriteriaModel_2_r_CategoryList"><End Type="com.sap.ExpoPodium.entity.FilterCriteriaModel" Multiplicity="1" Role="FilterCriteriaModel"/><End Type="com.sap.ExpoPodium.entity.CategoryModel" Multiplicity="*" Role="r_CategoryList"/></Association><Association Name="UserPreferenceModel_2_r_UserAccessibilityList"><End Type="com.sap.ExpoPodium.entity.UserPreferenceModel" Multiplicity="1" Role="UserPreferenceModel"/><End Type="com.sap.ExpoPodium.entity.UserAccessibilityModel" Multiplicity="*" Role="r_UserAccessibilityList"/></Association><Association Name="MasterServiceTypeModel_2_r_IncidentType"><End Type="com.sap.ExpoPodium.entity.MasterServiceTypeModel" Multiplicity="1" Role="MasterServiceTypeModel"/><End Type="com.sap.ExpoPodium.entity.MasterIncidentTypeModel" Multiplicity="1" Role="r_IncidentType"/></Association><Association Name="r_Accessibility_2_r_Items"><End Type="com.sap.ExpoPodium.entity.AccessibilityItemModel" Multiplicity="*" Role="r_Items"/><End Type="com.sap.ExpoPodium.entity.AccessibilityModel" Multiplicity="1" Role="r_Accessibility"/></Association><Association Name="r_EventAttraction_2_r_Highlights"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="r_EventAttraction"/><End Type="com.sap.ExpoPodium.entity.EventAttractionHighlightModel" Multiplicity="*" Role="r_Highlights"/></Association><Association Name="FacilityModel_2_r_FacilityType"><End Type="com.sap.ExpoPodium.entity.FacilityModel" Multiplicity="1" Role="FacilityModel"/><End Type="com.sap.ExpoPodium.entity.MasterFacilityTypeModel" Multiplicity="1" Role="r_FacilityType"/></Association><Association Name="r_EventInfo_2_r_Highlights"><End Type="com.sap.ExpoPodium.entity.EventInfoModel" Multiplicity="1" Role="r_EventInfo"/><End Type="com.sap.ExpoPodium.entity.EventHighlightModel" Multiplicity="*" Role="r_Highlights"/></Association><Association Name="EventInfoModel_2_r_Timezone"><End Type="com.sap.ExpoPodium.entity.EventInfoModel" Multiplicity="1" Role="EventInfoModel"/><End Type="com.sap.ExpoPodium.entity.MasterTimezoneModel" Multiplicity="1" Role="r_Timezone"/></Association><Association Name="UserModel_2_r_Role"><End Type="com.sap.ExpoPodium.entity.UserModel" Multiplicity="1" Role="UserModel"/><End Type="com.sap.ExpoPodium.entity.MasterRoleModel" Multiplicity="1" Role="r_Role"/></Association><Association Name="AssignmentModel_2_r_AssignmentStatus"><End Type="com.sap.ExpoPodium.entity.AssignmentModel" Multiplicity="1" Role="AssignmentModel"/><End Type="com.sap.ExpoPodium.entity.MasterAssignmentStatusModel" Multiplicity="1" Role="r_AssignmentStatus"/></Association><Association Name="EventAttractionModel_2_r_Building"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="EventAttractionModel"/><End Type="com.sap.ExpoPodium.entity.BuildingModel" Multiplicity="0..1" Role="r_Building"/></Association><Association Name="AssignmentModel_2_r_ServiceType"><End Type="com.sap.ExpoPodium.entity.AssignmentModel" Multiplicity="1" Role="AssignmentModel"/><End Type="com.sap.ExpoPodium.entity.MasterServiceTypeModel" Multiplicity="1" Role="r_ServiceType"/></Association><Association Name="FacilityModel_2_r_Building"><End Type="com.sap.ExpoPodium.entity.FacilityModel" Multiplicity="1" Role="FacilityModel"/><End Type="com.sap.ExpoPodium.entity.BuildingModel" Multiplicity="0..1" Role="r_Building"/></Association><Association Name="r_EventAttraction_2_r_Plans"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="r_EventAttraction"/><End Type="com.sap.ExpoPodium.entity.EventAttractionPlanModel" Multiplicity="*" Role="r_Plans"/></Association><Association Name="r_Facility_2_r_Images"><End Type="com.sap.ExpoPodium.entity.FacilityImageModel" Multiplicity="*" Role="r_Images"/><End Type="com.sap.ExpoPodium.entity.FacilityModel" Multiplicity="1" Role="r_Facility"/></Association><Association Name="UserAccessibilityModel_2_r_AccessiblityItem"><End Type="com.sap.ExpoPodium.entity.UserAccessibilityModel" Multiplicity="1" Role="UserAccessibilityModel"/><End Type="com.sap.ExpoPodium.entity.AccessibilityItemModel" Multiplicity="1" Role="r_AccessiblityItem"/></Association><Association Name="EventAttractionModel_2_r_Categories"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="EventAttractionModel"/><End Type="com.sap.ExpoPodium.entity.CategoryModel" Multiplicity="*" Role="r_Categories"/></Association><Association Name="EventAttractionAccessibilityModel_2_r_EventAttraction"><End Type="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel" Multiplicity="1" Role="EventAttractionAccessibilityModel"/><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="r_EventAttraction"/></Association><Association Name="AssignmentModel_2_r_PodConditions"><End Type="com.sap.ExpoPodium.entity.AssignmentModel" Multiplicity="1" Role="AssignmentModel"/><End Type="com.sap.ExpoPodium.entity.PODAccessibilityModel" Multiplicity="*" Role="r_PodConditions"/></Association><Association Name="r_EventAttraction_2_r_Images"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="r_EventAttraction"/><End Type="com.sap.ExpoPodium.entity.EventAttractionImageModel" Multiplicity="*" Role="r_Images"/></Association><Association Name="UserPreferenceModel_2_r_Language"><End Type="com.sap.ExpoPodium.entity.UserPreferenceModel" Multiplicity="1" Role="UserPreferenceModel"/><End Type="com.sap.ExpoPodium.entity.MasterLanguageModel" Multiplicity="1" Role="r_Language"/></Association><Association Name="AssignmentModel_2_r_PodVisitor"><End Type="com.sap.ExpoPodium.entity.AssignmentModel" Multiplicity="1" Role="AssignmentModel"/><End Type="com.sap.ExpoPodium.entity.UserModel" Multiplicity="1" Role="r_PodVisitor"/></Association><Association Name="UserModel_2_r_UserPreference"><End Type="com.sap.ExpoPodium.entity.UserModel" Multiplicity="1" Role="UserModel"/><End Type="com.sap.ExpoPodium.entity.UserPreferenceModel" Multiplicity="1" Role="r_UserPreference"/></Association><Association Name="r_Country_2_r_Timezones"><End Type="com.sap.ExpoPodium.entity.MasterCountryModel" Multiplicity="1" Role="r_Country"/><End Type="com.sap.ExpoPodium.entity.MasterTimezoneModel" Multiplicity="*" Role="r_Timezones"/></Association><Association Name="UserAccessibilityModel_2_r_User"><End Type="com.sap.ExpoPodium.entity.UserAccessibilityModel" Multiplicity="1" Role="UserAccessibilityModel"/><End Type="com.sap.ExpoPodium.entity.UserModel" Multiplicity="1" Role="r_User"/></Association><Association Name="EventAttractionModel_2_r_Theme"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="EventAttractionModel"/><End Type="com.sap.ExpoPodium.entity.ThemeModel" Multiplicity="0..1" Role="r_Theme"/></Association><Association Name="EventAttractionModel_2_r_AccessibilityDevices"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="EventAttractionModel"/><End Type="com.sap.ExpoPodium.entity.AccessibilityItemModel" Multiplicity="*" Role="r_AccessibilityDevices"/></Association><Association Name="r_EventInfo_2_r_Images"><End Type="com.sap.ExpoPodium.entity.EventInfoModel" Multiplicity="1" Role="r_EventInfo"/><End Type="com.sap.ExpoPodium.entity.EventImageModel" Multiplicity="*" Role="r_Images"/></Association><Association Name="MasterServiceTypeModel_2_r_Navigation"><End Type="com.sap.ExpoPodium.entity.MasterServiceTypeModel" Multiplicity="1" Role="MasterServiceTypeModel"/><End Type="com.sap.ExpoPodium.entity.MasterNavigationTypeModel" Multiplicity="0..1" Role="r_Navigation"/></Association><Association Name="EventAttractionModel_2_r_EventAttractionType"><End Type="com.sap.ExpoPodium.entity.EventAttractionModel" Multiplicity="1" Role="EventAttractionModel"/><End Type="com.sap.ExpoPodium.entity.MasterEventAttractionTypeModel" Multiplicity="1" Role="r_EventAttractionType"/></Association><Association Name="EventInfoModel_2_r_Country"><End Type="com.sap.ExpoPodium.entity.EventInfoModel" Multiplicity="1" Role="EventInfoModel"/><End Type="com.sap.ExpoPodium.entity.MasterCountryModel" Multiplicity="1" Role="r_Country"/></Association><Association Name="FilterCriteriaModel_2_r_BuildingList"><End Type="com.sap.ExpoPodium.entity.FilterCriteriaModel" Multiplicity="1" Role="FilterCriteriaModel"/><End Type="com.sap.ExpoPodium.entity.BuildingModel" Multiplicity="*" Role="r_BuildingList"/></Association><Association Name="UserModel_2_r_EmergencyRelationship"><End Type="com.sap.ExpoPodium.entity.UserModel" Multiplicity="1" Role="UserModel"/><End Type="com.sap.ExpoPodium.entity.MasterRelationshipModel" Multiplicity="0..1" Role="r_EmergencyRelationship"/></Association><Association Name="EventAttractionAccessibilityModel_2_r_AccessibilityDevice"><End Type="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel" Multiplicity="1" Role="EventAttractionAccessibilityModel"/><End Type="com.sap.ExpoPodium.entity.AccessibilityItemModel" Multiplicity="1" Role="r_AccessibilityDevice"/></Association><Association Name="FaqModel_2_r_Navigation"><End Type="com.sap.ExpoPodium.entity.FaqModel" Multiplicity="1" Role="FaqModel"/><End Type="com.sap.ExpoPodium.entity.MasterNavigationTypeModel" Multiplicity="0..1" Role="r_Navigation"/></Association><Association Name="FilterCriteriaModel_2_r_ThemeList"><End Type="com.sap.ExpoPodium.entity.FilterCriteriaModel" Multiplicity="1" Role="FilterCriteriaModel"/><End Type="com.sap.ExpoPodium.entity.ThemeModel" Multiplicity="*" Role="r_ThemeList"/></Association><Association Name="FaqModel_2_r_FaqCategory"><End Type="com.sap.ExpoPodium.entity.FaqModel" Multiplicity="1" Role="FaqModel"/><End Type="com.sap.ExpoPodium.entity.MasterFaqCategoryModel" Multiplicity="1" Role="r_FaqCategory"/></Association><EntityContainer Name="DefaultContainer" m:IsDefaultEntityContainer="true"><EntitySet Name="EventInfoSet" EntityType="com.sap.ExpoPodium.entity.EventInfoModel"/><EntitySet Name="ODataEntitySet" EntityType="com.sap.ExpoPodium.entity.ODataEntityModel"/><EntitySet Name="MasterApplicationConfigSet" EntityType="com.sap.ExpoPodium.entity.MasterApplicationConfigModel"/><EntitySet Name="FacilityImageSet" EntityType="com.sap.ExpoPodium.entity.FacilityImageModel"/><EntitySet Name="MasterCountrySet" EntityType="com.sap.ExpoPodium.entity.MasterCountryModel"/><EntitySet Name="EventImageSet" EntityType="com.sap.ExpoPodium.entity.EventImageModel"/><EntitySet Name="AssignmentSet" EntityType="com.sap.ExpoPodium.entity.AssignmentModel"/><EntitySet Name="MasterNPSTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterNPSTypeModel"/><EntitySet Name="MasterServiceTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterServiceTypeModel"/><EntitySet Name="MasterFaqCategorySet" EntityType="com.sap.ExpoPodium.entity.MasterFaqCategoryModel"/><EntitySet Name="UserPreferenceSet" EntityType="com.sap.ExpoPodium.entity.UserPreferenceModel"/><EntitySet Name="EventHighlightSet" EntityType="com.sap.ExpoPodium.entity.EventHighlightModel"/><EntitySet Name="MasterLanguageSet" EntityType="com.sap.ExpoPodium.entity.MasterLanguageModel"/><EntitySet Name="AccessibilityItemSet" EntityType="com.sap.ExpoPodium.entity.AccessibilityItemModel"/><EntitySet Name="EventAttractionAccessibilitySet" EntityType="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel"/><EntitySet Name="UserVerificationSet" EntityType="com.sap.ExpoPodium.entity.UserVerificationModel"/><EntitySet Name="FaqSet" EntityType="com.sap.ExpoPodium.entity.FaqModel"/><EntitySet Name="MasterNavigationTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterNavigationTypeModel"/><EntitySet Name="MasterRoleSet" EntityType="com.sap.ExpoPodium.entity.MasterRoleModel"/><EntitySet Name="FilterCriteriaSet" EntityType="com.sap.ExpoPodium.entity.FilterCriteriaModel"/><EntitySet Name="UserAccessibilitySet" EntityType="com.sap.ExpoPodium.entity.UserAccessibilityModel"/><EntitySet Name="PODAccessibilitySet" EntityType="com.sap.ExpoPodium.entity.PODAccessibilityModel"/><EntitySet Name="MasterFacilityTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterFacilityTypeModel"/><EntitySet Name="EventAttractionSet" EntityType="com.sap.ExpoPodium.entity.EventAttractionModel"/><EntitySet Name="FacilitySet" EntityType="com.sap.ExpoPodium.entity.FacilityModel"/><EntitySet Name="MasterAccessibilityTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterAccessibilityTypeModel"/><EntitySet Name="AccessibilitySet" EntityType="com.sap.ExpoPodium.entity.AccessibilityModel"/><EntitySet Name="BuildingSet" EntityType="com.sap.ExpoPodium.entity.BuildingModel"/><EntitySet Name="MasterIncidentTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterIncidentTypeModel"/><EntitySet Name="MasterEventAttractionTypeSet" EntityType="com.sap.ExpoPodium.entity.MasterEventAttractionTypeModel"/><EntitySet Name="EventAttractionHighlightSet" EntityType="com.sap.ExpoPodium.entity.EventAttractionHighlightModel"/><EntitySet Name="MasterRelationshipSet" EntityType="com.sap.ExpoPodium.entity.MasterRelationshipModel"/><EntitySet Name="CategorySet" EntityType="com.sap.ExpoPodium.entity.CategoryModel"/><EntitySet Name="ThemeSet" EntityType="com.sap.ExpoPodium.entity.ThemeModel"/><EntitySet Name="EventAttractionPlanSet" EntityType="com.sap.ExpoPodium.entity.EventAttractionPlanModel"/><EntitySet Name="MasterTimezoneSet" EntityType="com.sap.ExpoPodium.entity.MasterTimezoneModel"/><EntitySet Name="MasterAssignmentStatusSet" EntityType="com.sap.ExpoPodium.entity.MasterAssignmentStatusModel"/><EntitySet Name="EventAttractionImageSet" EntityType="com.sap.ExpoPodium.entity.EventAttractionImageModel"/><EntitySet Name="UserSet" EntityType="com.sap.ExpoPodium.entity.UserModel"/><AssociationSet Name="FilterCriteriaModel_2_r_CategoryList" Association="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_CategoryList"><End EntitySet="FilterCriteriaSet" Role="FilterCriteriaModel"/><End EntitySet="CategorySet" Role="r_CategoryList"/></AssociationSet><AssociationSet Name="UserPreferenceModel_2_r_UserAccessibilityList"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.UserPreferenceModel_2_r_UserAccessibilityList"><End EntitySet="UserPreferenceSet" Role="UserPreferenceModel"/><End EntitySet="UserAccessibilitySet" Role="r_UserAccessibilityList"/></AssociationSet><AssociationSet Name="MasterServiceTypeModel_2_r_IncidentType"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.MasterServiceTypeModel_2_r_IncidentType"><End EntitySet="MasterServiceTypeSet" Role="MasterServiceTypeModel"/><End EntitySet="MasterIncidentTypeSet" Role="r_IncidentType"/></AssociationSet><AssociationSet Name="r_Accessibility_2_r_Items" Association="com.sap.ExpoPodium.entity.r_Accessibility_2_r_Items"><End EntitySet="AccessibilityItemSet" Role="r_Items"/><End EntitySet="AccessibilitySet" Role="r_Accessibility"/></AssociationSet><AssociationSet Name="r_EventAttraction_2_r_Highlights" Association="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Highlights"><End EntitySet="EventAttractionSet" Role="r_EventAttraction"/><End EntitySet="EventAttractionHighlightSet" Role="r_Highlights"/></AssociationSet><AssociationSet Name="FacilityModel_2_r_FacilityType" Association="com.sap.ExpoPodium.entity.FacilityModel_2_r_FacilityType"><End EntitySet="FacilitySet" Role="FacilityModel"/><End EntitySet="MasterFacilityTypeSet" Role="r_FacilityType"/></AssociationSet><AssociationSet Name="r_EventInfo_2_r_Highlights" Association="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Highlights"><End EntitySet="EventInfoSet" Role="r_EventInfo"/><End EntitySet="EventHighlightSet" Role="r_Highlights"/></AssociationSet><AssociationSet Name="EventInfoModel_2_r_Timezone" Association="com.sap.ExpoPodium.entity.EventInfoModel_2_r_Timezone"><End EntitySet="EventInfoSet" Role="EventInfoModel"/><End EntitySet="MasterTimezoneSet" Role="r_Timezone"/></AssociationSet><AssociationSet Name="UserModel_2_r_Role" Association="com.sap.ExpoPodium.entity.UserModel_2_r_Role"><End EntitySet="UserSet" Role="UserModel"/><End EntitySet="MasterRoleSet" Role="r_Role"/></AssociationSet><AssociationSet Name="AssignmentModel_2_r_AssignmentStatus" Association="com.sap.ExpoPodium.entity.AssignmentModel_2_r_AssignmentStatus"><End EntitySet="AssignmentSet" Role="AssignmentModel"/><End EntitySet="MasterAssignmentStatusSet" Role="r_AssignmentStatus"/></AssociationSet><AssociationSet Name="EventAttractionModel_2_r_Building" Association="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Building"><End EntitySet="EventAttractionSet" Role="EventAttractionModel"/><End EntitySet="BuildingSet" Role="r_Building"/></AssociationSet><AssociationSet Name="AssignmentModel_2_r_ServiceType" Association="com.sap.ExpoPodium.entity.AssignmentModel_2_r_ServiceType"><End EntitySet="AssignmentSet" Role="AssignmentModel"/><End EntitySet="MasterServiceTypeSet" Role="r_ServiceType"/></AssociationSet><AssociationSet Name="FacilityModel_2_r_Building" Association="com.sap.ExpoPodium.entity.FacilityModel_2_r_Building"><End EntitySet="FacilitySet" Role="FacilityModel"/><End EntitySet="BuildingSet" Role="r_Building"/></AssociationSet><AssociationSet Name="r_EventAttraction_2_r_Plans" Association="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Plans"><End EntitySet="EventAttractionSet" Role="r_EventAttraction"/><End EntitySet="EventAttractionPlanSet" Role="r_Plans"/></AssociationSet><AssociationSet Name="r_Facility_2_r_Images" Association="com.sap.ExpoPodium.entity.r_Facility_2_r_Images"><End EntitySet="FacilityImageSet" Role="r_Images"/><End EntitySet="FacilitySet" Role="r_Facility"/></AssociationSet><AssociationSet Name="UserAccessibilityModel_2_r_AccessiblityItem"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.UserAccessibilityModel_2_r_AccessiblityItem"><End EntitySet="UserAccessibilitySet" Role="UserAccessibilityModel"/><End EntitySet="AccessibilityItemSet" Role="r_AccessiblityItem"/></AssociationSet><AssociationSet Name="EventAttractionModel_2_r_Categories" Association="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Categories"><End EntitySet="EventAttractionSet" Role="EventAttractionModel"/><End EntitySet="CategorySet" Role="r_Categories"/></AssociationSet><AssociationSet Name="EventAttractionAccessibilityModel_2_r_EventAttraction"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel_2_r_EventAttraction"><End EntitySet="EventAttractionAccessibilitySet" Role="EventAttractionAccessibilityModel"/><End EntitySet="EventAttractionSet" Role="r_EventAttraction"/></AssociationSet><AssociationSet Name="AssignmentModel_2_r_PodConditions" Association="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodConditions"><End EntitySet="AssignmentSet" Role="AssignmentModel"/><End EntitySet="PODAccessibilitySet" Role="r_PodConditions"/></AssociationSet><AssociationSet Name="r_EventAttraction_2_r_Images" Association="com.sap.ExpoPodium.entity.r_EventAttraction_2_r_Images"><End EntitySet="EventAttractionSet" Role="r_EventAttraction"/><End EntitySet="EventAttractionImageSet" Role="r_Images"/></AssociationSet><AssociationSet Name="UserPreferenceModel_2_r_Language" Association="com.sap.ExpoPodium.entity.UserPreferenceModel_2_r_Language"><End EntitySet="UserPreferenceSet" Role="UserPreferenceModel"/><End EntitySet="MasterLanguageSet" Role="r_Language"/></AssociationSet><AssociationSet Name="AssignmentModel_2_r_PodVisitor" Association="com.sap.ExpoPodium.entity.AssignmentModel_2_r_PodVisitor"><End EntitySet="AssignmentSet" Role="AssignmentModel"/><End EntitySet="UserSet" Role="r_PodVisitor"/></AssociationSet><AssociationSet Name="UserModel_2_r_UserPreference" Association="com.sap.ExpoPodium.entity.UserModel_2_r_UserPreference"><End EntitySet="UserSet" Role="UserModel"/><End EntitySet="UserPreferenceSet" Role="r_UserPreference"/></AssociationSet><AssociationSet Name="r_Country_2_r_Timezones" Association="com.sap.ExpoPodium.entity.r_Country_2_r_Timezones"><End EntitySet="MasterCountrySet" Role="r_Country"/><End EntitySet="MasterTimezoneSet" Role="r_Timezones"/></AssociationSet><AssociationSet Name="UserAccessibilityModel_2_r_User" Association="com.sap.ExpoPodium.entity.UserAccessibilityModel_2_r_User"><End EntitySet="UserAccessibilitySet" Role="UserAccessibilityModel"/><End EntitySet="UserSet" Role="r_User"/></AssociationSet><AssociationSet Name="EventAttractionModel_2_r_Theme" Association="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_Theme"><End EntitySet="EventAttractionSet" Role="EventAttractionModel"/><End EntitySet="ThemeSet" Role="r_Theme"/></AssociationSet><AssociationSet Name="EventAttractionModel_2_r_AccessibilityDevices"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_AccessibilityDevices"><End EntitySet="EventAttractionSet" Role="EventAttractionModel"/><End EntitySet="AccessibilityItemSet" Role="r_AccessibilityDevices"/></AssociationSet><AssociationSet Name="r_EventInfo_2_r_Images" Association="com.sap.ExpoPodium.entity.r_EventInfo_2_r_Images"><End EntitySet="EventInfoSet" Role="r_EventInfo"/><End EntitySet="EventImageSet" Role="r_Images"/></AssociationSet><AssociationSet Name="MasterServiceTypeModel_2_r_Navigation" Association="com.sap.ExpoPodium.entity.MasterServiceTypeModel_2_r_Navigation"><End EntitySet="MasterServiceTypeSet" Role="MasterServiceTypeModel"/><End EntitySet="MasterNavigationTypeSet" Role="r_Navigation"/></AssociationSet><AssociationSet Name="EventAttractionModel_2_r_EventAttractionType"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.EventAttractionModel_2_r_EventAttractionType"><End EntitySet="EventAttractionSet" Role="EventAttractionModel"/><End EntitySet="MasterEventAttractionTypeSet" Role="r_EventAttractionType"/></AssociationSet><AssociationSet Name="EventInfoModel_2_r_Country" Association="com.sap.ExpoPodium.entity.EventInfoModel_2_r_Country"><End EntitySet="EventInfoSet" Role="EventInfoModel"/><End EntitySet="MasterCountrySet" Role="r_Country"/></AssociationSet><AssociationSet Name="FilterCriteriaModel_2_r_BuildingList" Association="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_BuildingList"><End EntitySet="FilterCriteriaSet" Role="FilterCriteriaModel"/><End EntitySet="BuildingSet" Role="r_BuildingList"/></AssociationSet><AssociationSet Name="UserModel_2_r_EmergencyRelationship" Association="com.sap.ExpoPodium.entity.UserModel_2_r_EmergencyRelationship"><End EntitySet="UserSet" Role="UserModel"/><End EntitySet="MasterRelationshipSet" Role="r_EmergencyRelationship"/></AssociationSet><AssociationSet Name="EventAttractionAccessibilityModel_2_r_AccessibilityDevice"\n\t\t\t\t\tAssociation="com.sap.ExpoPodium.entity.EventAttractionAccessibilityModel_2_r_AccessibilityDevice"><End EntitySet="EventAttractionAccessibilitySet" Role="EventAttractionAccessibilityModel"/><End EntitySet="AccessibilityItemSet" Role="r_AccessibilityDevice"/></AssociationSet><AssociationSet Name="FaqModel_2_r_Navigation" Association="com.sap.ExpoPodium.entity.FaqModel_2_r_Navigation"><End EntitySet="FaqSet" Role="FaqModel"/><End EntitySet="MasterNavigationTypeSet" Role="r_Navigation"/></AssociationSet><AssociationSet Name="FilterCriteriaModel_2_r_ThemeList" Association="com.sap.ExpoPodium.entity.FilterCriteriaModel_2_r_ThemeList"><End EntitySet="FilterCriteriaSet" Role="FilterCriteriaModel"/><End EntitySet="ThemeSet" Role="r_ThemeList"/></AssociationSet><AssociationSet Name="FaqModel_2_r_FaqCategory" Association="com.sap.ExpoPodium.entity.FaqModel_2_r_FaqCategory"><End EntitySet="FaqSet" Role="FaqModel"/><End EntitySet="MasterFaqCategorySet" Role="r_FaqCategory"/></AssociationSet><FunctionImport Name="GetLoggedInUser" ReturnType="Collection(com.sap.ExpoPodium.entity.UserModel)" EntitySet="UserSet" m:HttpMethod="GET"/><FunctionImport Name="UpdateUserCurrentLocation" ReturnType="com.sap.ExpoPodium.entity.UserModel" EntitySet="UserSet" m:HttpMethod="GET"><Parameter Name="Latitude" Type="Edm.String" Nullable="true"/><Parameter Name="Longitude" Type="Edm.String" Nullable="true"/></FunctionImport><FunctionImport Name="CommentUser" ReturnType="com.sap.ExpoPodium.entity.UserModel" EntitySet="UserSet" m:HttpMethod="GET"><Parameter Name="UserId" Type="Edm.Int32" Nullable="true"/><Parameter Name="Comments" Type="Edm.String" Nullable="true"/></FunctionImport><FunctionImport Name="GetFilterCriteria" ReturnType="Collection(com.sap.ExpoPodium.entity.FilterCriteriaModel)"\n\t\t\t\t\tEntitySet="FilterCriteriaSet" m:HttpMethod="GET"/><FunctionImport Name="AssignNow" ReturnType="com.sap.ExpoPodium.entity.AssignmentModel" EntitySet="AssignmentSet" m:HttpMethod="GET"><Parameter Name="AssignmentId" Type="Edm.Int32" Nullable="true"/><Parameter Name="AssigneeId" Type="Edm.Int32" Nullable="true"/></FunctionImport><FunctionImport Name="StartAssignment" ReturnType="com.sap.ExpoPodium.entity.AssignmentModel" EntitySet="AssignmentSet" m:HttpMethod="GET"><Parameter Name="AssignmentId" Type="Edm.Int32" Nullable="true"/></FunctionImport><FunctionImport Name="CompleteAssignment" ReturnType="com.sap.ExpoPodium.entity.AssignmentModel" EntitySet="AssignmentSet"\n\t\t\t\t\tm:HttpMethod="GET"><Parameter Name="AssignmentId" Type="Edm.Int32" Nullable="true"/></FunctionImport><FunctionImport Name="CancelAssignment" ReturnType="com.sap.ExpoPodium.entity.AssignmentModel" EntitySet="AssignmentSet" m:HttpMethod="GET"><Parameter Name="AssignmentId" Type="Edm.Int32" Nullable="true"/></FunctionImport><FunctionImport Name="CommentAssignment" ReturnType="com.sap.ExpoPodium.entity.AssignmentModel" EntitySet="AssignmentSet" m:HttpMethod="GET"><Parameter Name="AssignmentId" Type="Edm.Int32" Nullable="true"/><Parameter Name="Comments" Type="Edm.String" Nullable="true"/></FunctionImport><FunctionImport Name="VerifyPODEmail" ReturnType="com.sap.ExpoPodium.entity.UserVerificationModel" EntitySet="UserVerificationSet"\n\t\t\t\t\tm:HttpMethod="GET"><Parameter Name="Email" Type="Edm.String" Nullable="true"/></FunctionImport><FunctionImport Name="SortPODInitiative" ReturnType="com.sap.ExpoPodium.entity.ODataEntityModel" EntitySet="ODataEntitySet"\n\t\t\t\t\tm:HttpMethod="GET"><Parameter Name="Ids" Type="Edm.String" Nullable="true"/></FunctionImport></EntityContainer></Schema></edmx:DataServices></edmx:Edmx>',
	"com/coil/podway/MDM_Data/localService/mockserver.js":function(){sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/util/UriParameters","sap/base/Log"],function(e,t,r,a){"use strict";var o,i="com/coil/podium/MDM_Data/",n=i+"localService/mockdata";var s={init:function(s){var u=s||{};return new Promise(function(s,c){var p=sap.ui.require.toUrl(i+"manifest.json"),l=new t(p);l.attachRequestCompleted(function(){var t=new r(window.location.href),c=sap.ui.require.toUrl(n),p=l.getProperty("/sap.app/dataSources/mainService"),f=sap.ui.require.toUrl(i+p.settings.localUri),d=/.*\/$/.test(p.uri)?p.uri:p.uri+"/";d=d&&new URI(d).absoluteTo(sap.ui.require.toUrl(i)).toString();if(!o){o=new e({rootUri:d})}else{o.stop()}e.config({autoRespond:true,autoRespondAfter:u.delay||t.get("serverDelay")||500});o.simulate(f,{sMockdataBaseUrl:c,bGenerateMissingMockData:true});var m=o.getRequests();var v=function(e,t,r){r.response=function(r){r.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};if(u.metadataError||t.get("metadataError")){m.forEach(function(e){if(e.path.toString().indexOf("$metadata")>-1){v(500,"metadata Error",e)}})}var g=u.errorType||t.get("errorType"),h=g==="badRequest"?400:500;if(g){m.forEach(function(e){v(h,g,e)})}o.setRequests(m);o.start();a.info("Running the app with mock data");s()});l.attachRequestFailed(function(){var e="Failed to load application manifest";a.error(e);c(new Error(e))})})},getMockServer:function(){return o}};return s});
},
	"com/coil/podway/MDM_Data/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"com.coil.podway.MDM_Data","type":"application","i18n":"i18n/i18n.properties","title":"{{appTitle}}","description":"{{appDescription}}","applicationVersion":{"version":"1.0.0"},"resources":"resources.json","dataSources":{"mainService":{"uri":"EXPO_PODWAY_API/api/v2/odata.svc/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}}},"sourceTemplate":{"id":"sap.ui.ui5-template-plugin.1worklist","version":"1.78.1"}},"sap.ui":{"technology":"UI5","icons":{"icon":"sap-icon://task","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"com.coil.podway.MDM_Data.view.App","type":"XML","async":true,"id":"app"},"dependencies":{"minUI5Version":"1.66.0","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{},"sap.ushell":{},"sap.collaboration":{"lazy":true}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.coil.podway.MDM_Data.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"useBatch":false,"defaultOperationMode":"Auto","defaultBindingMode":"TwoWay","defaultCountMode":"None","defaultUpdateMethod":"Put"}}},"services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService","lazy":false,"settings":{"setTitle":"auto"}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"com.coil.podway.MDM_Data.view","controlId":"app","controlAggregation":"pages","bypassed":{"target":["notFound"]},"async":true},"routes":[{"pattern":"","name":"worklist","target":["worklist"]},{"pattern":"MasterServiceTypeSet/{objectId}","name":"object","target":["object"]},{"name":"createObject","pattern":"MasterServiceTypeSet","titleTarget":"","greedy":false,"target":["object"]}],"targets":{"worklist":{"viewName":"Worklist","viewId":"worklist","viewLevel":1,"title":"{i18n>worklistViewTitle}"},"object":{"viewName":"Object","viewId":"object","viewLevel":2,"title":"{i18n>objectViewTitle}"},"objectNotFound":{"viewName":"ObjectNotFound","viewId":"objectNotFound"},"notFound":{"viewName":"NotFound","viewId":"notFound"}}},"flexEnabled":true,"resources":{"css":[{"uri":"css/style.css"},{"uri":"css/mapsjs-ui.css","id":""}]}},"sap.platform.hcp":{"uri":"webapp","_version":"1.1.0"}}',
	"com/coil/podway/MDM_Data/model/formatter.js":function(){sap.ui.define([],function(){"use strict";return{numberUnit:function(e){if(!e){return""}return parseFloat(e).toFixed(2)},giveOnlyBoolean:function(e){return!!e},giveImage:function(e,n){if(e&&e.media_src&&!n){var r=new URL(e.media_src).pathname;return"/EXPO_PODWAY_API".concat(r)}if(n)return URL.createObjectURL(n.Image)}}});
},
	"com/coil/podway/MDM_Data/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device","sap/base/util/ObjectPath"],function(e,n,t){"use strict";return{createDeviceModel:function(){var t=new e(n);t.setDefaultBindingMode("OneWay");return t},createFLPModel:function(){var n=t.get("sap.ushell.Container.getUser"),a=n?n().isJamActive():false,i=new e({isShareInJamActive:a});i.setDefaultBindingMode("OneWay");return i}}});
},
	"com/coil/podway/MDM_Data/view/App.view.xml":'<mvc:View\n\tcontrollerName="com.coil.podway.MDM_Data.controller.App"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"><App\n\t\tid="app"\n\t\tbusy="{appView>/busy}"\n\t\tbusyIndicatorDelay="{appView>/delay}"/></mvc:View>',
	"com/coil/podway/MDM_Data/view/NotFound.view.xml":'<mvc:View\n\tcontrollerName="com.coil.podway.MDM_Data.controller.NotFound"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"><MessagePage\n\t\ttitle="{i18n>notFoundTitle}"\n\t\ttext="{i18n>notFoundText}"\n\t\ticon="sap-icon://document"\n\t\tid="page"\n\t\tdescription=""><customDescription><Link id="link" text="{i18n>backToWorklist}" press=".onLinkPressed"/></customDescription></MessagePage></mvc:View>',
	"com/coil/podway/MDM_Data/view/Object.view.xml":'<mvc:View controllerName="com.coil.podway.MDM_Data.controller.Object" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"\n\txmlns:u="sap.ui.unified" xmlns:uxap="sap.uxap" xmlns:l="sap.ui.layout"><uxap:ObjectPageLayout id="ObjectPageLayout" showAnchorBar="true" showFooter="true" subSectionLayout="TitleOnLeft"\n\t\tbinding="{objectView>/oDetails}" busy="{objectView>/busy}" busyIndicatorDelay="0" class="sapUiResponsiveContentPadding"><uxap:headerTitle><uxap:ObjectPageHeader objectTitle="{= ${objectView>/sMode} === \'C\' ? ${i18n>TtlAddService} : ${i18n>TtlEditService} }"/></uxap:headerTitle><uxap:sections><uxap:ObjectPageSection title="{i18n>objectViewTitle}"><uxap:subSections><uxap:ObjectPageSubSection><l:Grid width="100%" defaultSpan="XL6 L6 M6 S12"><VBox><Label required="true" text="{i18n>colServiceType}"/><Input value="{objectView>ServiceType}" required="true"/></VBox><VBox><Label required="true" text="{i18n>colServiceMessage}"/><TextArea width="100%" value="{objectView>ServiceMessage}" rows="4" maxLength="250" showExceededText="true"/></VBox><VBox visible="{= ${objectView>/loggedInLanguage} !== ${objectView>/languageAr} }"><Label text="{i18n>colContactNumber}"/><Input id="mobileInputServiceEn" value="{objectView>ContactNumber}" type="Tel" change="onMobileValidate"/></VBox><VBox visible="{= ${objectView>/loggedInLanguage} === ${objectView>/languageAr} }"><Label text="{i18n>colContactNumber}"/><Input id="mobileInputServiceAr" value="{objectView>ContactNumber}" type="Tel" change="onMobileValidate" textDirection="LTR" textAlign="Right"/></VBox><VBox><Label text="{i18n>colIsCancelable}"/><Switch state="{objectView>IsCancelable}" customTextOn="Yes" customTextOff="No"><layoutData><FlexItemData growFactor="1"/></layoutData></Switch></VBox><VBox><Label required="true" text="{i18n>colIncidentTypeId}"/><Select selectedKey="{ path: \'objectView>IncidentTypeId\', type : \'sap.ui.model.odata.type.Int32\' }" items="{/MasterIncidentTypeSet}"><core:Item key="{Id}" text="{IncidentType}"/></Select></VBox><VBox><Label text="{i18n>colNavigationId}"/><ComboBox selectedKey="{ path: \'objectView>NavigationId\', type : \'sap.ui.model.odata.type.Int32\' }"\n\t\t\t\t\t\t\t\t\titems="{path : \'/MasterNavigationTypeSet\'}"><core:Item key="{Id}" text="{NavigationTypeName}"/></ComboBox></VBox><VBox><Label text="{i18n>colIcon}"/><Image width="5rem" class="sapUiTinyMargin" height="5rem"\n\t\t\t\t\t\t\t\t\tsrc="{ parts : [{path : \'objectView>__metadata\'}, { path : \'objectView>/oImage\' } ] , formatter : \'.formatter.giveImage\' }"/><u:FileUploader maximumFileSize="2" fileAllowed="onUpload" tooltip="{i18n>btnChangeImage}" buttonOnly="true"\n\t\t\t\t\t\t\t\t\tbuttonText="{i18n>btnChangeImage}"/></VBox></l:Grid></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection><uxap:ObjectPageSection title="{i18n>childs}" visible="{= ${objectView>/sMode} === \'E\'}"><uxap:subSections><uxap:ObjectPageSubSection><Table id="table" width="auto" headerText="{i18n>colChilds}" growing="true"><headerToolbar><Toolbar><ToolbarSpacer/><Button press="addChild" text="{i18n>btnAdd}"/></Toolbar></headerToolbar><columns><Column width="5%"><Text text=""/></Column><Column width="16%"><Text text="{i18n>colServiceType}"/></Column><Column width="31%"><Text text="{i18n>colServiceMessage}"/></Column><Column width="12%"><Text text="{i18n>colContactNumber}"/></Column><Column width="9%"><Text text="{i18n>colIsCancelable}"/></Column><Column width="9%"><Text text="{i18n>colIncidentTypeId}"/></Column><Column width="9%"><Text text="{i18n>colNavigationId}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns></Table></uxap:ObjectPageSubSection></uxap:subSections></uxap:ObjectPageSection></uxap:sections><uxap:footer><Toolbar><ToolbarSpacer/><Button text="{i18n>btnCancel}" press="onCancel"/><Button text="{i18n>btnSave}" type="Emphasized" press="onSave"/></Toolbar></uxap:footer></uxap:ObjectPageLayout></mvc:View>',
	"com/coil/podway/MDM_Data/view/ObjectNotFound.view.xml":'<mvc:View\n\tcontrollerName="com.coil.podway.MDM_Data.controller.NotFound"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"><MessagePage\n\t\ttitle="{i18n>objectTitle}"\n\t\ttext="{i18n>noObjectFoundText}"\n\t\ticon="sap-icon://product"\n\t\tdescription=""\n\t\tid="page"><customDescription><Link id="link" text="{i18n>backToWorklist}" press=".onLinkPressed" /></customDescription></MessagePage></mvc:View>',
	"com/coil/podway/MDM_Data/view/Worklist.view.xml":'<mvc:View controllerName="com.coil.podway.MDM_Data.controller.Worklist" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"\n\txmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar"><f:DynamicPage id="page"><f:title><f:DynamicPageTitle><f:heading><Title text="{i18n>worklistTitle}"/></f:heading></f:DynamicPageTitle></f:title><f:content><IconTabBar id="idIconTabBar3" expanded="{device>/isNoPhone}" class="sapUiResponsiveContentPadding mdm-data-tab"><items><IconTabFilter text="{worklistView>/masterEventAttraction}" key="Event"><Table id="table4" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterEventAttractionTypeSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ], sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished4"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="15%"><Text text="{i18n>colEventAttractionType}"/></Column><Column width="43%"><Text text="{i18n>colDescription}"/></Column><Column width="7%"><Text text="{i18n>colBuilding}"/></Column><Column width="7%"><Text text="{i18n>colCategory}"/></Column><Column width="6%"><Text text="{i18n>colTheme}"/></Column><Column width="10%"><Text text="{i18n>colImage}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{EventAttractionType}"/><Text text="{Description}"/><CheckBox selected="{IsBuilding}" editable="false"/><CheckBox selected="{IsCategory}" editable="false"/><CheckBox selected="{IsTheme}" editable="false"/><Button text="{i18n>LnkViewImage}" press=".onViewImage($event, \'I\')"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/masterFacility}" key="Facility"><Table id="table1" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterFacilityTypeSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ], sorter: { path: \'Id\', descending: false }}"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished1"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="88%"><Text text="{i18n>colFacilityType}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{FacilityType}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/masterNavigation}" key="Navigation"><Table id="table5" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterNavigationTypeSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished5"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="5%"><Text text=""/></Column><Column width="15%"><Text text="{i18n>colNavigationGroupId}"/></Column><Column width="65%"><Text text="{i18n>colNavigationTypeName}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="10%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Image width="2rem" class="sapUiTinyMargin" height="2rem" src="{ path : \'__metadata\' , formatter : \'.formatter.giveImage\' }"/><Text text="{= ${NavigationGroupId} === 0 ? \'Event Attraction\' : \'Facility\' }"/><Text text="{NavigationTypeName}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/masterService}" key="Service"><Table id="table" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterServiceTypeSet\', parameters : { expand : \'Navigation,IncidentType\' }, filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false }, { path : \'IsChild\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="5%"><Text text=""/></Column><Column width="15%"><Text text="{i18n>colServiceType}"/></Column><Column width="31%"><Text text="{i18n>colServiceMessage}"/></Column><Column width="11%"><Text text="{i18n>colContactNumber}"/></Column><Column width="8%"><Text text="{i18n>colIsCancelable}"/></Column><Column width="9%"><Text text="{i18n>colIncidentTypeId}"/></Column><Column width="9%"><Text text="{i18n>colNavigationId}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Image width="2rem" class="sapUiTinyMargin" height="2rem" src="{ path : \'__metadata\' , formatter : \'.formatter.giveImage\' }"/><Text text="{ServiceType}"/><Text text="{ServiceMessage}"/><Text text="{ContactNumber}" textDirection="LTR"/><CheckBox selected="{IsCancelable}" editable="false"/><ObjectStatus text="{IncidentType/IncidentType}" state="{= ${IncidentType/IncidentType} === \'Emergency\' ? \'Error\' : \'Success\' }"/><Text text="{Navigation/NavigationTypeName}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/masterFaqCategory}" key="FAQ"><Table id="table3" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterFaqCategorySet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished3"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="5%"><Text text=""/></Column><Column width="83%"><Text text="{i18n>colFaqCategory}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Image width="2rem" class="sapUiTinyMargin" height="2rem" src="{ path : \'__metadata\' , formatter : \'.formatter.giveImage\' }"/><Text text="{FaqCategory}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/building}" key="Building"><Table id="table6" width="auto" items="{ path: \'/BuildingSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished6"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="58%"><Text text="{i18n>colBuildingName}"/></Column><Column width="15%"><Text text="{i18n>colLatitude}"/></Column><Column width="15%"><Text text="{i18n>colLongitude}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{BuildingName}"/><Text text="{Latitude}" textDirection="LTR"/><Text text="{Longitude}" textDirection="LTR"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/theme}" key="Theme"><Table id="table7" width="auto" items="{ path: \'/ThemeSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished7"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="88%"><Text text="{i18n>colTheme}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{Theme}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/category}" key="Category"><Table id="table8" width="auto" items="{ path: \'/CategorySet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished8"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="88%"><Text text="{i18n>colCategory}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{Category}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/speciality}" key="Speciality"><Table id="table9" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterSpecialitySet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished9"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="88%"><Text text="{i18n>colSpeciality}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{Speciality}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter><IconTabFilter text="{worklistView>/masterRelationship}" key="Relationship"><Table id="table2" width="auto"\n\t\t\t\t\t\t\titems="{ path: \'/MasterRelationshipSet\', filters : [ { path : \'IsArchived\' , operator : \'EQ\' , value1 : false } ],sorter: { path: \'Id\', descending: false } }"\n\t\t\t\t\t\t\tnoDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"\n\t\t\t\t\t\t\tupdateFinished=".onUpdateFinished2"><headerToolbar><OverflowToolbar><ToolbarSpacer/><Button text="{i18n>btnRefresh}" icon="sap-icon://refresh" press="onRefreshView"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button><Button text="{i18n>btnAddMDM}" icon="sap-icon://add" press="onAdd"><layoutData><OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></headerToolbar><columns><Column width="88%"><Text text="{i18n>colRelationship}"/></Column><Column width="5%"><Text text="{i18n>colEdit}"/></Column><Column width="7%"><Text text="{i18n>colRemove}"/></Column></columns><items><ColumnListItem><cells><Text text="{Relationship}"/><Button icon="sap-icon://edit" press="onEdit" type="Transparent"/><Button icon="sap-icon://delete" press="onDelete" type="Transparent" tooltip="remove"/></cells></ColumnListItem></items></Table></IconTabFilter></items></IconTabBar></f:content></f:DynamicPage></mvc:View>'
}});
