<mvc:View controllerName="Assignment_List.Assignment_List.controller.Worklist" xmlns:core="sap.ui.core" xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc" xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar">
	<f:DynamicPage id="page">
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="{i18n>worklistTitle}"/>
				</f:heading>
			</f:DynamicPageTitle>
		</f:title>
		<f:header>
			<f:DynamicPageHeader pinnable="true">
				<f:content>
					<fb:FilterBar id="filterbar" reset="onReset" search="onSearch" useToolbar="false" basicSearch="sfld" showGoOnFB="true">
						<fb:filterGroupItems>
							<!--<fb:FilterGroupItem visibleInFilterBar="true" groupName="A" name="PODVisitor/PODVisitorId" groupTitle="Filters" label="{i18n>colPodCategory}">-->
							<!--	<fb:control>-->
							<!--		<ComboBox items="{ path: '/AccessibilityItemSet', -->
							<!--		          filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false },-->
							<!--		                      { path : 'AccessibilityId' , operator : 'EQ' , value1 : 2 } ] }">-->
							<!--			<core:Item key="{Id}" text="{Title}"/>-->
							<!--		</ComboBox>-->
							<!--	</fb:control>-->
							<!--</fb:FilterGroupItem>-->
							<fb:FilterGroupItem visibleInFilterBar="true" groupName="A" name="ServiceType/IncidentTypeId" groupTitle="Filters"
								label="{i18n>colIncidentType}">
								<fb:control>
									<ComboBox items="{ path: '/MasterIncidentTypeSet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }">
										<core:Item key="{Id}" text="{IncidentType}"/>
									</ComboBox>
								</fb:control>
							</fb:FilterGroupItem>
						</fb:filterGroupItems>
					</fb:FilterBar>
				</f:content>
			</f:DynamicPageHeader>
		</f:header>
		<f:content>
			<IconTabBar id="idIconTabBar3" expanded="{device>/isNoPhone}" class="sapUiResponsiveContentPadding">
				<items>
					<IconTabFilter text="{worklistView>/pending}">
						<Table id="table" width="auto"
							items="{ path: '/AssignmentSet', parameters : { expand : 'PODVisitor,Assignee,AssignmentStatus,ServiceType/IncidentType,PODConditions' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'AssignmentStatusId' , operator : 'EQ' , value1 : 1 }] }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"
							updateFinished=".onUpdateFinished">
							<columns>
								<Column width="13%">
									<Text text="{i18n>colAssignment}"/>
								</Column>
								<Column width="11%">
									<Text text="{i18n>colPodName}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colPodCategory}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colIncidentType}"/>
								</Column>
								<Column width="13%">
									<Text text="{i18n>colAssignTeamManager}"/>
								</Column>
								<Column width="19%">
									<Text text="{i18n>colStatus}"/>
								</Column>
								<Column width="7%">
									<Text text="{i18n>colNavigate}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colMessage}"/>
								</Column>
								<Column width="7%">
									<Text text="{i18n>colComment}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Text text="{ServiceType/ServiceType}"/>
										<Text text="{PODVisitor/FirstName} {PODVisitor/LastName}"/>
										<Button text="{= ${PODConditions}.length }" press="onPodCategory"/>
										<ObjectStatus text="{ServiceType/IncidentType/IncidentType}"
											state="{= ${ServiceType/IncidentType/IncidentType} === 'Emergency' ? 'Error' : 'Success' }"/>
										<Text text="{Assignee/FirstName} {Assignee/LastName}"/>
										<!--If loggedIn user is a Team Manager, button text will be Start Assignment otherwise Assign Now-->
										<HBox>
											<!--<Button text="{i18n>btnReassign}" press="onAssignNow" visible="{= ${worklistView>/loggedUserRoleId} === 1 && ${AssigneeId} !== null}"-->
											<!--	class="sapUiSmallMarginEnd"/>-->
											<Button text="{i18n>btnAssignNow}" visible="{= ${worklistView>/loggedUserRoleId} === 1 &amp;&amp; ${AssigneeId} === null}" press="onAssignNow"/>
											<Button text="{i18n>btnReassign}" visible="{= (${worklistView>/loggedUserRoleId} === 1 || ${worklistView>/loggedUserRoleId} === 2) &amp;&amp; ${AssigneeId} !== null}" press="onAssignNow" class="sapUiSmallMarginEnd"/>
											<Button text="{i18n>btnStartAssignment}" visible="{= ${worklistView>/loggedUserRoleId} === 2}" press="onStartAssignment"/>
										</HBox>
										<Button icon="sap-icon://locate-me"
											enabled="{= ${PODVisitor} !== null &amp;&amp; parseInt(${PODVisitor/Latitude}) > 0 &amp;&amp; parseInt(${PODVisitor/Longitude}) > 0 }"
											press="onNavigate" type="Transparent"/>
										<Button icon="sap-icon://message-popup" press="onMessage" type="Transparent"/>
										<Button icon="sap-icon://comment" press="onComment" type="Transparent"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
					<IconTabFilter text="{worklistView>/inprogress}">
						<Table id="table1" width="auto"
							items="{ path: '/AssignmentSet', parameters : { expand : 'PODVisitor,Assignee,AssignmentStatus,ServiceType/IncidentType,PODConditions' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'AssignmentStatusId' , operator : 'EQ' , value1 : 2 } ] }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"
							updateFinished=".onUpdateFinished1">
							<columns>
								<Column width="20%">
									<Text text="{i18n>colAssignment}"/>
								</Column>
								<Column width="17%">
									<Text text="{i18n>colPodName}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colPodCategory}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colIncidentType}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colStatus}"/>
								</Column>
								<Column width="8%">
									<Text text="{i18n>colNavigate}"/>
								</Column>
								<Column width="12%">
									<Text text="{i18n>colMessage}"/>
								</Column>
								<Column width="8%">
									<Text text="{i18n>colComment}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Text text="{ServiceType/ServiceType}"/>
										<Text text="{PODVisitor/FirstName} {PODVisitor/LastName}"/>
										<Button text="{= ${PODConditions}.length }" press="onPodCategory"/>
										<ObjectStatus text="{ServiceType/IncidentType/IncidentType}"
											state="{= ${ServiceType/IncidentType/IncidentType} === 'Emergency' ? 'Error' : 'Success' }"/>
										<HBox>
											<!--<Button text="{i18n>btnReassign}" press="onAssignNow" visible="{= ${worklistView>/loggedUserRoleId} === 1 }" class="sapUiSmallMarginEnd"/>-->
											<Button text="{i18n>btnMarkAsComplete}" press="onMarkasComplete"/>
										</HBox>
										<Button icon="sap-icon://locate-me"
											enabled="{= ${PODVisitor} !== null &amp;&amp; parseInt(${PODVisitor/Latitude}) > 0 &amp;&amp; parseInt(${PODVisitor/Longitude}) > 0 }"
											press="onNavigate" type="Transparent"/>
										<Button icon="sap-icon://message-popup" press="onMessage" type="Transparent"/>
										<Button icon="sap-icon://comment" press="onComment" type="Transparent"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
					<IconTabFilter text="{worklistView>/completed}">
						<Table id="table2" width="auto"
							items="{ path: '/AssignmentSet', parameters : { expand : 'PODVisitor,Assignee,AssignmentStatus,ServiceType/IncidentType,PODConditions' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'AssignmentStatusId' , operator : 'EQ' , value1 : 3 } ] }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"
							updateFinished=".onUpdateFinished2">
							<columns>
								<Column width="20%">
									<Text text="{i18n>colAssignment}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colPodName}"/>
								</Column>
								<Column width="12%">
									<Text text="{i18n>colPodCategory}"/>
								</Column>
								<Column width="12%">
									<Text text="{i18n>colIncidentType}"/>
								</Column>
								<Column width="11%">
									<Text text="{i18n>colStatus}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colNavigate}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colMessage}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colComment}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Text text="{ServiceType/ServiceType}"/>
										<Text text="{PODVisitor/FirstName} {PODVisitor/LastName}"/>
										<Button text="{= ${PODConditions}.length }" press="onPodCategory"/>
										<ObjectStatus text="{ServiceType/IncidentType/IncidentType}"
											state="{= ${ServiceType/IncidentType/IncidentType} === 'Emergency' ? 'Error' : 'Success' }"/>
										<ObjectStatus text="{i18n>colCompleted}" state="Success"/>
										<Button icon="sap-icon://locate-me"
											enabled="{= ${PODVisitor} !== null &amp;&amp; parseInt(${PODVisitor/Latitude}) > 0 &amp;&amp; parseInt(${PODVisitor/Longitude}) > 0 }"
											press="onNavigate" type="Transparent"/>
										<Button icon="sap-icon://message-popup" press="onMessage" type="Transparent"/>
										<Button icon="sap-icon://comment" press="onComment" type="Transparent"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
					<IconTabFilter text="{worklistView>/cancelled}">
						<Table id="table3" width="auto"
							items="{ path: '/AssignmentSet', parameters : { expand : 'PODVisitor,Assignee,AssignmentStatus,ServiceType/IncidentType,PODConditions' }, filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false }, { path : 'AssignmentStatusId' , operator : 'EQ' , value1 : 4 } ] }"
							noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"
							updateFinished=".onUpdateFinished3">
							<columns>
								<Column width="20%">
									<Text text="{i18n>colAssignment}"/>
								</Column>
								<Column width="15%">
									<Text text="{i18n>colPodName}"/>
								</Column>
								<Column width="12%">
									<Text text="{i18n>colPodCategory}"/>
								</Column>
								<Column width="12%">
									<Text text="{i18n>colIncidentType}"/>
								</Column>
								<Column width="11%">
									<Text text="{i18n>colStatus}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colNavigate}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colMessage}"/>
								</Column>
								<Column width="10%">
									<Text text="{i18n>colComment}"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Text text="{ServiceType/ServiceType}"/>
										<Text text="{PODVisitor/FirstName} {PODVisitor/LastName}"/>
										<!--<Button text="{PODConditions/$count}"/>-->
										<Button text="{= ${PODConditions}.length }" press="onPodCategory"/>
										<ObjectStatus text="{ServiceType/IncidentType/IncidentType}"
											state="{= ${ServiceType/IncidentType/IncidentType} === 'Emergency' ? 'Error' : 'Success' }"/>
										<ObjectStatus text="{i18n>colCancelled}" state="Error"/>
										<Button icon="sap-icon://locate-me"
											enabled="{= ${PODVisitor} !== null &amp;&amp; parseInt(${PODVisitor/Latitude}) > 0 &amp;&amp; parseInt(${PODVisitor/Longitude}) > 0 }"
											press="onNavigate" type="Transparent"/>
										<Button icon="sap-icon://message-popup" press="onMessage" type="Transparent"/>
										<Button icon="sap-icon://comment" press="onComment" type="Transparent"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</IconTabFilter>
				</items>
			</IconTabBar>
		</f:content>
	</f:DynamicPage>
</mvc:View>