
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.21.3/HERE_NOTICE
 */

H.util.eval("hg.prototype.Tc=ca(1,function(a,b){this.a.Tc(a,Cc(b)?b:this.c)});lg.prototype.Tc=ca(0,function(a,b){var c=0,d;if(!a(this)&&b--)for(;3>=c;c++)(d=this[c])&&d.Tc(a,b)});function jt(a,b,c){this.f=this.c=c;this.oi=[];this.a=0;this.R=dg(a,b,!0)}t(\"H.clustering.grid.Cluster\",jt);jt.prototype.ue=function(a){this.b||(this.b=Zf(a));this.a+=a.wt||1;this.oi.push(a)};jt.prototype.Ba=function(){return this.b};jt.prototype.getPosition=jt.prototype.Ba;jt.prototype.Dc=function(){return this.a};jt.prototype.getWeight=jt.prototype.Dc;jt.prototype.ud=df;jt.prototype.isCluster=jt.prototype.ud;jt.prototype.zc=function(){return this.c};jt.prototype.getMinZoom=jt.prototype.zc;\njt.prototype.Uf=function(){return this.f};jt.prototype.getMaxZoom=jt.prototype.Uf;jt.prototype.F=function(){return this.R};jt.prototype.getBoundingBox=jt.prototype.F;jt.prototype.kh=function(a){this.Ge(a)};jt.prototype.forEachEntry=jt.prototype.kh;jt.prototype.Ge=function(a){var b=this;if(!Ca(a))throw new D(this.Ge,0,a);this.oi.forEach(function(c){a(new kt(c,b.c+1))})};jt.prototype.forEachDataPoint=jt.prototype.Ge;function lt(a){nd.call(this);this.a=[];var b;a?Wa(b={},mt,a):b=mt;this.g=b;nd.call(this)}u(lt,nd);var nt={clusters:[],noisePoints:[]},mt={projection:Wi,min:0,max:22,eps:32,minWeight:2};n=lt.prototype;n.Nc=function(a){this.a=a;this.b=!0};n.Ib=function(a){this.a.push(a);this.b=!0};n.zf=function(a){this.a=this.a.concat(a);this.b=!0};n.df=function(a){this.a=this.a.filter(function(b){return b!==a});this.b=!0};n.u=function(){lt.l.u.call(this);this.a=null};n.Wk=id;function kt(a,b){this.a=a;this.b=b}t(\"H.clustering.grid.NoisePoint\",kt);kt.prototype.Ba=function(){return Zf(this.a)};kt.prototype.getPosition=kt.prototype.Ba;kt.prototype.Dc=function(){return this.a.wt};kt.prototype.getWeight=kt.prototype.Dc;kt.prototype.ud=ef;kt.prototype.isCluster=kt.prototype.ud;kt.prototype.zc=function(){return this.b};kt.prototype.getMinZoom=kt.prototype.zc;kt.prototype.getData=function(){return this.a.data};kt.prototype.getData=kt.prototype.getData;function ot(a){lt.call(this,a)}u(ot,lt);\not.prototype.Oi=function(a){var b=this.g,c=b.min,d=b.max,e=[],f=[],g;if(this.b){for(g=this.a;c<=d;c++){for(var h,k=void 0,l,m,q,p,r,v,w,z=c,J=g,G=e,V=f,T=b.eps,ua=b.projection,ea=b.minWeight,ac=J.length,sb=Math.pow(2,z+8),ad=[];w=J[--ac];)if(!w.Xi){m=ua.Nb(w).scale(sb).floor();v=sb;r=m.x;p=m.y;for(l=ad.length;l--;)h=ad[l],q=h.Ba(),h.Wi||(h.Wi=ua.Nb(q).scale(sb).floor()),q=h.Wi,q=q.Ya(m),q<v&&(v=q,k=h);k&&k.F().Ld(w)||(k=new jt(ua.og({x:(r-T)/sb,y:(p-T)/sb}),ua.og({x:(r+T)/sb,y:(p+T)/sb}),z),ad.push(k));\nk.ue(w);k=null}for(ac=ad.length;ac--;)if(h=ad[ac],l=h.Dc(),l<ea)for(h=h.oi,l=h.length;w=h[--l];)V.push(new kt(w,z)),w.Xi=!0;else G.push(h)}c=0;for(d=g.length;c<d;c++)delete g[c].Xi;this.b=!1;a({clusters:e,noisePoints:f})}};function pt(a){this.a=a;a=document.createElement(\"canvas\");var b=a.getContext(\"2d\"),c=this.a,d=14*c;a.width=d;a.height=d;b.scale(c,c);b.beginPath();b.strokeStyle=\"#FFFFFF\";b.fillStyle=\"#1080DD\";b.arc(7,7,6,0,2*Math.PI,!1);b.fill();b.lineWidth=1;b.stroke();this.f=new Hj(a,{size:{w:14,h:14},anchor:{x:7,y:7}});this.b={};this.c={}}t(\"H.clustering.theme.Circular\",pt);\nfunction qt(a,b,c){var d,e=document.createElement(\"canvas\"),f=e.getContext(\"2d\");var g=a.a;var h=b*g;e.width=h;e.height=h;f.scale(g,g);g=b+\":\"+c;(d=a.b[g])?f.putImageData(d,0,0):(b/=2,f.beginPath(),f.strokeStyle=\"rgba(\"+c+\",0.2)\",f.fillStyle=\"rgba(\"+c+\",1)\",f.arc(b,b,b/5*3,0,2*Math.PI,!1),f.fill(),f.lineWidth=b/5*4,f.stroke(),a.b[g]=f.getImageData(0,0,h,h));return e}\npt.prototype.lm=function(a){var b=a.Dc();var c=this.c[b];if(!c){if(10>b){c=qt(this,28,\"118,209,0\");var d={x:11,y:18}}else 25>b?(c=qt(this,38,\"255,105,0\"),d={x:13,y:23}):50>b?(c=qt(this,38,\"240,60,0\"),d={x:13,y:23}):100>b?(c=qt(this,38,\"181,0,21\"),d={x:13,y:23}):1E3>b?(c=qt(this,48,\"181,0,21\"),d={x:15,y:28}):(c=qt(this,66,\"181,0,21\"),d={x:20,y:38});var e=c.getContext(\"2d\");e.fillStyle=\"#FFFFFF\";e.font=\"bold 11px Arial\";e.fillText(b,d.x,d.y);d=c.width/this.a;c=new Hj(c,{size:{w:d,h:d},anchor:{x:d/2,\ny:d/2}});this.c[b]=c}b=new mn(a.Ba(),{icon:c,min:a.zc(),max:a.Uf()});b.setData(a);return b};pt.prototype.getClusterPresentation=pt.prototype.lm;pt.prototype.Tm=function(a){var b=new mn(a.Ba(),{icon:this.f,min:a.zc()});b.setData(a);return b};pt.prototype.getNoisePresentation=pt.prototype.Tm;function rt(a){lt.call(this,a);a=this.g;if(a.projection!==Wi)throw new D(rt,0,\"Other projection than mercator not supported yet\");this.m=a.projection;this.f=a.eps;this.v=a.minWeight;this.o=new Xi(this.m);(new Mf).a(\"cluster\",\"H.clustering.dynamicgrid.worker\");this.i=A(this.i,this);this.j=A(this.j,this)}u(rt,lt);rt.prototype.Wk=function(a,b){this.aa=a;this.s=yd(b)};\nrt.prototype.Oi=function(a,b){var c=this.c;var d=this.aa,e=this.s||0;var f=!c||!(c.zoom===e&&c.b.na(d));if(d&&(this.b||f)){c&&3>c.fe&&c.cancel();this.b=!1;c=this.f;if(c>=128*Dd(2,e))var g=st;else{f=this.o;f.Fa(e);var h=f.kb(d.Rb());g=f.kb(d.Ob());h.y-=c;g.y+=c;h=f.Ze(h);var k=f.Ze(g);g=new K(h.lat,h.lng,k.lat,k.lng);c=f.Pa(c,0).lng+180;g=g.Hc(h.lat,h.lng-c,k.lat,h.lng).Hc(h.lat,k.lng,k.lat,k.lng+c)}c=g;h=this.a;g=[];for(f=h.length;f--;)c.Ld(h[f])&&g.push(h[f]);0<g.length?(this.c=new tt(d,e,g,this.f,\nthis.v,this.m!==Wi,a,b),this.c.then(this.i,this.j)):a(nt)}};rt.prototype.i=function(a){Ba(a)||(a=new x.Uint32Array(a));this.c.g(ut(this,a))};rt.prototype.j=function(a){zc(a)&&this.c.f(a)};var st=new K(90,-180,-90,180);\nfunction ut(a,b){for(var c=0,d=b[c++],e=Array(d),f=0,g=[],h=b.length,k=a.c.a,l=a.c.zoom;d--;)e[f++]=new kt(k[b[c++]],l);for(;c<h;){d=b[c++];f=k[b[c]];var m=a.o;var q=a.f;m.Fa(a.c.zoom);var p=m.kb(f);f=m.Pa(p.x-q,p.y-q);m=m.Pa(p.x+q,p.y+q);f=new K(f.lat,f.lng,m.lat,m.lng);for(f=new jt(f.Rb(),f.Ob(),l);d--;)f.ue(k[b[c++]]);g.push(f)}return{clusters:g,noisePoints:e}}rt.prototype.u=function(){rt.l.u.call(this)};\nfunction tt(a,b,c,d,e,f,g,h){this.b=a;this.zoom=b;this.a=c;this.g=g;this.f=h;a=c.length;g=3*a;h=new (x.Float64Array||Array)(g);for(var k;a--;)k=c[a],h[--g]=k.lat,h[--g]=k.lng,h[--g]=k.wt;ee.call(this,\"cluster\",{message:[h,d,e,b,f]},void 0)}u(tt,Qf);function vt(a,b,c){this.c=a;this.a=b;this.f=c}t(\"H.clustering.fastgrid.NoisePoint\",vt);vt.prototype.Ba=function(){this.b||(this.b=this.c.Pa(this.a[1],this.a[0],1));return this.b};vt.prototype.getPosition=vt.prototype.Ba;vt.prototype.Dc=function(){return this.a.a};vt.prototype.getWeight=vt.prototype.Dc;vt.prototype.ud=ef;vt.prototype.isCluster=vt.prototype.ud;vt.prototype.zc=function(){return this.f-this.c.c};vt.prototype.getMinZoom=vt.prototype.zc;vt.prototype.getData=function(){return this.a.data};\nvt.prototype.getData=vt.prototype.getData;function wt(a,b,c,d){this.c=a;this.a=b;this.j=c;this.o=d;this.g=Ia(this.g,this);this.f=Ia(this.f,this)}t(\"H.clustering.fastgrid.Cluster\",wt);wt.prototype.Ba=function(){this.b||(this.b=this.c.Pa(this.a.xe,this.a.ye,this.a.Kb));return this.b};wt.prototype.getPosition=wt.prototype.Ba;wt.prototype.Dc=function(){return this.a.Kb};wt.prototype.getWeight=wt.prototype.Dc;wt.prototype.ud=df;wt.prototype.isCluster=wt.prototype.ud;wt.prototype.zc=function(){return this.j?this.j-this.c.c:-1/0};\nwt.prototype.getMinZoom=wt.prototype.zc;wt.prototype.Uf=function(){return this.o-this.c.c};wt.prototype.getMaxZoom=wt.prototype.Uf;wt.prototype.F=function(){this.R||(this.R=dg(this.c.Pa(this.a.a,this.a.f,1),this.c.Pa(this.a.b,this.a.c,1),!0));return this.R};wt.prototype.getBoundingBox=wt.prototype.F;wt.prototype.kh=function(a){this.i=a;this.a.Tc(this.g,Td)};wt.prototype.forEachEntry=wt.prototype.kh;\nwt.prototype.g=function(a,b){var c=!1,d,e;a.Kb>=this.c.m&&a!==this.a&&a.Kb!==this.a.Kb&&(this.i(new wt(this.c,a,0,b)),c=!0);if(!c&&(d=a.entries))for(a=d.length,e=0;e<a;e++)this.i(new vt(this.c,d[e],b));return c};wt.prototype.Ge=function(a){this.m=a;this.a.Tc(this.f,Td)};wt.prototype.forEachDataPoint=wt.prototype.Ge;wt.prototype.f=function(a,b){var c;if(a=a.entries){var d=a.length;for(c=0;c<d;c++)this.m(new vt(this.c,a[c],b))}return!1};function xt(a,b,c,d,e,f){this.g=b;a&&(this.parent=a,b&1?(c=a[8],e=a[5]):(c=a[7],e=a[8]),b&2?(d=a[9],f=a[6]):(d=a[4],f=a[9]));this[7]=c;this[5]=e;this[8]=(c+e)/2;this[4]=d;this[6]=f;this[9]=(d+f)/2}n=xt.prototype;n.ee=0;function yt(a,b){return a[b]||(++a.ee,a[b]=new xt(a,b))}n.removeChild=function(a){var b=a.g;this[b]===a&&(delete this[b],delete a.parent,--this.ee)};n.Tc=function(a,b){for(var c=0,d=this;d=d.parent;)++c;zt(this,a,b,c)};\nfunction zt(a,b,c,d){var e,f;if(!b(a,d)&&c--)for(++d,e=0;4>e;e++)(f=a[e])&&zt(f,b,c,d)}n.xe=0;n.ye=0;n.Kb=0;function At(a){this.b=a||10;this.a=null;Bt(this)}function Bt(a){a.head=a.a=new xt(null,NaN,0,0,4294967296,4294967296)}function Ct(a,b){var c,d;for(c=0;4>c;c++)if(d=b[c])Ct(a,d),delete b[c];delete b.parent;delete b.entries}function Dt(a,b){var c=a.head,d;if(b){var e=b;if(e!==c)for(c=e;e=e.parent;)if(e.entries||1<e.ee)c=e}else for(;!c.entries&&2>(d=c.ee);)if(d)c=e;else break;a.head=c}\nAt.prototype.Ec=function(a,b,c,d){var e=this.a;if(!(a>=e[7]&&b>=e[4]&&a<=e[5]&&b<=e[6]))throw Error(\"Coordinates out of bounds\");return Et(this,this.a,a,b,c,this.b,d)};\nfunction Et(a,b,c,d,e,f,g){var h=b.entries;if(f)if(b.ee)h=Et(a,yt(b,c>=b[8]|(d>=b[9])<<1),c,d,e,f-1,g);else if(h){h=h[0];var k=yt(b,h[1]>=b[8]|(h[0]>=b[9])<<1);k.entries=b.entries;k.xe=b.xe;k.ye=b.ye;k.Kb=b.Kb;k.a=b.a;k.f=b.f;k.b=b.b;k.c=b.c;delete b.entries;h.node=k;Dt(a,k);h=Et(a,yt(b,c>=b[8]|(d>=b[9])<<1),c,d,e,f-1,g)}else f=h=new Ft(c,d,e,g),(b.entries||(b.entries=[])).push(f),Dt(a,b);else h||Dt(a,b),a=h=new Ft(c,d,e,g),(b.entries||(b.entries=[])).push(a);b.xe+=c*e;b.ye+=d*e;b.Kb+=e;b.a===B?(b.a=\nb.b=c,b.f=b.c=d):(c<b.a?b.a=c:c>b.b&&(b.b=c),d<b.f?b.f=d:d>b.c&&(b.c=d));return h}At.prototype.Tc=function(a,b){zt(this.a,a,b===+b?b:this.b,0)};function Ft(a,b,c,d){this[0]=b;this[1]=a;this.a=c;this.data=d};function Gt(a){lt.call(this,a);a=this.g;this.j=a.projection;this.o=a.min;this.f=a.max;this.m=a.minWeight;this.c=7-xd(Bd(wd(1,a.eps))/Ld);this.i=new At(wd(this.o,this.f+this.c))}u(Gt,lt);n=Gt.prototype;n.Nc=function(a){var b=0,c=a.length,d,e=new I(0,0),f=this.j,g=this.i;Gt.l.Nc.call(this,a);Ct(g,g.a);for(Bt(g);b<c;b++)f.Nb(d=a[b],e).scale(4294967296).floor(),g.Ec(e.x,e.y,d.wt,d.data);this.b=!0};n.Ib=function(a){Gt.l.Ib.call(this,a);this.Nc(this.a)};\nn.zf=function(a){for(var b=a.length,c=Gt.l.Ib;b--;)c.call(this,a[b]);this.Nc(this.a)};n.df=function(a){Gt.l.df.call(this,a);this.Nc(this.a)};n.Pa=function(a,b,c,d){return this.j.Pa(a/c/4294967296,b/c/4294967296,d)};n.Oi=function(a){if(this.b){var b={clusters:[],noisePoints:[]};Ht(this,this.i.a,0,this.f+this.c,-1/0,b,null);this.b=!1;a(b)}};\nfunction Ht(a,b,c,d,e,f,g){var h=b.Kb,k;g&&(g.node.Kb!==h?(f.clusters.push(new wt(a,g.node,g.depth,c-1)),g=null):e++);g||(h>=a.m?(g={node:b,depth:c},e=c):It(a,b,e+1,f));if(b.ee&&d--)for(c++,h=0;4>h;h++)if(k=b[h])Ht(a,k,c,d,e,f,g),g=null;g&&f.clusters.push(new wt(a,g.node,g.depth,a.f+a.c))}function It(a,b,c,d){b=b.entries;var e;if(b){var f=b.length;d=d.noisePoints;for(e=0;e<f;e++)d.push(new vt(a,b[e],c))}else for(e=0;4>e;e++)(f=a[e])&&It(a,f,c,d)}n.u=function(){Gt.l.u.call(this);this.i=null};function Jt(a,b,c,d){this.lat=a;this.lng=b;this.wt=c===+c?c:1;this.data=d}t(\"H.clustering.DataPoint\",Jt);Jt.prototype.a=NaN;Jt.prototype.b=NaN;function Kt(a,b){b=b||{};var c={},d=b.min||0,e=wd(d,b.max||22);d={min:d,max:e};Kt.l.constructor.call(this,d);this.jb=b.pixelRatio||Se();Wa(c,mt,d,b.clusteringOptions||{});c.minWeight=wd(mt.minWeight,c.minWeight);switch(c.strategy){case Lt.DYNAMICGRID:if(c.projection!==Wi)throw new D(Kt,1,\"Unsupported projection\");this.a=new rt(c);break;case Lt.GRID:this.a=new ot(c);break;default:this.a=new Gt(c)}this.a.Nc(a);this.B=b.theme||new pt(this.jb);this.la=A(this.la,this);this.Xa=A(this.Xa,this);Mt(this)}\nu(Kt,N);t(\"H.clustering.Provider\",Kt);Kt.prototype.u=function(){Kt.l.u.call(this);this.c.ra();this.a.C();this.B=this.K=this.a=null;x.clearTimeout(this.V)};var Lt={FASTGRID:0,GRID:1,DYNAMICGRID:2};Kt.Strategy=Lt;Kt.prototype.la=function(){this.dispatchEvent(\"start\");this.a.Oi(this.Xa,id)};function Mt(a,b,c){a.V&&x.clearTimeout(a.V);b&&a.a.Wk(b,c);a.V=x.setTimeout(a.la,150)}Kt.prototype.Xa=function(a){this.dispatchEvent(\"end\");this.K=a;Nt(this)};Kt.prototype.Nc=function(a){this.a.Nc(a);Mt(this)};\nKt.prototype.setDataPoints=Kt.prototype.Nc;Kt.prototype.Ib=function(a){this.a.Ib(a);Mt(this)};Kt.prototype.addDataPoint=Kt.prototype.Ib;Kt.prototype.zf=function(a){this.a.zf(a);Mt(this)};Kt.prototype.addDataPoints=Kt.prototype.zf;Kt.prototype.df=function(a){this.a.df(a);Mt(this)};Kt.prototype.removeDataPoint=Kt.prototype.df;Kt.prototype.nn=function(){return this.B};Kt.prototype.getTheme=Kt.prototype.nn;Kt.prototype.Do=function(a){this.B=a;this.K&&(this.c.ra(),Nt(this))};Kt.prototype.setTheme=Kt.prototype.Do;\nfunction Nt(a){var b=a.K.clusters,c=a.K.noisePoints,d=b.length,e=c.length,f=0<d+e;for(a.c.ra();d--;){var g=b[d];a.c.ea(a.B.getClusterPresentation(g))}for(;e--;)b=c[e],a.c.ea(a.B.getNoisePresentation(b));f&&Uj(a)}Kt.prototype.Vb=function(){return!0};Kt.prototype.providesDomMarkers=Kt.prototype.Vb;Kt.prototype.Wb=function(){return!0};Kt.prototype.providesMarkers=Kt.prototype.Wb;Kt.prototype.Ic=function(){return!0};Kt.prototype.providesSpatials=Kt.prototype.Ic;\nKt.prototype.pi=function(a,b){Mt(this,a,b)};t(\"H.clustering.buildInfo\",function(){return Ef(\"H-clustering\",\"1.21.3\",\"32f6469\")});\n");